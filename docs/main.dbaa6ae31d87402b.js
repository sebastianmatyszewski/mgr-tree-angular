"use strict";(self.webpackChunktreeApp=self.webpackChunktreeApp||[]).push([[179],{2011:(it,Ce,k)=>{k.d(Ce,{hO:()=>He,xv:()=>ue,Dh:()=>de,GT:()=>pe,cc:()=>Te,on:()=>B,pX:()=>J});var g=k(5e3),Z=k(127),O=k(5813);it=k.hmd(it);const oe=["ngOnDestroy"],J=(Ee,Ye,Ge,De={})=>new Proxy(Ee,{get:(ye,ve)=>Ge.runOutsideAngular(()=>{var je;if(Ee[ve])return(null===(je=null==De?void 0:De.spy)||void 0===je?void 0:je.get)&&De.spy.get(ve,Ee[ve]),Ee[ve];if(oe.indexOf(ve)>-1)return()=>{};const Ue=Ye.toPromise().then(ee=>{const q=ee&&ee[ve];return"function"==typeof q?q.bind(ee):q&&q.then?q.then(te=>Ge.run(()=>te)):Ge.run(()=>q)});return new Proxy(()=>{},{get:(ee,q)=>Ue[q],apply:(ee,q,te)=>Ue.then(ge=>{var re;const Me=ge&&ge(...te);return(null===(re=null==De?void 0:De.spy)||void 0===re?void 0:re.apply)&&De.spy.apply(ve,te,Me),Me})})})}),pe=(Ee,Ye)=>{Ye.forEach(Ge=>{Object.getOwnPropertyNames(Ge.prototype||Ge).forEach(De=>{Object.defineProperty(Ee.prototype,De,Object.getOwnPropertyDescriptor(Ge.prototype||Ge,De))})})};class ie{constructor(Ye){return Ye}}const de=new g.OlP("angularfire2.app.options"),ue=new g.OlP("angularfire2.app.name");function B(Ee,Ye,Ge){const ye="object"==typeof Ge&&Ge||{};ye.name=ye.name||"string"==typeof Ge&&Ge||"[DEFAULT]";const je=Z.Z.apps.filter(Ue=>Ue&&Ue.name===ye.name)[0]||Ye.runOutsideAngular(()=>Z.Z.initializeApp(Ee,ye));try{JSON.stringify(Ee)!==JSON.stringify(je.options)&&j("error",`${je.name} Firebase App already initialized with different options${it.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(Ue){}return new ie(je)}const j=(Ee,...Ye)=>{(0,g.X6Q)()&&"undefined"!=typeof console&&console[Ee](...Ye)},Q={provide:ie,useFactory:B,deps:[de,g.R0b,[new g.FiY,ue]]};let He=(()=>{class Ee{constructor(Ge){Z.Z.registerVersion("angularfire",O.q4.full,"core"),Z.Z.registerVersion("angularfire",O.q4.full,"app-compat"),Z.Z.registerVersion("angular",g.q4F.full,Ge.toString())}static initializeApp(Ge,De){return{ngModule:Ee,providers:[{provide:de,useValue:Ge},{provide:ue,useValue:De}]}}}return Ee.\u0275fac=function(Ge){return new(Ge||Ee)(g.LFG(g.Lbi))},Ee.\u0275mod=g.oAB({type:Ee}),Ee.\u0275inj=g.cJS({providers:[Q]}),Ee})();function Te(Ee,Ye,Ge,De,ye){const[,ve,je]=globalThis.\u0275AngularfireInstanceCache.find(Ue=>Ue[0]===Ee)||[];if(ve)return function xe(Ee,Ye){try{return Ee.toString()===Ye.toString()}catch(Ge){return Ee===Ye}}(ye,je)||(he("error",`${Ye} was already initialized on the ${Ge} Firebase App with different settings.${Pe?" You may need to reload as Firebase is not HMR aware.":""}`),he("warn",{is:ye,was:je})),ve;{const Ue=De();return globalThis.\u0275AngularfireInstanceCache.push([Ee,Ue,ye]),Ue}}const Pe=!!it.hot,he=(Ee,...Ye)=>{(0,g.X6Q)()&&"undefined"!=typeof console&&console[Ee](...Ye)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(it,Ce,k)=>{k.d(Ce,{q4:()=>Qc,iC:()=>wl,HU:()=>El,vb:()=>Fh,JM:()=>ca});var g=k(5e3),Z=k(5867),O=k(5861),oe=k(9681),J=k(2090),pe=k(4859),ie=k(1877);const de="@firebase/installations",j="w:0.5.7",Q="FIS_v2",Ee=new J.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Ye(D){return D instanceof J.ZR&&D.code.includes("request-failed")}function Ge({projectId:D}){return`https://firebaseinstallations.googleapis.com/v1/projects/${D}/installations`}function De(D){return{token:D.token,requestStatus:2,expiresIn:te(D.expiresIn),creationTime:Date.now()}}function ye(D,b){return ve.apply(this,arguments)}function ve(){return(ve=(0,O.Z)(function*(D,b){const F=(yield b.json()).error;return Ee.create("request-failed",{requestName:D,serverCode:F.code,serverMessage:F.message,serverStatus:F.status})})).apply(this,arguments)}function je({apiKey:D}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D})}function Ue(D,{refreshToken:b}){const M=je(D);return M.append("Authorization",function ge(D){return`${Q} ${D}`}(b)),M}function ee(D){return q.apply(this,arguments)}function q(){return(q=(0,O.Z)(function*(D){const b=yield D();return b.status>=500&&b.status<600?D():b})).apply(this,arguments)}function te(D){return Number(D.replace("s","000"))}function re(D,b){return Me.apply(this,arguments)}function Me(){return(Me=(0,O.Z)(function*({appConfig:D,heartbeatServiceProvider:b},{fid:M}){const F=Ge(D),z=je(D),X=b.getImmediate({optional:!0});if(X){const yt=yield X.getHeartbeatsHeader();yt&&z.append("x-firebase-client",yt)}const ze={method:"POST",headers:z,body:JSON.stringify({fid:M,authVersion:Q,appId:D.appId,sdkVersion:j})},Je=yield ee(()=>fetch(F,ze));if(Je.ok){const yt=yield Je.json();return{fid:yt.fid||M,registrationStatus:2,refreshToken:yt.refreshToken,authToken:De(yt.authToken)}}throw yield ye("Create Installation",Je)})).apply(this,arguments)}function se(D){return new Promise(b=>{setTimeout(b,D)})}const Wt=/^[cdef][\w-]{21}$/;function st(){try{const D=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(D),D[0]=112+D[0]%16;const M=function ft(D){return function Et(D){return btoa(String.fromCharCode(...D)).replace(/\+/g,"-").replace(/\//g,"_")}(D).substr(0,22)}(D);return Wt.test(M)?M:""}catch(D){return""}}function an(D){return`${D.appName}!${D.appId}`}const un=new Map;function _i(D,b){const M=an(D);Kt(M,b),function Lt(D,b){const M=function si(){return!tr&&"BroadcastChannel"in self&&(tr=new BroadcastChannel("[Firebase] FID Change"),tr.onmessage=D=>{Kt(D.data.key,D.data.fid)}),tr}();M&&M.postMessage({key:D,fid:b}),function hs(){0===un.size&&tr&&(tr.close(),tr=null)}()}(M,b)}function Kt(D,b){const M=un.get(D);if(M)for(const F of M)F(b)}let tr=null;const br="firebase-installations-store";let Hi=null;function Gi(){return Hi||(Hi=(0,J.X3)("firebase-installations-database",1,(D,b)=>{0===b&&D.createObjectStore(br)})),Hi}function ut(D,b){return Vr.apply(this,arguments)}function Vr(){return(Vr=(0,O.Z)(function*(D,b){const M=an(D),z=(yield Gi()).transaction(br,"readwrite"),X=z.objectStore(br),Se=yield X.get(M);return yield X.put(b,M),yield z.complete,(!Se||Se.fid!==b.fid)&&_i(D,b.fid),b})).apply(this,arguments)}function Zn(D){return Bn.apply(this,arguments)}function Bn(){return(Bn=(0,O.Z)(function*(D){const b=an(D),F=(yield Gi()).transaction(br,"readwrite");yield F.objectStore(br).delete(b),yield F.complete})).apply(this,arguments)}function oi(D,b){return $s.apply(this,arguments)}function $s(){return($s=(0,O.Z)(function*(D,b){const M=an(D),z=(yield Gi()).transaction(br,"readwrite"),X=z.objectStore(br),Se=yield X.get(M),ze=b(Se);return void 0===ze?yield X.delete(M):yield X.put(ze,M),yield z.complete,ze&&(!Se||Se.fid!==ze.fid)&&_i(D,ze.fid),ze})).apply(this,arguments)}function fn(D){return Yn.apply(this,arguments)}function Yn(){return(Yn=(0,O.Z)(function*(D){let b;const M=yield oi(D.appConfig,F=>{const z=fs(F),X=Wo(D,z);return b=X.registrationPromise,X.installationEntry});return""===M.fid?{installationEntry:yield b}:{installationEntry:M,registrationPromise:b}})).apply(this,arguments)}function fs(D){return kt(D||{fid:st(),registrationStatus:0})}function Wo(D,b){if(0===b.registrationStatus){if(!navigator.onLine)return{installationEntry:b,registrationPromise:Promise.reject(Ee.create("app-offline"))};const M={fid:b.fid,registrationStatus:1,registrationTime:Date.now()},F=function Vt(D,b){return nt.apply(this,arguments)}(D,M);return{installationEntry:M,registrationPromise:F}}return 1===b.registrationStatus?{installationEntry:b,registrationPromise:_t(D)}:{installationEntry:b}}function nt(){return(nt=(0,O.Z)(function*(D,b){try{const M=yield re(D,b);return ut(D.appConfig,M)}catch(M){throw Ye(M)&&409===M.customData.serverCode?yield Zn(D.appConfig):yield ut(D.appConfig,{fid:b.fid,registrationStatus:0}),M}})).apply(this,arguments)}function _t(D){return nr.apply(this,arguments)}function nr(){return(nr=(0,O.Z)(function*(D){let b=yield Ni(D.appConfig);for(;1===b.registrationStatus;)yield se(100),b=yield Ni(D.appConfig);if(0===b.registrationStatus){const{installationEntry:M,registrationPromise:F}=yield fn(D);return F||M}return b})).apply(this,arguments)}function Ni(D){return oi(D,b=>{if(!b)throw Ee.create("installation-not-found");return kt(b)})}function kt(D){return function Hs(D){return 1===D.registrationStatus&&D.registrationTime+1e4<Date.now()}(D)?{fid:D.fid,registrationStatus:0}:D}function hr(D,b){return rr.apply(this,arguments)}function rr(){return(rr=(0,O.Z)(function*({appConfig:D,heartbeatServiceProvider:b},M){const F=lt(D,M),z=Ue(D,M),X=b.getImmediate({optional:!0});if(X){const yt=yield X.getHeartbeatsHeader();yt&&z.append("x-firebase-client",yt)}const ze={method:"POST",headers:z,body:JSON.stringify({installation:{sdkVersion:j,appId:D.appId}})},Je=yield ee(()=>fetch(F,ze));if(Je.ok)return De(yield Je.json());throw yield ye("Generate Auth Token",Je)})).apply(this,arguments)}function lt(D,{fid:b}){return`${Ge(D)}/${b}/authTokens:generate`}function fr(D){return Nt.apply(this,arguments)}function Nt(){return(Nt=(0,O.Z)(function*(D,b=!1){let M;const F=yield oi(D.appConfig,X=>{if(!xt(X))throw Ee.create("not-registered");const Se=X.authToken;if(!b&&U(Se))return X;if(1===Se.requestStatus)return M=qe(D,b),X;{if(!navigator.onLine)throw Ee.create("app-offline");const ze=$(X);return M=ct(D,ze),ze}});return M?yield M:F.authToken})).apply(this,arguments)}function qe(D,b){return be.apply(this,arguments)}function be(){return(be=(0,O.Z)(function*(D,b){let M=yield We(D.appConfig);for(;1===M.authToken.requestStatus;)yield se(100),M=yield We(D.appConfig);const F=M.authToken;return 0===F.requestStatus?fr(D,b):F})).apply(this,arguments)}function We(D){return oi(D,b=>{if(!xt(b))throw Ee.create("not-registered");return function le(D){return 1===D.requestStatus&&D.requestTime+1e4<Date.now()}(b.authToken)?Object.assign(Object.assign({},b),{authToken:{requestStatus:0}}):b})}function ct(D,b){return Pt.apply(this,arguments)}function Pt(){return(Pt=(0,O.Z)(function*(D,b){try{const M=yield hr(D,b),F=Object.assign(Object.assign({},b),{authToken:M});return yield ut(D.appConfig,F),M}catch(M){if(!Ye(M)||401!==M.customData.serverCode&&404!==M.customData.serverCode){const F=Object.assign(Object.assign({},b),{authToken:{requestStatus:0}});yield ut(D.appConfig,F)}else yield Zn(D.appConfig);throw M}})).apply(this,arguments)}function xt(D){return void 0!==D&&2===D.registrationStatus}function U(D){return 2===D.requestStatus&&!function L(D){const b=Date.now();return b<D.creationTime||D.creationTime+D.expiresIn<b+36e5}(D)}function $(D){const b={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},D),{authToken:b})}function Le(){return(Le=(0,O.Z)(function*(D){const b=D,{installationEntry:M,registrationPromise:F}=yield fn(b);return F?F.catch(console.error):fr(b).catch(console.error),M.fid})).apply(this,arguments)}function qt(){return(qt=(0,O.Z)(function*(D,b=!1){const M=D;return yield pr(M),(yield fr(M,b)).token})).apply(this,arguments)}function pr(D){return Ut.apply(this,arguments)}function Ut(){return(Ut=(0,O.Z)(function*(D){const{registrationPromise:b}=yield fn(D);b&&(yield b)})).apply(this,arguments)}function jn(D){return Ee.create("missing-app-config-values",{valueName:D})}const Zo="installations",Re=D=>{const b=D.getProvider("app").getImmediate(),M=function qi(D){if(!D||!D.options)throw jn("App Configuration");if(!D.name)throw jn("App Name");const b=["projectId","apiKey","appId"];for(const M of b)if(!D.options[M])throw jn(M);return{appName:D.name,projectId:D.options.projectId,apiKey:D.options.apiKey,appId:D.options.appId}}(b);return{app:b,appConfig:M,heartbeatServiceProvider:(0,oe._getProvider)(b,"heartbeat"),_delete:()=>Promise.resolve()}},St=D=>{const b=D.getProvider("app").getImmediate(),M=(0,oe._getProvider)(b,Zo).getImmediate();return{getId:()=>function Y(D){return Le.apply(this,arguments)}(M),getToken:z=>function pt(D){return qt.apply(this,arguments)}(M,z)}};(function dn(){(0,oe._registerComponent)(new pe.wA(Zo,Re,"PUBLIC")),(0,oe._registerComponent)(new pe.wA("installations-internal",St,"PRIVATE"))})(),(0,oe.registerVersion)(de,"0.5.7"),(0,oe.registerVersion)(de,"0.5.7","esm2017");const ir="@firebase/remote-config",Sn=new J.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Ch{constructor(b,M,F,z){this.client=b,this.storage=M,this.storageCache=F,this.logger=z}isCachedDataFresh(b,M){if(!M)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const F=Date.now()-M,z=F<=b;return this.logger.debug(`Config fetch cache check. Cache age millis: ${F}. Cache max age millis (minimumFetchIntervalMillis setting): ${b}. Is cache hit: ${z}.`),z}fetch(b){var M=this;return(0,O.Z)(function*(){const[F,z]=yield Promise.all([M.storage.getLastSuccessfulFetchTimestampMillis(),M.storage.getLastSuccessfulFetchResponse()]);if(z&&M.isCachedDataFresh(b.cacheMaxAgeMillis,F))return z;b.eTag=z&&z.eTag;const X=yield M.client.fetch(b),Se=[M.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===X.status&&Se.push(M.storage.setLastSuccessfulFetchResponse(X)),yield Promise.all(Se),X})()}}function Ac(D=navigator){return D.languages&&D.languages[0]||D.language}class Va{constructor(b,M,F,z,X,Se){this.firebaseInstallations=b,this.sdkVersion=M,this.namespace=F,this.projectId=z,this.apiKey=X,this.appId=Se}fetch(b){var M=this;return(0,O.Z)(function*(){const[F,z]=yield Promise.all([M.firebaseInstallations.getId(),M.firebaseInstallations.getToken()]),Se=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${M.projectId}/namespaces/${M.namespace}:fetch?key=${M.apiKey}`,ze={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":b.eTag||"*"},Je={sdk_version:M.sdkVersion,app_instance_id:F,app_instance_id_token:z,app_id:M.appId,language_code:Ac()},yt={method:"POST",headers:ze,body:JSON.stringify(Je)},Bt=fetch(Se,yt),wt=new Promise((Sr,Kr)=>{b.signal.addEventListener(()=>{const Ci=new Error("The operation was aborted.");Ci.name="AbortError",Kr(Ci)})});let Rn;try{yield Promise.race([Bt,wt]),Rn=yield Bt}catch(Sr){let Kr="fetch-client-network";throw"AbortError"===Sr.name&&(Kr="fetch-timeout"),Sn.create(Kr,{originalErrorMessage:Sr.message})}let vn=Rn.status;const fa=Rn.headers.get("ETag")||void 0;let Oo,Ar;if(200===Rn.status){let Sr;try{Sr=yield Rn.json()}catch(Kr){throw Sn.create("fetch-client-parse",{originalErrorMessage:Kr.message})}Oo=Sr.entries,Ar=Sr.state}if("INSTANCE_STATE_UNSPECIFIED"===Ar?vn=500:"NO_CHANGE"===Ar?vn=304:("NO_TEMPLATE"===Ar||"EMPTY_CONFIG"===Ar)&&(Oo={}),304!==vn&&200!==vn)throw Sn.create("fetch-status",{httpStatus:vn});return{status:vn,eTag:fa,config:Oo}})()}}class Tp{constructor(b,M){this.client=b,this.storage=M}fetch(b){var M=this;return(0,O.Z)(function*(){const F=(yield M.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return M.attemptFetch(b,F)})()}attemptFetch(b,{throttleEndTimeMillis:M,backoffCount:F}){var z=this;return(0,O.Z)(function*(){yield function Ln(D,b){return new Promise((M,F)=>{const z=Math.max(b-Date.now(),0),X=setTimeout(M,z);D.addEventListener(()=>{clearTimeout(X),F(Sn.create("fetch-throttle",{throttleEndTimeMillis:b}))})})}(b.signal,M);try{const X=yield z.client.fetch(b);return yield z.storage.deleteThrottleMetadata(),X}catch(X){if(!function Sc(D){if(!(D instanceof J.ZR&&D.customData))return!1;const b=Number(D.customData.httpStatus);return 429===b||500===b||503===b||504===b}(X))throw X;const Se={throttleEndTimeMillis:Date.now()+(0,J.$s)(F),backoffCount:F+1};return yield z.storage.setThrottleMetadata(Se),z.attemptFetch(b,Se)}})()}}class Mc{constructor(b,M,F,z,X){this.app=b,this._client=M,this._storageCache=F,this._storage=z,this._logger=X,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Zu(D,b){const M=D.target.error||void 0;return Sn.create(b,{originalErrorMessage:M&&M.message})}const _s="app_namespace_store";class xp{constructor(b,M,F,z=function Mp(){return new Promise((D,b)=>{try{const M=indexedDB.open("firebase_remote_config",1);M.onerror=F=>{b(Zu(F,"storage-open"))},M.onsuccess=F=>{D(F.target.result)},M.onupgradeneeded=F=>{0===F.oldVersion&&F.target.result.createObjectStore(_s,{keyPath:"compositeKey"})}}catch(M){b(Sn.create("storage-open",{originalErrorMessage:M}))}})}()){this.appId=b,this.appName=M,this.namespace=F,this.openDbPromise=z}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(b){return this.set("last_fetch_status",b)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(b){return this.set("last_successful_fetch_timestamp_millis",b)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(b){return this.set("last_successful_fetch_response",b)}getActiveConfig(){return this.get("active_config")}setActiveConfig(b){return this.set("active_config",b)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(b){return this.set("active_config_etag",b)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(b){return this.set("throttle_metadata",b)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(b){var M=this;return(0,O.Z)(function*(){const F=yield M.openDbPromise;return new Promise((z,X)=>{const ze=F.transaction([_s],"readonly").objectStore(_s),Je=M.createCompositeKey(b);try{const yt=ze.get(Je);yt.onerror=Bt=>{X(Zu(Bt,"storage-get"))},yt.onsuccess=Bt=>{const wt=Bt.target.result;z(wt?wt.value:void 0)}}catch(yt){X(Sn.create("storage-get",{originalErrorMessage:yt&&yt.message}))}})})()}set(b,M){var F=this;return(0,O.Z)(function*(){const z=yield F.openDbPromise;return new Promise((X,Se)=>{const Je=z.transaction([_s],"readwrite").objectStore(_s),yt=F.createCompositeKey(b);try{const Bt=Je.put({compositeKey:yt,value:M});Bt.onerror=wt=>{Se(Zu(wt,"storage-set"))},Bt.onsuccess=()=>{X()}}catch(Bt){Se(Sn.create("storage-set",{originalErrorMessage:Bt&&Bt.message}))}})})()}delete(b){var M=this;return(0,O.Z)(function*(){const F=yield M.openDbPromise;return new Promise((z,X)=>{const ze=F.transaction([_s],"readwrite").objectStore(_s),Je=M.createCompositeKey(b);try{const yt=ze.delete(Je);yt.onerror=Bt=>{X(Zu(Bt,"storage-delete"))},yt.onsuccess=()=>{z()}}catch(yt){X(Sn.create("storage-delete",{originalErrorMessage:yt&&yt.message}))}})})()}createCompositeKey(b){return[this.appId,this.appName,this.namespace,b].join()}}class Rc{constructor(b){this.storage=b}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var b=this;return(0,O.Z)(function*(){const M=b.storage.getLastFetchStatus(),F=b.storage.getLastSuccessfulFetchTimestampMillis(),z=b.storage.getActiveConfig(),X=yield M;X&&(b.lastFetchStatus=X);const Se=yield F;Se&&(b.lastSuccessfulFetchTimestampMillis=Se);const ze=yield z;ze&&(b.activeConfig=ze)})()}setLastFetchStatus(b){return this.lastFetchStatus=b,this.storage.setLastFetchStatus(b)}setLastSuccessfulFetchTimestampMillis(b){return this.lastSuccessfulFetchTimestampMillis=b,this.storage.setLastSuccessfulFetchTimestampMillis(b)}setActiveConfig(b){return this.activeConfig=b,this.storage.setActiveConfig(b)}}function zs(){return Th.apply(this,arguments)}function Th(){return(Th=(0,O.Z)(function*(){if(!(0,J.hl)())return!1;try{return yield(0,J.eu)()}catch(D){return!1}})).apply(this,arguments)}!function Do(){(0,oe._registerComponent)(new pe.wA("remote-config",function D(b,{instanceIdentifier:M}){const F=b.getProvider("app").getImmediate(),z=b.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw Sn.create("registration-window");if(!(0,J.hl)())throw Sn.create("indexed-db-unavailable");const{projectId:X,apiKey:Se,appId:ze}=F.options;if(!X)throw Sn.create("registration-project-id");if(!Se)throw Sn.create("registration-api-key");if(!ze)throw Sn.create("registration-app-id");const Je=new xp(ze,F.name,M=M||"firebase"),yt=new Rc(Je),Bt=new ie.Yd(ir);Bt.logLevel=ie.in.ERROR;const wt=new Va(z,oe.SDK_VERSION,M,X,Se,ze),Rn=new Tp(wt,Je),vn=new Ch(Rn,Je,yt,Bt),fa=new Mc(F,vn,yt,Je,Bt);return function vi(D){const b=(0,J.m9)(D);b._initializePromise||(b._initializePromise=b._storageCache.loadFromStorage().then(()=>{b._isInitializationComplete=!0}))}(fa),fa},"PUBLIC").setMultipleInstances(!0)),(0,oe.registerVersion)(ir,"0.3.6"),(0,oe.registerVersion)(ir,"0.3.6","esm2017")}();const Yu="/firebase-messaging-sw.js",vs="/firebase-cloud-messaging-push-scope",Br="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Ws="google.c.a.c_id",Qo="google.c.a.c_l",Nc="google.c.a.ts",Rp="google.c.a.e";var Es=(()=>{return(D=Es||(Es={})).PUSH_RECEIVED="push-received",D.NOTIFICATION_CLICKED="notification-clicked",Es;var D})();function li(D){const b=new Uint8Array(D);return btoa(String.fromCharCode(...b)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Ba(D){const M=(D+"=".repeat((4-D.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),F=atob(M),z=new Uint8Array(F.length);for(let X=0;X<F.length;++X)z[X]=F.charCodeAt(X);return z}const ja="fcm_token_details_db",sr="fcm_token_object_Store";function Ah(D){return $a.apply(this,arguments)}function $a(){return $a=(0,O.Z)(function*(D){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(X=>X.name).includes(ja))return null;let b=null;return(yield(0,J.X3)(ja,5,function(){var F=(0,O.Z)(function*(z,X,Se,ze){var Je;if(X<2||!z.objectStoreNames.contains(sr))return;const yt=ze.objectStore(sr),Bt=yield yt.index("fcmSenderId").get(D);if(yield yt.clear(),Bt)if(2===X){const wt=Bt;if(!wt.auth||!wt.p256dh||!wt.endpoint)return;b={token:wt.fcmToken,createTime:null!==(Je=wt.createTime)&&void 0!==Je?Je:Date.now(),subscriptionOptions:{auth:wt.auth,p256dh:wt.p256dh,endpoint:wt.endpoint,swScope:wt.swScope,vapidKey:"string"==typeof wt.vapidKey?wt.vapidKey:li(wt.vapidKey)}}}else if(3===X){const wt=Bt;b={token:wt.fcmToken,createTime:wt.createTime,subscriptionOptions:{auth:li(wt.auth),p256dh:li(wt.p256dh),endpoint:wt.endpoint,swScope:wt.swScope,vapidKey:li(wt.vapidKey)}}}else if(4===X){const wt=Bt;b={token:wt.fcmToken,createTime:wt.createTime,subscriptionOptions:{auth:li(wt.auth),p256dh:li(wt.p256dh),endpoint:wt.endpoint,swScope:wt.swScope,vapidKey:li(wt.vapidKey)}}}});return function(z,X,Se,ze){return F.apply(this,arguments)}}())).close(),yield(0,J.Lj)(ja),yield(0,J.Lj)("fcm_vapid_details_db"),yield(0,J.Lj)("undefined"),Oc(b)?b:null}),$a.apply(this,arguments)}function Oc(D){if(!D||!D.subscriptionOptions)return!1;const{subscriptionOptions:b}=D;return"number"==typeof D.createTime&&D.createTime>0&&"string"==typeof D.token&&D.token.length>0&&"string"==typeof b.auth&&b.auth.length>0&&"string"==typeof b.p256dh&&b.p256dh.length>0&&"string"==typeof b.endpoint&&b.endpoint.length>0&&"string"==typeof b.swScope&&b.swScope.length>0&&"string"==typeof b.vapidKey&&b.vapidKey.length>0}const Zi="firebase-messaging-store";let Jo=null;function Qu(){return Jo||(Jo=(0,J.X3)("firebase-messaging-database",1,(D,b)=>{0===b&&D.createObjectStore(Zi)})),Jo}function hn(D){return To.apply(this,arguments)}function To(){return(To=(0,O.Z)(function*(D){const b=Zs(D),F=yield(yield Qu()).transaction(Zi).objectStore(Zi).get(b);if(F)return F;{const z=yield Ah(D.appConfig.senderId);if(z)return yield ws(D,z),z}})).apply(this,arguments)}function ws(D,b){return nn.apply(this,arguments)}function nn(){return(nn=(0,O.Z)(function*(D,b){const M=Zs(D),z=(yield Qu()).transaction(Zi,"readwrite");return yield z.objectStore(Zi).put(b,M),yield z.complete,b})).apply(this,arguments)}function Pc(D){return Ks.apply(this,arguments)}function Ks(){return(Ks=(0,O.Z)(function*(D){const b=Zs(D),F=(yield Qu()).transaction(Zi,"readwrite");yield F.objectStore(Zi).delete(b),yield F.complete})).apply(this,arguments)}function Zs({appConfig:D}){return D.appId}const Mn=new J.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Xo(D,b){return wi.apply(this,arguments)}function wi(){return(wi=(0,O.Z)(function*(D,b){const M=yield Ds(D),F=dt(b),z={method:"POST",headers:M,body:JSON.stringify(F)};let X;try{X=yield(yield fetch($r(D.appConfig),z)).json()}catch(Se){throw Mn.create("token-subscribe-failed",{errorInfo:Se})}if(X.error)throw Mn.create("token-subscribe-failed",{errorInfo:X.error.message});if(!X.token)throw Mn.create("token-subscribe-no-token");return X.token})).apply(this,arguments)}function yr(D,b){return Is.apply(this,arguments)}function Is(){return(Is=(0,O.Z)(function*(D,b){const M=yield Ds(D),F=dt(b.subscriptionOptions),z={method:"PATCH",headers:M,body:JSON.stringify(F)};let X;try{X=yield(yield fetch(`${$r(D.appConfig)}/${b.token}`,z)).json()}catch(Se){throw Mn.create("token-update-failed",{errorInfo:Se})}if(X.error)throw Mn.create("token-update-failed",{errorInfo:X.error.message});if(!X.token)throw Mn.create("token-update-no-token");return X.token})).apply(this,arguments)}function Yi(D,b){return qa.apply(this,arguments)}function qa(){return(qa=(0,O.Z)(function*(D,b){const F={method:"DELETE",headers:yield Ds(D)};try{const X=yield(yield fetch(`${$r(D.appConfig)}/${b}`,F)).json();if(X.error)throw Mn.create("token-unsubscribe-failed",{errorInfo:X.error.message})}catch(z){throw Mn.create("token-unsubscribe-failed",{errorInfo:z})}})).apply(this,arguments)}function $r({projectId:D}){return`https://fcmregistrations.googleapis.com/v1/projects/${D}/registrations`}function Ds(D){return bs.apply(this,arguments)}function bs(){return(bs=(0,O.Z)(function*({appConfig:D,installations:b}){const M=yield b.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D.apiKey,"x-goog-firebase-installations-auth":`FIS ${M}`})})).apply(this,arguments)}function dt({p256dh:D,auth:b,endpoint:M,vapidKey:F}){const z={web:{endpoint:M,auth:b,p256dh:D}};return F!==Br&&(z.web.applicationPubKey=F),z}const za=6048e5;function ea(D){return Wa.apply(this,arguments)}function Wa(){return(Wa=(0,O.Z)(function*(D){const b=yield kc(D.swRegistration,D.vapidKey),M={vapidKey:D.vapidKey,swScope:D.swRegistration.scope,endpoint:b.endpoint,auth:li(b.getKey("auth")),p256dh:li(b.getKey("p256dh"))},F=yield hn(D.firebaseDependencies);if(F){if(Ao(F.subscriptionOptions,M))return Date.now()>=F.createTime+za?Ju(D,{token:F.token,createTime:Date.now(),subscriptionOptions:M}):F.token;try{yield Yi(D.firebaseDependencies,F.token)}catch(z){console.warn(z)}return we(D.firebaseDependencies,M)}return we(D.firebaseDependencies,M)})).apply(this,arguments)}function Ka(D){return Za.apply(this,arguments)}function Za(){return(Za=(0,O.Z)(function*(D){const b=yield hn(D.firebaseDependencies);b&&(yield Yi(D.firebaseDependencies,b.token),yield Pc(D.firebaseDependencies));const M=yield D.swRegistration.pushManager.getSubscription();return!M||M.unsubscribe()})).apply(this,arguments)}function Ju(D,b){return Xu.apply(this,arguments)}function Xu(){return(Xu=(0,O.Z)(function*(D,b){try{const M=yield yr(D.firebaseDependencies,b),F=Object.assign(Object.assign({},b),{token:M,createTime:Date.now()});return yield ws(D.firebaseDependencies,F),M}catch(M){throw yield Ka(D),M}})).apply(this,arguments)}function we(D,b){return Rt.apply(this,arguments)}function Rt(){return(Rt=(0,O.Z)(function*(D,b){const F={token:yield Xo(D,b),createTime:Date.now(),subscriptionOptions:b};return yield ws(D,F),F.token})).apply(this,arguments)}function kc(D,b){return pn.apply(this,arguments)}function pn(){return(pn=(0,O.Z)(function*(D,b){return(yield D.pushManager.getSubscription())||D.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Ba(b)})})).apply(this,arguments)}function Ao(D,b){return b.vapidKey===D.vapidKey&&b.endpoint===D.endpoint&&b.auth===D.auth&&b.p256dh===D.p256dh}function So(D){const b={from:D.from,collapseKey:D.collapse_key,messageId:D.fcmMessageId};return function Hr(D,b){if(!b.notification)return;D.notification={};const M=b.notification.title;M&&(D.notification.title=M);const F=b.notification.body;F&&(D.notification.body=F);const z=b.notification.image;z&&(D.notification.image=z)}(b,D),function el(D,b){!b.data||(D.data=b.data)}(b,D),function tl(D,b){if(!b.fcmOptions)return;D.fcmOptions={};const M=b.fcmOptions.link;M&&(D.fcmOptions.link=M);const F=b.fcmOptions.analytics_label;F&&(D.fcmOptions.analyticsLabel=F)}(b,D),b}function Fc(D){return"object"==typeof D&&!!D&&Ws in D}function nl(D,b){const M=[];for(let F=0;F<D.length;F++)M.push(D.charAt(F)),F<b.length&&M.push(b.charAt(F));return M.join("")}function Cs(D){return Mn.create("missing-app-config-values",{valueName:D})}nl("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),nl("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class or{constructor(b,M,F){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const z=function Ya(D){if(!D||!D.options)throw Cs("App Configuration Object");if(!D.name)throw Cs("App Name");const b=["projectId","apiKey","appId","messagingSenderId"],{options:M}=D;for(const F of b)if(!M[F])throw Cs(F);return{appName:D.name,projectId:M.projectId,apiKey:M.apiKey,appId:M.appId,senderId:M.messagingSenderId}}(b);this.firebaseDependencies={app:b,appConfig:z,installations:M,analyticsProvider:F}}_delete(){return Promise.resolve()}}function ci(D){return Qa.apply(this,arguments)}function Qa(){return(Qa=(0,O.Z)(function*(D){try{D.swRegistration=yield navigator.serviceWorker.register(Yu,{scope:vs}),D.swRegistration.update().catch(()=>{})}catch(b){throw Mn.create("failed-service-worker-registration",{browserErrorMessage:b.message})}})).apply(this,arguments)}function Ts(D,b){return Ii.apply(this,arguments)}function Ii(){return(Ii=(0,O.Z)(function*(D,b){if(!b&&!D.swRegistration&&(yield ci(D)),b||!D.swRegistration){if(!(b instanceof ServiceWorkerRegistration))throw Mn.create("invalid-sw-registration");D.swRegistration=b}})).apply(this,arguments)}function rl(D,b){return Ja.apply(this,arguments)}function Ja(){return(Ja=(0,O.Z)(function*(D,b){b?D.vapidKey=b:D.vapidKey||(D.vapidKey=Br)})).apply(this,arguments)}function il(){return(il=(0,O.Z)(function*(D,b){if(!navigator)throw Mn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Mn.create("permission-blocked");return yield rl(D,null==b?void 0:b.vapidKey),yield Ts(D,null==b?void 0:b.serviceWorkerRegistration),ea(D)})).apply(this,arguments)}function ta(D,b,M){return na.apply(this,arguments)}function na(){return(na=(0,O.Z)(function*(D,b,M){const F=sl(b);(yield D.firebaseDependencies.analyticsProvider.get()).logEvent(F,{message_id:M[Ws],message_name:M[Qo],message_time:M[Nc],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function sl(D){switch(D){case Es.NOTIFICATION_CLICKED:return"notification_open";case Es.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Lc(){return(Lc=(0,O.Z)(function*(D,b){const M=b.data;if(!M.isFirebaseMessaging)return;D.onMessageHandler&&M.messageType===Es.PUSH_RECEIVED&&("function"==typeof D.onMessageHandler?D.onMessageHandler(So(M)):D.onMessageHandler.next(So(M)));const F=M.data;Fc(F)&&"1"===F[Rp]&&(yield ta(D,M.messageType,F))})).apply(this,arguments)}const al="@firebase/messaging",Vc=D=>{const b=new or(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),D.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",M=>function ol(D,b){return Lc.apply(this,arguments)}(b,M)),b},Qs=D=>{const b=D.getProvider("messaging").getImmediate();return{getToken:F=>function Xa(D,b){return il.apply(this,arguments)}(b,F)}};function Bc(){return Js.apply(this,arguments)}function Js(){return(Js=(0,O.Z)(function*(){try{yield(0,J.eu)()}catch(D){return!1}return"undefined"!=typeof window&&(0,J.hl)()&&(0,J.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Uc(){(0,oe._registerComponent)(new pe.wA("messaging",Vc,"PUBLIC")),(0,oe._registerComponent)(new pe.wA("messaging-internal",Qs,"PRIVATE")),(0,oe.registerVersion)(al,"0.9.11"),(0,oe.registerVersion)(al,"0.9.11","esm2017")}();const ll="analytics",Xm="firebase_id",ra="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",eu="https://www.googletagmanager.com/gtag/js",Vn=new ie.Yd("@firebase/analytics");function jc(D){return Promise.all(D.map(b=>b.catch(M=>M)))}function Np(D,b){const M=document.createElement("script");M.src=`${eu}?l=${D}&id=${b}`,M.async=!0,document.head.appendChild(M)}function Mo(D,b,M,F,z,X){return $c.apply(this,arguments)}function $c(){return($c=(0,O.Z)(function*(D,b,M,F,z,X){const Se=F[z];try{if(Se)yield b[Se];else{const Je=(yield jc(M)).find(yt=>yt.measurementId===z);Je&&(yield b[Je.appId])}}catch(ze){Vn.error(ze)}D("config",z,X)})).apply(this,arguments)}function dl(D,b,M,F,z){return Xs.apply(this,arguments)}function Xs(){return(Xs=(0,O.Z)(function*(D,b,M,F,z){try{let X=[];if(z&&z.send_to){let Se=z.send_to;Array.isArray(Se)||(Se=[Se]);const ze=yield jc(M);for(const Je of Se){const yt=ze.find(wt=>wt.measurementId===Je),Bt=yt&&b[yt.appId];if(!Bt){X=[];break}X.push(Bt)}}0===X.length&&(X=Object.values(b)),yield Promise.all(X),D("event",F,z||{})}catch(X){Vn.error(X)}})).apply(this,arguments)}function Op(){const D=window.document.getElementsByTagName("script");for(const b of Object.values(D))if(b.src&&b.src.includes(eu))return b;return null}const gn=new J.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),ia=new class fl{constructor(b={},M=1e3){this.throttleMetadata=b,this.intervalMillis=M}getThrottleMetadata(b){return this.throttleMetadata[b]}setThrottleMetadata(b,M){this.throttleMetadata[b]=M}deleteThrottleMetadata(b){delete this.throttleMetadata[b]}};function eo(D){return new Headers({Accept:"application/json","x-goog-api-key":D})}function Gc(D){return Qt.apply(this,arguments)}function Qt(){return(Qt=(0,O.Z)(function*(D){var b;const{appId:M,apiKey:F}=D,z={method:"GET",headers:eo(F)},X=ra.replace("{app-id}",M),Se=yield fetch(X,z);if(200!==Se.status&&304!==Se.status){let ze="";try{const Je=yield Se.json();(null===(b=Je.error)||void 0===b?void 0:b.message)&&(ze=Je.error.message)}catch(Je){}throw gn.create("config-fetch-failed",{httpStatus:Se.status,responseMessage:ze})}return Se.json()})).apply(this,arguments)}function xo(D){return mn.apply(this,arguments)}function mn(){return(mn=(0,O.Z)(function*(D,b=ia,M){const{appId:F,apiKey:z,measurementId:X}=D.options;if(!F)throw gn.create("no-app-id");if(!z){if(X)return{measurementId:X,appId:F};throw gn.create("no-api-key")}const Se=b.getThrottleMetadata(F)||{backoffCount:0,throttleEndTimeMillis:Date.now()},ze=new tu;return setTimeout((0,O.Z)(function*(){ze.abort()}),void 0!==M?M:6e4),Ct({appId:F,apiKey:z,measurementId:X},Se,ze,b)})).apply(this,arguments)}function Ct(D,b,M){return Ms.apply(this,arguments)}function Ms(){return(Ms=(0,O.Z)(function*(D,{throttleEndTimeMillis:b,backoffCount:M},F,z=ia){const{appId:X,measurementId:Se}=D;try{yield Pp(F,b)}catch(ze){if(Se)return Vn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Se} provided in the "measurementId" field in the local Firebase config. [${ze.message}]`),{appId:X,measurementId:Se};throw ze}try{const ze=yield Gc(D);return z.deleteThrottleMetadata(X),ze}catch(ze){if(!pl(ze)){if(z.deleteThrottleMetadata(X),Se)return Vn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Se} provided in the "measurementId" field in the local Firebase config. [${ze.message}]`),{appId:X,measurementId:Se};throw ze}const Je=503===Number(ze.customData.httpStatus)?(0,J.$s)(M,z.intervalMillis,30):(0,J.$s)(M,z.intervalMillis),yt={throttleEndTimeMillis:Date.now()+Je,backoffCount:M+1};return z.setThrottleMetadata(X,yt),Vn.debug(`Calling attemptFetch again in ${Je} millis`),Ct(D,yt,F,z)}})).apply(this,arguments)}function Pp(D,b){return new Promise((M,F)=>{const z=Math.max(b-Date.now(),0),X=setTimeout(M,z);D.addEventListener(()=>{clearTimeout(X),F(gn.create("fetch-throttle",{throttleEndTimeMillis:b}))})})}function pl(D){if(!(D instanceof J.ZR&&D.customData))return!1;const b=Number(D.customData.httpStatus);return 429===b||500===b||503===b||504===b}class tu{constructor(){this.listeners=[]}addEventListener(b){this.listeners.push(b)}abort(){this.listeners.forEach(b=>b())}}function xh(){return to.apply(this,arguments)}function to(){return(to=(0,O.Z)(function*(){if(!(0,J.hl)())return Vn.warn(gn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,J.eu)()}catch(D){return Vn.warn(gn.create("indexeddb-unavailable",{errorInfo:D}).message),!1}return!0})).apply(this,arguments)}function $n(){return($n=(0,O.Z)(function*(D,b,M,F,z,X,Se){var ze;const Je=xo(D);Je.then(vn=>{M[vn.measurementId]=vn.appId,D.options.measurementId&&vn.measurementId!==D.options.measurementId&&Vn.warn(`The measurement ID in the local Firebase config (${D.options.measurementId}) does not match the measurement ID fetched from the server (${vn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(vn=>Vn.error(vn)),b.push(Je);const yt=xh().then(vn=>{if(vn)return F.getId()}),[Bt,wt]=yield Promise.all([Je,yt]);Op()||Np(X,Bt.measurementId),z("js",new Date);const Rn=null!==(ze=null==Se?void 0:Se.config)&&void 0!==ze?ze:{};return Rn.origin="firebase",Rn.update=!0,null!=wt&&(Rn[Xm]=wt),z("config",Bt.measurementId,Rn),Bt.measurementId})).apply(this,arguments)}class Ro{constructor(b){this.app=b}_delete(){return delete Gr[this.app.options.appId],Promise.resolve()}}let Gr={},no=[];const gl={};let hi,xs,ro="dataLayer",Hn=!1;function es(D,b,M){!function ml(){const D=[];if((0,J.ru)()&&D.push("This is a browser extension environment."),(0,J.zI)()||D.push("Cookies are not available."),D.length>0){const b=D.map((F,z)=>`(${z+1}) ${F}`).join(" "),M=gn.create("invalid-analytics-context",{errorInfo:b});Vn.warn(M.message)}}();const F=D.options.appId;if(!F)throw gn.create("no-app-id");if(!D.options.apiKey){if(!D.options.measurementId)throw gn.create("no-api-key");Vn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${D.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Gr[F])throw gn.create("already-exists",{id:F});if(!Hn){!function Ji(D){let b=[];Array.isArray(window[D])?b=window[D]:window[D]=b}(ro);const{wrappedGtag:X,gtagCore:Se}=function Mh(D,b,M,F,z){let X=function(...Se){window[F].push(arguments)};return window[z]&&"function"==typeof window[z]&&(X=window[z]),window[z]=function Hc(D,b,M,F){function X(){return(X=(0,O.Z)(function*(Se,ze,Je){try{"event"===Se?yield dl(D,b,M,ze,Je):"config"===Se?yield Mo(D,b,M,F,ze,Je):D("set",ze)}catch(yt){Vn.error(yt)}})).apply(this,arguments)}return function z(Se,ze,Je){return X.apply(this,arguments)}}(X,D,b,M),{gtagCore:X,wrappedGtag:window[z]}}(Gr,no,gl,ro,"gtag");xs=X,hi=Se,Hn=!0}return Gr[F]=function di(D,b,M,F,z,X,Se){return $n.apply(this,arguments)}(D,no,gl,b,hi,ro,M),new Ro(D)}function oa(){return(oa=(0,O.Z)(function*(D,b,M,F,z){if(z&&z.global)D("event",M,F);else{const X=yield b;D("event",M,Object.assign(Object.assign({},F),{send_to:X}))}})).apply(this,arguments)}function oo(){return ru.apply(this,arguments)}function ru(){return(ru=(0,O.Z)(function*(){if((0,J.ru)()||!(0,J.zI)()||!(0,J.hl)())return!1;try{return yield(0,J.eu)()}catch(D){return!1}})).apply(this,arguments)}const vl="@firebase/analytics";!function Nh(){(0,oe._registerComponent)(new pe.wA(ll,(b,{options:M})=>es(b.getProvider("app").getImmediate(),b.getProvider("installations-internal").getImmediate(),M),"PUBLIC")),(0,oe._registerComponent)(new pe.wA("analytics-internal",function D(b){try{const M=b.getProvider(ll).getImmediate();return{logEvent:(F,z,X)=>function Kc(D,b,M,F){D=(0,J.m9)(D),function qc(D,b,M,F,z){return oa.apply(this,arguments)}(xs,Gr[D.app.options.appId],b,M,F).catch(z=>Vn.error(z))}(M,F,z,X)}}catch(M){throw gn.create("interop-component-reg-failed",{reason:M})}},"PRIVATE")),(0,oe.registerVersion)(vl,"0.7.7"),(0,oe.registerVersion)(vl,"0.7.7","esm2017")}();var Yc=k(4408),Oh=k(7565);const iu=new class _n extends Oh.v{}(class Pi extends Yc.o{constructor(b,M){super(b,M),this.scheduler=b,this.work=M}schedule(b,M=0){return M>0?super.schedule(b,M):(this.delay=M,this.state=b,this.scheduler.flush(this),this)}execute(b,M){return M>0||this.closed?super.execute(b,M):this._execute(b,M)}requestAsyncId(b,M,F=0){return null!=F&&F>0||null==F&&this.delay>0?super.requestAsyncId(b,M,F):b.flush(this)}});var Cr=k(4986),su=k(8505),Tr=k(9468),bi=k(5363);const Qc=new g.GfV("7.3.0"),Rs="__angularfire_symbol__analyticsIsSupportedValue",zr="__angularfire_symbol__analyticsIsSupported",Wr="__angularfire_symbol__remoteConfigIsSupportedValue",ua="__angularfire_symbol__remoteConfigIsSupported",la="__angularfire_symbol__messagingIsSupportedValue",Jc="__angularfire_symbol__messagingIsSupported";function ca(D,b,M){if(b){if(1===b.length)return b[0];const X=b.filter(Se=>Se.app===M);if(1===X.length)return X[0]}return M.container.getProvider(D).getImmediate({optional:!0})}globalThis[zr]||(globalThis[zr]=oo().then(D=>globalThis[Rs]=D).catch(()=>globalThis[Rs]=!1)),globalThis[Jc]||(globalThis[Jc]=Bc().then(D=>globalThis[la]=D).catch(()=>globalThis[la]=!1)),globalThis[ua]||(globalThis[ua]=zs().then(D=>globalThis[Wr]=D).catch(()=>globalThis[Wr]=!1));const Fh=(D,b)=>{const M=b?[b]:(0,Z.C6)(),F=[];return M.forEach(z=>{z.container.getProvider(D).instances.forEach(Se=>{F.includes(Se)||F.push(Se)})}),F};function ao(){}class da{constructor(b,M=iu){this.zone=b,this.delegate=M}now(){return this.delegate.now()}schedule(b,M,F){const z=this.zone;return this.delegate.schedule(function(Se){z.runGuarded(()=>{b.apply(this,[Se])})},M,F)}}class Lh{constructor(b){this.zone=b,this.task=null}call(b,M){const F=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ao,{},ao,ao)),M.pipe((0,su.b)({next:F,complete:F,error:F})).subscribe(b).add(F)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let El=(()=>{class D{constructor(M){this.ngZone=M,this.outsideAngular=M.runOutsideAngular(()=>new da(Zone.current)),this.insideAngular=M.run(()=>new da(Zone.current,Cr.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return D.\u0275fac=function(M){return new(M||D)(g.LFG(g.R0b))},D.\u0275prov=g.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})();function rs(){const D=globalThis.\u0275AngularFireScheduler;if(!D)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return D}function wl(D){return rs(),function is(D){return function(M){return(M=M.lift(new Lh(D.ngZone))).pipe((0,Tr.R)(D.outsideAngular),(0,bi.Q)(D.insideAngular))}}(rs())(D)}},2090:(it,Ce,k)=>{k.d(Ce,{BH:()=>Te,LL:()=>Et,ZR:()=>se,zI:()=>ge,US:()=>ie,tV:()=>B,L:()=>ue,$s:()=>Hs,r3:()=>Kt,Sg:()=>xe,ne:()=>ut,vZ:()=>hs,ZB:()=>Q,Lj:()=>Pt,pd:()=>Hi,m9:()=>lt,z$:()=>Pe,jU:()=>Ye,ru:()=>Ge,d:()=>ye,xb:()=>tr,w1:()=>ve,hl:()=>q,uI:()=>he,UG:()=>Ee,b$:()=>De,G6:()=>ee,Mn:()=>je,X3:()=>ct,xO:()=>Ri,zd:()=>br,eu:()=>te});var g=k(5861);const J=function(U){const L=[];let $=0;for(let le=0;le<U.length;le++){let Y=U.charCodeAt(le);Y<128?L[$++]=Y:Y<2048?(L[$++]=Y>>6|192,L[$++]=63&Y|128):55296==(64512&Y)&&le+1<U.length&&56320==(64512&U.charCodeAt(le+1))?(Y=65536+((1023&Y)<<10)+(1023&U.charCodeAt(++le)),L[$++]=Y>>18|240,L[$++]=Y>>12&63|128,L[$++]=Y>>6&63|128,L[$++]=63&Y|128):(L[$++]=Y>>12|224,L[$++]=Y>>6&63|128,L[$++]=63&Y|128)}return L},ie={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(U,L){if(!Array.isArray(U))throw Error("encodeByteArray takes an array as a parameter");this.init_();const $=L?this.byteToCharMapWebSafe_:this.byteToCharMap_,le=[];for(let Y=0;Y<U.length;Y+=3){const Le=U[Y],pt=Y+1<U.length,qt=pt?U[Y+1]:0,pr=Y+2<U.length,Ut=pr?U[Y+2]:0;let cn=(15&qt)<<2|Ut>>6,Qn=63&Ut;pr||(Qn=64,pt||(cn=64)),le.push($[Le>>2],$[(3&Le)<<4|qt>>4],$[cn],$[Qn])}return le.join("")},encodeString(U,L){return this.HAS_NATIVE_SUPPORT&&!L?btoa(U):this.encodeByteArray(J(U),L)},decodeString(U,L){return this.HAS_NATIVE_SUPPORT&&!L?atob(U):function(U){const L=[];let $=0,le=0;for(;$<U.length;){const Y=U[$++];if(Y<128)L[le++]=String.fromCharCode(Y);else if(Y>191&&Y<224){const Le=U[$++];L[le++]=String.fromCharCode((31&Y)<<6|63&Le)}else if(Y>239&&Y<365){const pr=((7&Y)<<18|(63&U[$++])<<12|(63&U[$++])<<6|63&U[$++])-65536;L[le++]=String.fromCharCode(55296+(pr>>10)),L[le++]=String.fromCharCode(56320+(1023&pr))}else{const Le=U[$++],pt=U[$++];L[le++]=String.fromCharCode((15&Y)<<12|(63&Le)<<6|63&pt)}}return L.join("")}(this.decodeStringToByteArray(U,L))},decodeStringToByteArray(U,L){this.init_();const $=L?this.charToByteMapWebSafe_:this.charToByteMap_,le=[];for(let Y=0;Y<U.length;){const Le=$[U.charAt(Y++)],qt=Y<U.length?$[U.charAt(Y)]:0;++Y;const Ut=Y<U.length?$[U.charAt(Y)]:64;++Y;const At=Y<U.length?$[U.charAt(Y)]:64;if(++Y,null==Le||null==qt||null==Ut||null==At)throw Error();le.push(Le<<2|qt>>4),64!==Ut&&(le.push(qt<<4&240|Ut>>2),64!==At&&le.push(Ut<<6&192|At))}return le},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let U=0;U<this.ENCODED_VALS.length;U++)this.byteToCharMap_[U]=this.ENCODED_VALS.charAt(U),this.charToByteMap_[this.byteToCharMap_[U]]=U,this.byteToCharMapWebSafe_[U]=this.ENCODED_VALS_WEBSAFE.charAt(U),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[U]]=U,U>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(U)]=U,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(U)]=U)}}},ue=function(U){return function(U){const L=J(U);return ie.encodeByteArray(L,!0)}(U).replace(/\./g,"")},B=function(U){try{return ie.decodeString(U,!0)}catch(L){console.error("base64Decode failed: ",L)}return null};function Q(U,L){if(!(L instanceof Object))return L;switch(L.constructor){case Date:return new Date(L.getTime());case Object:void 0===U&&(U={});break;case Array:U=[];break;default:return L}for(const $ in L)!L.hasOwnProperty($)||!He($)||(U[$]=Q(U[$],L[$]));return U}function He(U){return"__proto__"!==U}class Te{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((L,$)=>{this.resolve=L,this.reject=$})}wrapCallback(L){return($,le)=>{$?this.reject($):this.resolve(le),"function"==typeof L&&(this.promise.catch(()=>{}),1===L.length?L($):L($,le))}}}function xe(U,L){if(U.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const le=L||"demo-project",Y=U.iat||0,Le=U.sub||U.user_id;if(!Le)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const pt=Object.assign({iss:`https://securetoken.google.com/${le}`,aud:le,iat:Y,exp:Y+3600,auth_time:Y,sub:Le,user_id:Le,firebase:{sign_in_provider:"custom",identities:{}}},U);return[ue(JSON.stringify({alg:"none",type:"JWT"})),ue(JSON.stringify(pt)),""].join(".")}function Pe(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function he(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Pe())}function Ee(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(U){return!1}}function Ye(){return"object"==typeof self&&self.self===self}function Ge(){const U="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof U&&void 0!==U.id}function De(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function ye(){return Pe().indexOf("Electron/")>=0}function ve(){const U=Pe();return U.indexOf("MSIE ")>=0||U.indexOf("Trident/")>=0}function je(){return Pe().indexOf("MSAppHost/")>=0}function ee(){return!Ee()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function q(){return"object"==typeof indexedDB}function te(){return new Promise((U,L)=>{try{let $=!0;const le="validate-browser-context-for-indexeddb-analytics-module",Y=self.indexedDB.open(le);Y.onsuccess=()=>{Y.result.close(),$||self.indexedDB.deleteDatabase(le),U(!0)},Y.onupgradeneeded=()=>{$=!1},Y.onerror=()=>{var Le;L((null===(Le=Y.error)||void 0===Le?void 0:Le.message)||"")}}catch($){L($)}})}function ge(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class se extends Error{constructor(L,$,le){super($),this.code=L,this.customData=le,this.name="FirebaseError",Object.setPrototypeOf(this,se.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Et.prototype.create)}}class Et{constructor(L,$,le){this.service=L,this.serviceName=$,this.errors=le}create(L,...$){const le=$[0]||{},Y=`${this.service}/${L}`,Le=this.errors[L],pt=Le?function Wt(U,L){return U.replace(An,($,le)=>{const Y=L[le];return null!=Y?String(Y):`<${le}?>`})}(Le,le):"Error";return new se(Y,`${this.serviceName}: ${pt} (${Y}).`,le)}}const An=/\{\$([^}]+)}/g;function Kt(U,L){return Object.prototype.hasOwnProperty.call(U,L)}function tr(U){for(const L in U)if(Object.prototype.hasOwnProperty.call(U,L))return!1;return!0}function hs(U,L){if(U===L)return!0;const $=Object.keys(U),le=Object.keys(L);for(const Y of $){if(!le.includes(Y))return!1;const Le=U[Y],pt=L[Y];if(Dr(Le)&&Dr(pt)){if(!hs(Le,pt))return!1}else if(Le!==pt)return!1}for(const Y of le)if(!$.includes(Y))return!1;return!0}function Dr(U){return null!==U&&"object"==typeof U}function Ri(U){const L=[];for(const[$,le]of Object.entries(U))Array.isArray(le)?le.forEach(Y=>{L.push(encodeURIComponent($)+"="+encodeURIComponent(Y))}):L.push(encodeURIComponent($)+"="+encodeURIComponent(le));return L.length?"&"+L.join("&"):""}function br(U){const L={};return U.replace(/^\?/,"").split("&").forEach(le=>{if(le){const[Y,Le]=le.split("=");L[decodeURIComponent(Y)]=decodeURIComponent(Le)}}),L}function Hi(U){const L=U.indexOf("?");if(!L)return"";const $=U.indexOf("#",L);return U.substring(L,$>0?$:void 0)}function ut(U,L){const $=new Vr(U,L);return $.subscribe.bind($)}class Vr{constructor(L,$){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=$,this.task.then(()=>{L(this)}).catch(le=>{this.error(le)})}next(L){this.forEachObserver($=>{$.next(L)})}error(L){this.forEachObserver($=>{$.error(L)}),this.close(L)}complete(){this.forEachObserver(L=>{L.complete()}),this.close()}subscribe(L,$,le){let Y;if(void 0===L&&void 0===$&&void 0===le)throw new Error("Missing Observer.");Y=function Bn(U,L){if("object"!=typeof U||null===U)return!1;for(const $ of L)if($ in U&&"function"==typeof U[$])return!0;return!1}(L,["next","error","complete"])?L:{next:L,error:$,complete:le},void 0===Y.next&&(Y.next=oi),void 0===Y.error&&(Y.error=oi),void 0===Y.complete&&(Y.complete=oi);const Le=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?Y.error(this.finalError):Y.complete()}catch(pt){}}),this.observers.push(Y),Le}unsubscribeOne(L){void 0===this.observers||void 0===this.observers[L]||(delete this.observers[L],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(L){if(!this.finalized)for(let $=0;$<this.observers.length;$++)this.sendOne($,L)}sendOne(L,$){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[L])try{$(this.observers[L])}catch(le){"undefined"!=typeof console&&console.error&&console.error(le)}})}close(L){this.finalized||(this.finalized=!0,void 0!==L&&(this.finalError=L),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function oi(){}function Hs(U,L=1e3,$=2){const le=L*Math.pow($,U),Y=Math.round(.5*le*(Math.random()-.5)*2);return Math.min(144e5,le+Y)}function lt(U){return U&&U._delegate?U._delegate:U}function fr(U,L){return new Promise(($,le)=>{U.onsuccess=Y=>{$(Y.target.result)},U.onerror=Y=>{var Le;le(`${L}: ${null===(Le=Y.target.error)||void 0===Le?void 0:Le.message}`)}})}class Nt{constructor(L){this._db=L,this.objectStoreNames=this._db.objectStoreNames}transaction(L,$){return new qe(this._db.transaction.call(this._db,L,$))}createObjectStore(L,$){return new be(this._db.createObjectStore(L,$))}close(){this._db.close()}}class qe{constructor(L){this._transaction=L,this.complete=new Promise(($,le)=>{this._transaction.oncomplete=function(){$()},this._transaction.onerror=()=>{le(this._transaction.error)},this._transaction.onabort=()=>{le(this._transaction.error)}})}objectStore(L){return new be(this._transaction.objectStore(L))}}class be{constructor(L){this._store=L}index(L){return new We(this._store.index(L))}createIndex(L,$,le){return new We(this._store.createIndex(L,$,le))}get(L){return fr(this._store.get(L),"Error reading from IndexedDB")}put(L,$){return fr(this._store.put(L,$),"Error writing to IndexedDB")}delete(L){return fr(this._store.delete(L),"Error deleting from IndexedDB")}clear(){return fr(this._store.clear(),"Error clearing IndexedDB object store")}}class We{constructor(L){this._index=L}get(L){return fr(this._index.get(L),"Error reading from IndexedDB")}}function ct(U,L,$){return new Promise((le,Y)=>{try{const Le=indexedDB.open(U,L);Le.onsuccess=pt=>{le(new Nt(pt.target.result))},Le.onerror=pt=>{var qt;Y(`Error opening indexedDB: ${null===(qt=pt.target.error)||void 0===qt?void 0:qt.message}`)},Le.onupgradeneeded=pt=>{$(new Nt(Le.result),pt.oldVersion,pt.newVersion,new qe(Le.transaction))}}catch(Le){Y(`Error opening indexedDB: ${Le.message}`)}})}function Pt(U){return xt.apply(this,arguments)}function xt(){return(xt=(0,g.Z)(function*(U){return new Promise((L,$)=>{try{const le=indexedDB.deleteDatabase(U);le.onsuccess=()=>{L()},le.onerror=Y=>{var Le;$(`Error deleting indexedDB database "${U}": ${null===(Le=Y.target.error)||void 0===Le?void 0:Le.message}`)}}catch(le){$(`Error deleting indexedDB database "${U}": ${le.message}`)}})})).apply(this,arguments)}},9554:(it,Ce,k)=>{var g=k(5e3);let Z=null;function O(){return Z}const ie=new g.OlP("DocumentToken");let de=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:function(){return function ue(){return(0,g.LFG)(j)}()},providedIn:"platform"}),n})();const B=new g.OlP("Location Initialized");let j=(()=>{class n extends de{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return O().getBaseHref(this._doc)}onPopState(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,o){Q()?this._history.pushState(t,r,o):this.location.hash=o}replaceState(t,r,o){Q()?this._history.replaceState(t,r,o):this.location.hash=o}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(ie))},n.\u0275prov=g.Yz7({token:n,factory:function(){return function He(){return new j((0,g.LFG)(ie))}()},providedIn:"platform"}),n})();function Q(){return!!window.history.pushState}function Te(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function xe(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Pe(n){return n&&"?"!==n[0]?"?"+n:n}let he=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:function(){return function Ee(n){const e=(0,g.LFG)(ie).location;return new Ge((0,g.LFG)(de),e&&e.origin||"")}()},providedIn:"root"}),n})();const Ye=new g.OlP("appBaseHref");let Ge=(()=>{class n extends he{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Te(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Pe(this._platformLocation.search),o=this._platformLocation.hash;return o&&t?`${r}${o}`:r}pushState(t,r,o,l){const d=this.prepareExternalUrl(o+Pe(l));this._platformLocation.pushState(t,r,d)}replaceState(t,r,o,l){const d=this.prepareExternalUrl(o+Pe(l));this._platformLocation.replaceState(t,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformLocation).historyGo)||void 0===o||o.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(de),g.LFG(Ye,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})(),De=(()=>{class n extends he{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Te(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,o,l){let d=this.prepareExternalUrl(o+Pe(l));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.pushState(t,r,d)}replaceState(t,r,o,l){let d=this.prepareExternalUrl(o+Pe(l));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformLocation).historyGo)||void 0===o||o.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(de),g.LFG(Ye,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})(),ye=(()=>{class n{constructor(t,r){this._subject=new g.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const o=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=xe(Ue(o)),this._platformStrategy.onPopState(l=>{this._subject.emit({url:this.path(!0),pop:!0,state:l.state,type:l.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Pe(r))}normalize(t){return n.stripTrailingSlash(function je(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,Ue(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",o=null){this._platformStrategy.pushState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Pe(r)),o)}replaceState(t,r="",o=null){this._platformStrategy.replaceState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Pe(r)),o)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformStrategy).historyGo)||void 0===o||o.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(o=>o(t,r))}subscribe(t,r,o){return this._subject.subscribe({next:t,error:r,complete:o})}}return n.normalizeQueryParams=Pe,n.joinWithSlash=Te,n.stripTrailingSlash=xe,n.\u0275fac=function(t){return new(t||n)(g.LFG(he),g.LFG(de))},n.\u0275prov=g.Yz7({token:n,factory:function(){return function ve(){return new ye((0,g.LFG)(he),(0,g.LFG)(de))}()},providedIn:"root"}),n})();function Ue(n){return n.replace(/\/index.html$/,"")}let Co=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({}),n})();function sr(n){return"server"===n}let Ha=(()=>{class n{}return n.\u0275prov=(0,g.Yz7)({token:n,providedIn:"root",factory:()=>new Ga((0,g.LFG)(ie),window)}),n})();class Ga{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Jo(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let o=r.currentNode;for(;o;){const l=o.shadowRoot;if(l){const d=l.getElementById(e)||l.querySelector(`[name="${e}"]`);if(d)return d}o=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,o=t.top+this.window.pageYOffset,l=this.offset();this.window.scrollTo(r-l[0],o-l[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Zi(this.window.history)||Zi(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function Zi(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class ws extends class To extends class pe{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function J(n){Z||(Z=n)}(new ws)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Pc(){return nn=nn||document.querySelector("base"),nn?nn.getAttribute("href"):null}();return null==t?null:function Zs(n){Ks=Ks||document.createElement("a"),Ks.setAttribute("href",n);const e=Ks.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){nn=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function Io(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[o,l]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(o.trim()===e)return decodeURIComponent(l)}return null}(document.cookie,e)}}let Ks,nn=null;const mr=new g.OlP("TRANSITION_ID"),Xo=[{provide:g.ip1,useFactory:function Mn(n,e,t){return()=>{t.get(g.CZH).donePromise.then(()=>{const r=O(),o=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let l=0;l<o.length;l++)r.remove(o[l])})}},deps:[mr,ie,g.zs3],multi:!0}];class wi{static init(){(0,g.VLi)(new wi)}addToWindow(e){g.dqk.getAngularTestability=(r,o=!0)=>{const l=e.findTestabilityInTree(r,o);if(null==l)throw new Error("Could not find testability for element.");return l},g.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),g.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),g.dqk.frameworkStabilizers||(g.dqk.frameworkStabilizers=[]),g.dqk.frameworkStabilizers.push(r=>{const o=g.dqk.getAllAngularTestabilities();let l=o.length,d=!1;const m=function(w){d=d||w,l--,0==l&&r(d)};o.forEach(function(w){w.whenStable(m)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const o=e.getTestability(t);return null!=o?o:r?O().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let yr=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const Is=new g.OlP("EventManagerPlugins");let Yi=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(o=>o.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,o){return this._findPluginFor(r).addEventListener(t,r,o)}addGlobalEventListener(t,r,o){return this._findPluginFor(r).addGlobalEventListener(t,r,o)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const o=this._plugins;for(let l=0;l<o.length;l++){const d=o[l];if(d.supports(t))return this._eventNameToPlugin.set(t,d),d}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(Is),g.LFG(g.R0b))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();class qa{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const o=O().getGlobalEventTarget(this._doc,e);if(!o)throw new Error(`Unsupported event target ${o} for event ${t}`);return this.addEventListener(o,t,r)}}let $r=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(o=>{this._stylesSet.has(o)||(this._stylesSet.add(o),r.add(o))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})(),Ds=(()=>{class n extends $r{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,o){t.forEach(l=>{const d=this._doc.createElement("style");d.textContent=l,o.push(r.appendChild(d))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(bs),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,o)=>{this._addStylesToHost(t,o,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(bs))}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(ie))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();function bs(n){O().remove(n)}const dt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},za=/%COMP%/g;function we(n,e,t){for(let r=0;r<e.length;r++){let o=e[r];Array.isArray(o)?we(n,o,t):(o=o.replace(za,n),t.push(o))}return t}function Rt(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let pn=(()=>{class n{constructor(t,r,o){this.eventManager=t,this.sharedStylesHost=r,this.appId=o,this.rendererByCompId=new Map,this.defaultRenderer=new Ao(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case g.ifc.Emulated:{let o=this.rendererByCompId.get(r.id);return o||(o=new el(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,o)),o.applyToHost(t),o}case 1:case g.ifc.ShadowDom:return new tl(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const o=we(r.id,r.styles,[]);this.sharedStylesHost.addStyles(o),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(Yi),g.LFG(Ds),g.LFG(g.AFp))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();class Ao{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(dt[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,o){if(o){t=o+":"+t;const l=dt[o];l?e.setAttributeNS(l,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const o=dt[r];o?e.removeAttributeNS(o,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,o){o&(g.JOm.DashCase|g.JOm.Important)?e.style.setProperty(t,r,o&g.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&g.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Rt(r)):this.eventManager.addEventListener(e,t,Rt(r))}}class el extends Ao{constructor(e,t,r,o){super(e),this.component=r;const l=we(o+"-"+r.id,r.styles,[]);t.addStyles(l),this.contentAttr=function Ju(n){return"_ngcontent-%COMP%".replace(za,n)}(o+"-"+r.id),this.hostAttr=function Xu(n){return"_nghost-%COMP%".replace(za,n)}(o+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class tl extends Ao{constructor(e,t,r,o){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const l=we(o.id,o.styles,[]);for(let d=0;d<l.length;d++){const m=document.createElement("style");m.textContent=l[d],this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Fc=(()=>{class n extends qa{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,o){return t.addEventListener(r,o,!1),()=>this.removeEventListener(t,r,o)}removeEventListener(t,r,o){return t.removeEventListener(r,o)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(ie))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const nl=["alt","control","meta","shift"],Cs={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},or={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},ci={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Qa=(()=>{class n extends qa{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,o){const l=n.parseEventName(r),d=n.eventCallback(l.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>O().onAndCancel(t,l.domEventName,d))}static parseEventName(t){const r=t.toLowerCase().split("."),o=r.shift();if(0===r.length||"keydown"!==o&&"keyup"!==o)return null;const l=n._normalizeKey(r.pop());let d="";if(nl.forEach(w=>{const C=r.indexOf(w);C>-1&&(r.splice(C,1),d+=w+".")}),d+=l,0!=r.length||0===l.length)return null;const m={};return m.domEventName=o,m.fullKey=d,m}static getEventFullKey(t){let r="",o=function Ts(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&or.hasOwnProperty(e)&&(e=or[e]))}return Cs[e]||e}(t);return o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),nl.forEach(l=>{l!=o&&ci[l](t)&&(r+=l+".")}),r+=o,r}static eventCallback(t,r,o){return l=>{n.getEventFullKey(l)===t&&o.runGuarded(()=>r(l))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(ie))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const il=(0,g.eFA)(g._c5,"browser",[{provide:g.Lbi,useValue:"browser"},{provide:g.g9A,useValue:function Ii(){ws.makeCurrent(),wi.init()},multi:!0},{provide:ie,useFactory:function Ja(){return(0,g.RDi)(document),document},deps:[]}]),ta=[{provide:g.zSh,useValue:"root"},{provide:g.qLn,useFactory:function rl(){return new g.qLn},deps:[]},{provide:Is,useClass:Fc,multi:!0,deps:[ie,g.R0b,g.Lbi]},{provide:Is,useClass:Qa,multi:!0,deps:[ie]},{provide:pn,useClass:pn,deps:[Yi,Ds,g.AFp]},{provide:g.FYo,useExisting:pn},{provide:$r,useExisting:Ds},{provide:Ds,useClass:Ds,deps:[ie]},{provide:g.dDg,useClass:g.dDg,deps:[g.R0b]},{provide:Yi,useClass:Yi,deps:[Is,g.R0b]},{provide:class hn{},useClass:yr,deps:[]}];let na=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:g.AFp,useValue:t.appId},{provide:mr,useExisting:g.AFp},Xo]}}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(n,12))},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:ta,imports:[Co,g.hGG]}),n})();"undefined"!=typeof window&&window;var xn=k(8996),gn=k(8306);const{isArray:hl}=Array,{getPrototypeOf:Xi,prototype:fl,keys:ia}=Object;var Qt=k(8421),xo=k(7669),mn=k(5403),Ct=k(4004);const{isArray:Ms}=Array;let ss=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({}),n})(),l0=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({imports:[[ss]]}),n})(),xl=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({imports:[l0]}),n})();function Xe(...n){const e=(0,xo.yG)(n);return(0,xn.D)(n,e)}var gi=k(7579);class Ti extends gi.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}var Er=k(4671),Rl=k(9672);function nf(...n){const e=(0,xo.yG)(n),t=(0,xo.jO)(n),{args:r,keys:o}=function eo(n){if(1===n.length){const e=n[0];if(hl(e))return{args:e,keys:null};if(function Gc(n){return n&&"object"==typeof n&&Xi(n)===fl}(e)){const t=ia(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}(n);if(0===r.length)return(0,xn.D)([],e);const l=new gn.y(function fy(n,e,t=Er.y){return r=>{Nl(e,()=>{const{length:o}=n,l=new Array(o);let d=o,m=o;for(let w=0;w<o;w++)Nl(e,()=>{const C=(0,xn.D)(n[w],e);let x=!1;C.subscribe((0,mn.x)(r,N=>{l[w]=N,x||(x=!0,m--),m||r.next(t(l.slice()))},()=>{--d||r.complete()}))},r)},r)}}(r,e,o?d=>function tu(n,e){return n.reduce((t,r,o)=>(t[r]=e[o],t),{})}(o,d):Er.y));return t?l.pipe(function pl(n){return(0,Ct.U)(e=>function Pp(n,e){return Ms(e)?n(...e):n(e)}(n,e))}(t)):l}function Nl(n,e,t){n?(0,Rl.f)(t,n,e):e()}var Ol=k(576);function Pl(n,e){const t=(0,Ol.m)(n)?n:()=>n,r=o=>o.error(t());return new gn.y(e?o=>e.schedule(r,0,o):r)}const ld=(0,k(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Ai=k(8189);function rf(...n){return function rg(){return(0,Ai.J)(1)}()((0,xn.D)(n,(0,xo.yG)(n)))}function cd(n){return new gn.y(e=>{(0,Qt.Xf)(n()).subscribe(e)})}var du=k(515),sf=k(727),ln=k(4482);function dd(){return(0,ln.e)((n,e)=>{let t=null;n._refCount++;const r=(0,mn.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const o=n._connection,l=t;t=null,o&&(!l||o===l)&&o.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class of extends gn.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,ln.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new sf.w0;const t=this.getSubject();e.add(this.source.subscribe((0,mn.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=sf.w0.EMPTY)}return e}refCount(){return dd()(this)}}function Yr(n,e){return(0,ln.e)((t,r)=>{let o=null,l=0,d=!1;const m=()=>d&&!o&&r.complete();t.subscribe((0,mn.x)(r,w=>{null==o||o.unsubscribe();let C=0;const x=l++;(0,Qt.Xf)(n(w,x)).subscribe(o=(0,mn.x)(r,N=>r.next(e?e(w,N,x,C++):N),()=>{o=null,m()}))},()=>{d=!0,m()}))})}var os=k(5698);function Fo(...n){const e=(0,xo.yG)(n);return(0,ln.e)((t,r)=>{(e?rf(n,t,e):rf(n,t)).subscribe(r)})}function af(n,e,t,r,o){return(l,d)=>{let m=t,w=e,C=0;l.subscribe((0,mn.x)(d,x=>{const N=C++;w=m?n(w,x,N):(m=!0,x),r&&d.next(w)},o&&(()=>{m&&d.next(w),d.complete()})))}}function hu(n,e){return(0,ln.e)(af(n,e,arguments.length>=2,!0))}function uo(n,e){return(0,ln.e)((t,r)=>{let o=0;t.subscribe((0,mn.x)(r,l=>n.call(e,l,o++)&&r.next(l)))})}function Ps(n){return(0,ln.e)((e,t)=>{let l,r=null,o=!1;r=e.subscribe((0,mn.x)(t,void 0,void 0,d=>{l=(0,Qt.Xf)(n(d,Ps(n)(e))),r?(r.unsubscribe(),r=null,l.subscribe(t)):o=!0})),o&&(r.unsubscribe(),r=null,l.subscribe(t))})}var Mr=k(5577);function kl(n,e){return(0,Ol.m)(e)?(0,Mr.z)(n,e,1):(0,Mr.z)(n,1)}function uf(n){return n<=0?()=>du.E:(0,ln.e)((e,t)=>{let r=[];e.subscribe((0,mn.x)(t,o=>{r.push(o),n<r.length&&r.shift()},()=>{for(const o of r)t.next(o);t.complete()},void 0,()=>{r=null}))})}function ig(n=y){return(0,ln.e)((e,t)=>{let r=!1;e.subscribe((0,mn.x)(t,o=>{r=!0,t.next(o)},()=>r?t.complete():t.error(n())))})}function y(){return new ld}function h(n){return(0,ln.e)((e,t)=>{let r=!1;e.subscribe((0,mn.x)(t,o=>{r=!0,t.next(o)},()=>{r||t.next(n),t.complete()}))})}function v(n,e){const t=arguments.length>=2;return r=>r.pipe(n?uo((o,l)=>n(o,l,r)):Er.y,(0,os.q)(1),t?h(e):ig(()=>new ld))}var T=k(8505);class G{constructor(e,t){this.id=e,this.url=t}}class ne extends G{constructor(e,t,r="imperative",o=null){super(e,t),this.navigationTrigger=r,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class ke extends G{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Ke extends G{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class gt extends G{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class ot extends G{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Cn extends G{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Fi extends G{constructor(e,t,r,o,l){super(e,t),this.urlAfterRedirects=r,this.state=o,this.shouldActivate=l}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Fl extends G{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class hd extends G{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class fu{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class fd{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class py{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Lo{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class pd{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class lf{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class gd{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Mt="primary";class gy{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Vo(n){return new gy(n)}const sg="ngNavigationCancelingError";function my(n){const e=Error("NavigationCancelingError: "+n);return e[sg]=!0,e}function YI(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const o={};for(let l=0;l<r.length;l++){const d=r[l],m=n[l];if(d.startsWith(":"))o[d.substring(1)]=m;else if(d!==m.path)return null}return{consumed:n.slice(0,r.length),posParams:o}}function ks(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let o;for(let l=0;l<t.length;l++)if(o=t[l],!yy(n[o],e[o]))return!1;return!0}function yy(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((o,l)=>r[l]===o)}return n===e}function og(n){return Array.prototype.concat.apply([],n)}function d0(n){return n.length>0?n[n.length-1]:null}function xr(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function lo(n){return(0,g.CqO)(n)?n:(0,g.QGY)(n)?(0,xn.D)(Promise.resolve(n)):Xe(n)}const h0={exact:function p0(n,e,t){if(!ya(n.segments,e.segments)||!md(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!p0(n.children[r],e.children[r],t))return!1;return!0},subset:vy},_y={exact:function ag(n,e){return ks(n,e)},subset:function g0(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>yy(n[t],e[t]))},ignored:()=>!0};function f0(n,e,t){return h0[t.paths](n.root,e.root,t.matrixParams)&&_y[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function vy(n,e,t){return Ey(n,e,e.segments,t)}function Ey(n,e,t,r){if(n.segments.length>t.length){const o=n.segments.slice(0,t.length);return!(!ya(o,t)||e.hasChildren()||!md(o,t,r))}if(n.segments.length===t.length){if(!ya(n.segments,t)||!md(n.segments,t,r))return!1;for(const o in e.children)if(!n.children[o]||!vy(n.children[o],e.children[o],r))return!1;return!0}{const o=t.slice(0,n.segments.length),l=t.slice(n.segments.length);return!!(ya(n.segments,o)&&md(n.segments,o,r)&&n.children[Mt])&&Ey(n.children[Mt],e,l,r)}}function md(n,e,t){return e.every((r,o)=>_y[t](n[o].parameters,r.parameters))}class pu{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Vo(this.queryParams)),this._queryParamMap}toString(){return QI.serialize(this)}}class Ft{constructor(e,t){this.segments=e,this.children=t,this.parent=null,xr(t,(r,o)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return cf(this)}}class gu{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Vo(this.parameters)),this._parameterMap}toString(){return v0(this)}}function ya(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class ug{}class yd{parse(e){const t=new rD(e);return new pu(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${df(e.root,!0)}`,r=function JI(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(o=>`${hf(t)}=${hf(o)}`).join("&"):`${hf(t)}=${hf(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function wy(n){return encodeURI(n)}(e.fragment)}`:""}`}}const QI=new yd;function cf(n){return n.segments.map(e=>v0(e)).join("/")}function df(n,e){if(!n.hasChildren())return cf(n);if(e){const t=n.children[Mt]?df(n.children[Mt],!1):"",r=[];return xr(n.children,(o,l)=>{l!==Mt&&r.push(`${l}:${df(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function y0(n,e){let t=[];return xr(n.children,(r,o)=>{o===Mt&&(t=t.concat(e(r,o)))}),xr(n.children,(r,o)=>{o!==Mt&&(t=t.concat(e(r,o)))}),t}(n,(r,o)=>o===Mt?[df(n.children[Mt],!1)]:[`${o}:${df(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Mt]?`${cf(n)}/${t[0]}`:`${cf(n)}/(${t.join("//")})`}}function _0(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function hf(n){return _0(n).replace(/%3B/gi,";")}function lg(n){return _0(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Iy(n){return decodeURIComponent(n)}function Dy(n){return Iy(n.replace(/\+/g,"%20"))}function v0(n){return`${lg(n.path)}${function E0(n){return Object.keys(n).map(e=>`;${lg(e)}=${lg(n[e])}`).join("")}(n.parameters)}`}const XI=/^[^\/()?;=#]+/;function Li(n){const e=n.match(XI);return e?e[0]:""}const eD=/^[^=?&#]+/,tD=/^[^&#]+/;class rD{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ft([],{}):new Ft([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Mt]=new Ft(e,t)),r}parseSegment(){const e=Li(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new gu(Iy(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Li(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=Li(this.remaining);o&&(r=o,this.capture(r))}e[Iy(t)]=Iy(r)}parseQueryParam(e){const t=function w0(n){const e=n.match(eD);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const d=function nD(n){const e=n.match(tD);return e?e[0]:""}(this.remaining);d&&(r=d,this.capture(r))}const o=Dy(t),l=Dy(r);if(e.hasOwnProperty(o)){let d=e[o];Array.isArray(d)||(d=[d],e[o]=d),d.push(l)}else e[o]=l}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Li(this.remaining),o=this.remaining[r.length];if("/"!==o&&")"!==o&&";"!==o)throw new Error(`Cannot parse url '${this.url}'`);let l;r.indexOf(":")>-1?(l=r.substr(0,r.indexOf(":")),this.capture(l),this.capture(":")):e&&(l=Mt);const d=this.parseChildren();t[l]=1===Object.keys(d).length?d[Mt]:new Ft([],d),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class I0{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=cg(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=cg(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=by(e,this._root);return t.length<2?[]:t[t.length-2].children.map(o=>o.value).filter(o=>o!==e)}pathFromRoot(e){return by(e,this._root).map(t=>t.value)}}function cg(n,e){if(n===e.value)return e;for(const t of e.children){const r=cg(n,t);if(r)return r}return null}function by(n,e){if(n===e.value)return[e];for(const t of e.children){const r=by(n,t);if(r.length)return r.unshift(e),r}return[]}class _a{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function _d(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class Tt extends I0{constructor(e,t){super(e),this.snapshot=t,gf(this,e)}toString(){return this.snapshot.toString()}}function Cy(n,e){const t=function D0(n,e){const d=new pf([],{},{},"",{},Mt,e,null,n.root,-1,{});return new b0("",new _a(d,[]))}(n,e),r=new Ti([new gu("",{})]),o=new Ti({}),l=new Ti({}),d=new Ti({}),m=new Ti(""),w=new Vl(r,o,d,m,l,Mt,e,t.root);return w.snapshot=t.root,new Tt(new _a(w,[]),t)}class Vl{constructor(e,t,r,o,l,d,m,w){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=l,this.outlet=d,this.component=m,this._futureSnapshot=w}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Ct.U)(e=>Vo(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Ct.U)(e=>Vo(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function ff(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const o=t[r],l=t[r-1];if(o.routeConfig&&""===o.routeConfig.path)r--;else{if(l.component)break;r--}}return function co(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class pf{constructor(e,t,r,o,l,d,m,w,C,x,N){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=l,this.outlet=d,this.component=m,this.routeConfig=w,this._urlSegment=C,this._lastPathIndex=x,this._resolve=N}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Vo(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Vo(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class b0 extends I0{constructor(e,t){super(t),this.url=e,gf(this,t)}toString(){return Uo(this._root)}}function gf(n,e){e.value._routerState=n,e.children.forEach(t=>gf(n,t))}function Uo(n){const e=n.children.length>0?` { ${n.children.map(Uo).join(", ")} } `:"";return`${n.value}${e}`}function mf(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,ks(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),ks(e.params,t.params)||n.params.next(t.params),function c0(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!ks(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),ks(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function dg(n,e){const t=ks(n.params,e.params)&&function m0(n,e){return ya(n,e)&&n.every((t,r)=>ks(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||dg(n.parent,e.parent))}function hg(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const o=function C0(n,e,t){return e.children.map(r=>{for(const o of t.children)if(n.shouldReuseRoute(r.value,o.value.snapshot))return hg(n,r,o);return hg(n,r)})}(n,e,t);return new _a(r,o)}{if(n.shouldAttach(e.value)){const l=n.retrieve(e.value);if(null!==l){const d=l.route;return d.value._futureSnapshot=e.value,d.children=e.children.map(m=>hg(n,m)),d}}const r=function ZT(n){return new Vl(new Ti(n.url),new Ti(n.params),new Ti(n.queryParams),new Ti(n.fragment),new Ti(n.data),n.outlet,n.component,n)}(e.value),o=e.children.map(l=>hg(n,l));return new _a(r,o)}}function Ul(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Bl(n){return"object"==typeof n&&null!=n&&n.outlets}function yf(n,e,t,r,o){let l={};if(r&&xr(r,(m,w)=>{l[w]=Array.isArray(m)?m.map(C=>`${C}`):`${m}`}),n===e)return new pu(t,l,o);const d=pg(n,e,t);return new pu(d,l,o)}function pg(n,e,t){const r={};return xr(n.children,(o,l)=>{r[l]=o===e?t:pg(o,e,t)}),new Ft(n.segments,r)}class iD{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Ul(r[0]))throw new Error("Root segment cannot have matrix parameters");const o=r.find(Bl);if(o&&o!==d0(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Ay{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function uD(n,e,t){if(n||(n=new Ft([],{})),0===n.segments.length&&n.hasChildren())return gg(n,e,t);const r=function YT(n,e,t){let r=0,o=e;const l={match:!1,pathIndex:0,commandIndex:0};for(;o<n.segments.length;){if(r>=t.length)return l;const d=n.segments[o],m=t[r];if(Bl(m))break;const w=`${m}`,C=r<t.length-1?t[r+1]:null;if(o>0&&void 0===w)break;if(w&&C&&"object"==typeof C&&void 0===C.outlets){if(!yg(w,C,d))return l;r+=2}else{if(!yg(w,{},d))return l;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}(n,e,t),o=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const l=new Ft(n.segments.slice(0,r.pathIndex),{});return l.children[Mt]=new Ft(n.segments.slice(r.pathIndex),n.children),gg(l,0,o)}return r.match&&0===o.length?new Ft(n.segments,{}):r.match&&!n.hasChildren()?mg(n,e,t):r.match?gg(n,0,o):mg(n,e,t)}function gg(n,e,t){if(0===t.length)return new Ft(n.segments,{});{const r=function T0(n){return Bl(n[0])?n[0].outlets:{[Mt]:n}}(t),o={};return xr(r,(l,d)=>{"string"==typeof l&&(l=[l]),null!==l&&(o[d]=uD(n.children[d],e,l))}),xr(n.children,(l,d)=>{void 0===r[d]&&(o[d]=l)}),new Ft(n.segments,o)}}function mg(n,e,t){const r=n.segments.slice(0,e);let o=0;for(;o<t.length;){const l=t[o];if(Bl(l)){const w=A0(l.outlets);return new Ft(r,w)}if(0===o&&Ul(t[0])){r.push(new gu(n.segments[e].path,S0(t[0]))),o++;continue}const d=Bl(l)?l.outlets[Mt]:`${l}`,m=o<t.length-1?t[o+1]:null;d&&m&&Ul(m)?(r.push(new gu(d,S0(m))),o+=2):(r.push(new gu(d,{})),o++)}return new Ft(r,{})}function A0(n){const e={};return xr(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=mg(new Ft([],{}),0,t))}),e}function S0(n){const e={};return xr(n,(t,r)=>e[r]=`${t}`),e}function yg(n,e,t){return n==t.path&&ks(e,t.parameters)}class JT{constructor(e,t,r,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=o}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),mf(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const o=_d(t);e.children.forEach(l=>{const d=l.value.outlet;this.deactivateRoutes(l,o[d],r),delete o[d]}),xr(o,(l,d)=>{this.deactivateRouteAndItsChildren(l,r)})}deactivateRoutes(e,t,r){const o=e.value,l=t?t.value:null;if(o===l)if(o.component){const d=r.getContext(o.outlet);d&&this.deactivateChildRoutes(e,t,d.children)}else this.deactivateChildRoutes(e,t,r);else l&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,l=_d(e);for(const d of Object.keys(l))this.deactivateRouteAndItsChildren(l[d],o);if(r&&r.outlet){const d=r.outlet.detach(),m=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:d,route:e,contexts:m})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,l=_d(e);for(const d of Object.keys(l))this.deactivateRouteAndItsChildren(l[d],o);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const o=_d(t);e.children.forEach(l=>{this.activateRoutes(l,o[l.value.outlet],r),this.forwardEvent(new lf(l.value.snapshot))}),e.children.length&&this.forwardEvent(new Lo(e.value.snapshot))}activateRoutes(e,t,r){const o=e.value,l=t?t.value:null;if(mf(o),o===l)if(o.component){const d=r.getOrCreateContext(o.outlet);this.activateChildRoutes(e,t,d.children)}else this.activateChildRoutes(e,t,r);else if(o.component){const d=r.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){const m=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),d.children.onOutletReAttached(m.contexts),d.attachRef=m.componentRef,d.route=m.route.value,d.outlet&&d.outlet.attach(m.componentRef,m.route.value),mf(m.route.value),this.activateChildRoutes(e,null,d.children)}else{const m=function XT(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(o.snapshot),w=m?m.module.componentFactoryResolver:null;d.attachRef=null,d.route=o,d.resolver=w,d.outlet&&d.outlet.activateWith(o,w),this.activateChildRoutes(e,null,d.children)}}else this.activateChildRoutes(e,null,r)}}class M0{constructor(e,t){this.routes=e,this.module=t}}function jl(n){return"function"==typeof n}function vd(n){return n instanceof pu}const $l=Symbol("INITIAL_VALUE");function _f(){return Yr(n=>nf(n.map(e=>e.pipe((0,os.q)(1),Fo($l)))).pipe(hu((e,t)=>{let r=!1;return t.reduce((o,l,d)=>o!==$l?o:(l===$l&&(r=!0),r||!1!==l&&d!==t.length-1&&!vd(l)?o:l),e)},$l),uo(e=>e!==$l),(0,Ct.U)(e=>vd(e)?e:!0===e),(0,os.q)(1)))}class x0{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Hl,this.attachRef=null}}class Hl{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new x0,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let _g=(()=>{class n{constructor(t,r,o,l,d){this.parentContexts=t,this.location=r,this.resolver=o,this.changeDetector=d,this.activated=null,this._activatedRoute=null,this.activateEvents=new g.vpe,this.deactivateEvents=new g.vpe,this.attachEvents=new g.vpe,this.detachEvents=new g.vpe,this.name=l||Mt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const d=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),m=this.parentContexts.getOrCreateContext(this.name).children,w=new Sy(t,m,this.location.injector);this.activated=this.location.createComponent(d,this.location.length,w),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(Hl),g.Y36(g.s_b),g.Y36(g._Vd),g.$8M("name"),g.Y36(g.sBO))},n.\u0275dir=g.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class Sy{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Vl?this.route:e===Hl?this.childContexts:this.parent.get(e,t)}}let R0=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=g.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&g._UZ(0,"router-outlet")},directives:[_g],encapsulation:2}),n})();function va(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];N0(r,lD(e,r))}}function N0(n,e){n.children&&va(n.children,e)}function lD(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function vf(n){const e=n.children&&n.children.map(vf),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Mt&&(t.component=R0),t}function Fs(n){return n.outlet||Mt}function My(n,e){const t=n.filter(r=>Fs(r)===e);return t.push(...n.filter(r=>Fs(r)!==e)),t}const O0={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function vg(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},O0):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const l=(e.matcher||YI)(t,n,e);if(!l)return Object.assign({},O0);const d={};xr(l.posParams,(w,C)=>{d[C]=w.path});const m=l.consumed.length>0?Object.assign(Object.assign({},d),l.consumed[l.consumed.length-1].parameters):d;return{matched:!0,consumedSegments:l.consumed,remainingSegments:t.slice(l.consumed.length),parameters:m,positionalParamSegments:null!==(r=l.posParams)&&void 0!==r?r:{}}}function yu(n,e,t,r,o="corrected"){if(t.length>0&&function wd(n,e,t){return t.some(r=>Ea(n,e,r)&&Fs(r)!==Mt)}(n,t,r)){const d=new Ft(e,function xy(n,e,t,r){const o={};o[Mt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const l of t)if(""===l.path&&Fs(l)!==Mt){const d=new Ft([],{});d._sourceSegment=n,d._segmentIndexShift=e.length,o[Fs(l)]=d}return o}(n,e,r,new Ft(t,n.children)));return d._sourceSegment=n,d._segmentIndexShift=e.length,{segmentGroup:d,slicedSegments:[]}}if(0===t.length&&function Ef(n,e,t){return t.some(r=>Ea(n,e,r))}(n,t,r)){const d=new Ft(n.segments,function Ed(n,e,t,r,o,l){const d={};for(const m of r)if(Ea(n,t,m)&&!o[Fs(m)]){const w=new Ft([],{});w._sourceSegment=n,w._segmentIndexShift="legacy"===l?n.segments.length:e.length,d[Fs(m)]=w}return Object.assign(Object.assign({},o),d)}(n,e,t,r,n.children,o));return d._sourceSegment=n,d._segmentIndexShift=e.length,{segmentGroup:d,slicedSegments:t}}const l=new Ft(n.segments,n.children);return l._sourceSegment=n,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:t}}function Ea(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function P0(n,e,t,r){return!!(Fs(n)===r||r!==Mt&&Ea(e,t,n))&&("**"===n.path||vg(e,n,t).matched)}function Ry(n,e,t){return 0===e.length&&!n.children[t]}class wf{constructor(e){this.segmentGroup=e||null}}class Eg{constructor(e){this.urlTree=e}}function Gl(n){return Pl(new wf(n))}function Ny(n){return Pl(new Eg(n))}class iA{constructor(e,t,r,o,l){this.configLoader=t,this.urlSerializer=r,this.urlTree=o,this.config=l,this.allowRedirects=!0,this.ngModule=e.get(g.h0i)}apply(){const e=yu(this.urlTree.root,[],[],this.config).segmentGroup,t=new Ft(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,Mt).pipe((0,Ct.U)(l=>this.createUrlTree(Ig(l),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Ps(l=>{if(l instanceof Eg)return this.allowRedirects=!1,this.match(l.urlTree);throw l instanceof wf?this.noMatchError(l):l}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,Mt).pipe((0,Ct.U)(o=>this.createUrlTree(Ig(o),e.queryParams,e.fragment))).pipe(Ps(o=>{throw o instanceof wf?this.noMatchError(o):o}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const o=e.segments.length>0?new Ft([],{[Mt]:e}):e;return new pu(o,t,r)}expandSegmentGroup(e,t,r,o){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,Ct.U)(l=>new Ft([],l))):this.expandSegment(e,r,t,r.segments,o,!0)}expandChildren(e,t,r){const o=[];for(const l of Object.keys(r.children))"primary"===l?o.unshift(l):o.push(l);return(0,xn.D)(o).pipe(kl(l=>{const d=r.children[l],m=My(t,l);return this.expandSegmentGroup(e,m,d,l).pipe((0,Ct.U)(w=>({segment:w,outlet:l})))}),hu((l,d)=>(l[d.outlet]=d.segment,l),{}),function p(n,e){const t=arguments.length>=2;return r=>r.pipe(n?uo((o,l)=>n(o,l,r)):Er.y,uf(1),t?h(e):ig(()=>new ld))}())}expandSegment(e,t,r,o,l,d){return(0,xn.D)(r).pipe(kl(m=>this.expandSegmentAgainstRoute(e,t,r,m,o,l,d).pipe(Ps(C=>{if(C instanceof wf)return Xe(null);throw C}))),v(m=>!!m),Ps((m,w)=>{if(m instanceof ld||"EmptyError"===m.name)return Ry(t,o,l)?Xe(new Ft([],{})):Gl(t);throw m}))}expandSegmentAgainstRoute(e,t,r,o,l,d,m){return P0(o,t,l,d)?void 0===o.redirectTo?this.matchSegmentAgainstRoute(e,t,o,l,d):m&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,o,l,d):Gl(t):Gl(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,o,l,d){return"**"===o.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,o,d):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,l,d)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,o){const l=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?Ny(l):this.lineralizeSegments(r,l).pipe((0,Mr.z)(d=>{const m=new Ft(d,{});return this.expandSegment(e,m,t,d,o,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,l,d){const{matched:m,consumedSegments:w,remainingSegments:C,positionalParamSegments:x}=vg(t,o,l);if(!m)return Gl(t);const N=this.applyRedirectCommands(w,o.redirectTo,x);return o.redirectTo.startsWith("/")?Ny(N):this.lineralizeSegments(o,N).pipe((0,Mr.z)(H=>this.expandSegment(e,t,r,H.concat(C),d,!1)))}matchSegmentAgainstRoute(e,t,r,o,l){if("**"===r.path)return r.loadChildren?(r._loadedConfig?Xe(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,Ct.U)(N=>(r._loadedConfig=N,new Ft(o,{})))):Xe(new Ft(o,{}));const{matched:d,consumedSegments:m,remainingSegments:w}=vg(t,r,o);return d?this.getChildConfig(e,r,o).pipe((0,Mr.z)(x=>{const N=x.module,H=x.routes,{segmentGroup:K,slicedSegments:fe}=yu(t,m,w,H),Fe=new Ft(K.segments,K.children);if(0===fe.length&&Fe.hasChildren())return this.expandChildren(N,H,Fe).pipe((0,Ct.U)(wn=>new Ft(m,wn)));if(0===H.length&&0===fe.length)return Xe(new Ft(m,{}));const rt=Fs(r)===l;return this.expandSegment(N,Fe,H,fe,rt?Mt:l,!0).pipe((0,Ct.U)(ht=>new Ft(m.concat(ht.segments),ht.children)))})):Gl(t)}getChildConfig(e,t,r){return t.children?Xe(new M0(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?Xe(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,Mr.z)(o=>o?this.configLoader.load(e.injector,t).pipe((0,Ct.U)(l=>(t._loadedConfig=l,l))):function cD(n){return Pl(my(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))}(t))):Xe(new M0([],e))}runCanLoadGuards(e,t,r){const o=t.canLoad;return o&&0!==o.length?Xe(o.map(d=>{const m=e.get(d);let w;if(function tA(n){return n&&jl(n.canLoad)}(m))w=m.canLoad(t,r);else{if(!jl(m))throw new Error("Invalid CanLoad guard");w=m(t,r)}return lo(w)})).pipe(_f(),(0,T.b)(d=>{if(!vd(d))return;const m=my(`Redirecting to "${this.urlSerializer.serialize(d)}"`);throw m.url=d,m}),(0,Ct.U)(d=>!0===d)):Xe(!0)}lineralizeSegments(e,t){let r=[],o=t.root;for(;;){if(r=r.concat(o.segments),0===o.numberOfChildren)return Xe(r);if(o.numberOfChildren>1||!o.children[Mt])return Pl(new Error(`Only absolute redirects can have named outlets. redirectTo: '${e.redirectTo}'`));o=o.children[Mt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,o){const l=this.createSegmentGroup(e,t.root,r,o);return new pu(l,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return xr(e,(o,l)=>{if("string"==typeof o&&o.startsWith(":")){const m=o.substring(1);r[l]=t[m]}else r[l]=o}),r}createSegmentGroup(e,t,r,o){const l=this.createSegments(e,t.segments,r,o);let d={};return xr(t.children,(m,w)=>{d[w]=this.createSegmentGroup(e,m,r,o)}),new Ft(l,d)}createSegments(e,t,r,o){return t.map(l=>l.path.startsWith(":")?this.findPosParam(e,l,o):this.findOrReturn(l,r))}findPosParam(e,t,r){const o=r[t.path.substring(1)];if(!o)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return o}findOrReturn(e,t){let r=0;for(const o of t){if(o.path===e.path)return t.splice(r),o;r++}return e}}function Ig(n){const e={};for(const r of Object.keys(n.children)){const l=Ig(n.children[r]);(l.segments.length>0||l.hasChildren())&&(e[r]=l)}return function F0(n){if(1===n.numberOfChildren&&n.children[Mt]){const e=n.children[Mt];return new Ft(n.segments.concat(e.segments),e.children)}return n}(new Ft(n.segments,e))}class Oy{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Dg{constructor(e,t){this.component=e,this.route=t}}function hD(n,e,t){const r=n._root;return Cg(r,e?e._root:null,t,[r.value])}function bg(n,e,t){const r=function fD(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function Cg(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const l=_d(e);return n.children.forEach(d=>{(function sA(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const l=n.value,d=e?e.value:null,m=t?t.getContext(n.value.outlet):null;if(d&&l.routeConfig===d.routeConfig){const w=function L0(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!ya(n.url,e.url);case"pathParamsOrQueryParamsChange":return!ya(n.url,e.url)||!ks(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!dg(n,e)||!ks(n.queryParams,e.queryParams);default:return!dg(n,e)}}(d,l,l.routeConfig.runGuardsAndResolvers);w?o.canActivateChecks.push(new Oy(r)):(l.data=d.data,l._resolvedData=d._resolvedData),Cg(n,e,l.component?m?m.children:null:t,r,o),w&&m&&m.outlet&&m.outlet.isActivated&&o.canDeactivateChecks.push(new Dg(m.outlet.component,d))}else d&&Tg(e,m,o),o.canActivateChecks.push(new Oy(r)),Cg(n,null,l.component?m?m.children:null:t,r,o)})(d,l[d.value.outlet],t,r.concat([d.value]),o),delete l[d.value.outlet]}),xr(l,(d,m)=>Tg(d,t.getContext(m),o)),o}function Tg(n,e,t){const r=_d(n),o=n.value;xr(r,(l,d)=>{Tg(l,o.component?e?e.children.getContext(d):null:e,t)}),t.canDeactivateChecks.push(new Dg(o.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,o))}class B0{}function j0(n){return new gn.y(e=>e.error(n))}class $0{constructor(e,t,r,o,l,d){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=o,this.paramsInheritanceStrategy=l,this.relativeLinkResolution=d}recognize(){const e=yu(this.urlTree.root,[],[],this.config.filter(d=>void 0===d.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,Mt);if(null===t)return null;const r=new pf([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Mt,this.rootComponentType,null,this.urlTree.root,-1,{}),o=new _a(r,t),l=new b0(this.url,o);return this.inheritParamsAndData(l._root),l}inheritParamsAndData(e){const t=e.value,r=ff(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(o=>this.inheritParamsAndData(o))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const l of Object.keys(t.children)){const d=t.children[l],m=My(e,l),w=this.processSegmentGroup(m,d,l);if(null===w)return null;r.push(...w)}const o=Ag(r);return function H0(n){n.sort((e,t)=>e.value.outlet===Mt?-1:t.value.outlet===Mt?1:e.value.outlet.localeCompare(t.value.outlet))}(o),o}processSegment(e,t,r,o){for(const l of e){const d=this.processSegmentAgainstRoute(l,t,r,o);if(null!==d)return d}return Ry(t,r,o)?[]:null}processSegmentAgainstRoute(e,t,r,o){if(e.redirectTo||!P0(e,t,r,o))return null;let l,d=[],m=[];if("**"===e.path){const K=r.length>0?d0(r).parameters:{};l=new pf(r,K,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,ky(e),Fs(e),e.component,e,G0(t),wD(t)+r.length,q0(e))}else{const K=vg(t,e,r);if(!K.matched)return null;d=K.consumedSegments,m=K.remainingSegments,l=new pf(d,K.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,ky(e),Fs(e),e.component,e,G0(t),wD(t)+d.length,q0(e))}const w=function ED(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:C,slicedSegments:x}=yu(t,d,m,w.filter(K=>void 0===K.redirectTo),this.relativeLinkResolution);if(0===x.length&&C.hasChildren()){const K=this.processChildren(w,C);return null===K?null:[new _a(l,K)]}if(0===w.length&&0===x.length)return[new _a(l,[])];const N=Fs(e)===o,H=this.processSegment(w,C,x,N?Mt:o);return null===H?null:[new _a(l,H)]}}function Bo(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function Ag(n){const e=[],t=new Set;for(const r of n){if(!Bo(r)){e.push(r);continue}const o=e.find(l=>r.value.routeConfig===l.value.routeConfig);void 0!==o?(o.children.push(...r.children),t.add(o)):e.push(r)}for(const r of t){const o=Ag(r.children);e.push(new _a(r.value,o))}return e.filter(r=>!t.has(r))}function G0(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function wD(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function ky(n){return n.data||{}}function q0(n){return n.resolve||{}}function z0(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function If(n){return Yr(e=>{const t=n(e);return t?(0,xn.D)(t).pipe((0,Ct.U)(()=>e)):Xe(e)})}class Vy extends class Ly{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const Mg=new g.OlP("ROUTES");class W0{constructor(e,t,r,o){this.injector=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=o}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const o=this.loadModuleFactory(t.loadChildren).pipe((0,Ct.U)(l=>{this.onLoadEndListener&&this.onLoadEndListener(t);const d=l.create(e);return new M0(og(d.injector.get(Mg,void 0,g.XFs.Self|g.XFs.Optional)).map(vf),d)}),Ps(l=>{throw t._loader$=void 0,l}));return t._loader$=new of(o,()=>new gi.x).pipe(dd()),t._loader$}loadModuleFactory(e){return lo(e()).pipe((0,Mr.z)(t=>t instanceof g.YKP?Xe(t):(0,xn.D)(this.compiler.compileModuleAsync(t))))}}class Uy{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function aA(n){throw n}function AD(n,e,t){return e.parse("/")}function By(n,e){return Xe(null)}const K0={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Z0={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Vi=(()=>{class n{constructor(t,r,o,l,d,m,w){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=o,this.location=l,this.config=w,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new gi.x,this.errorHandler=aA,this.malformedUriErrorHandler=AD,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:By,afterPreactivation:By},this.urlHandlingStrategy=new Uy,this.routeReuseStrategy=new Vy,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=d.get(g.h0i),this.console=d.get(g.c2e);const N=d.get(g.R0b);this.isNgZoneEnabled=N instanceof g.R0b&&g.R0b.isInAngularZone(),this.resetConfig(w),this.currentUrlTree=function Ll(){return new pu(new Ft([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new W0(d,m,H=>this.triggerEvent(new fu(H)),H=>this.triggerEvent(new fd(H))),this.routerState=Cy(this.currentUrlTree,this.rootComponentType),this.transitions=new Ti({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(uo(o=>0!==o.id),(0,Ct.U)(o=>Object.assign(Object.assign({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),Yr(o=>{let l=!1,d=!1;return Xe(o).pipe((0,T.b)(m=>{this.currentNavigation={id:m.id,initialUrl:m.currentRawUrl,extractedUrl:m.extractedUrl,trigger:m.source,extras:m.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Yr(m=>{const w=this.browserUrlTree.toString(),C=!this.navigated||m.extractedUrl.toString()!==w||w!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||C)&&this.urlHandlingStrategy.shouldProcessUrl(m.rawUrl))return jo(m.source)&&(this.browserUrlTree=m.extractedUrl),Xe(m).pipe(Yr(N=>{const H=this.transitions.getValue();return r.next(new ne(N.id,this.serializeUrl(N.extractedUrl),N.source,N.restoredState)),H!==this.transitions.getValue()?du.E:Promise.resolve(N)}),function dD(n,e,t,r){return Yr(o=>function k0(n,e,t,r,o){return new iA(n,e,t,r,o).apply()}(n,e,t,o.extractedUrl,r).pipe((0,Ct.U)(l=>Object.assign(Object.assign({},o),{urlAfterRedirects:l}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,T.b)(N=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:N.urlAfterRedirects})}),function ID(n,e,t,r,o){return(0,Mr.z)(l=>function vD(n,e,t,r,o="emptyOnly",l="legacy"){try{const d=new $0(n,e,t,r,o,l).recognize();return null===d?j0(new B0):Xe(d)}catch(d){return j0(d)}}(n,e,l.urlAfterRedirects,t(l.urlAfterRedirects),r,o).pipe((0,Ct.U)(d=>Object.assign(Object.assign({},l),{targetSnapshot:d}))))}(this.rootComponentType,this.config,N=>this.serializeUrl(N),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,T.b)(N=>{if("eager"===this.urlUpdateStrategy){if(!N.extras.skipLocationChange){const K=this.urlHandlingStrategy.merge(N.urlAfterRedirects,N.rawUrl);this.setBrowserUrl(K,N)}this.browserUrlTree=N.urlAfterRedirects}const H=new ot(N.id,this.serializeUrl(N.extractedUrl),this.serializeUrl(N.urlAfterRedirects),N.targetSnapshot);r.next(H)}));if(C&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:H,extractedUrl:K,source:fe,restoredState:Fe,extras:rt}=m,zt=new ne(H,this.serializeUrl(K),fe,Fe);r.next(zt);const ht=Cy(K,this.rootComponentType).snapshot;return Xe(Object.assign(Object.assign({},m),{targetSnapshot:ht,urlAfterRedirects:K,extras:Object.assign(Object.assign({},rt),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=m.rawUrl,m.resolve(null),du.E}),If(m=>{const{targetSnapshot:w,id:C,extractedUrl:x,rawUrl:N,extras:{skipLocationChange:H,replaceUrl:K}}=m;return this.hooks.beforePreactivation(w,{navigationId:C,appliedUrlTree:x,rawUrlTree:N,skipLocationChange:!!H,replaceUrl:!!K})}),(0,T.b)(m=>{const w=new Cn(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot);this.triggerEvent(w)}),(0,Ct.U)(m=>Object.assign(Object.assign({},m),{guards:hD(m.targetSnapshot,m.currentSnapshot,this.rootContexts)})),function pD(n,e){return(0,Mr.z)(t=>{const{targetSnapshot:r,currentSnapshot:o,guards:{canActivateChecks:l,canDeactivateChecks:d}}=t;return 0===d.length&&0===l.length?Xe(Object.assign(Object.assign({},t),{guardsResult:!0})):function Py(n,e,t,r){return(0,xn.D)(n).pipe((0,Mr.z)(o=>function _D(n,e,t,r,o){const l=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return l&&0!==l.length?Xe(l.map(m=>{const w=bg(m,e,o);let C;if(function mu(n){return n&&jl(n.canDeactivate)}(w))C=lo(w.canDeactivate(n,e,t,r));else{if(!jl(w))throw new Error("Invalid CanDeactivate guard");C=lo(w(n,e,t,r))}return C.pipe(v())})).pipe(_f()):Xe(!0)}(o.component,o.route,t,e,r)),v(o=>!0!==o,!0))}(d,r,o,n).pipe((0,Mr.z)(m=>m&&function eA(n){return"boolean"==typeof n}(m)?function V0(n,e,t,r){return(0,xn.D)(e).pipe(kl(o=>rf(function mD(n,e){return null!==n&&e&&e(new py(n)),Xe(!0)}(o.route.parent,r),function gD(n,e){return null!==n&&e&&e(new pd(n)),Xe(!0)}(o.route,r),function U0(n,e,t){const r=e[e.length-1],l=e.slice(0,e.length-1).reverse().map(d=>function as(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(d)).filter(d=>null!==d).map(d=>cd(()=>Xe(d.guards.map(w=>{const C=bg(w,d.node,t);let x;if(function rA(n){return n&&jl(n.canActivateChild)}(C))x=lo(C.canActivateChild(r,n));else{if(!jl(C))throw new Error("Invalid CanActivateChild guard");x=lo(C(r,n))}return x.pipe(v())})).pipe(_f())));return Xe(l).pipe(_f())}(n,o.path,t),function yD(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Xe(!0);const o=r.map(l=>cd(()=>{const d=bg(l,e,t);let m;if(function nA(n){return n&&jl(n.canActivate)}(d))m=lo(d.canActivate(e,n));else{if(!jl(d))throw new Error("Invalid CanActivate guard");m=lo(d(e,n))}return m.pipe(v())}));return Xe(o).pipe(_f())}(n,o.route,t))),v(o=>!0!==o,!0))}(r,l,n,e):Xe(m)),(0,Ct.U)(m=>Object.assign(Object.assign({},t),{guardsResult:m})))})}(this.ngModule.injector,m=>this.triggerEvent(m)),(0,T.b)(m=>{if(vd(m.guardsResult)){const C=my(`Redirecting to "${this.serializeUrl(m.guardsResult)}"`);throw C.url=m.guardsResult,C}const w=new Fi(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot,!!m.guardsResult);this.triggerEvent(w)}),uo(m=>!!m.guardsResult||(this.restoreHistory(m),this.cancelNavigationTransition(m,""),!1)),If(m=>{if(m.guards.canActivateChecks.length)return Xe(m).pipe((0,T.b)(w=>{const C=new Fl(w.id,this.serializeUrl(w.extractedUrl),this.serializeUrl(w.urlAfterRedirects),w.targetSnapshot);this.triggerEvent(C)}),Yr(w=>{let C=!1;return Xe(w).pipe(function DD(n,e){return(0,Mr.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:o}}=t;if(!o.length)return Xe(t);let l=0;return(0,xn.D)(o).pipe(kl(d=>function Fy(n,e,t,r){return function bD(n,e,t,r){const o=z0(n);if(0===o.length)return Xe({});const l={};return(0,xn.D)(o).pipe((0,Mr.z)(d=>function Sg(n,e,t,r){const o=bg(n,e,r);return lo(o.resolve?o.resolve(e,t):o(e,t))}(n[d],e,t,r).pipe((0,T.b)(m=>{l[d]=m}))),uf(1),(0,Mr.z)(()=>z0(l).length===o.length?Xe(l):du.E))}(n._resolve,n,e,r).pipe((0,Ct.U)(l=>(n._resolvedData=l,n.data=Object.assign(Object.assign({},n.data),ff(n,t).resolve),null)))}(d.route,r,n,e)),(0,T.b)(()=>l++),uf(1),(0,Mr.z)(d=>l===o.length?Xe(t):du.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,T.b)({next:()=>C=!0,complete:()=>{C||(this.restoreHistory(w),this.cancelNavigationTransition(w,"At least one route resolver didn't emit any value."))}}))}),(0,T.b)(w=>{const C=new hd(w.id,this.serializeUrl(w.extractedUrl),this.serializeUrl(w.urlAfterRedirects),w.targetSnapshot);this.triggerEvent(C)}))}),If(m=>{const{targetSnapshot:w,id:C,extractedUrl:x,rawUrl:N,extras:{skipLocationChange:H,replaceUrl:K}}=m;return this.hooks.afterPreactivation(w,{navigationId:C,appliedUrlTree:x,rawUrlTree:N,skipLocationChange:!!H,replaceUrl:!!K})}),(0,Ct.U)(m=>{const w=function Ty(n,e,t){const r=hg(n,e._root,t?t._root:void 0);return new Tt(r,e)}(this.routeReuseStrategy,m.targetSnapshot,m.currentRouterState);return Object.assign(Object.assign({},m),{targetRouterState:w})}),(0,T.b)(m=>{this.currentUrlTree=m.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(m.urlAfterRedirects,m.rawUrl),this.routerState=m.targetRouterState,"deferred"===this.urlUpdateStrategy&&(m.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,m),this.browserUrlTree=m.urlAfterRedirects)}),((n,e,t)=>(0,Ct.U)(r=>(new JT(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,m=>this.triggerEvent(m)),(0,T.b)({next(){l=!0},complete(){l=!0}}),function R(n){return(0,ln.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}(()=>{var m;l||d||this.cancelNavigationTransition(o,`Navigation ID ${o.id} is not equal to the current navigation id ${this.navigationId}`),(null===(m=this.currentNavigation)||void 0===m?void 0:m.id)===o.id&&(this.currentNavigation=null)}),Ps(m=>{if(d=!0,function ZI(n){return n&&n[sg]}(m)){const w=vd(m.url);w||(this.navigated=!0,this.restoreHistory(o,!0));const C=new Ke(o.id,this.serializeUrl(o.extractedUrl),m.message);r.next(C),w?setTimeout(()=>{const x=this.urlHandlingStrategy.merge(m.url,this.rawUrlTree),N={skipLocationChange:o.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||jo(o.source)};this.scheduleNavigation(x,"imperative",null,N,{resolve:o.resolve,reject:o.reject,promise:o.promise})},0):o.resolve(!1)}else{this.restoreHistory(o,!0);const w=new gt(o.id,this.serializeUrl(o.extractedUrl),m);r.next(w);try{o.resolve(this.errorHandler(m))}catch(C){o.reject(C)}}return du.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var o;const l={replaceUrl:!0},d=(null===(o=t.state)||void 0===o?void 0:o.navigationId)?t.state:null;if(d){const w=Object.assign({},d);delete w.navigationId,delete w.\u0275routerPageId,0!==Object.keys(w).length&&(l.state=w)}const m=this.parseUrl(t.url);this.scheduleNavigation(m,r,d,l)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){va(t),this.config=t.map(vf),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:o,queryParams:l,fragment:d,queryParamsHandling:m,preserveFragment:w}=r,C=o||this.routerState.root,x=w?this.currentUrlTree.fragment:d;let N=null;switch(m){case"merge":N=Object.assign(Object.assign({},this.currentUrlTree.queryParams),l);break;case"preserve":N=this.currentUrlTree.queryParams;break;default:N=l||null}return null!==N&&(N=this.removeEmptyProps(N)),function fg(n,e,t,r,o){if(0===t.length)return yf(e.root,e.root,e.root,r,o);const l=function sD(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new iD(!0,0,n);let e=0,t=!1;const r=n.reduce((o,l,d)=>{if("object"==typeof l&&null!=l){if(l.outlets){const m={};return xr(l.outlets,(w,C)=>{m[C]="string"==typeof w?w.split("/"):w}),[...o,{outlets:m}]}if(l.segmentPath)return[...o,l.segmentPath]}return"string"!=typeof l?[...o,l]:0===d?(l.split("/").forEach((m,w)=>{0==w&&"."===m||(0==w&&""===m?t=!0:".."===m?e++:""!=m&&o.push(m))}),o):[...o,l]},[]);return new iD(t,e,r)}(t);if(l.toRoot())return yf(e.root,e.root,new Ft([],{}),r,o);const d=function oD(n,e,t){if(n.isAbsolute)return new Ay(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const l=t.snapshot._urlSegment;return new Ay(l,l===e.root,0)}const r=Ul(n.commands[0])?0:1;return function aD(n,e,t){let r=n,o=e,l=t;for(;l>o;){if(l-=o,r=r.parent,!r)throw new Error("Invalid number of '../'");o=r.segments.length}return new Ay(r,!1,o-l)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(l,e,n),m=d.processChildren?gg(d.segmentGroup,d.index,l.commands):uD(d.segmentGroup,d.index,l.commands);return yf(e.root,d.segmentGroup,m,r,o)}(C,this.currentUrlTree,t,N,null!=x?x:null)}navigateByUrl(t,r={skipLocationChange:!1}){const o=vd(t)?t:this.parseUrl(t),l=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(l,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function Y0(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(o){r=this.malformedUriErrorHandler(o,this.urlSerializer,t)}return r}isActive(t,r){let o;if(o=!0===r?Object.assign({},K0):!1===r?Object.assign({},Z0):r,vd(t))return f0(this.currentUrlTree,t,o);const l=this.parseUrl(t);return f0(this.currentUrlTree,l,o)}removeEmptyProps(t){return Object.keys(t).reduce((r,o)=>{const l=t[o];return null!=l&&(r[o]=l),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new ke(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,o,l,d){var m,w;if(this.disposed)return Promise.resolve(!1);let C,x,N;d?(C=d.resolve,x=d.reject,N=d.promise):N=new Promise((fe,Fe)=>{C=fe,x=Fe});const H=++this.navigationId;let K;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(o=this.location.getState()),K=o&&o.\u0275routerPageId?o.\u0275routerPageId:l.replaceUrl||l.skipLocationChange?null!==(m=this.browserPageId)&&void 0!==m?m:0:(null!==(w=this.browserPageId)&&void 0!==w?w:0)+1):K=0,this.setTransition({id:H,targetPageId:K,source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:l,resolve:C,reject:x,promise:N,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),N.catch(fe=>Promise.reject(fe))}setBrowserUrl(t,r){const o=this.urlSerializer.serialize(t),l=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl?this.location.replaceState(o,"",l):this.location.go(o,"",l)}restoreHistory(t,r=!1){var o,l;if("computed"===this.canceledNavigationResolution){const d=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(o=this.currentNavigation)||void 0===o?void 0:o.finalUrl)||0===d?this.currentUrlTree===(null===(l=this.currentNavigation)||void 0===l?void 0:l.finalUrl)&&0===d&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(d)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const o=new Ke(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(o),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){g.$Z()},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();function jo(n){return"imperative"!==n}let ql=(()=>{class n{constructor(t,r,o,l,d){this.router=t,this.route=r,this.tabIndexAttribute=o,this.renderer=l,this.el=d,this.commands=null,this.onChanges=new gi.x,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const r=this.renderer,o=this.el.nativeElement;null!==t?r.setAttribute(o,"tabindex",t):r.removeAttribute(o,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const t={skipLocationChange:Id(this.skipLocationChange),replaceUrl:Id(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Id(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(Vi),g.Y36(Vl),g.$8M("tabindex"),g.Y36(g.Qsj),g.Y36(g.SBq))},n.\u0275dir=g.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,r){1&t&&g.NdJ("click",function(){return r.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[g.TTD]}),n})();function Id(n){return""===n||!!n}class Hy{}class Dd{preload(e,t){return Xe(null)}}let Q0=(()=>{class n{constructor(t,r,o,l){this.router=t,this.injector=o,this.preloadingStrategy=l,this.loader=new W0(o,r,w=>t.triggerEvent(new fu(w)),w=>t.triggerEvent(new fd(w)))}setUpPreloading(){this.subscription=this.router.events.pipe(uo(t=>t instanceof ke),kl(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(g.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const o=[];for(const l of r)if(l.loadChildren&&!l.canLoad&&l._loadedConfig){const d=l._loadedConfig;o.push(this.processRoutes(d.module,d.routes))}else l.loadChildren&&!l.canLoad?o.push(this.preloadConfig(t,l)):l.children&&o.push(this.processRoutes(t,l.children));return(0,xn.D)(o).pipe((0,Ai.J)(),(0,Ct.U)(l=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?Xe(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,Mr.z)(l=>(r._loadedConfig=l,this.processRoutes(l.module,l.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(Vi),g.LFG(g.Sil),g.LFG(g.zs3),g.LFG(Hy))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})(),Df=(()=>{class n{constructor(t,r,o={}){this.router=t,this.viewportScroller=r,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof ne?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof ke&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof gd&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new gd(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){g.$Z()},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const _u=new g.OlP("ROUTER_CONFIGURATION"),qy=new g.OlP("ROUTER_FORROOT_GUARD"),MD=[ye,{provide:ug,useClass:yd},{provide:Vi,useFactory:function RD(n,e,t,r,o,l,d={},m,w){const C=new Vi(null,n,e,t,r,o,og(l));return m&&(C.urlHandlingStrategy=m),w&&(C.routeReuseStrategy=w),function ND(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(d,C),d.enableTracing&&C.events.subscribe(x=>{var N,H;null===(N=console.group)||void 0===N||N.call(console,`Router Event: ${x.constructor.name}`),console.log(x.toString()),console.log(x),null===(H=console.groupEnd)||void 0===H||H.call(console)}),C},deps:[ug,Hl,ye,g.zs3,g.Sil,Mg,_u,[class TD{},new g.FiY],[class CD{},new g.FiY]]},Hl,{provide:Vl,useFactory:function Cd(n){return n.routerState.root},deps:[Vi]},Q0,Dd,class Gy{preload(e,t){return t().pipe(Ps(()=>Xe(null)))}},{provide:_u,useValue:{enableTracing:!1}}];function zy(){return new g.PXZ("Router",Vi)}let J0=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[MD,Wy(t),{provide:qy,useFactory:bd,deps:[[Vi,new g.FiY,new g.tp0]]},{provide:_u,useValue:r||{}},{provide:he,useFactory:X0,deps:[de,[new g.tBr(Ye),new g.FiY],_u]},{provide:Df,useFactory:xD,deps:[Vi,Ha,_u]},{provide:Hy,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:Dd},{provide:g.PXZ,multi:!0,useFactory:zy},[Ky,{provide:g.ip1,multi:!0,useFactory:OD,deps:[Ky]},{provide:eE,useFactory:PD,deps:[Ky]},{provide:g.tb,multi:!0,useExisting:eE}]]}}static forChild(t){return{ngModule:n,providers:[Wy(t)]}}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(qy,8),g.LFG(Vi,8))},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({}),n})();function xD(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new Df(n,e,t)}function X0(n,e,t={}){return t.useHash?new De(n,e):new Ge(n,e)}function bd(n){return"guarded"}function Wy(n){return[{provide:g.deG,multi:!0,useValue:n},{provide:Mg,multi:!0,useValue:n}]}let Ky=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new gi.x}appInitializer(){return this.injector.get(B,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const o=new Promise(m=>r=m),l=this.injector.get(Vi),d=this.injector.get(_u);return"disabled"===d.initialNavigation?(l.setUpLocationChangeListener(),r(!0)):"enabled"===d.initialNavigation||"enabledBlocking"===d.initialNavigation?(l.hooks.afterPreactivation=()=>this.initNavigation?Xe(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),l.initialNavigation()):r(!0),o})}bootstrapListener(t){const r=this.injector.get(_u),o=this.injector.get(Q0),l=this.injector.get(Df),d=this.injector.get(Vi),m=this.injector.get(g.z2F);t===m.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&d.initialNavigation(),o.setUpPreloading(),l.init(),d.resetRootComponentType(m.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(g.zs3))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();function OD(n){return n.appInitializer.bind(n)}function PD(n){return n.bootstrapListener.bind(n)}const eE=new g.OlP("Router Initializer");var nE=k(4986),Qr=k(5813);function xg(){return(0,ln.e)((n,e)=>{let t,r=!1;n.subscribe((0,mn.x)(e,o=>{const l=t;t=o,r&&e.next([l,o]),r=!0}))})}function kD(n,e){return n===e}var Ze,fo=k(2011),FD=(k(4087),k(3942)),_e=k(5861),Td=k(9681),bf=k(4859),vu=k(1877),jt=k(2090),cA="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Eu={},Zy=Zy||{},It=cA||self;function Cf(){}function iE(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Si(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var sE="closure_uid_"+(1e9*Math.random()>>>0),oE=0;function aE(n,e,t){return n.call.apply(n.bind,arguments)}function uE(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var o=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(o,r),n.apply(e,o)}}return function(){return n.apply(e,arguments)}}function Jr(n,e,t){return(Jr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?aE:uE).apply(null,arguments)}function Yy(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Rr(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,o,l){for(var d=Array(arguments.length-2),m=2;m<arguments.length;m++)d[m-2]=arguments[m];return e.prototype[o].apply(r,d)}}function $o(){this.s=this.s,this.o=this.o}var Qy={};$o.prototype.s=!1,$o.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function dA(n){return Object.prototype.hasOwnProperty.call(n,sE)&&n[sE]||(n[sE]=++oE)}(this);delete Qy[n]}},$o.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const lE=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},cE=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,o="string"==typeof n?n.split(""):n;for(let l=0;l<r;l++)l in o&&e.call(t,o[l],l,n)};function dE(n){return Array.prototype.concat.apply([],arguments)}function Jy(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function Rg(n){return/^[\s\xa0]*$/.test(n)}var wr,Tf=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function ar(n,e){return-1!=n.indexOf(e)}function Xy(n,e){return n<e?-1:n>e?1:0}e:{var hE=It.navigator;if(hE){var fE=hE.userAgent;if(fE){wr=fE;break e}}wr=""}function Af(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function po(n){const e={};for(const t in n)e[t]=n[t];return e}var Ad="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Xr(n,e){let t,r;for(let o=1;o<arguments.length;o++){for(t in r=arguments[o],r)n[t]=r[t];for(let l=0;l<Ad.length;l++)t=Ad[l],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function wa(n){return wa[" "](n),n}wa[" "]=Cf;var Ia,n,Ls=ar(wr,"Opera"),wu=ar(wr,"Trident")||ar(wr,"MSIE"),zl=ar(wr,"Edge"),Iu=zl||wu,Wl=ar(wr,"Gecko")&&!(ar(wr.toLowerCase(),"webkit")&&!ar(wr,"Edge"))&&!(ar(wr,"Trident")||ar(wr,"MSIE"))&&!ar(wr,"Edge"),Sd=ar(wr.toLowerCase(),"webkit")&&!ar(wr,"Edge");function Kl(){var n=It.document;return n?n.documentMode:void 0}e:{var Du="",bu=(n=wr,Wl?/rv:([^\);]+)(\)|;)/.exec(n):zl?/Edge\/([\d\.]+)/.exec(n):wu?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):Sd?/WebKit\/(\S+)/.exec(n):Ls?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(bu&&(Du=bu?bu[1]:""),wu){var Cu=Kl();if(null!=Cu&&Cu>parseFloat(Du)){Ia=String(Cu);break e}}Ia=Du}var pE={};var mE=It.document&&wu&&(Kl()||parseInt(Ia,10))||void 0,yE=function(){if(!It.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{It.addEventListener("test",Cf,e),It.removeEventListener("test",Cf,e)}catch(t){}return n}();function ei(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function Md(n,e){if(ei.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(Wl){e:{try{wa(e.nodeName);var o=!0;break e}catch(l){}o=!1}o||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:_E[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Md.Z.h.call(this)}}ei.prototype.h=function(){this.defaultPrevented=!0},Rr(Md,ei);var _E={2:"touch",3:"pen",4:"mouse"};Md.prototype.h=function(){Md.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Sf="closure_listenable_"+(1e6*Math.random()|0),UD=0;function BD(n,e,t,r,o){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=o,this.key=++UD,this.ca=this.fa=!1}function Pg(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function Mf(n){this.src=n,this.g={},this.h=0}function t_(n,e){var t=e.type;if(t in n.g){var l,r=n.g[t],o=lE(r,e);(l=0<=o)&&Array.prototype.splice.call(r,o,1),l&&(Pg(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function n_(n,e,t,r){for(var o=0;o<n.length;++o){var l=n[o];if(!l.ca&&l.listener==e&&l.capture==!!t&&l.ia==r)return o}return-1}Mf.prototype.add=function(n,e,t,r,o){var l=n.toString();(n=this.g[l])||(n=this.g[l]=[],this.h++);var d=n_(n,e,r,o);return-1<d?(e=n[d],t||(e.fa=!1)):((e=new BD(e,this.src,l,!!r,o)).fa=t,n.push(e)),e};var kg="closure_lm_"+(1e6*Math.random()|0),r_={};function i_(n,e,t,r,o){if(r&&r.once)return $D(n,e,t,r,o);if(Array.isArray(e)){for(var l=0;l<e.length;l++)i_(n,e[l],t,r,o);return null}return t=DE(t),n&&n[Sf]?n.N(e,t,Si(r)?!!r.capture:!!r,o):vE(n,e,t,!1,r,o)}function vE(n,e,t,r,o,l){if(!e)throw Error("Invalid event type");var d=Si(o)?!!o.capture:!!o,m=wE(n);if(m||(n[kg]=m=new Mf(n)),(t=m.add(e,t,r,d,l)).proxy)return t;if(r=function jD(){var e=HD;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)yE||(o=d),void 0===o&&(o=!1),n.addEventListener(e.toString(),r,o);else if(n.attachEvent)n.attachEvent(Fg(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function $D(n,e,t,r,o){if(Array.isArray(e)){for(var l=0;l<e.length;l++)$D(n,e[l],t,r,o);return null}return t=DE(t),n&&n[Sf]?n.O(e,t,Si(r)?!!r.capture:!!r,o):vE(n,e,t,!0,r,o)}function EE(n,e,t,r,o){if(Array.isArray(e))for(var l=0;l<e.length;l++)EE(n,e[l],t,r,o);else r=Si(r)?!!r.capture:!!r,t=DE(t),n&&n[Sf]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=n_(l=n.g[e],t,r,o))&&(Pg(l[t]),Array.prototype.splice.call(l,t,1),0==l.length&&(delete n.g[e],n.h--))):n&&(n=wE(n))&&(e=n.g[e.toString()],n=-1,e&&(n=n_(e,t,r,o)),(t=-1<n?e[n]:null)&&xf(t))}function xf(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[Sf])t_(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(Fg(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=wE(e))?(t_(t,n),0==t.h&&(t.src=null,e[kg]=null)):Pg(n)}}}function Fg(n){return n in r_?r_[n]:r_[n]="on"+n}function HD(n,e){if(n.ca)n=!0;else{e=new Md(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&xf(n),n=t.call(r,e)}return n}function wE(n){return(n=n[kg])instanceof Mf?n:null}var IE="__closure_events_fn_"+(1e9*Math.random()>>>0);function DE(n){return"function"==typeof n?n:(n[IE]||(n[IE]=function(e){return n.handleEvent(e)}),n[IE])}function Nr(){$o.call(this),this.i=new Mf(this),this.P=this,this.I=null}function Or(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new ei(e,n);else if(e instanceof ei)e.target=e.target||n;else{var o=e;Xr(e=new ei(r,n),o)}if(o=!0,t)for(var l=t.length-1;0<=l;l--){var d=e.g=t[l];o=s_(d,r,!0,e)&&o}if(o=s_(d=e.g=n,r,!0,e)&&o,o=s_(d,r,!1,e)&&o,t)for(l=0;l<t.length;l++)o=s_(d=e.g=t[l],r,!1,e)&&o}function s_(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var o=!0,l=0;l<e.length;++l){var d=e[l];if(d&&!d.ca&&d.capture==t){var m=d.listener,w=d.ia||d.src;d.fa&&t_(n.i,d),o=!1!==m.call(w,r)&&o}}return o&&!r.defaultPrevented}Rr(Nr,$o),Nr.prototype[Sf]=!0,Nr.prototype.removeEventListener=function(n,e,t,r){EE(this,n,e,t,r)},Nr.prototype.M=function(){if(Nr.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)Pg(t[r]);delete n.g[e],n.h--}}this.I=null},Nr.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Nr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var o_=It.JSON.stringify;function xd(){var n=TE;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var u_,a_=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new qD,n=>n.reset());class qD{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function bE(n){It.setTimeout(()=>{throw n},0)}function Rd(n,e){u_||function CE(){var n=It.Promise.resolve(void 0);u_=function(){n.then(zD)}}(),l_||(u_(),l_=!0),TE.add(n,e)}var l_=!1,TE=new class GD{constructor(){this.h=this.g=null}add(e,t){const r=a_.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function zD(){for(var n;n=xd();){try{n.h.call(n.g)}catch(t){bE(t)}var e=a_;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}l_=!1}function Lg(n,e){Nr.call(this),this.h=n||1,this.g=e||It,this.j=Jr(this.kb,this),this.l=Date.now()}function c_(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function Vg(n,e,t){if("function"==typeof n)t&&(n=Jr(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Jr(n.handleEvent,n)}return 2147483647<Number(e)?-1:It.setTimeout(n,e||0)}function AE(n){n.g=Vg(()=>{n.g=null,n.i&&(n.i=!1,AE(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Rr(Lg,Nr),(Ze=Lg.prototype).da=!1,Ze.S=null,Ze.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Or(this,"tick"),this.da&&(c_(this),this.start()))}},Ze.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Ze.M=function(){Lg.Z.M.call(this),c_(this),delete this.g};class SE extends $o{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:AE(this)}M(){super.M(),this.g&&(It.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Nd(n){$o.call(this),this.h=n,this.g={}}Rr(Nd,$o);var Ug=[];function WD(n,e,t,r){Array.isArray(t)||(t&&(Ug[0]=t.toString()),t=Ug);for(var o=0;o<t.length;o++){var l=i_(e,t[o],r||n.handleEvent,!1,n.h||n);if(!l)break;n.g[l.key]=l}}function Bg(n){Af(n.g,function(e,t){this.g.hasOwnProperty(t)&&xf(e)},n),n.g={}}function jg(){this.g=!0}function Zl(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function h_(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var o=r[1];if(Array.isArray(o)&&!(1>o.length)){var l=o[0];if("noop"!=l&&"stop"!=l&&"close"!=l)for(var d=1;d<o.length;d++)o[d]=""}}}return o_(t)}catch(m){return e}}(n,t)+(r?" "+r:"")})}Nd.prototype.M=function(){Nd.Z.M.call(this),Bg(this)},Nd.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},jg.prototype.Aa=function(){this.g=!1},jg.prototype.info=function(){};var Yl={},Nf=null;function Ql(){return Nf=Nf||new Nr}function $g(n){ei.call(this,Yl.Ma,n)}function Hg(n){const e=Ql();Or(e,new $g(e,n))}function ME(n,e){ei.call(this,Yl.STAT_EVENT,n),this.stat=e}function ti(n){const e=Ql();Or(e,new ME(e,n))}function Gg(n,e){ei.call(this,Yl.Na,n),this.size=e}function Od(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return It.setTimeout(function(){n()},e)}Yl.Ma="serverreachability",Rr($g,ei),Yl.STAT_EVENT="statevent",Rr(ME,ei),Yl.Na="timingevent",Rr(Gg,ei);var qg={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},zg={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Wg(){}function Kg(){}Wg.prototype.h=null;var Yg,Pd={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function p_(){ei.call(this,"d")}function Zg(){ei.call(this,"c")}function kd(){}function Of(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new Nd(this),this.P=KD,this.W=new Lg(n=Iu?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new xE}function xE(){this.i=null,this.g="",this.h=!1}Rr(p_,ei),Rr(Zg,ei),Rr(kd,Wg),kd.prototype.g=function(){return new XMLHttpRequest},kd.prototype.i=function(){return{}},Yg=new kd;var KD=45e3,g_={},Pf={};function kf(n,e,t){n.K=1,n.v=Uf(Da(e)),n.s=t,n.U=!0,m_(n,null)}function m_(n,e){n.F=Date.now(),Fd(n),n.A=Da(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),FE(t.h,"t",r),n.C=0,t=n.l.H,n.h=new xE,n.g=O_(n.l,t?e:null,!n.s),0<n.O&&(n.L=new SE(Jr(n.Ia,n,n.g),n.O)),WD(n.V,n.g,"readystatechange",n.gb),e=n.H?po(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),Hg(1),function hA(n,e,t,r,o,l){n.info(function(){if(n.g)if(l)for(var d="",m=l.split("&"),w=0;w<m.length;w++){var C=m[w].split("=");if(1<C.length){var x=C[0];C=C[1];var N=x.split("_");d=2<=N.length&&"type"==N[1]?d+(x+"=")+C+"&":d+(x+"=redacted&")}}else d=null;else d=l;return"XMLHTTP REQ ("+r+") [attempt "+o+"]: "+e+"\n"+t+"\n"+d})}(n.j,n.u,n.A,n.m,n.X,n.s)}function y_(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function __(n,e,t){let o,r=!0;for(;!n.I&&n.C<t.length;){if(o=RE(n,t),o==Pf){4==e&&(n.o=4,ti(14),r=!1),Zl(n.j,n.m,null,"[Incomplete Response]");break}if(o==g_){n.o=4,ti(15),Zl(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Zl(n.j,n.m,o,null),E_(n,o)}y_(n)&&o!=Pf&&o!=g_&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,ti(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),om(e),e.L=!0,ti(11))):(Zl(n.j,n.m,t,"[Invalid Chunked Response]"),Vd(n),Ld(n))}function RE(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?Pf:(t=Number(e.substring(t,r)),isNaN(t)?g_:(r+=1)+t>e.length?Pf:(e=e.substr(r,t),n.C=r+t,e))}function Fd(n){n.Y=Date.now()+n.P,v_(n,n.P)}function v_(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Od(Jr(n.eb,n),e)}function Ff(n){n.B&&(It.clearTimeout(n.B),n.B=null)}function Ld(n){0==n.l.G||n.I||YE(n.l,n)}function Vd(n){Ff(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,c_(n.W),Bg(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function E_(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||Xg(t.i,n)))if(t.I=n.N,!n.J&&Xg(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch(C){r=null}if(Array.isArray(r)&&3==r.length){var o=r;if(0==o[0])e:if(t.u)t.ta=o[1],0<t.ta-t.U&&37500>o[2]&&t.N&&0==t.A&&!t.v&&(t.v=Od(Jr(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;am(t),Gf(t)}sm(t),ti(18)}if(1>=LE(t.i)&&t.ka){try{t.ka()}catch(C){}t.ka=void 0}}else Wd(t,11)}else if((n.J||t.g==n)&&am(t),!Rg(e))for(o=t.Ca.g.parse(e),e=0;e<o.length;e++){let C=o[e];if(t.U=C[0],C=C[1],2==t.G)if("c"==C[0]){t.J=C[1],t.la=C[2];const x=C[3];null!=x&&(t.ma=x,t.h.info("VER="+t.ma));const N=C[4];null!=N&&(t.za=N,t.h.info("SVER="+t.za));const H=C[5];null!=H&&"number"==typeof H&&0<H&&(t.K=r=1.5*H,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const K=n.g;if(K){const fe=K.g?K.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(fe){var l=r.i;!l.g&&(ar(fe,"spdy")||ar(fe,"quic")||ar(fe,"h2"))&&(l.j=l.l,l.g=new Set,l.h&&(em(l,l.h),l.h=null))}if(r.D){const Fe=K.g?K.g.getResponseHeader("X-HTTP-Session-Id"):null;Fe&&(r.sa=Fe,Nn(r.F,r.D,Fe))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var d=n;if((r=t).oa=ab(r,r.H?r.la:null,r.W),d.J){Bf(r.i,d);var m=d,w=r.K;w&&m.setTimeout(w),m.B&&(Ff(m),Fd(m)),r.g=d}else N_(r);0<t.l.length&&qf(t)}else"stop"!=C[0]&&"close"!=C[0]||Wd(t,7);else 3==t.G&&("stop"==C[0]||"close"==C[0]?"stop"==C[0]?Wd(t,7):S_(t):"noop"!=C[0]&&t.j&&t.j.wa(C),t.A=0)}Hg(4)}catch(C){}}function Qg(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(iE(n)||"string"==typeof n)cE(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(iE(n)||"string"==typeof n){t=[];for(var r=n.length,o=0;o<r;o++)t.push(o)}else for(o in t=[],r=0,n)t[r++]=o;r=function ZD(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(iE(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),o=r.length;for(var l=0;l<o;l++)e.call(void 0,r[l],t&&t[l],n)}}function Ud(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof Ud)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function Jn(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];Tu(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var o={};for(t=e=0;e<n.g.length;)Tu(o,r=n.g[e])||(n.g[t++]=r,o[r]=1),e++;n.g.length=t}}function Tu(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(Ze=Of.prototype).setTimeout=function(n){this.P=n},Ze.gb=function(n){n=n.target;const e=this.L;e&&3==Ta(n)?e.l():this.Ia(n)},Ze.Ia=function(n){try{if(n==this.g)e:{const x=Ta(this.g);var e=this.g.Da();const N=this.g.ba();if(!(3>x)&&(3!=x||Iu||this.g&&(this.h.h||this.g.ga()||WE(this.g)))){this.I||4!=x||7==e||Hg(8==e||0>=N?3:2),Ff(this);var t=this.g.ba();this.N=t;t:if(y_(this)){var r=WE(this.g);n="";var o=r.length,l=4==Ta(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Vd(this),Ld(this);var d="";break t}this.h.i=new It.TextDecoder}for(e=0;e<o;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:l&&e==o-1});r.splice(0,o),this.h.g+=n,this.C=0,d=this.h.g}else d=this.g.ga();if(this.i=200==t,function Rf(n,e,t,r,o,l,d){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+o+"]: "+e+"\n"+t+"\n"+l+" "+d})}(this.j,this.u,this.A,this.m,this.X,x,t),this.i){if(this.$&&!this.J){t:{if(this.g){var m,w=this.g;if((m=w.g?w.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Rg(m)){var C=m;break t}}C=null}if(!(t=C)){this.i=!1,this.o=3,ti(12),Vd(this),Ld(this);break e}Zl(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,E_(this,t)}this.U?(__(this,x,d),Iu&&this.i&&3==x&&(WD(this.V,this.W,"tick",this.fb),this.W.start())):(Zl(this.j,this.m,d,null),E_(this,d)),4==x&&Vd(this),this.i&&!this.I&&(4==x?YE(this.l,this):(this.i=!1,Fd(this)))}else 400==t&&0<d.indexOf("Unknown SID")?(this.o=3,ti(12)):(this.o=0,ti(13)),Vd(this),Ld(this)}}}catch(x){}},Ze.fb=function(){if(this.g){var n=Ta(this.g),e=this.g.ga();this.C<e.length&&(Ff(this),__(this,n,e),this.i&&4!=n&&Fd(this))}},Ze.cancel=function(){this.I=!0,Vd(this)},Ze.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function d_(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Hg(3),ti(17)),Vd(this),this.o=2,Ld(this)):v_(this,this.Y-n)},(Ze=Ud.prototype).R=function(){Jn(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},Ze.T=function(){return Jn(this),this.g.concat()},Ze.get=function(n,e){return Tu(this.h,n)?this.h[n]:e},Ze.set=function(n,e){Tu(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},Ze.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var o=t[r],l=this.get(o);n.call(e,l,o,this)}};var NE=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Au(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof Au){this.g=void 0!==e?e:n.g,Lf(this,n.j),this.s=n.s,Vf(this,n.i),ba(this,n.m),this.l=n.l,e=n.h;var t=new Mi;t.i=e.i,e.g&&(t.g=new Ud(e.g),t.h=e.h),OE(this,t),this.o=n.o}else n&&(t=String(n).match(NE))?(this.g=!!e,Lf(this,t[1]||"",!0),this.s=Jg(t[2]||""),Vf(this,t[3]||"",!0),ba(this,t[4]),this.l=Jg(t[5]||"",!0),OE(this,t[6]||"",!0),this.o=Jg(t[7]||"")):(this.g=!!e,this.h=new Mi(null,this.g))}function Da(n){return new Au(n)}function Lf(n,e,t){n.j=t?Jg(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Vf(n,e,t){n.i=t?Jg(e,!0):e}function ba(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function OE(n,e,t){e instanceof Mi?(n.h=e,function eb(n,e){e&&!n.j&&(Ca(n),n.i=null,n.g.forEach(function(t,r){var o=r.toLowerCase();r!=o&&(I_(this,r),FE(this,o,t))},n)),n.j=e}(n.h,n.g)):(t||(e=Bd(e,Ho)),n.h=new Mi(e,n.g))}function Nn(n,e,t){n.h.set(e,t)}function Uf(n){return Nn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Jg(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Bd(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,w_),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function w_(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Au.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Bd(e,go,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Bd(e,go,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(Bd(t,"/"==t.charAt(0)?XD:JD,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Bd(t,mo)),n.join("")};var go=/[#\/\?@]/g,JD=/[#\?:]/g,XD=/[#\?]/g,Ho=/[#\?@]/g,mo=/#/g;function Mi(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Ca(n){n.g||(n.g=new Ud,n.h=0,n.i&&function YD(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),o=null;if(0<=r){var l=n[t].substring(0,r);o=n[t].substring(r+1)}else l=n[t];e(l,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function I_(n,e){Ca(n),e=jd(n,e),Tu(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,Tu((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&Jn(n)))}function kE(n,e){return Ca(n),e=jd(n,e),Tu(n.g.h,e)}function FE(n,e,t){I_(n,e),0<t.length&&(n.i=null,n.g.set(jd(n,e),Jy(t)),n.h+=t.length)}function jd(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function $d(n){this.l=n||tb,n=It.PerformanceNavigationTiming?0<(n=It.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(It.g&&It.g.Ea&&It.g.Ea()&&It.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Ze=Mi.prototype).add=function(n,e){Ca(this),this.i=null,n=jd(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},Ze.forEach=function(n,e){Ca(this),this.g.forEach(function(t,r){cE(t,function(o){n.call(e,o,r,this)},this)},this)},Ze.T=function(){Ca(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var o=n[r],l=0;l<o.length;l++)t.push(e[r]);return t},Ze.R=function(n){Ca(this);var e=[];if("string"==typeof n)kE(this,n)&&(e=dE(e,this.g.get(jd(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=dE(e,n[t])}return e},Ze.set=function(n,e){return Ca(this),this.i=null,kE(this,n=jd(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},Ze.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},Ze.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],o=encodeURIComponent(String(r));r=this.R(r);for(var l=0;l<r.length;l++){var d=o;""!==r[l]&&(d+="="+encodeURIComponent(String(r[l]))),n.push(d)}}return this.i=n.join("&")};var tb=10;function b_(n){return!!n.h||!!n.g&&n.g.size>=n.j}function LE(n){return n.h?1:n.g?n.g.size:0}function Xg(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function em(n,e){n.g?n.g.add(e):n.h=e}function Bf(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function VE(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return Jy(n.i)}function tm(){}function UE(){this.g=new tm}function BE(n,e,t){const r=t||"";try{Qg(n,function(o,l){let d=o;Si(o)&&(d=o_(o)),e.push(r+l+"="+encodeURIComponent(d))})}catch(o){throw e.push(r+"type="+encodeURIComponent("_badmap")),o}}function jf(n,e,t,r,o){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,o(r)}catch(l){}}function Hd(n){this.l=n.$b||null,this.j=n.ib||!1}function $f(n,e){Nr.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=nm,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}$d.prototype.cancel=function(){if(this.i=VE(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},tm.prototype.stringify=function(n){return It.JSON.stringify(n,void 0)},tm.prototype.parse=function(n){return It.JSON.parse(n,void 0)},Rr(Hd,Wg),Hd.prototype.g=function(){return new $f(this.l,this.j)},Hd.prototype.i=function(n){return function(){return n}}({}),Rr($f,Nr);var nm=0;function T_(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function Gd(n){n.readyState=4,n.l=null,n.j=null,n.A=null,qd(n)}function qd(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(Ze=$f.prototype).open=function(n,e){if(this.readyState!=nm)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,qd(this)},Ze.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||It).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},Ze.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Gd(this)),this.readyState=nm},Ze.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,qd(this)),this.g&&(this.readyState=3,qd(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==It.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;T_(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},Ze.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Gd(this):qd(this),3==this.readyState&&T_(this)}},Ze.Ua=function(n){this.g&&(this.response=this.responseText=n,Gd(this))},Ze.Ta=function(n){this.g&&(this.response=n,Gd(this))},Ze.ha=function(){this.g&&Gd(this)},Ze.setRequestHeader=function(n,e){this.v.append(n,e)},Ze.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},Ze.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty($f.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var jE=It.JSON.parse;function ur(n){Nr.call(this),this.headers=new Ud,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=$E,this.K=this.L=!1}Rr(ur,Nr);var $E="",nb=/^https?$/i,rb=["POST","PUT"];function sb(n){return"content-type"==n.toLowerCase()}function HE(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,GE(n),rm(n)}function GE(n){n.D||(n.D=!0,Or(n,"complete"),Or(n,"error"))}function qE(n){if(n.h&&void 0!==Zy&&(!n.C[1]||4!=Ta(n)||2!=n.ba()))if(n.v&&4==Ta(n))Vg(n.Fa,0,n);else if(Or(n,"readystatechange"),4==Ta(n)){n.h=!1;try{const m=n.ba();e:switch(m){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===m){var o=String(n.H).match(NE)[1]||null;if(!o&&It.self&&It.self.location){var l=It.self.location.protocol;o=l.substr(0,l.length-1)}r=!nb.test(o?o.toLowerCase():"")}t=r}if(t)Or(n,"complete"),Or(n,"success");else{n.m=6;try{var d=2<Ta(n)?n.g.statusText:""}catch(w){d=""}n.j=d+" ["+n.ba()+"]",GE(n)}}finally{rm(n)}}}function rm(n,e){if(n.g){zE(n);const t=n.g,r=n.C[0]?Cf:null;n.g=null,n.C=null,e||Or(n,"ready");try{t.onreadystatechange=r}catch(o){}}}function zE(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(It.clearTimeout(n.A),n.A=null)}function Ta(n){return n.g?n.g.readyState:0}function WE(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case $E:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function A_(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function ob(n){let e="";return Af(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Nn(n,e,t))}function Hf(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function KE(n){this.za=0,this.l=[],this.h=new jg,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Hf("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Hf("baseRetryDelayMs",5e3,n),this.$a=Hf("retryDelaySeedMs",1e4,n),this.Ya=Hf("forwardChannelMaxRetries",2,n),this.ra=Hf("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new $d(n&&n.concurrentRequestLimit),this.Ca=new UE,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function S_(n){if(M_(n),3==n.G){var e=n.V++,t=Da(n.F);Nn(t,"SID",n.J),Nn(t,"RID",e),Nn(t,"TYPE","terminate"),zd(n,t),(e=new Of(n,n.h,e,void 0)).K=2,e.v=Uf(Da(t)),t=!1,It.navigator&&It.navigator.sendBeacon&&(t=It.navigator.sendBeacon(e.v.toString(),"")),!t&&It.Image&&((new Image).src=e.v,t=!0),t||(e.g=O_(e.l,null),e.g.ea(e.v)),e.F=Date.now(),Fd(e)}um(n)}function Gf(n){n.g&&(om(n),n.g.cancel(),n.g=null)}function M_(n){Gf(n),n.u&&(It.clearTimeout(n.u),n.u=null),am(n),n.i.cancel(),n.m&&("number"==typeof n.m&&It.clearTimeout(n.m),n.m=null)}function im(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&qf(n)}function qf(n){b_(n.i)||n.m||(n.m=!0,Rd(n.Ha,n),n.C=0)}function x_(n,e){var t;t=e?e.m:n.V++;const r=Da(n.F);Nn(r,"SID",n.J),Nn(r,"RID",t),Nn(r,"AID",n.U),zd(n,r),n.o&&n.s&&A_(r,n.o,n.s),t=new Of(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=R_(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),em(n.i,t),kf(t,r,e)}function zd(n,e){n.j&&Qg({},function(t,r){Nn(e,r,t)})}function R_(n,e,t){t=Math.min(n.l.length,t);var r=n.j?Jr(n.j.Oa,n.j,n):null;e:{var o=n.l;let l=-1;for(;;){const d=["count="+t];-1==l?0<t?(l=o[0].h,d.push("ofs="+l)):l=0:d.push("ofs="+l);let m=!0;for(let w=0;w<t;w++){let C=o[w].h;const x=o[w].g;if(C-=l,0>C)l=Math.max(0,o[w].h-100),m=!1;else try{BE(x,d,"req"+C+"_")}catch(N){r&&r(x)}}if(m){r=d.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function N_(n){n.g||n.u||(n.Y=1,Rd(n.Ga,n),n.A=0)}function sm(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=Od(Jr(n.Ga,n),Jl(n,n.A)),n.A++,0))}function om(n){null!=n.B&&(It.clearTimeout(n.B),n.B=null)}function Su(n){n.g=new Of(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=Da(n.oa);Nn(e,"RID","rpc"),Nn(e,"SID",n.J),Nn(e,"CI",n.N?"0":"1"),Nn(e,"AID",n.U),zd(n,e),Nn(e,"TYPE","xmlhttp"),n.o&&n.s&&A_(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=Uf(Da(e)),t.s=null,t.U=!0,m_(t,n)}function am(n){null!=n.v&&(It.clearTimeout(n.v),n.v=null)}function YE(n,e){var t=null;if(n.g==e){am(n),om(n),n.g=null;var r=2}else{if(!Xg(n.i,e))return;t=e.D,Bf(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var o=n.C;Or(r=Ql(),new Gg(r,t,e,o)),qf(n)}else N_(n);else if(3==(o=e.o)||0==o&&0<n.I||!(1==r&&function ZE(n,e){return!(LE(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=Od(Jr(n.Ha,n,e),Jl(n,n.C)),n.C++,0)))}(n,e)||2==r&&sm(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),o){case 1:Wd(n,5);break;case 4:Wd(n,10);break;case 3:Wd(n,6);break;default:Wd(n,2)}}function Jl(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function Wd(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=Jr(n.jb,n);t||(t=new Au("//www.google.com/images/cleardot.gif"),It.location&&"http"==It.location.protocol||Lf(t,"https"),Uf(t)),function C_(n,e){const t=new jg;if(It.Image){const r=new Image;r.onload=Yy(jf,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Yy(jf,t,r,"TestLoadImage: error",!1,e),r.onabort=Yy(jf,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Yy(jf,t,r,"TestLoadImage: timeout",!1,e),It.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else ti(2);n.G=0,n.j&&n.j.va(e),um(n),M_(n)}function um(n){n.G=0,n.I=-1,n.j&&((0!=VE(n.i).length||0!=n.l.length)&&(n.i.i.length=0,Jy(n.l),n.l.length=0),n.j.ua())}function ab(n,e,t){let r=function QD(n){return n instanceof Au?Da(n):new Au(n,void 0)}(t);if(""!=r.i)e&&Vf(r,e+"."+r.i),ba(r,r.m);else{const o=It.location;r=function PE(n,e,t,r){var o=new Au(null,void 0);return n&&Lf(o,n),e&&Vf(o,e),t&&ba(o,t),r&&(o.l=r),o}(o.protocol,e?e+"."+o.hostname:o.hostname,+o.port,t)}return n.aa&&Af(n.aa,function(o,l){Nn(r,l,o)}),t=n.sa,(e=n.D)&&t&&Nn(r,e,t),Nn(r,"VER",n.ma),zd(n,r),r}function O_(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new ur(t&&n.Ba&&!n.qa?new Hd({ib:!0}):n.qa)).L=n.H,e}function P_(){}function k_(){if(wu&&!(10<=Number(mE)))throw Error("Environmental error: no available transport.")}function et(n,e){Nr.call(this),this.g=new KE(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!Rg(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Rg(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Kd(this)}function QE(n){p_.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function JE(){Zg.call(this),this.status=1}function Kd(n){this.g=n}(Ze=ur.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Yg.g(),this.C=function f_(n){return n.h||(n.h=n.i())}(this.u?this.u:Yg),this.g.onreadystatechange=Jr(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(l){return void HE(this,l)}n=t||"";const o=new Ud(this.headers);r&&Qg(r,function(l,d){o.set(d,l)}),r=function VD(n){e:{var e=sb;const t=n.length,r="string"==typeof n?n.split(""):n;for(let o=0;o<t;o++)if(o in r&&e.call(void 0,r[o],o,n)){e=o;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(o.T()),t=It.FormData&&n instanceof It.FormData,!(0<=lE(rb,e))||r||t||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(l,d){this.g.setRequestHeader(d,l)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{zE(this),0<this.B&&((this.K=function ib(n){return wu&&function gE(){return function Ng(n){var e=pE;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=Tf(String(Ia)).split("."),t=Tf("9").split("."),r=Math.max(e.length,t.length);for(let d=0;0==n&&d<r;d++){var o=e[d]||"",l=t[d]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],l=/(\d*)(\D*)(.*)/.exec(l)||["","","",""],0==o[0].length&&0==l[0].length)break;n=Xy(0==o[1].length?0:parseInt(o[1],10),0==l[1].length?0:parseInt(l[1],10))||Xy(0==o[2].length,0==l[2].length)||Xy(o[2],l[2]),o=o[3],l=l[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Jr(this.pa,this)):this.A=Vg(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(l){HE(this,l)}},Ze.pa=function(){void 0!==Zy&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Or(this,"timeout"),this.abort(8))},Ze.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Or(this,"complete"),Or(this,"abort"),rm(this))},Ze.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),rm(this,!0)),ur.Z.M.call(this)},Ze.Fa=function(){this.s||(this.F||this.v||this.l?qE(this):this.cb())},Ze.cb=function(){qE(this)},Ze.ba=function(){try{return 2<Ta(this)?this.g.status:-1}catch(n){return-1}},Ze.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},Ze.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),jE(e)}},Ze.Da=function(){return this.m},Ze.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(Ze=KE.prototype).ma=8,Ze.G=1,Ze.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},Ze.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const o=new Of(this,this.h,n,void 0);let l=this.s;if(this.P&&(l?(l=po(l),Xr(l,this.P)):l=this.P),null===this.o&&(o.H=l),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=R_(this,o,e),Nn(t=Da(this.F),"RID",n),Nn(t,"CVER",22),this.D&&Nn(t,"X-HTTP-Session-Id",this.D),zd(this,t),this.o&&l&&A_(t,this.o,l),em(this.i,o),this.Ra&&Nn(t,"TYPE","init"),this.ja?(Nn(t,"$req",e),Nn(t,"SID","null"),o.$=!0,kf(o,t,null)):kf(o,t,e),this.G=2}}else 3==this.G&&(n?x_(this,n):0==this.l.length||b_(this.i)||x_(this))},Ze.Ga=function(){if(this.u=null,Su(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=Od(Jr(this.bb,this),n)}},Ze.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,ti(10),Gf(this),Su(this))},Ze.ab=function(){null!=this.v&&(this.v=null,Gf(this),sm(this),ti(19))},Ze.jb=function(n){n?(this.h.info("Successfully pinged google.com"),ti(2)):(this.h.info("Failed to ping google.com"),ti(1))},(Ze=P_.prototype).xa=function(){},Ze.wa=function(){},Ze.va=function(){},Ze.ua=function(){},Ze.Oa=function(){},k_.prototype.g=function(n,e){return new et(n,e)},Rr(et,Nr),et.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),Rd(Jr(n.hb,n,e))),ti(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=ab(n,null,n.W),qf(n)},et.prototype.close=function(){S_(this.g)},et.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,im(this.g,e)}else this.v?((e={}).__data__=o_(n),im(this.g,e)):im(this.g,n)},et.prototype.M=function(){this.g.j=null,delete this.j,S_(this.g),delete this.g,et.Z.M.call(this)},Rr(QE,p_),Rr(JE,Zg),Rr(Kd,P_),Kd.prototype.xa=function(){Or(this.g,"a")},Kd.prototype.wa=function(n){Or(this.g,new QE(n))},Kd.prototype.va=function(n){Or(this.g,new JE(n))},Kd.prototype.ua=function(){Or(this.g,"b")},k_.prototype.createWebChannel=k_.prototype.g,et.prototype.send=et.prototype.u,et.prototype.open=et.prototype.m,et.prototype.close=et.prototype.close,qg.NO_ERROR=0,qg.TIMEOUT=8,qg.HTTP_ERROR=6,zg.COMPLETE="complete",Kg.EventType=Pd,Pd.OPEN="a",Pd.CLOSE="b",Pd.ERROR="c",Pd.MESSAGE="d",Nr.prototype.listen=Nr.prototype.N,ur.prototype.listenOnce=ur.prototype.O,ur.prototype.getLastError=ur.prototype.La,ur.prototype.getLastErrorCode=ur.prototype.Da,ur.prototype.getStatus=ur.prototype.ba,ur.prototype.getResponseJson=ur.prototype.Qa,ur.prototype.getResponseText=ur.prototype.ga,ur.prototype.send=ur.prototype.ea;var lm=Eu.createWebChannelTransport=function(){return new k_},ub=Eu.getStatEventTarget=function(){return Ql()},Zd=Eu.ErrorCode=qg,cm=Eu.EventType=zg,qn=Eu.Event=Yl,lb=Eu.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},XE=Eu.FetchXmlHttpFactory=Hd,dm=Eu.WebChannel=Kg,cb=Eu.XhrIo=ur;const F_="@firebase/firestore";class Pr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Pr.UNAUTHENTICATED=new Pr(null),Pr.GOOGLE_CREDENTIALS=new Pr("google-credentials-uid"),Pr.FIRST_PARTY=new Pr("first-party-uid"),Pr.MOCK_USER=new Pr("mock-user");let Xl="9.6.10";const Aa=new vu.Yd("@firebase/firestore");function L_(){return Aa.logLevel}function Ne(n,...e){if(Aa.logLevel<=vu.in.DEBUG){const t=e.map(V_);Aa.debug(`Firestore (${Xl}): ${n}`,...t)}}function On(n,...e){if(Aa.logLevel<=vu.in.ERROR){const t=e.map(V_);Aa.error(`Firestore (${Xl}): ${n}`,...t)}}function zf(n,...e){if(Aa.logLevel<=vu.in.WARN){const t=e.map(V_);Aa.warn(`Firestore (${Xl}): ${n}`,...t)}}function V_(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function tt(n="Unexpected state"){const e=`FIRESTORE (${Xl}) INTERNAL ASSERTION FAILED: `+n;throw On(e),new Error(e)}function vt(n,e){n||tt()}function $e(n,e){return n}const ae={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ae extends jt.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class zn{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Yd{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class hb{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Pr.UNAUTHENTICATED))}shutdown(){}}class fb{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class pb{constructor(e){this.t=e,this.currentUser=Pr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let o=this.i;const l=C=>this.i!==o?(o=this.i,t(C)):Promise.resolve();let d=new zn;this.o=()=>{this.i++,this.currentUser=this.u(),d.resolve(),d=new zn,e.enqueueRetryable(()=>l(this.currentUser))};const m=()=>{const C=d;e.enqueueRetryable((0,_e.Z)(function*(){yield C.promise,yield l(r.currentUser)}))},w=C=>{Ne("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=C,this.auth.addAuthTokenListener(this.o),m()};this.t.onInit(C=>w(C)),setTimeout(()=>{if(!this.auth){const C=this.t.getImmediate({optional:!0});C?w(C):(Ne("FirebaseAuthCredentialsProvider","Auth not yet detected"),d.resolve(),d=new zn)}},0),m()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Ne("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(vt("string"==typeof r.accessToken),new Yd(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return vt(null===e||"string"==typeof e),new Pr(e)}}class tw{constructor(e,t,r){this.type="FirstParty",this.user=Pr.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const o=e.auth.getAuthHeaderValueForFirstParty([]);o&&this.headers.set("Authorization",o),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class nw{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new tw(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Pr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class U_{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class gb{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const r=l=>{null!=l.error&&Ne("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const d=l.token!==this.p;return this.p=l.token,Ne("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable(()=>r(l))};const o=l=>{Ne("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.appCheck.addTokenListener(this.o)};this.g.onInit(l=>o(l)),setTimeout(()=>{if(!this.appCheck){const l=this.g.getImmediate({optional:!0});l?o(l):Ne("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(vt("string"==typeof t.token),this.p=t.token,new U_(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class us{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.I(r),this.T=r=>t.writeSequenceNumber(r))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function yb(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}us.A=-1;class _b{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const o=yb(40);for(let l=0;l<o.length;++l)r.length<20&&o[l]<t&&(r+=e.charAt(o[l]%e.length))}return r}}function $t(n,e){return n<e?-1:n>e?1:0}function Wf(n,e,t){return n.length===e.length&&n.every((r,o)=>t(r,e[o]))}function vb(n){return n+"\0"}class Wn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ae(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ae(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Ae(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ae(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Wn.fromMillis(Date.now())}static fromDate(e){return Wn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Wn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?$t(this.nanoseconds,e.nanoseconds):$t(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class mt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new mt(e)}static min(){return new mt(new Wn(0,0))}static max(){return new mt(new Wn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function rw(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function ec(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function B_(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Sa{constructor(e,t,r){void 0===t?t=0:t>e.length&&tt(),void 0===r?r=e.length-t:r>e.length-t&&tt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Sa.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Sa?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const l=e.get(o),d=t.get(o);if(l<d)return-1;if(l>d)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Zt extends Sa{construct(e,t,r){return new Zt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ae(ae.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(o=>o.length>0))}return new Zt(t)}static emptyPath(){return new Zt([])}}const Eb=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class kr extends Sa{construct(e,t,r){return new kr(e,t,r)}static isValidIdentifier(e){return Eb.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),kr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new kr(["__name__"])}static fromServerFormat(e){const t=[];let r="",o=0;const l=()=>{if(0===r.length)throw new Ae(ae.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let d=!1;for(;o<e.length;){const m=e[o];if("\\"===m){if(o+1===e.length)throw new Ae(ae.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const w=e[o+1];if("\\"!==w&&"."!==w&&"`"!==w)throw new Ae(ae.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=w,o+=2}else"`"===m?(d=!d,o++):"."!==m||d?(r+=m,o++):(l(),o++)}if(l(),d)throw new Ae(ae.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new kr(t)}static emptyPath(){return new kr([])}}class Qd{constructor(e){this.fields=e,e.sort(kr.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Wf(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class lr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new lr(t)}static fromUint8Array(e){const t=function(r){let o="";for(let l=0;l<r.length;++l)o+=String.fromCharCode(r[l]);return o}(e);return new lr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return $t(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}lr.EMPTY_BYTE_STRING=new lr("");const Ib=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Mu(n){if(vt(!!n),"string"==typeof n){let e=0;const t=Ib.exec(n);if(vt(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:yn(n.seconds),nanos:yn(n.nanos)}}function yn(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function tc(n){return"string"==typeof n?lr.fromBase64String(n):lr.fromUint8Array(n)}function hm(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function iw(n){const e=n.mapValue.fields.__previous_value__;return hm(e)?iw(e):e}function Jd(n){const e=Mu(n.mapValue.fields.__local_write_time__.timestampValue);return new Wn(e.seconds,e.nanos)}class Db{constructor(e,t,r,o,l,d,m,w){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=l,this.forceLongPolling=d,this.autoDetectLongPolling=m,this.useFetchStreams=w}}class Go{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Go("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Go&&e.projectId===this.projectId&&e.database===this.database}}function nc(n){return null==n}function rc(n){return 0===n&&1/n==-1/0}function sw(n){return"number"==typeof n&&Number.isInteger(n)&&!rc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class Ve{constructor(e){this.path=e}static fromPath(e){return new Ve(Zt.fromString(e))}static fromName(e){return new Ve(Zt.fromString(e).popFirst(5))}static empty(){return new Ve(Zt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Zt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Zt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ve(new Zt(e.slice()))}}const j_={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},ow={nullValue:"NULL_VALUE"};function ic(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?hm(n)?4:q_(n)?9:10:tt()}function qo(n,e){if(n===e)return!0;const t=ic(n);if(t!==ic(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Jd(n).isEqual(Jd(e));case 3:return function(r,o){if("string"==typeof r.timestampValue&&"string"==typeof o.timestampValue&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const l=Mu(r.timestampValue),d=Mu(o.timestampValue);return l.seconds===d.seconds&&l.nanos===d.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return o=e,tc(n.bytesValue).isEqual(tc(o.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,o){return yn(r.geoPointValue.latitude)===yn(o.geoPointValue.latitude)&&yn(r.geoPointValue.longitude)===yn(o.geoPointValue.longitude)}(n,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return yn(r.integerValue)===yn(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const l=yn(r.doubleValue),d=yn(o.doubleValue);return l===d?rc(l)===rc(d):isNaN(l)&&isNaN(d)}return!1}(n,e);case 9:return Wf(n.arrayValue.values||[],e.arrayValue.values||[],qo);case 10:return function(r,o){const l=r.mapValue.fields||{},d=o.mapValue.fields||{};if(rw(l)!==rw(d))return!1;for(const m in l)if(l.hasOwnProperty(m)&&(void 0===d[m]||!qo(l[m],d[m])))return!1;return!0}(n,e);default:return tt()}var o}function sc(n,e){return void 0!==(n.values||[]).find(t=>qo(t,e))}function xu(n,e){if(n===e)return 0;const t=ic(n),r=ic(e);if(t!==r)return $t(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return $t(n.booleanValue,e.booleanValue);case 2:return function(o,l){const d=yn(o.integerValue||o.doubleValue),m=yn(l.integerValue||l.doubleValue);return d<m?-1:d>m?1:d===m?0:isNaN(d)?isNaN(m)?0:-1:1}(n,e);case 3:return $_(n.timestampValue,e.timestampValue);case 4:return $_(Jd(n),Jd(e));case 5:return $t(n.stringValue,e.stringValue);case 6:return function(o,l){const d=tc(o),m=tc(l);return d.compareTo(m)}(n.bytesValue,e.bytesValue);case 7:return function(o,l){const d=o.split("/"),m=l.split("/");for(let w=0;w<d.length&&w<m.length;w++){const C=$t(d[w],m[w]);if(0!==C)return C}return $t(d.length,m.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,l){const d=$t(yn(o.latitude),yn(l.latitude));return 0!==d?d:$t(yn(o.longitude),yn(l.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(o,l){const d=o.values||[],m=l.values||[];for(let w=0;w<d.length&&w<m.length;++w){const C=xu(d[w],m[w]);if(C)return C}return $t(d.length,m.length)}(n.arrayValue,e.arrayValue);case 10:return function(o,l){const d=o.fields||{},m=Object.keys(d),w=l.fields||{},C=Object.keys(w);m.sort(),C.sort();for(let x=0;x<m.length&&x<C.length;++x){const N=$t(m[x],C[x]);if(0!==N)return N;const H=xu(d[m[x]],w[C[x]]);if(0!==H)return H}return $t(m.length,C.length)}(n.mapValue,e.mapValue);default:throw tt()}}function $_(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return $t(n,e);const t=Mu(n),r=Mu(e),o=$t(t.seconds,r.seconds);return 0!==o?o:$t(t.nanos,r.nanos)}function Xd(n){return H_(n)}function H_(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const o=Mu(r);return`time(${o.seconds},${o.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?tc(n.bytesValue).toBase64():"referenceValue"in n?Ve.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let o="[",l=!0;for(const d of r.values||[])l?l=!1:o+=",",o+=H_(d);return o+"]"}(n.arrayValue):"mapValue"in n?function(r){const o=Object.keys(r.fields||{}).sort();let l="{",d=!0;for(const m of o)d?d=!1:l+=",",l+=`${m}:${H_(r.fields[m])}`;return l+"}"}(n.mapValue):tt();var e}function eh(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function G_(n){return!!n&&"integerValue"in n}function Kf(n){return!!n&&"arrayValue"in n}function aw(n){return!!n&&"nullValue"in n}function uw(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function fm(n){return!!n&&"mapValue"in n}function th(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return ec(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=th(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=th(n.arrayValue.values[t]);return e}return Object.assign({},n)}function q_(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function lw(n,e){return void 0===n?e:void 0===e||xu(n,e)>0?n:e}function cw(n,e){return void 0===n?e:void 0===e||xu(n,e)<0?n:e}class ni{constructor(e){this.value=e}static empty(){return new ni({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!fm(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=th(t)}setAll(e){let t=kr.emptyPath(),r={},o=[];e.forEach((d,m)=>{if(!t.isImmediateParentOf(m)){const w=this.getFieldsMap(t);this.applyChanges(w,r,o),r={},o=[],t=m.popLast()}d?r[m.lastSegment()]=th(d):o.push(m.lastSegment())});const l=this.getFieldsMap(t);this.applyChanges(l,r,o)}delete(e){const t=this.field(e.popLast());fm(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return qo(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];fm(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){ec(t,(o,l)=>e[o]=l);for(const o of r)delete e[o]}clone(){return new ni(th(this.value))}}function dw(n){const e=[];return ec(n.fields,(t,r)=>{const o=new kr([t]);if(fm(r)){const l=dw(r.mapValue).fields;if(0===l.length)e.push(o);else for(const d of l)e.push(o.child(d))}else e.push(o)}),new Qd(e)}class Tn{constructor(e,t,r,o,l,d){this.key=e,this.documentType=t,this.version=r,this.readTime=o,this.data=l,this.documentState=d}static newInvalidDocument(e){return new Tn(e,0,mt.min(),mt.min(),ni.empty(),0)}static newFoundDocument(e,t,r){return new Tn(e,1,t,mt.min(),r,0)}static newNoDocument(e,t){return new Tn(e,2,t,mt.min(),ni.empty(),0)}static newUnknownDocument(e,t){return new Tn(e,3,t,mt.min(),ni.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ni.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ni.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Tn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Tn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class pm{constructor(e,t,r,o){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=o}}function Zf(n){return n.fields.find(e=>2===e.kind)}function Ru(n){return n.fields.filter(e=>2!==e.kind)}pm.UNKNOWN_ID=-1;class Yf{constructor(e,t){this.fieldPath=e,this.kind=t}}class oc{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new oc(0,yo.min())}}function hw(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,o=mt.fromTimestamp(1e9===r?new Wn(t+1,0):new Wn(t,r));return new yo(o,Ve.empty(),e)}function bb(n){return new yo(n.readTime,n.key,-1)}class yo{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new yo(mt.min(),Ve.empty(),-1)}static max(){return new yo(mt.max(),Ve.empty(),-1)}}function Cb(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Ve.comparator(n.documentKey,e.documentKey),0!==t?t:$t(n.largestBatchId,e.largestBatchId))}class fw{constructor(e,t=null,r=[],o=[],l=null,d=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=l,this.startAt=d,this.endAt=m,this.P=null}}function pw(n,e=null,t=[],r=[],o=null,l=null,d=null){return new fw(n,e,t,r,o,l,d)}function Nu(n){const e=$e(n);if(null===e.P){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(o=r).field.canonicalString()+o.op.toString()+Xd(o.value);var o}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(o=r).field.canonicalString()+o.dir;var o}).join(","),nc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Xd(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Xd(r)).join(",")),e.P=t}return e.P}function nh(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let o=0;o<n.orderBy.length;o++)if(!yw(n.orderBy[o],e.orderBy[o]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let o=0;o<n.filters.length;o++)if((t=n.filters[o]).op!==(r=e.filters[o]).op||!t.field.isEqual(r.field)||!qo(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!mm(n.startAt,e.startAt)&&mm(n.endAt,e.endAt)}function z_(n){return Ve.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function gm(n,e){return n.filters.filter(t=>t instanceof cr&&t.field.isEqual(e))}class cr extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,r):new Ab(e,t,r):"array-contains"===t?new fA(e,r):"in"===t?new mw(e,r):"not-in"===t?new Sb(e,r):"array-contains-any"===t?new Mb(e,r):new cr(e,t,r)}static V(e,t,r){return"in"===t?new rh(e,r):new Qf(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(xu(t,this.value)):null!==t&&ic(this.value)===ic(t)&&this.v(xu(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return tt()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class Ab extends cr{constructor(e,t,r){super(e,t,r),this.key=Ve.fromName(r.referenceValue)}matches(e){const t=Ve.comparator(e.key,this.key);return this.v(t)}}class rh extends cr{constructor(e,t){super(e,"in",t),this.keys=gw(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Qf extends cr{constructor(e,t){super(e,"not-in",t),this.keys=gw(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function gw(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Ve.fromName(r.referenceValue))}class fA extends cr{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Kf(t)&&sc(t.arrayValue,this.value)}}class mw extends cr{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&sc(this.value.arrayValue,t)}}class Sb extends cr{constructor(e,t){super(e,"not-in",t)}matches(e){if(sc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!sc(this.value.arrayValue,t)}}class Mb extends cr{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Kf(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>sc(this.value.arrayValue,r))}}class Ou{constructor(e,t){this.position=e,this.inclusive=t}}class ih{constructor(e,t="asc"){this.field=e,this.dir=t}}function yw(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function W_(n,e,t){let r=0;for(let o=0;o<n.position.length;o++){const l=e[o],d=n.position[o];if(r=l.field.isKeyField()?Ve.comparator(Ve.fromName(d.referenceValue),t.key):xu(d,t.data.field(l.field)),"desc"===l.dir&&(r*=-1),0!==r)break}return r}function mm(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!qo(n.position[t],e.position[t]))return!1;return!0}class Vs{constructor(e,t=null,r=[],o=[],l=null,d="F",m=null,w=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=l,this.limitType=d,this.startAt=m,this.endAt=w,this.D=null,this.C=null}}function sh(n,e,t,r,o,l,d,m){return new Vs(n,e,t,r,o,l,d,m)}function oh(n){return new Vs(n)}function Jf(n){return!nc(n.limit)&&"F"===n.limitType}function Xf(n){return!nc(n.limit)&&"L"===n.limitType}function K_(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function Z_(n){for(const e of n.filters)if(e.S())return e.field;return null}function ep(n){return null!==n.collectionGroup}function ah(n){const e=$e(n);if(null===e.D){e.D=[];const t=Z_(e),r=K_(e);if(null!==t&&null===r)t.isKeyField()||e.D.push(new ih(t)),e.D.push(new ih(kr.keyField(),"asc"));else{let o=!1;for(const l of e.explicitOrderBy)e.D.push(l),l.field.isKeyField()&&(o=!0);if(!o){const l=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new ih(kr.keyField(),l))}}}return e.D}function _o(n){const e=$e(n);if(!e.C)if("F"===e.limitType)e.C=pw(e.path,e.collectionGroup,ah(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const l of ah(e))t.push(new ih(l.field,"desc"===l.dir?"asc":"desc"));const r=e.endAt?new Ou(e.endAt.position,!e.endAt.inclusive):null,o=e.startAt?new Ou(e.startAt.position,!e.startAt.inclusive):null;e.C=pw(e.path,e.collectionGroup,t,e.filters,e.limit,r,o)}return e.C}function _w(n,e,t){return new Vs(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function tp(n,e){return nh(_o(n),_o(e))&&n.limitType===e.limitType}function ac(n){return`${Nu(_o(n))}|lt:${n.limitType}`}function ym(n){return`Query(target=${function Tb(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${Xd(r.value)}`;var r}).join(", ")}]`),nc(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>Xd(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>Xd(t)).join(",")),`Target(${e})`}(_o(n))}; limitType=${n.limitType})`}function Pu(n,e){return e.isFoundDocument()&&function(t,r){const o=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(o):Ve.isDocumentKey(t.path)?t.path.isEqual(o):t.path.isImmediateParentOf(o)}(n,e)&&function(t,r){for(const o of t.explicitOrderBy)if(!o.field.isKeyField()&&null===r.data.field(o.field))return!1;return!0}(n,e)&&function(t,r){for(const o of t.filters)if(!o.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(o,l,d){const m=W_(o,l,d);return o.inclusive?m<=0:m<0}(t.startAt,ah(t),r)||t.endAt&&!function(o,l,d){const m=W_(o,l,d);return o.inclusive?m>=0:m>0}(t.endAt,ah(t),r)));var t,r}function xb(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Y_(n){return(e,t)=>{let r=!1;for(const o of ah(n)){const l=Rb(o,e,t);if(0!==l)return l;r=r||o.field.isKeyField()}return 0}}function Rb(n,e,t){const r=n.field.isKeyField()?Ve.comparator(e.key,t.key):function(o,l,d){const m=l.data.field(o),w=d.data.field(o);return null!==m&&null!==w?xu(m,w):tt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return tt()}}function Nb(n,e){if(n.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:rc(e)?"-0":e}}function Q_(n){return{integerValue:""+n}}function Ob(n,e){return sw(e)?Q_(e):Nb(n,e)}class np{constructor(){this._=void 0}}function J_(n,e,t){return n instanceof uh?function(r,o){const l={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&(l.fields.__previous_value__=o),{mapValue:l}}(t,e):n instanceof uc?Ew(n,e):n instanceof lc?ww(n,e):function(r,o){const l=vw(r,o),d=Iw(l)+Iw(r.k);return G_(l)&&G_(r.k)?Q_(d):Nb(r.M,d)}(n,e)}function Pb(n,e,t){return n instanceof uc?Ew(n,e):n instanceof lc?ww(n,e):t}function vw(n,e){return n instanceof lh?G_(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class uh extends np{}class uc extends np{constructor(e){super(),this.elements=e}}function Ew(n,e){const t=Dw(e);for(const r of n.elements)t.some(o=>qo(o,r))||t.push(r);return{arrayValue:{values:t}}}class lc extends np{constructor(e){super(),this.elements=e}}function ww(n,e){let t=Dw(e);for(const r of n.elements)t=t.filter(o=>!qo(o,r));return{arrayValue:{values:t}}}class lh extends np{constructor(e,t){super(),this.M=e,this.k=t}}function Iw(n){return yn(n.integerValue||n.doubleValue)}function Dw(n){return Kf(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Ma{constructor(e,t){this.field=e,this.transform=t}}class Cw{constructor(e,t){this.version=e,this.transformResults=t}}class Xn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Xn}static exists(e){return new Xn(void 0,e)}static updateTime(e){return new Xn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function rp(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class ip{}function kb(n,e,t){n instanceof sp?function(r,o,l){const d=r.value.clone(),m=Sw(r.fieldTransforms,o,l.transformResults);d.setAll(m),o.convertToFoundDocument(l.version,d).setHasCommittedMutations()}(n,e,t):n instanceof cc?function(r,o,l){if(!rp(r.precondition,o))return void o.convertToUnknownDocument(l.version);const d=Sw(r.fieldTransforms,o,l.transformResults),m=o.data;m.setAll(ch(r)),m.setAll(d),o.convertToFoundDocument(l.version,m).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function X_(n,e,t){var o;n instanceof sp?function(r,o,l){if(!rp(r.precondition,o))return;const d=r.value.clone(),m=_m(r.fieldTransforms,l,o);d.setAll(m),o.convertToFoundDocument(Aw(o),d).setHasLocalMutations()}(n,e,t):n instanceof cc?function(r,o,l){if(!rp(r.precondition,o))return;const d=_m(r.fieldTransforms,l,o),m=o.data;m.setAll(ch(r)),m.setAll(d),o.convertToFoundDocument(Aw(o),m).setHasLocalMutations()}(n,e,t):rp(n.precondition,o=e)&&o.convertToNoDocument(mt.min())}function Fb(n,e){let t=null;for(const r of n.fieldTransforms){const o=e.data.field(r.field),l=vw(r.transform,o||null);null!=l&&(null==t&&(t=ni.empty()),t.set(r.field,l))}return t||null}function Tw(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Wf(t,r,(o,l)=>function bw(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof uc&&r instanceof uc||t instanceof lc&&r instanceof lc?Wf(t.elements,r.elements,qo):t instanceof lh&&r instanceof lh?qo(t.k,r.k):t instanceof uh&&r instanceof uh);var t,r}(o,l))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}function Aw(n){return n.isFoundDocument()?n.version:mt.min()}class sp extends ip{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}}class cc extends ip{constructor(e,t,r,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=l,this.type=1}}function ch(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function Sw(n,e,t){const r=new Map;vt(n.length===t.length);for(let o=0;o<t.length;o++){const l=n[o],d=l.transform,m=e.data.field(l.field);r.set(l.field,Pb(d,m,t[o]))}return r}function _m(n,e,t){const r=new Map;for(const o of n){const l=o.transform,d=t.data.field(o.field);r.set(o.field,J_(l,d,e))}return r}class Ui extends ip{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class ev extends ip{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class tv{constructor(e){this.count=e}}var Pn,Yt;function Mw(n){switch(n){default:return tt();case ae.CANCELLED:case ae.UNKNOWN:case ae.DEADLINE_EXCEEDED:case ae.RESOURCE_EXHAUSTED:case ae.INTERNAL:case ae.UNAVAILABLE:case ae.UNAUTHENTICATED:return!1;case ae.INVALID_ARGUMENT:case ae.NOT_FOUND:case ae.ALREADY_EXISTS:case ae.PERMISSION_DENIED:case ae.FAILED_PRECONDITION:case ae.ABORTED:case ae.OUT_OF_RANGE:case ae.UNIMPLEMENTED:case ae.DATA_LOSS:return!0}}function xw(n){if(void 0===n)return On("GRPC error has no .code"),ae.UNKNOWN;switch(n){case Pn.OK:return ae.OK;case Pn.CANCELLED:return ae.CANCELLED;case Pn.UNKNOWN:return ae.UNKNOWN;case Pn.DEADLINE_EXCEEDED:return ae.DEADLINE_EXCEEDED;case Pn.RESOURCE_EXHAUSTED:return ae.RESOURCE_EXHAUSTED;case Pn.INTERNAL:return ae.INTERNAL;case Pn.UNAVAILABLE:return ae.UNAVAILABLE;case Pn.UNAUTHENTICATED:return ae.UNAUTHENTICATED;case Pn.INVALID_ARGUMENT:return ae.INVALID_ARGUMENT;case Pn.NOT_FOUND:return ae.NOT_FOUND;case Pn.ALREADY_EXISTS:return ae.ALREADY_EXISTS;case Pn.PERMISSION_DENIED:return ae.PERMISSION_DENIED;case Pn.FAILED_PRECONDITION:return ae.FAILED_PRECONDITION;case Pn.ABORTED:return ae.ABORTED;case Pn.OUT_OF_RANGE:return ae.OUT_OF_RANGE;case Pn.UNIMPLEMENTED:return ae.UNIMPLEMENTED;case Pn.DATA_LOSS:return ae.DATA_LOSS;default:return tt()}}(Yt=Pn||(Pn={}))[Yt.OK=0]="OK",Yt[Yt.CANCELLED=1]="CANCELLED",Yt[Yt.UNKNOWN=2]="UNKNOWN",Yt[Yt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Yt[Yt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Yt[Yt.NOT_FOUND=5]="NOT_FOUND",Yt[Yt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Yt[Yt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Yt[Yt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Yt[Yt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Yt[Yt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Yt[Yt.ABORTED=10]="ABORTED",Yt[Yt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Yt[Yt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Yt[Yt.INTERNAL=13]="INTERNAL",Yt[Yt.UNAVAILABLE=14]="UNAVAILABLE",Yt[Yt.DATA_LOSS=15]="DATA_LOSS";class vo{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[o,l]of r)if(this.equalsFn(o,e))return l}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(void 0===o)return this.inner[r]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return 1===r.length?delete this.inner[t]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){ec(this.inner,(t,r)=>{for(const[o,l]of r)e(o,l)})}isEmpty(){return B_(this.inner)}size(){return this.innerSize}}class kn{constructor(e,t){this.comparator=e,this.root=t||ri.EMPTY}insert(e,t){return new kn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ri.BLACK,null,null))}remove(e){return new kn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ri.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(0===o)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new vm(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new vm(this.root,e,this.comparator,!1)}getReverseIterator(){return new vm(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new vm(this.root,e,this.comparator,!0)}}class vm{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?r(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(0===l){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ri{constructor(e,t,r,o,l){this.key=e,this.value=t,this.color=null!=r?r:ri.RED,this.left=null!=o?o:ri.EMPTY,this.right=null!=l?l:ri.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,l){return new ri(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=o?o:this.left,null!=l?l:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const l=r(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,r),null):0===l?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return ri.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),0===t(e,o.key)){if(o.right.isEmpty())return ri.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ri.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ri.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw tt();const e=this.left.check();if(e!==this.right.check())throw tt();return e+(this.isRed()?0:1)}}ri.EMPTY=null,ri.RED=!0,ri.BLACK=!1,ri.EMPTY=new class{constructor(){this.size=0}get key(){throw tt()}get value(){throw tt()}get color(){throw tt()}get left(){throw tt()}get right(){throw tt()}copy(n,e,t,r,o){return this}insert(n,e,t){return new ri(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class En{constructor(e){this.comparator=e,this.data=new kn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new nv(this.data.getIterator())}getIteratorFrom(e){return new nv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof En)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=r.getNext().key;if(0!==this.comparator(o,l))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new En(this.comparator);return t.data=e,t}}class nv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function ku(n){return n.hasNext()?n.getNext():void 0}const Rw=new kn(Ve.comparator);function Us(){return Rw}const Lb=new kn(Ve.comparator);function Nw(){return Lb}function dc(){return new vo(n=>n.toString(),(n,e)=>n.isEqual(e))}const rv=new kn(Ve.comparator),Ow=new En(Ve.comparator);function rn(...n){let e=Ow;for(const t of n)e=e.add(t);return e}const iv=new En($t);function Em(){return iv}class op{constructor(e,t,r,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,ap.createSynthesizedTargetChangeForCurrentChange(e,t)),new op(mt.min(),r,Em(),Us(),rn())}}class ap{constructor(e,t,r,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t){return new ap(lr.EMPTY_BYTE_STRING,t,rn(),rn(),rn())}}class wm{constructor(e,t,r,o){this.O=e,this.removedTargetIds=t,this.key=r,this.F=o}}class sv{constructor(e,t){this.targetId=e,this.$=t}}class Im{constructor(e,t,r=lr.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class ov{constructor(){this.B=0,this.L=uv(),this.U=lr.EMPTY_BYTE_STRING,this.q=!1,this.G=!0}get current(){return this.q}get resumeToken(){return this.U}get K(){return 0!==this.B}get j(){return this.G}W(e){e.approximateByteSize()>0&&(this.G=!0,this.U=e)}H(){let e=rn(),t=rn(),r=rn();return this.L.forEach((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:tt()}}),new ap(this.U,this.q,e,t,r)}J(){this.G=!1,this.L=uv()}Y(e,t){this.G=!0,this.L=this.L.insert(e,t)}X(e){this.G=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.G=!0,this.q=!0}}class Pw{constructor(e){this.nt=e,this.st=new Map,this.it=Us(),this.rt=av(),this.ot=new En($t)}ut(e){for(const t of e.O)e.F&&e.F.isFoundDocument()?this.at(t,e.F):this.ct(t,e.key,e.F);for(const t of e.removedTargetIds)this.ct(t,e.key,e.F)}ht(e){this.forEachTarget(e,t=>{const r=this.lt(t);switch(e.state){case 0:this.ft(t)&&r.W(e.resumeToken);break;case 1:r.tt(),r.K||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.K||this.removeTarget(t);break;case 3:this.ft(t)&&(r.et(),r.W(e.resumeToken));break;case 4:this.ft(t)&&(this.dt(t),r.W(e.resumeToken));break;default:tt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((r,o)=>{this.ft(o)&&t(o)})}_t(e){const t=e.targetId,r=e.$.count,o=this.wt(t);if(o){const l=o.target;if(z_(l))if(0===r){const d=new Ve(l.path);this.ct(t,d,Tn.newNoDocument(d,mt.min()))}else vt(1===r);else this.gt(t)!==r&&(this.dt(t),this.ot=this.ot.add(t))}}yt(e){const t=new Map;this.st.forEach((l,d)=>{const m=this.wt(d);if(m){if(l.current&&z_(m.target)){const w=new Ve(m.target.path);null!==this.it.get(w)||this.It(d,w)||this.ct(d,w,Tn.newNoDocument(w,e))}l.j&&(t.set(d,l.H()),l.J())}});let r=rn();this.rt.forEach((l,d)=>{let m=!0;d.forEachWhile(w=>{const C=this.wt(w);return!C||2===C.purpose||(m=!1,!1)}),m&&(r=r.add(l))}),this.it.forEach((l,d)=>d.setReadTime(e));const o=new op(e,t,this.ot,this.it,r);return this.it=Us(),this.rt=av(),this.ot=new En($t),o}at(e,t){if(!this.ft(e))return;const r=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,r),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}ct(e,t,r){if(!this.ft(e))return;const o=this.lt(e);this.It(e,t)?o.Y(t,1):o.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),r&&(this.it=this.it.insert(t,r))}removeTarget(e){this.st.delete(e)}gt(e){const t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let t=this.st.get(e);return t||(t=new ov,this.st.set(e,t)),t}Tt(e){let t=this.rt.get(e);return t||(t=new En($t),this.rt=this.rt.insert(e,t)),t}ft(e){const t=null!==this.wt(e);return t||Ne("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.st.get(e);return t&&t.K?null:this.nt.Et(e)}dt(e){this.st.set(e,new ov),this.nt.getRemoteKeysForTarget(e).forEach(t=>{this.ct(e,t,null)})}It(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}function av(){return new kn(Ve.comparator)}function uv(){return new kn(Ve.comparator)}const Vb={asc:"ASCENDING",desc:"DESCENDING"},kw={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class Fw{constructor(e,t){this.databaseId=e,this.N=t}}function up(n,e){return n.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function lv(n,e){return n.N?e.toBase64():e.toUint8Array()}function Ub(n,e){return up(n,e.toTimestamp())}function sn(n){return vt(!!n),mt.fromTimestamp(function(e){const t=Mu(e);return new Wn(t.seconds,t.nanos)}(n))}function Fu(n,e){return(t=n,new Zt(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function Lw(n){const e=Zt.fromString(n);return vt($w(e)),e}function lp(n,e){return Fu(n.databaseId,e.path)}function xa(n,e){const t=Lw(e);if(t.get(1)!==n.databaseId.projectId)throw new Ae(ae.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ae(ae.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ve(Uw(t))}function hc(n,e){return Fu(n.databaseId,e)}function Vw(n){const e=Lw(n);return 4===e.length?Zt.emptyPath():Uw(e)}function fc(n){return new Zt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Uw(n){return vt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function cv(n,e,t){return{name:lp(n,e),fields:t.value.mapValue.fields}}function Bw(n,e,t){const r=xa(n,e.name),o=sn(e.updateTime),l=new ni({mapValue:{fields:e.fields}}),d=Tn.newFoundDocument(r,o,l);return t&&d.setHasCommittedMutations(),t?d.setHasCommittedMutations():d}function dh(n,e){let t;if(e instanceof sp)t={update:cv(n,e.key,e.value)};else if(e instanceof Ui)t={delete:lp(n,e.key)};else if(e instanceof cc)t={update:cv(n,e.key,e.data),updateMask:Hb(e.fieldMask)};else{if(!(e instanceof ev))return tt();t={verify:lp(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,l){const d=l.transform;if(d instanceof uh)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof uc)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof lc)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof lh)return{fieldPath:l.field.canonicalString(),increment:d.k};throw tt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(o=e.precondition).updateTime?{updateTime:Ub(n,o.updateTime)}:void 0!==o.exists?{exists:o.exists}:tt()),t;var o}function Dm(n,e){const t=e.currentDocument?void 0!==(o=e.currentDocument).updateTime?Xn.updateTime(sn(o.updateTime)):void 0!==o.exists?Xn.exists(o.exists):Xn.none():Xn.none(),r=e.updateTransforms?e.updateTransforms.map(o=>function(l,d){let m=null;"setToServerValue"in d?(vt("REQUEST_TIME"===d.setToServerValue),m=new uh):"appendMissingElements"in d?m=new uc(d.appendMissingElements.values||[]):"removeAllFromArray"in d?m=new lc(d.removeAllFromArray.values||[]):"increment"in d?m=new lh(l,d.increment):tt();const w=kr.fromServerFormat(d.fieldPath);return new Ma(w,m)}(n,o)):[];var o;if(e.update){const o=xa(n,e.update.name),l=new ni({mapValue:{fields:e.update.fields}});if(e.updateMask){const d=new Qd((e.updateMask.fieldPaths||[]).map(C=>kr.fromServerFormat(C)));return new cc(o,l,d,t,r)}return new sp(o,l,t,r)}if(e.delete){const o=xa(n,e.delete);return new Ui(o,t)}if(e.verify){const o=xa(n,e.verify);return new ev(o,t)}return tt()}function Cm(n,e){return{documents:[hc(n,e.path)]}}function jb(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=hc(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=hc(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const o=function(w){if(0===w.length)return;const C=w.map(x=>function(N){if("=="===N.op){if(uw(N.value))return{unaryFilter:{field:hh(N.field),op:"IS_NAN"}};if(aw(N.value))return{unaryFilter:{field:hh(N.field),op:"IS_NULL"}}}else if("!="===N.op){if(uw(N.value))return{unaryFilter:{field:hh(N.field),op:"IS_NOT_NAN"}};if(aw(N.value))return{unaryFilter:{field:hh(N.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:hh(N.field),op:jw(N.op),value:N.value}}}(x));return 1===C.length?C[0]:{compositeFilter:{op:"AND",filters:C}}}(e.filters);o&&(t.structuredQuery.where=o);const l=function(w){if(0!==w.length)return w.map(C=>{return{field:hh((x=C).field),direction:Tm(x.dir)};var x})}(e.orderBy);l&&(t.structuredQuery.orderBy=l);const d=(C=e.limit,n.N||nc(C)?C:{value:C});var C,m,w;return null!==d&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt={before:(m=e.startAt).inclusive,values:m.position}),e.endAt&&(t.structuredQuery.endAt={before:!(w=e.endAt).inclusive,values:w.position}),t}function hv(n){let e=Vw(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){vt(1===r);const x=t.from[0];x.allDescendants?o=x.collectionId:e=e.child(x.collectionId)}let l=[];t.where&&(l=fv(t.where));let d=[];t.orderBy&&(d=t.orderBy.map(x=>{return new ih(Lu((N=x).field),function(H){switch(H){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(N.direction));var N}));let m=null;t.limit&&(m=function(x){let N;return N="object"==typeof x?x.value:x,nc(N)?null:N}(t.limit));let w=null;var x;t.startAt&&(w=new Ou((x=t.startAt).values||[],!!x.before));let C=null;return t.endAt&&(C=function(x){return new Ou(x.values||[],!x.before)}(t.endAt)),sh(e,o,d,l,m,"F",w,C)}function fv(n){return n?void 0!==n.unaryFilter?[pA(n)]:void 0!==n.fieldFilter?[pv(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>fv(e)).reduce((e,t)=>e.concat(t)):tt():[]}function Tm(n){return Vb[n]}function jw(n){return kw[n]}function hh(n){return{fieldPath:n.canonicalString()}}function Lu(n){return kr.fromServerFormat(n.fieldPath)}function pv(n){return cr.create(Lu(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return tt()}}(n.fieldFilter.op),n.fieldFilter.value)}function pA(n){switch(n.unaryFilter.op){case"IS_NAN":const e=Lu(n.unaryFilter.field);return cr.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=Lu(n.unaryFilter.field);return cr.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Lu(n.unaryFilter.field);return cr.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Lu(n.unaryFilter.field);return cr.create(o,"!=",{nullValue:"NULL_VALUE"});default:return tt()}}function Hb(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function $w(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Ir(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Gw(e)),e=Hw(n.get(t),e);return Gw(e)}function Hw(n,e){let t=e;const r=n.length;for(let o=0;o<r;o++){const l=n.charAt(o);switch(l){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=l}}return t}function Gw(n){return n+"\x01\x01"}function Bs(n){const e=n.length;if(vt(e>=2),2===e)return vt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Zt.emptyPath();const t=e-2,r=[];let o="";for(let l=0;l<e;){const d=n.indexOf("\x01",l);switch((d<0||d>t)&&tt(),n.charAt(d+1)){case"\x01":const m=n.substring(l,d);let w;0===o.length?w=m:(o+=m,w=o,o=""),r.push(w);break;case"\x10":o+=n.substring(l,d),o+="\0";break;case"\x11":o+=n.substring(l,d+1);break;default:tt()}l=d+2}return new Zt(r)}const gv=["userId","batchId"];function Am(n,e){return[n,Ir(e)]}function qw(n,e,t){return[n,Ir(e),t]}const zw={},Gb=["prefixPath","collectionGroup","readTime","documentId"],Ww=["prefixPath","collectionGroup","documentId"],Kw=["collectionGroup","readTime","prefixPath","documentId"],Zw=["canonicalId","targetId"],Yw=["targetId","path"],qb=["path","targetId"],zb=["collectionId","parent"],gA=["indexId","uid"],Qw=["uid","sequenceNumber"],mA=["indexId","uid","arrayValue","directionalValue","documentKey"],yA=["indexId","uid","documentKey"],_A=["userId","collectionPath","documentId"],vA=["userId","collectionPath","largestBatchId"],EA=["userId","collectionGroup","largestBatchId"],Wb=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],wA=[...Wb,"documentOverlays"],Kb=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Sm=[...Kb,"indexConfiguration","indexState","indexEntries"],Zb="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class mv{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class ce{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&tt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ce((r,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(r,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(r,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ce?t:ce.resolve(t)}catch(t){return ce.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ce.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ce.reject(t)}static resolve(e){return new ce((t,r)=>{t(e)})}static reject(e){return new ce((t,r)=>{r(e)})}static waitFor(e){return new ce((t,r)=>{let o=0,l=0,d=!1;e.forEach(m=>{++o,m.next(()=>{++l,d&&l===o&&t()},w=>r(w))}),d=!0,l===o&&t()})}static or(e){let t=ce.resolve(!1);for(const r of e)t=t.next(o=>o?ce.resolve(o):r());return t}static forEach(e,t){const r=[];return e.forEach((o,l)=>{r.push(t.call(this,o,l))}),this.waitFor(r)}}class cp{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.At=new zn,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{t.error?this.At.reject(new pc(e,t.error)):this.At.resolve()},this.transaction.onerror=r=>{const o=Mm(r.target.error);this.At.reject(new pc(e,o))}}static open(e,t,r,o){try{return new cp(t,e.transaction(o,r))}catch(l){throw new pc(t,l)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||(Ne("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}bt(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Jw(t)}}class js{constructor(e,t,r){this.name=e,this.version=t,this.Pt=r,12.2===js.Vt((0,jt.z$)())&&On("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ne("SimpleDb","Removing database:",e),Uu(window.indexedDB.deleteDatabase(e)).toPromise()}static vt(){if(!(0,jt.hl)())return!1;if(js.St())return!0;const e=(0,jt.z$)(),t=js.Vt(e),r=0<t&&t<10,o=js.Dt(e),l=0<o&&o<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||l)}static St(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Ct)}static xt(e,t){return e.store(t)}static Vt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static Dt(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}Nt(e){var t=this;return(0,_e.Z)(function*(){return t.db||(Ne("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,o)=>{const l=indexedDB.open(t.name,t.version);l.onsuccess=d=>{r(d.target.result)},l.onblocked=()=>{o(new pc(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},l.onerror=d=>{const m=d.target.error;o("VersionError"===m.name?new Ae(ae.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===m.name?new Ae(ae.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+m):new pc(e,m))},l.onupgradeneeded=d=>{Ne("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',d.oldVersion),t.Pt.kt(d.target.result,l.transaction,d.oldVersion,t.version).next(()=>{Ne("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Mt&&(t.db.onversionchange=r=>t.Mt(r)),t.db})()}Ot(e){this.Mt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,o){var l=this;return(0,_e.Z)(function*(){const d="readonly"===t;let m=0;for(;;){++m;try{l.db=yield l.Nt(e);const w=cp.open(l.db,e,d?"readonly":"readwrite",r),C=o(w).next(x=>(w.bt(),x)).catch(x=>(w.abort(x),ce.reject(x))).toPromise();return C.catch(()=>{}),yield w.Rt,C}catch(w){const C="FirebaseError"!==w.name&&m<3;if(Ne("SimpleDb","Transaction failed with error:",w.message,"Retrying:",C),l.close(),!C)return Promise.reject(w)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class IA{constructor(e){this.Ft=e,this.$t=!1,this.Bt=null}get isDone(){return this.$t}get Lt(){return this.Bt}set cursor(e){this.Ft=e}done(){this.$t=!0}Ut(e){this.Bt=e}delete(){return Uu(this.Ft.delete())}}class pc extends Ae{constructor(e,t){super(ae.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Vu(n){return"IndexedDbTransactionError"===n.name}class Jw{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Ne("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Ne("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Uu(r)}add(e){return Ne("SimpleDb","ADD",this.store.name,e,e),Uu(this.store.add(e))}get(e){return Uu(this.store.get(e)).next(t=>(void 0===t&&(t=null),Ne("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Ne("SimpleDb","DELETE",this.store.name,e),Uu(this.store.delete(e))}count(){return Ne("SimpleDb","COUNT",this.store.name),Uu(this.store.count())}qt(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const o=this.cursor(r),l=[];return this.Gt(o,(d,m)=>{l.push(m)}).next(()=>l)}{const o=this.store.getAll(r.range);return new ce((l,d)=>{o.onerror=m=>{d(m.target.error)},o.onsuccess=m=>{l(m.target.result)}})}}Kt(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new ce((o,l)=>{r.onerror=d=>{l(d.target.error)},r.onsuccess=d=>{o(d.target.result)}})}Qt(e,t){Ne("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.jt=!1;const o=this.cursor(r);return this.Gt(o,(l,d,m)=>m.delete())}Wt(e,t){let r;t?r=e:(r={},t=e);const o=this.cursor(r);return this.Gt(o,t)}zt(e){const t=this.cursor({});return new ce((r,o)=>{t.onerror=l=>{const d=Mm(l.target.error);o(d)},t.onsuccess=l=>{const d=l.target.result;d?e(d.primaryKey,d.value).next(m=>{m?d.continue():r()}):r()}})}Gt(e,t){const r=[];return new ce((o,l)=>{e.onerror=d=>{l(d.target.error)},e.onsuccess=d=>{const m=d.target.result;if(!m)return void o();const w=new IA(m),C=t(m.primaryKey,m.value,w);if(C instanceof ce){const x=C.catch(N=>(w.done(),ce.reject(N)));r.push(x)}w.isDone?o():null===w.Lt?m.continue():m.continue(w.Lt)}}).next(()=>ce.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.jt?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Uu(n){return new ce((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const o=Mm(r.target.error);t(o)}})}let Yb=!1;function Mm(n){const e=js.Vt((0,jt.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Ae("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Yb||(Yb=!0,setTimeout(()=>{throw r},0)),r}}return n}class Xw extends mv{constructor(e,t){super(),this.Ht=e,this.currentSequenceNumber=t}}function dr(n,e){const t=$e(n);return js.xt(t.Ht,e)}class yv{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&kb(l,e,r[o])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&X_(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&X_(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const r=e.get(t.key),o=r;this.applyToLocalView(o),r.isValidDocument()||o.convertToNoDocument(mt.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),rn())}isEqual(e){return this.batchId===e.batchId&&Wf(this.mutations,e.mutations,(t,r)=>Tw(t,r))&&Wf(this.baseMutations,e.baseMutations,(t,r)=>Tw(t,r))}}class eI{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){vt(e.mutations.length===r.length);let o=rv;const l=e.mutations;for(let d=0;d<l.length;d++)o=o.insert(l[d].key,r[d].version);return new eI(e,t,r,o)}}class tI{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class gc{constructor(e,t,r,o,l=mt.min(),d=mt.min(),m=lr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=m}withSequenceNumber(e){return new gc(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new gc(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new gc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class nI{constructor(e){this.Jt=e}}function rI(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:_v(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:lp(o=n.Jt,(l=e).key),fields:l.data.value.mapValue.fields,updateTime:up(o,l.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:mc(e.version)};else{if(!e.isUnknownDocument())return tt();r.unknownDocument={path:t.path.toArray(),version:mc(e.version)}}var o,l;return r}function _v(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function mc(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Ra(n){const e=new Wn(n.seconds,n.nanoseconds);return mt.fromTimestamp(e)}function fh(n,e){const t=(e.baseMutations||[]).map(l=>Dm(n.Jt,l));for(let l=0;l<e.mutations.length-1;++l){const d=e.mutations[l];l+1<e.mutations.length&&void 0!==e.mutations[l+1].transform&&(d.updateTransforms=e.mutations[l+1].transform.fieldTransforms,e.mutations.splice(l+1,1),++l)}const r=e.mutations.map(l=>Dm(n.Jt,l)),o=Wn.fromMillis(e.localWriteTimeMs);return new yv(e.batchId,o,t,r)}function xi(n){const e=Ra(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Ra(n.lastLimboFreeSnapshotVersion):mt.min();let r;var o;return void 0!==n.query.documents?(vt(1===(o=n.query).documents.length),r=_o(oh(Vw(o.documents[0])))):r=_o(hv(n.query)),new gc(r,n.targetId,0,n.lastListenSequenceNumber,e,t,lr.fromBase64String(n.resumeToken))}function iI(n,e){const t=mc(e.snapshotVersion),r=mc(e.lastLimboFreeSnapshotVersion);let o;o=z_(e.target)?Cm(n.Jt,e.target):jb(n.Jt,e.target);const l=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Nu(e.target),readTime:t,resumeToken:l,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:o}}function dp(n){const e=hv({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?_w(e,e.limit,"L"):e}function vv(n,e){return new tI(e.largestBatchId,Dm(n.Jt,e.overlayMutation))}function sI(n,e){const t=e.path.lastSegment();return[n,Ir(e.path.popLast()),t]}class Ev{getBundleMetadata(e,t){return wv(e).get(t).next(r=>{if(r)return{id:(o=r).bundleId,createTime:Ra(o.createTime),version:o.version};var o})}saveBundleMetadata(e,t){return wv(e).put({bundleId:(r=t).id,createTime:mc(sn(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return Iv(e).get(t).next(r=>{if(r)return{name:(o=r).name,query:dp(o.bundledQuery),readTime:Ra(o.readTime)};var o})}saveNamedQuery(e,t){return Iv(e).put({name:(r=t).name,readTime:mc(sn(r.readTime)),bundledQuery:r.bundledQuery});var r}}function wv(n){return dr(n,"bundles")}function Iv(n){return dr(n,"namedQueries")}class Dv{constructor(e,t){this.M=e,this.userId=t}static Yt(e,t){return new Dv(e,t.uid||"")}getOverlay(e,t){return ph(e).get(sI(this.userId,t)).next(r=>r?vv(this.M,r):null)}saveOverlays(e,t,r){const o=[];return r.forEach((l,d)=>{const m=new tI(t,d);o.push(this.Xt(e,m))}),ce.waitFor(o)}removeOverlaysForBatchId(e,t,r){const o=new Set;t.forEach(d=>o.add(Ir(d.getCollectionPath())));const l=[];return o.forEach(d=>{const m=IDBKeyRange.bound([this.userId,d,r],[this.userId,d,r+1],!1,!0);l.push(ph(e).Qt("collectionPathOverlayIndex",m))}),ce.waitFor(l)}getOverlaysForCollection(e,t,r){const o=dc(),l=Ir(t),d=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,Number.POSITIVE_INFINITY],!0);return ph(e).qt("collectionPathOverlayIndex",d).next(m=>{for(const w of m){const C=vv(this.M,w);o.set(C.getKey(),C)}return o})}getOverlaysForCollectionGroup(e,t,r,o){const l=dc();let d;const m=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return ph(e).Wt({index:"collectionGroupOverlayIndex",range:m},(w,C,x)=>{const N=vv(this.M,C);l.size()<o||N.largestBatchId===d?(l.set(N.getKey(),N),d=N.largestBatchId):x.done()}).next(()=>l)}Xt(e,t){return ph(e).put(function(r,o,l){const[d,m,w]=sI(o,l.mutation.key);return{userId:o,collectionPath:m,documentId:w,collectionGroup:l.mutation.key.getCollectionGroup(),largestBatchId:l.largestBatchId,overlayMutation:dh(r.Jt,l.mutation)}}(this.M,this.userId,t))}}function ph(n){return dr(n,"documentOverlays")}class yc{constructor(){}Zt(e,t){this.te(e,t),t.ee()}te(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(yn(e.integerValue));else if("doubleValue"in e){const r=yn(e.doubleValue);isNaN(r)?this.ne(t,13):(this.ne(t,15),rc(r)?t.se(0):t.se(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ne(t,20),"string"==typeof r?t.ie(r):(t.ie(`${r.seconds||""}`),t.se(r.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(tc(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ne(t,45),t.se(r.latitude||0),t.se(r.longitude||0)}else"mapValue"in e?q_(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):tt()}re(e,t){this.ne(t,25),this.le(e,t)}le(e,t){t.ie(e)}ce(e,t){const r=e.fields||{};this.ne(t,55);for(const o of Object.keys(r))this.re(o,t),this.te(r[o],t)}he(e,t){const r=e.values||[];this.ne(t,50);for(const o of r)this.te(o,t)}ae(e,t){this.ne(t,37),Ve.fromName(e).path.forEach(r=>{this.ne(t,60),this.le(r,t)})}ne(e,t){e.se(t)}oe(e){e.se(2)}}function Jb(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function oI(n){const e=64-function(t){let r=0;for(let o=0;o<8;++o){const l=Jb(255&t[o]);if(r+=l,8!==l)break}return r}(n);return Math.ceil(e/8)}yc.fe=new yc;class bv{constructor(){this.buffer=new Uint8Array(1024),this.position=0}de(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this._e(r.value),r=t.next();this.we()}me(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.ge(r.value),r=t.next();this.ye()}pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this._e(r);else if(r<2048)this._e(960|r>>>6),this._e(128|63&r);else if(t<"\ud800"||"\udbff"<t)this._e(480|r>>>12),this._e(128|63&r>>>6),this._e(128|63&r);else{const o=t.codePointAt(0);this._e(240|o>>>18),this._e(128|63&o>>>12),this._e(128|63&o>>>6),this._e(128|63&o)}}this.we()}Ie(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.ge(r);else if(r<2048)this.ge(960|r>>>6),this.ge(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.ge(480|r>>>12),this.ge(128|63&r>>>6),this.ge(128|63&r);else{const o=t.codePointAt(0);this.ge(240|o>>>18),this.ge(128|63&o>>>12),this.ge(128|63&o>>>6),this.ge(128|63&o)}}this.ye()}Te(e){const t=this.Ee(e),r=oI(t);this.Ae(1+r),this.buffer[this.position++]=255&r;for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=255&t[o]}Re(e){const t=this.Ee(e),r=oI(t);this.Ae(1+r),this.buffer[this.position++]=~(255&r);for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=~(255&t[o])}be(){this.Pe(255),this.Pe(255)}Ve(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}Se(){return this.buffer.slice(0,this.position)}Ee(e){const t=function(o){const l=new DataView(new ArrayBuffer(8));return l.setFloat64(0,o,!1),new Uint8Array(l.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let o=1;o<t.length;++o)t[o]^=r?255:0;return t}_e(e){const t=255&e;0===t?(this.Pe(0),this.Pe(255)):255===t?(this.Pe(255),this.Pe(0)):this.Pe(t)}ge(e){const t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}we(){this.Pe(0),this.Pe(1)}ye(){this.ve(0),this.ve(1)}Pe(e){this.Ae(1),this.buffer[this.position++]=e}ve(e){this.Ae(1),this.buffer[this.position++]=~e}Ae(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const o=new Uint8Array(r);o.set(this.buffer),this.buffer=o}}class Eo{constructor(e){this.De=e}ue(e){this.De.de(e)}ie(e){this.De.pe(e)}se(e){this.De.Te(e)}ee(){this.De.be()}}class Xb{constructor(e){this.De=e}ue(e){this.De.me(e)}ie(e){this.De.Ie(e)}se(e){this.De.Re(e)}ee(){this.De.Ve()}}class Cv{constructor(){this.De=new bv,this.Ce=new Eo(this.De),this.xe=new Xb(this.De)}seed(e){this.De.seed(e)}Ne(e){return 0===e?this.Ce:this.xe}Se(){return this.De.Se()}reset(){this.De.reset()}}class Bu{constructor(e,t,r,o){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=o}ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Bu(this.indexId,this.documentKey,this.arrayValue,r)}}function ju(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=aI(n.arrayValue,e.arrayValue),0!==t?t:(t=aI(n.directionalValue,e.directionalValue),0!==t?t:Ve.comparator(n.documentKey,e.documentKey)))}function aI(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class eC{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Me=e.orderBy,this.Oe=[];for(const t of e.filters){const r=t;r.S()?this.Fe=r:this.Oe.push(r)}}$e(e){const t=Zf(e);if(void 0!==t&&!this.Be(t))return!1;const r=Ru(e);let o=0,l=0;for(;o<r.length&&this.Be(r[o]);++o);if(o===r.length)return!0;if(void 0!==this.Fe){const d=r[o];if(!this.Le(this.Fe,d)||!this.Ue(this.Me[l++],d))return!1;++o}for(;o<r.length;++o){const d=r[o];if(l>=this.Me.length||!this.Ue(this.Me[l++],d))return!1}return!0}Be(e){for(const t of this.Oe)if(this.Le(t,e))return!0;return!1}Le(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ue(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class uI{constructor(){this.qe=new Tv}addToCollectionParentIndex(e,t){return this.qe.add(t),ce.resolve()}getCollectionParents(e,t){return ce.resolve(this.qe.getEntries(t))}addFieldIndex(e,t){return ce.resolve()}deleteFieldIndex(e,t){return ce.resolve()}getDocumentsMatchingTarget(e,t){return ce.resolve(null)}getFieldIndex(e,t){return ce.resolve(null)}getFieldIndexes(e,t){return ce.resolve([])}getNextCollectionGroupToUpdate(e){return ce.resolve(null)}updateCollectionGroup(e,t,r){return ce.resolve()}updateIndexEntries(e,t){return ce.resolve()}}class Tv{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new En(Zt.comparator),l=!o.has(r);return this.index[t]=o.add(r),l}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new En(Zt.comparator)).toArray()}}const Av=new Uint8Array(0);class lI{constructor(e){this.user=e,this.Ge=new Tv,this.Ke=new vo(t=>Nu(t),(t,r)=>nh(t,r)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ge.has(t)){const r=t.lastSegment(),o=t.popLast();e.addOnCommittedListener(()=>{this.Ge.add(t)});const l={collectionId:r,parent:Ir(o)};return Sv(e).put(l)}return ce.resolve()}getCollectionParents(e,t){const r=[],o=IDBKeyRange.bound([t,""],[vb(t),""],!1,!0);return Sv(e).qt(o).next(l=>{for(const d of l){if(d.collectionId!==t)break;r.push(Bs(d.parent))}return r})}addFieldIndex(e,t){const r=xm(e),o={indexId:(l=t).indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(d=>[d.fieldPath.canonicalString(),d.kind])};var l;return delete o.indexId,r.add(o).next()}deleteFieldIndex(e,t){const r=xm(e),o=fp(e),l=hp(e);return r.delete(t.indexId).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>l.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=hp(e);let o=!0;const l=new Map;return ce.forEach(this.Qe(t),d=>this.getFieldIndex(e,d).next(m=>{o&&(o=!!m),l.set(d,m)})).next(()=>{if(o){let d=rn();return ce.forEach(l,(m,w)=>{var C;Ne("IndexedDbIndexManager",`Using index ${C=m,`id=${C.indexId}|cg=${C.collectionGroup}|f=${C.fields.map(ht=>`${ht.fieldPath}:${ht.kind}`).join(",")}`} to execute ${Nu(t)}`);const x=function(ht,wn){const Dt=Zf(wn);if(void 0===Dt)return null;for(const Ht of gm(ht,Dt.fieldPath))switch(Ht.op){case"array-contains-any":return Ht.value.arrayValue.values||[];case"array-contains":return[Ht.value]}return null}(w,m),N=function(ht,wn){const Dt=new Map;for(const Ht of Ru(wn))for(const Gt of gm(ht,Ht.fieldPath))switch(Gt.op){case"==":case"in":Dt.set(Ht.fieldPath.canonicalString(),Gt.value);break;case"not-in":case"!=":return Dt.set(Ht.fieldPath.canonicalString(),Gt.value),Array.from(Dt.values())}return null}(w,m),H=function(ht,wn){const Dt=[];let Ht=!0;for(const Ku of Ru(wn)){let wo,Cp=!0;for(const ii of gm(ht,Ku.fieldPath)){let er,Qm=!0;switch(ii.op){case"<":case"<=":er="nullValue"in(Gt=ii.value)?ow:"booleanValue"in Gt?{booleanValue:!1}:"integerValue"in Gt||"doubleValue"in Gt?{doubleValue:NaN}:"timestampValue"in Gt?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in Gt?{stringValue:""}:"bytesValue"in Gt?{bytesValue:""}:"referenceValue"in Gt?eh(Go.empty(),Ve.empty()):"geoPointValue"in Gt?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in Gt?{arrayValue:{}}:"mapValue"in Gt?{mapValue:{}}:tt();break;case"==":case"in":case">=":er=ii.value;break;case">":er=ii.value,Qm=!1;break;case"!=":case"not-in":er=ow}lw(wo,er)===er&&(wo=er,Cp=Qm)}if(null!==ht.startAt)for(let ii=0;ii<ht.orderBy.length;++ii)if(ht.orderBy[ii].field.isEqual(Ku.fieldPath)){const er=ht.startAt.position[ii];lw(wo,er)===er&&(wo=er,Cp=ht.startAt.inclusive);break}if(void 0===wo)return null;Dt.push(wo),Ht&&(Ht=Cp)}var Gt;return new Ou(Dt,Ht)}(w,m),K=function(ht,wn){const Dt=[];let Ht=!0;for(const Ku of Ru(wn)){let wo,Cp=!0;for(const ii of gm(ht,Ku.fieldPath)){let er,Qm=!0;switch(ii.op){case">=":case">":er="nullValue"in(Gt=ii.value)?{booleanValue:!1}:"booleanValue"in Gt?{doubleValue:NaN}:"integerValue"in Gt||"doubleValue"in Gt?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in Gt?{stringValue:""}:"stringValue"in Gt?{bytesValue:""}:"bytesValue"in Gt?eh(Go.empty(),Ve.empty()):"referenceValue"in Gt?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in Gt?{arrayValue:{}}:"arrayValue"in Gt?{mapValue:{}}:"mapValue"in Gt?j_:tt(),Qm=!1;break;case"==":case"in":case"<=":er=ii.value;break;case"<":er=ii.value,Qm=!1;break;case"!=":case"not-in":er=j_}cw(wo,er)===er&&(wo=er,Cp=Qm)}if(null!==ht.endAt)for(let ii=0;ii<ht.orderBy.length;++ii)if(ht.orderBy[ii].field.isEqual(Ku.fieldPath)){const er=ht.endAt.position[ii];cw(wo,er)===er&&(wo=er,Cp=ht.endAt.inclusive);break}if(void 0===wo)return null;Dt.push(wo),Ht&&(Ht=Cp)}var Gt;return new Ou(Dt,Ht)}(w,m),fe=this.je(m,w,H),Fe=this.je(m,w,K),rt=this.We(m,w,N),zt=this.ze(m.indexId,x,fe,!!H&&H.inclusive,Fe,!!K&&K.inclusive,rt);return ce.forEach(zt,ht=>r.Kt(ht,t.limit).next(wn=>{wn.forEach(Dt=>{d=d.add(new Ve(Bs(Dt.documentKey)))})}))}).next(()=>d)}return ce.resolve(null)})}Qe(e){let t=this.Ke.get(e);return t||(t=[e],this.Ke.set(e,t),t)}ze(e,t,r,o,l,d,m){const w=(null!=t?t.length:1)*Math.max(null!=r?r.length:1,null!=l?l.length:1),C=w/(null!=t?t.length:1),x=[];for(let N=0;N<w;++N){const H=t?this.He(t[N/C]):Av,K=r?this.Je(e,H,r[N%C],o):this.Ye(e),fe=l?this.Xe(e,H,l[N%C],d):this.Ye(e+1);x.push(...this.createRange(K,fe,m.map(Fe=>this.Je(e,H,Fe,!0))))}return x}Je(e,t,r,o){const l=new Bu(e,Ve.empty(),t,r);return o?l:l.ke()}Xe(e,t,r,o){const l=new Bu(e,Ve.empty(),t,r);return o?l.ke():l}Ye(e){return new Bu(e,Ve.empty(),Av,Av)}getFieldIndex(e,t){const r=new eC(t),o=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,o).next(l=>{const d=l.filter(m=>r.$e(m));return d.sort((m,w)=>w.fields.length-m.fields.length),d.length>0?d[0]:null})}Ze(e,t){const r=new Cv;for(const o of Ru(e)){const l=t.data.field(o.fieldPath);if(null==l)return null;const d=r.Ne(o.kind);yc.fe.Zt(l,d)}return r.Se()}He(e){const t=new Cv;return yc.fe.Zt(e,t.Ne(0)),t.Se()}We(e,t,r){if(null===r)return[];let o=[];o.push(new Cv);let l=0;for(const d of Ru(e)){const m=r[l++];for(const w of o)if(this.tn(t,d.fieldPath)&&Kf(m))o=this.en(o,d,m);else{const C=w.Ne(d.kind);yc.fe.Zt(m,C)}}return this.nn(o)}je(e,t,r){return null==r?null:this.We(e,t,r.position)}nn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Se();return t}en(e,t,r){const o=[...e],l=[];for(const d of r.arrayValue.values||[])for(const m of o){const w=new Cv;w.seed(m.Se()),yc.fe.Zt(d,w.Ne(t.kind)),l.push(w)}return l}tn(e,t){return!!e.filters.find(r=>r instanceof cr&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=xm(e),o=fp(e);return(t?r.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.qt()).next(l=>{const d=[];return ce.forEach(l,m=>o.get([m.indexId,this.uid]).next(w=>{d.push(function(C,x){const N=x?new oc(x.sequenceNumber,new yo(Ra(x.readTime),new Ve(Bs(x.documentKey)),x.largestBatchId)):oc.empty(),H=C.fields.map(([K,fe])=>new Yf(kr.fromServerFormat(K),fe));return new pm(C.indexId,C.collectionGroup,H,N)}(m,w))})).next(()=>d)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,o)=>{const l=r.indexState.sequenceNumber-o.indexState.sequenceNumber;return 0!==l?l:$t(r.collectionGroup,o.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const o=xm(e),l=fp(e);return this.sn(e).next(d=>o.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(m=>ce.forEach(m,w=>{return l.put({indexId:w.indexId,uid:this.user.uid||"",sequenceNumber:d,readTime:mc((H=r).readTime),documentKey:Ir(H.documentKey.path),largestBatchId:H.largestBatchId});var H})))}updateIndexEntries(e,t){const r=new Map;return ce.forEach(t,(o,l)=>{const d=r.get(o.collectionGroup);return(d?ce.resolve(d):this.getFieldIndexes(e,o.collectionGroup)).next(m=>(r.set(o.collectionGroup,m),ce.forEach(m,w=>this.rn(e,o,w).next(C=>{const x=this.on(l,w);return C.isEqual(x)?ce.resolve():this.un(e,l,C,x)}))))})}an(e,t,r){return hp(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,documentKey:Ir(t.key.path)})}cn(e,t,r){return hp(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,Ir(t.key.path)])}rn(e,t,r){const o=hp(e);let l=new En(ju);return o.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,Ir(t.path)])},(d,m)=>{l=l.add(new Bu(r.indexId,t,m.arrayValue,m.directionalValue))}).next(()=>l)}on(e,t){let r=new En(ju);const o=this.Ze(t,e);if(null==o)return r;const l=Zf(t);if(null!=l){const d=e.data.field(l.fieldPath);if(Kf(d))for(const m of d.arrayValue.values||[])r=r.add(new Bu(t.indexId,e.key,this.He(m),o))}else r=r.add(new Bu(t.indexId,e.key,Av,o));return r}un(e,t,r,o){Ne("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const l=[];return function(d,m,w,C,x){const N=d.getIterator(),H=m.getIterator();let K=ku(N),fe=ku(H);for(;K||fe;){let Fe=!1,rt=!1;if(K&&fe){const zt=w(K,fe);zt<0?rt=!0:zt>0&&(Fe=!0)}else null!=K?rt=!0:Fe=!0;Fe?(C(fe),fe=ku(H)):rt?(x(K),K=ku(N)):(K=ku(N),fe=ku(H))}}(r,o,ju,d=>{l.push(this.an(e,t,d))},d=>{l.push(this.cn(e,t,d))}),ce.waitFor(l)}sn(e){let t=1;return fp(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,o,l)=>{l.done(),t=o.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((d,m)=>ju(d,m)).filter((d,m,w)=>!m||0!==ju(d,w[m-1]));const o=[];o.push(e);for(const d of r){const m=ju(d,e),w=ju(d,t);if(0===m)o[0]=e.ke();else if(m>0&&w<0)o.push(d),o.push(d.ke());else if(w>0)break}o.push(t);const l=[];for(let d=0;d<o.length;d+=2)l.push(IDBKeyRange.bound([o[d].indexId,this.uid,o[d].arrayValue,o[d].directionalValue,""],[o[d+1].indexId,this.uid,o[d+1].arrayValue,o[d+1].directionalValue,""]));return l}}function Sv(n){return dr(n,"collectionParents")}function hp(n){return dr(n,"indexEntries")}function xm(n){return dr(n,"indexConfiguration")}function fp(n){return dr(n,"indexState")}const Rm={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class mi{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new mi(e,mi.DEFAULT_COLLECTION_PERCENTILE,mi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Mv(n,e,t){const r=n.store("mutations"),o=n.store("documentMutations"),l=[],d=IDBKeyRange.only(t.batchId);let m=0;const w=r.Wt({range:d},(x,N,H)=>(m++,H.delete()));l.push(w.next(()=>{vt(1===m)}));const C=[];for(const x of t.mutations){const N=qw(e,x.key.path,t.batchId);l.push(o.delete(N)),C.push(x.key)}return ce.waitFor(l).next(()=>C)}function Nm(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw tt();e=n.noDocument}return JSON.stringify(e).length}mi.DEFAULT_COLLECTION_PERCENTILE=10,mi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,mi.DEFAULT=new mi(41943040,mi.DEFAULT_COLLECTION_PERCENTILE,mi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),mi.DISABLED=new mi(-1,0,0);class Om{constructor(e,t,r,o){this.userId=e,this.M=t,this.indexManager=r,this.referenceDelegate=o,this.hn={}}static Yt(e,t,r,o){vt(""!==e.uid);const l=e.isAuthenticated()?e.uid:"";return new Om(l,t,r,o)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return $u(e).Wt({index:"userMutationsIndex",range:r},(o,l,d)=>{t=!1,d.done()}).next(()=>t)}addMutationBatch(e,t,r,o){const l=gh(e),d=$u(e);return d.add({}).next(m=>{vt("number"==typeof m);const w=new yv(m,t,r,o),C=function(H,K,fe){const Fe=fe.baseMutations.map(zt=>dh(H.Jt,zt)),rt=fe.mutations.map(zt=>dh(H.Jt,zt));return{userId:K,batchId:fe.batchId,localWriteTimeMs:fe.localWriteTime.toMillis(),baseMutations:Fe,mutations:rt}}(this.M,this.userId,w),x=[];let N=new En((H,K)=>$t(H.canonicalString(),K.canonicalString()));for(const H of o){const K=qw(this.userId,H.key.path,m);N=N.add(H.key.path.popLast()),x.push(d.put(C)),x.push(l.put(K,zw))}return N.forEach(H=>{x.push(this.indexManager.addToCollectionParentIndex(e,H))}),e.addOnCommittedListener(()=>{this.hn[m]=w.keys()}),ce.waitFor(x).next(()=>w)})}lookupMutationBatch(e,t){return $u(e).get(t).next(r=>r?(vt(r.userId===this.userId),fh(this.M,r)):null)}ln(e,t){return this.hn[t]?ce.resolve(this.hn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const o=r.keys();return this.hn[t]=o,o}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=IDBKeyRange.lowerBound([this.userId,r]);let l=null;return $u(e).Wt({index:"userMutationsIndex",range:o},(d,m,w)=>{m.userId===this.userId&&(vt(m.batchId>=r),l=fh(this.M,m)),w.done()}).next(()=>l)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return $u(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(o,l,d)=>{r=l.batchId,d.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return $u(e).qt("userMutationsIndex",t).next(r=>r.map(o=>fh(this.M,o)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Am(this.userId,t.path),o=IDBKeyRange.lowerBound(r),l=[];return gh(e).Wt({range:o},(d,m,w)=>{const[C,x,N]=d,H=Bs(x);if(C===this.userId&&t.path.isEqual(H))return $u(e).get(N).next(K=>{if(!K)throw tt();vt(K.userId===this.userId),l.push(fh(this.M,K))});w.done()}).next(()=>l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new En($t);const o=[];return t.forEach(l=>{const d=Am(this.userId,l.path),m=IDBKeyRange.lowerBound(d),w=gh(e).Wt({range:m},(C,x,N)=>{const[H,K,fe]=C,Fe=Bs(K);H===this.userId&&l.path.isEqual(Fe)?r=r.add(fe):N.done()});o.push(w)}),ce.waitFor(o).next(()=>this.fn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1,l=Am(this.userId,r),d=IDBKeyRange.lowerBound(l);let m=new En($t);return gh(e).Wt({range:d},(w,C,x)=>{const[N,H,K]=w,fe=Bs(H);N===this.userId&&r.isPrefixOf(fe)?fe.length===o&&(m=m.add(K)):x.done()}).next(()=>this.fn(e,m))}fn(e,t){const r=[],o=[];return t.forEach(l=>{o.push($u(e).get(l).next(d=>{if(null===d)throw tt();vt(d.userId===this.userId),r.push(fh(this.M,d))}))}),ce.waitFor(o).next(()=>r)}removeMutationBatch(e,t){return Mv(e.Ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.dn(t.batchId)}),ce.forEach(r,o=>this.referenceDelegate.markPotentiallyOrphaned(e,o))))}dn(e){delete this.hn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return ce.resolve();const r=IDBKeyRange.lowerBound([this.userId]),o=[];return gh(e).Wt({range:r},(l,d,m)=>{if(l[0]===this.userId){const w=Bs(l[1]);o.push(w)}else m.done()}).next(()=>{vt(0===o.length)})})}containsKey(e,t){return xv(e,this.userId,t)}_n(e){return tC(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function xv(n,e,t){const r=Am(e,t.path),o=r[1],l=IDBKeyRange.lowerBound(r);let d=!1;return gh(n).Wt({range:l,jt:!0},(m,w,C)=>{const[x,N,H]=m;x===e&&N===o&&(d=!0),C.done()}).next(()=>d)}function $u(n){return dr(n,"mutations")}function gh(n){return dr(n,"documentMutations")}function tC(n){return dr(n,"mutationQueues")}class mh{constructor(e){this.wn=e}next(){return this.wn+=2,this.wn}static mn(){return new mh(0)}static gn(){return new mh(-1)}}class cI{constructor(e,t){this.referenceDelegate=e,this.M=t}allocateTargetId(e){return this.yn(e).next(t=>{const r=new mh(t.highestTargetId);return t.highestTargetId=r.next(),this.pn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.yn(e).next(t=>mt.fromTimestamp(new Wn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.yn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.yn(e).next(o=>(o.highestListenSequenceNumber=t,r&&(o.lastRemoteSnapshotVersion=r.toTimestamp()),t>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=t),this.pn(e,o)))}addTargetData(e,t){return this.In(e,t).next(()=>this.yn(e).next(r=>(r.targetCount+=1,this.Tn(t,r),this.pn(e,r))))}updateTargetData(e,t){return this.In(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>yh(e).delete(t.targetId)).next(()=>this.yn(e)).next(r=>(vt(r.targetCount>0),r.targetCount-=1,this.pn(e,r)))}removeTargets(e,t,r){let o=0;const l=[];return yh(e).Wt((d,m)=>{const w=xi(m);w.sequenceNumber<=t&&null===r.get(w.targetId)&&(o++,l.push(this.removeTargetData(e,w)))}).next(()=>ce.waitFor(l)).next(()=>o)}forEachTarget(e,t){return yh(e).Wt((r,o)=>{const l=xi(o);t(l)})}yn(e){return dI(e).get("targetGlobalKey").next(t=>(vt(null!==t),t))}pn(e,t){return dI(e).put("targetGlobalKey",t)}In(e,t){return yh(e).put(iI(this.M,t))}Tn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.yn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Nu(t),o=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let l=null;return yh(e).Wt({range:o,index:"queryTargetsIndex"},(d,m,w)=>{const C=xi(m);nh(t,C.target)&&(l=C,w.done())}).next(()=>l)}addMatchingKeys(e,t,r){const o=[],l=Hu(e);return t.forEach(d=>{const m=Ir(d.path);o.push(l.put({targetId:r,path:m})),o.push(this.referenceDelegate.addReference(e,r,d))}),ce.waitFor(o)}removeMatchingKeys(e,t,r){const o=Hu(e);return ce.forEach(t,l=>{const d=Ir(l.path);return ce.waitFor([o.delete([r,d]),this.referenceDelegate.removeReference(e,r,l)])})}removeMatchingKeysForTargetId(e,t){const r=Hu(e),o=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(o)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),o=Hu(e);let l=rn();return o.Wt({range:r,jt:!0},(d,m,w)=>{const C=Bs(d[1]),x=new Ve(C);l=l.add(x)}).next(()=>l)}containsKey(e,t){const r=Ir(t.path),o=IDBKeyRange.bound([r],[vb(r)],!1,!0);let l=0;return Hu(e).Wt({index:"documentTargetsIndex",jt:!0,range:o},([d,m],w,C)=>{0!==d&&(l++,C.done())}).next(()=>l>0)}Et(e,t){return yh(e).get(t).next(r=>r?xi(r):null)}}function yh(n){return dr(n,"targets")}function dI(n){return dr(n,"targetGlobal")}function Hu(n){return dr(n,"targetDocuments")}function _h(n){return hI.apply(this,arguments)}function hI(){return hI=(0,_e.Z)(function*(n){if(n.code!==ae.FAILED_PRECONDITION||n.message!==Zb)throw n;Ne("LocalStore","Unexpectedly lost primary lease")}),hI.apply(this,arguments)}function nC([n,e],[t,r]){const o=$t(n,t);return 0===o?$t(e,r):o}class DA{constructor(e){this.En=e,this.buffer=new En(nC),this.An=0}Rn(){return++this.An}bn(e){const t=[e,this.Rn()];if(this.buffer.size<this.En)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();nC(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class bA{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.Pn=!1,this.Vn=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.vn(e)}stop(){this.Vn&&(this.Vn.cancel(),this.Vn=null)}get started(){return null!==this.Vn}vn(e){var t=this;const r=this.Pn?3e5:6e4;Ne("LruGarbageCollector",`Garbage collection scheduled in ${r}ms`),this.Vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,(0,_e.Z)(function*(){t.Vn=null,t.Pn=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(o){Vu(o)?Ne("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",o):yield _h(o)}yield t.vn(e)}))}}class rC{constructor(e,t){this.Sn=e,this.params=t}calculateTargetCount(e,t){return this.Sn.Dn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return ce.resolve(us.A);const r=new DA(t);return this.Sn.forEachTarget(e,o=>r.bn(o.sequenceNumber)).next(()=>this.Sn.Cn(e,o=>r.bn(o))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Sn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Sn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Ne("LruGarbageCollector","Garbage collection skipped; disabled"),ce.resolve(Rm)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Ne("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Rm):this.xn(e,t))}getCacheSize(e){return this.Sn.getCacheSize(e)}xn(e,t){let r,o,l,d,m,w,C;const x=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(N=>(N>this.params.maximumSequenceNumbersToCollect?(Ne("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${N}`),o=this.params.maximumSequenceNumbersToCollect):o=N,d=Date.now(),this.nthSequenceNumber(e,o))).next(N=>(r=N,m=Date.now(),this.removeTargets(e,r,t))).next(N=>(l=N,w=Date.now(),this.removeOrphanedDocuments(e,r))).next(N=>(C=Date.now(),L_()<=vu.in.DEBUG&&Ne("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${d-x}ms\n\tDetermined least recently used ${o} in `+(m-d)+`ms\n\tRemoved ${l} targets in `+(w-m)+`ms\n\tRemoved ${N} documents in `+(C-w)+`ms\nTotal Duration: ${C-x}ms`),ce.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:N})))}}class Pm{constructor(e,t){this.db=e,this.garbageCollector=new rC(this,t)}Dn(e){const t=this.Nn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(o=>r+o))}Nn(e){let t=0;return this.Cn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Cn(e,t){return this.kn(e,(r,o)=>t(o))}addReference(e,t,r){return km(e,r)}removeReference(e,t,r){return km(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return km(e,t)}Mn(e,t){return function(r,o){let l=!1;return tC(r).zt(d=>xv(r,d,o).next(m=>(m&&(l=!0),ce.resolve(!m)))).next(()=>l)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[];let l=0;return this.kn(e,(d,m)=>{if(m<=t){const w=this.Mn(e,d).next(C=>{if(!C)return l++,r.getEntry(e,d).next(()=>(r.removeEntry(d,mt.min()),Hu(e).delete([0,Ir(d.path)])))});o.push(w)}}).next(()=>ce.waitFor(o)).next(()=>r.apply(e)).next(()=>l)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return km(e,t)}kn(e,t){const r=Hu(e);let o,l=us.A;return r.Wt({index:"documentTargetsIndex"},([d,m],{path:w,sequenceNumber:C})=>{0===d?(l!==us.A&&t(new Ve(Bs(o)),l),l=C,o=w):l=us.A}).next(()=>{l!==us.A&&t(new Ve(Bs(o)),l)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function km(n,e){return Hu(n).put((r=n.currentSequenceNumber,{targetId:0,path:Ir(e.path),sequenceNumber:r}));var r}class fI{constructor(){this.changes=new vo(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Tn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?ce.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class pI{constructor(e){this.M=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Na(e).put(r)}removeEntry(e,t,r){return Na(e).delete(function(o,l){const d=o.path.toArray();return[d.slice(0,d.length-2),d[d.length-2],_v(l),d[d.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.On(e,r)))}getEntry(e,t){let r=Tn.newInvalidDocument(t);return Na(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(vc(t))},(o,l)=>{r=this.Fn(t,l)}).next(()=>r)}$n(e,t){let r={size:0,document:Tn.newInvalidDocument(t)};return Na(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(vc(t))},(o,l)=>{r={document:this.Fn(t,l),size:Nm(l)}}).next(()=>r)}getEntries(e,t){let r=Us();return this.Bn(e,t,(o,l)=>{const d=this.Fn(o,l);r=r.insert(o,d)}).next(()=>r)}Ln(e,t){let r=Us(),o=new kn(Ve.comparator);return this.Bn(e,t,(l,d)=>{const m=this.Fn(l,d);r=r.insert(l,m),o=o.insert(l,Nm(d))}).next(()=>({documents:r,Un:o}))}Bn(e,t,r){if(t.isEmpty())return ce.resolve();let o=new En(Fm);t.forEach(w=>o=o.add(w));const l=IDBKeyRange.bound(vc(o.first()),vc(o.last())),d=o.getIterator();let m=d.getNext();return Na(e).Wt({index:"documentKeyIndex",range:l},(w,C,x)=>{const N=Ve.fromSegments([...C.prefixPath,C.collectionGroup,C.documentId]);for(;m&&Fm(m,N)<0;)r(m,null),m=d.getNext();m&&m.isEqual(N)&&(r(m,C),m=d.hasNext()?d.getNext():null),m?x.Ut(vc(m)):x.done()}).next(()=>{for(;m;)r(m,null),m=d.hasNext()?d.getNext():null})}getAllFromCollection(e,t,r){const o=[t.popLast().toArray(),t.lastSegment(),_v(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],l=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Na(e).qt(IDBKeyRange.bound(o,l,!0)).next(d=>{let m=Us();for(const w of d){const C=this.Fn(Ve.fromSegments(w.prefixPath.concat(w.collectionGroup,w.documentId)),w);m=m.insert(C.key,C)}return m})}getAllFromCollectionGroup(e,t,r,o){let l=Us();const d=gI(t,r),m=gI(t,yo.max());return Na(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(d,m,!0)},(w,C,x)=>{const N=this.Fn(Ve.fromSegments(C.prefixPath.concat(C.collectionGroup,C.documentId)),C);l=l.insert(N.key,N),l.size===o&&x.done()}).next(()=>l)}newChangeBuffer(e){return new _c(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return Rv(e).get("remoteDocumentGlobalKey").next(t=>(vt(!!t),t))}On(e,t){return Rv(e).put("remoteDocumentGlobalKey",t)}Fn(e,t){if(t){const r=function Qb(n,e){let t;if(e.document)t=Bw(n.Jt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Ve.fromSegments(e.noDocument.path),o=Ra(e.noDocument.readTime);t=Tn.newNoDocument(r,o),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return tt();{const r=Ve.fromSegments(e.unknownDocument.path),o=Ra(e.unknownDocument.version);t=Tn.newUnknownDocument(r,o)}}return e.readTime&&t.setReadTime(function(r){const o=new Wn(r[0],r[1]);return mt.fromTimestamp(o)}(e.readTime)),t}(this.M,t);if(!r.isNoDocument()||!r.version.isEqual(mt.min()))return r}return Tn.newInvalidDocument(e)}}class _c extends fI{constructor(e,t){super(),this.qn=e,this.trackRemovals=t,this.Gn=new vo(r=>r.toString(),(r,o)=>r.isEqual(o))}applyChanges(e){const t=[];let r=0,o=new En((l,d)=>$t(l.canonicalString(),d.canonicalString()));return this.changes.forEach((l,d)=>{const m=this.Gn.get(l);if(t.push(this.qn.removeEntry(e,l,m.readTime)),d.isValidDocument()){const w=rI(this.qn.M,d);o=o.add(l.path.popLast()),r+=Nm(w)-m.size,t.push(this.qn.addEntry(e,l,w))}else if(r-=m.size,this.trackRemovals){const w=rI(this.qn.M,d.convertToNoDocument(mt.min()));t.push(this.qn.addEntry(e,l,w))}}),o.forEach(l=>{t.push(this.qn.indexManager.addToCollectionParentIndex(e,l))}),t.push(this.qn.updateMetadata(e,r)),ce.waitFor(t)}getFromCache(e,t){return this.qn.$n(e,t).next(r=>(this.Gn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.qn.Ln(e,t).next(({documents:r,Un:o})=>(o.forEach((l,d)=>{this.Gn.set(l,{size:d,readTime:r.get(l).readTime})}),r))}}function Rv(n){return dr(n,"remoteDocumentGlobal")}function Na(n){return dr(n,"remoteDocumentsV14")}function vc(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function gI(n,e){const t=e.documentKey.path.toArray();return[n,_v(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Fm(n,e){const t=n.path.length-e.path.length;return 0!==t?t:Ve.comparator(n,e)}class Nv{constructor(e){this.M=e}kt(e,t,r,o){const l=new cp("createOrUpgrade",t);var m;r<1&&o>=1&&(e.createObjectStore("owner"),(m=e).createObjectStore("mutationQueues",{keyPath:"userId"}),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",gv,{unique:!0}),m.createObjectStore("documentMutations"),pp(e),function(m){m.createObjectStore("remoteDocuments")}(e));let d=ce.resolve();return r<3&&o>=3&&(0!==r&&(function(m){m.deleteObjectStore("targetDocuments"),m.deleteObjectStore("targets"),m.deleteObjectStore("targetGlobal")}(e),pp(e)),d=d.next(()=>function(m){const w=m.store("targetGlobal"),C={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:mt.min().toTimestamp(),targetCount:0};return w.put("targetGlobalKey",C)}(l))),r<4&&o>=4&&(0!==r&&(d=d.next(()=>function(m,w){return w.store("mutations").qt().next(C=>{m.deleteObjectStore("mutations"),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",gv,{unique:!0});const x=w.store("mutations"),N=C.map(H=>x.put(H));return ce.waitFor(N)})}(e,l))),d=d.next(()=>{!function(m){m.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&o>=5&&(d=d.next(()=>this.Kn(l))),r<6&&o>=6&&(d=d.next(()=>(function(m){m.createObjectStore("remoteDocumentGlobal")}(e),this.Qn(l)))),r<7&&o>=7&&(d=d.next(()=>this.jn(l))),r<8&&o>=8&&(d=d.next(()=>this.Wn(e,l))),r<9&&o>=9&&(d=d.next(()=>{!function(m){m.objectStoreNames.contains("remoteDocumentChanges")&&m.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&o>=10&&(d=d.next(()=>this.zn(l))),r<11&&o>=11&&(d=d.next(()=>{(function(m){m.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(m){m.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&o>=12&&(d=d.next(()=>{!function(m){const w=m.createObjectStore("documentOverlays",{keyPath:_A});w.createIndex("collectionPathOverlayIndex",vA,{unique:!1}),w.createIndex("collectionGroupOverlayIndex",EA,{unique:!1})}(e)})),r<13&&o>=13&&(d=d.next(()=>function(m){const w=m.createObjectStore("remoteDocumentsV14",{keyPath:Gb});w.createIndex("documentKeyIndex",Ww),w.createIndex("collectionGroupIndex",Kw)}(e)).next(()=>this.Hn(e,l)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&o>=14&&(d=d.next(()=>{!function(m){m.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),m.createObjectStore("indexState",{keyPath:gA}).createIndex("sequenceNumberIndex",Qw,{unique:!1}),m.createObjectStore("indexEntries",{keyPath:mA}).createIndex("documentKeyIndex",yA,{unique:!1})}(e)})),d}Qn(e){let t=0;return e.store("remoteDocuments").Wt((r,o)=>{t+=Nm(o)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Kn(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.qt().next(o=>ce.forEach(o,l=>{const d=IDBKeyRange.bound([l.userId,-1],[l.userId,l.lastAcknowledgedBatchId]);return r.qt("userMutationsIndex",d).next(m=>ce.forEach(m,w=>{vt(w.userId===l.userId);const C=fh(this.M,w);return Mv(e,l.userId,C).next(()=>{})}))}))}jn(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(o=>{const l=[];return r.Wt((d,m)=>{const w=new Zt(d),C=[0,Ir(w)];l.push(t.get(C).next(x=>x?ce.resolve():t.put({targetId:0,path:Ir(w),sequenceNumber:o.highestListenSequenceNumber})))}).next(()=>ce.waitFor(l))})}Wn(e,t){e.createObjectStore("collectionParents",{keyPath:zb});const r=t.store("collectionParents"),o=new Tv,l=d=>{if(o.add(d)){const m=d.lastSegment(),w=d.popLast();return r.put({collectionId:m,parent:Ir(w)})}};return t.store("remoteDocuments").Wt({jt:!0},(d,m)=>{const w=new Zt(d);return l(w.popLast())}).next(()=>t.store("documentMutations").Wt({jt:!0},([d,m,w],C)=>{const x=Bs(m);return l(x.popLast())}))}zn(e){const t=e.store("targets");return t.Wt((r,o)=>{const l=xi(o),d=iI(this.M,l);return t.put(d)})}Hn(e,t){const r=t.store("remoteDocuments"),o=[];return r.Wt((l,d)=>{const m=t.store("remoteDocumentsV14"),w=(C=d,C.document?new Ve(Zt.fromString(C.document.name).popFirst(5)):C.noDocument?Ve.fromSegments(C.noDocument.path):C.unknownDocument?Ve.fromSegments(C.unknownDocument.path):tt()).path.toArray();var C;const x={prefixPath:w.slice(0,w.length-2),collectionGroup:w[w.length-2],documentId:w[w.length-1],readTime:d.readTime||[0,0],unknownDocument:d.unknownDocument,noDocument:d.noDocument,document:d.document,hasCommittedMutations:!!d.hasCommittedMutations};o.push(m.put(x))}).next(()=>ce.waitFor(o))}}function pp(n){n.createObjectStore("targetDocuments",{keyPath:Yw}).createIndex("documentTargetsIndex",qb,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Zw,{unique:!0}),n.createObjectStore("targetGlobal")}const mI="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class yI{constructor(e,t,r,o,l,d,m,w,C,x,N=13){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Jn=l,this.window=d,this.document=m,this.Yn=C,this.Xn=x,this.Zn=N,this.ts=null,this.es=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ns=null,this.inForeground=!1,this.ss=null,this.rs=null,this.os=Number.NEGATIVE_INFINITY,this.us=H=>Promise.resolve(),!yI.vt())throw new Ae(ae.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Pm(this,o),this.cs=t+"main",this.M=new nI(w),this.hs=new js(this.cs,this.Zn,new Nv(this.M)),this.ls=new cI(this.referenceDelegate,this.M),this.fs=new pI(this.M),this.ds=new Ev,this.window&&this.window.localStorage?this._s=this.window.localStorage:(this._s=null,!1===x&&On("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ws().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ae(ae.FAILED_PRECONDITION,mI);return this.gs(),this.ys(),this.ps(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.ls.getHighestSequenceNumber(e))}).then(e=>{this.ts=new us(e,this.Yn)}).then(()=>{this.es=!0}).catch(e=>(this.hs&&this.hs.close(),Promise.reject(e)))}Is(e){var t=this;return this.us=function(){var r=(0,_e.Z)(function*(o){if(t.started)return e(o)});return function(o){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.hs.Ot(function(){var t=(0,_e.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Jn.enqueueAndForget((0,_e.Z)(function*(){t.started&&(yield t.ws())})))}ws(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Ov(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ts(e).next(t=>{t||(this.isPrimary=!1,this.Jn.enqueueRetryable(()=>this.us(!1)))})}).next(()=>this.Es(e)).next(t=>this.isPrimary&&!t?this.As(e).next(()=>!1):!!t&&this.Rs(e).next(()=>!0))).catch(e=>{if(Vu(e))return Ne("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ne("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Jn.enqueueRetryable(()=>this.us(e)),this.isPrimary=e})}Ts(e){return Lm(e).get("owner").next(t=>ce.resolve(this.bs(t)))}Ps(e){return Ov(e).delete(this.clientId)}Vs(){var e=this;return(0,_e.Z)(function*(){if(e.isPrimary&&!e.vs(e.os,18e5)){e.os=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const o=dr(r,"clientMetadata");return o.qt().next(l=>{const d=e.Ss(l,18e5),m=l.filter(w=>-1===d.indexOf(w));return ce.forEach(m,w=>o.delete(w.clientId)).next(()=>m)})}).catch(()=>[]);if(e._s)for(const r of t)e._s.removeItem(e.Ds(r.clientId))}})()}ps(){this.rs=this.Jn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ws().then(()=>this.Vs()).then(()=>this.ps()))}bs(e){return!!e&&e.ownerId===this.clientId}Es(e){return this.Xn?ce.resolve(!0):Lm(e).get("owner").next(t=>{if(null!==t&&this.vs(t.leaseTimestampMs,5e3)&&!this.Cs(t.ownerId)){if(this.bs(t)&&this.networkEnabled)return!0;if(!this.bs(t)){if(!t.allowTabSynchronization)throw new Ae(ae.FAILED_PRECONDITION,mI);return!1}}return!(!this.networkEnabled||!this.inForeground)||Ov(e).qt().next(r=>void 0===this.Ss(r,5e3).find(o=>{if(this.clientId!==o.clientId){const d=!this.inForeground&&o.inForeground,m=this.networkEnabled===o.networkEnabled;if(!this.networkEnabled&&o.networkEnabled||d&&m)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Ne("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,_e.Z)(function*(){e.es=!1,e.xs(),e.rs&&(e.rs.cancel(),e.rs=null),e.Ns(),e.ks(),yield e.hs.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new Xw(t,us.A);return e.As(r).next(()=>e.Ps(r))}),e.hs.close(),e.Ms()})()}Ss(e,t){return e.filter(r=>this.vs(r.updateTimeMs,t)&&!this.Cs(r.clientId))}Os(){return this.runTransaction("getActiveClients","readonly",e=>Ov(e).qt().next(t=>this.Ss(t,18e5).map(r=>r.clientId)))}get started(){return this.es}getMutationQueue(e,t){return Om.Yt(e,this.M,t,this.referenceDelegate)}getTargetCache(){return this.ls}getRemoteDocumentCache(){return this.fs}getIndexManager(e){return new lI(e)}getDocumentOverlayCache(e){return Dv.Yt(this.M,e)}getBundleCache(){return this.ds}runTransaction(e,t,r){Ne("IndexedDbPersistence","Starting transaction:",e);const o="readonly"===t?"readonly":"readwrite",l=14===(d=this.Zn)?Sm:13===d?Kb:12===d?wA:11===d?Wb:void tt();var d;let m;return this.hs.runTransaction(e,o,l,w=>(m=new Xw(w,this.ts?this.ts.next():us.A),"readwrite-primary"===t?this.Ts(m).next(C=>!!C||this.Es(m)).next(C=>{if(!C)throw On(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Jn.enqueueRetryable(()=>this.us(!1)),new Ae(ae.FAILED_PRECONDITION,Zb);return r(m)}).next(C=>this.Rs(m).next(()=>C)):this.Fs(m).next(()=>r(m)))).then(w=>(m.raiseOnCommittedEvent(),w))}Fs(e){return Lm(e).get("owner").next(t=>{if(null!==t&&this.vs(t.leaseTimestampMs,5e3)&&!this.Cs(t.ownerId)&&!this.bs(t)&&!(this.Xn||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Ae(ae.FAILED_PRECONDITION,mI)})}Rs(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Lm(e).put("owner",t)}static vt(){return js.vt()}As(e){const t=Lm(e);return t.get("owner").next(r=>this.bs(r)?(Ne("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):ce.resolve())}vs(e,t){const r=Date.now();return!(e<r-t||e>r&&(On(`Detected an update time that is in the future: ${e} > ${r}`),1))}gs(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ss=()=>{this.Jn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ws()))},this.document.addEventListener("visibilitychange",this.ss),this.inForeground="visible"===this.document.visibilityState)}Ns(){this.ss&&(this.document.removeEventListener("visibilitychange",this.ss),this.ss=null)}ys(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ns=()=>{this.xs(),(0,jt.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Jn.enterRestrictedMode(!0),this.Jn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ns))}ks(){this.ns&&(this.window.removeEventListener("pagehide",this.ns),this.ns=null)}Cs(e){var t;try{const r=null!==(null===(t=this._s)||void 0===t?void 0:t.getItem(this.Ds(e)));return Ne("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return On("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xs(){if(this._s)try{this._s.setItem(this.Ds(this.clientId),String(Date.now()))}catch(e){On("Failed to set zombie client id.",e)}}Ms(){if(this._s)try{this._s.removeItem(this.Ds(this.clientId))}catch(e){}}Ds(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Lm(n){return dr(n,"owner")}function Ov(n){return dr(n,"clientMetadata")}function Vm(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class iC{constructor(e,t,r){this.fs=e,this.$s=t,this.indexManager=r}Bs(e,t){return this.$s.getAllMutationBatchesAffectingDocumentKey(e,t).next(r=>this.Ls(e,t,r))}Ls(e,t,r){return this.fs.getEntry(e,t).next(o=>{for(const l of r)l.applyToLocalView(o);return o})}Us(e,t){e.forEach((r,o)=>{for(const l of t)l.applyToLocalView(o)})}qs(e,t){return this.fs.getEntries(e,t).next(r=>this.Gs(e,r).next(()=>r))}Gs(e,t){return this.$s.getAllMutationBatchesAffectingDocumentKeys(e,t).next(r=>this.Us(t,r))}Ks(e,t,r){return Ve.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.Qs(e,t.path):ep(t)?this.js(e,t,r):this.Ws(e,t,r);var o}Qs(e,t){return this.Bs(e,new Ve(t)).next(r=>{let o=Nw();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}js(e,t,r){const o=t.collectionGroup;let l=Nw();return this.indexManager.getCollectionParents(e,o).next(d=>ce.forEach(d,m=>{const w=(C=t,x=m.child(o),new Vs(x,null,C.explicitOrderBy.slice(),C.filters.slice(),C.limit,C.limitType,C.startAt,C.endAt));var C,x;return this.Ws(e,w,r).next(C=>{C.forEach((x,N)=>{l=l.insert(x,N)})})}).next(()=>l))}Ws(e,t,r){let o;return this.fs.getAllFromCollection(e,t.path,r).next(l=>(o=l,this.$s.getAllMutationBatchesAffectingQuery(e,t))).next(l=>{for(const d of l)for(const m of d.mutations){const w=m.key;let C=o.get(w);null==C&&(C=Tn.newInvalidDocument(w),o=o.insert(w,C)),X_(m,C,d.localWriteTime),C.isFoundDocument()||(o=o.remove(w))}}).next(()=>(o.forEach((l,d)=>{Pu(t,d)||(o=o.remove(l))}),o))}}class Pv{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.zs=r,this.Hs=o}static Js(e,t){let r=rn(),o=rn();for(const l of t.docChanges)switch(l.type){case 0:r=r.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new Pv(e,t.fromCache,r,o)}}class _I{Ys(e){this.Xs=e}Ks(e,t,r,o){return 0===(l=t).filters.length&&null===l.limit&&null==l.startAt&&null==l.endAt&&(0===l.explicitOrderBy.length||1===l.explicitOrderBy.length&&l.explicitOrderBy[0].field.isKeyField())||r.isEqual(mt.min())?this.Zs(e,t):this.Xs.qs(e,o).next(l=>{const d=this.ti(t,l);return(Jf(t)||Xf(t))&&this.ei(t.limitType,d,o,r)?this.Zs(e,t):(L_()<=vu.in.DEBUG&&Ne("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),ym(t)),this.Xs.Ks(e,t,hw(r,-1)).next(m=>(d.forEach(w=>{m=m.insert(w.key,w)}),m)))});var l}ti(e,t){let r=new En(Y_(e));return t.forEach((o,l)=>{Pu(e,l)&&(r=r.add(l))}),r}ei(e,t,r,o){if(r.size!==t.size)return!0;const l="F"===e?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}Zs(e,t){return L_()<=vu.in.DEBUG&&Ne("QueryEngine","Using full collection scan to execute query:",ym(t)),this.Xs.Ks(e,t,yo.min())}}class sC{constructor(e,t,r,o){this.persistence=e,this.ni=t,this.M=o,this.si=new kn($t),this.ii=new vo(l=>Nu(l),nh),this.ri=new Map,this.oi=e.getRemoteDocumentCache(),this.ls=e.getTargetCache(),this.ds=e.getBundleCache(),this.ui(r)}ui(e){this.indexManager=this.persistence.getIndexManager(e),this.$s=this.persistence.getMutationQueue(e,this.indexManager),this.ai=new iC(this.oi,this.$s,this.indexManager),this.oi.setIndexManager(this.indexManager),this.ni.Ys(this.ai)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.si))}}function kv(n,e,t,r){return new sC(n,e,t,r)}function Fv(n,e){return Um.apply(this,arguments)}function Um(){return Um=(0,_e.Z)(function*(n,e){const t=$e(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let o;return t.$s.getAllMutationBatches(r).next(l=>(o=l,t.ui(e),t.$s.getAllMutationBatches(r))).next(l=>{const d=[],m=[];let w=rn();for(const C of o){d.push(C.batchId);for(const x of C.mutations)w=w.add(x.key)}for(const C of l){m.push(C.batchId);for(const x of C.mutations)w=w.add(x.key)}return t.ai.qs(r,w).next(C=>({ci:C,removedBatchIds:d,addedBatchIds:m}))})})}),Um.apply(this,arguments)}function oC(n,e){const t=$e(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=e.batch.keys(),l=t.oi.newChangeBuffer({trackRemovals:!0});return function(d,m,w,C){const x=w.batch,N=x.keys();let H=ce.resolve();return N.forEach(K=>{H=H.next(()=>C.getEntry(m,K)).next(fe=>{const Fe=w.docVersions.get(K);vt(null!==Fe),fe.version.compareTo(Fe)<0&&(x.applyToRemoteDocument(fe,w),fe.isValidDocument()&&(fe.setReadTime(w.commitVersion),C.addEntry(fe)))})}),H.next(()=>d.$s.removeMutationBatch(m,x))}(t,r,e,l).next(()=>l.apply(r)).next(()=>t.$s.performConsistencyCheck(r)).next(()=>t.ai.qs(r,o))})}function vI(n){const e=$e(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.ls.getLastRemoteSnapshotVersion(t))}function EI(n,e){const t=$e(n),r=e.snapshotVersion;let o=t.si;return t.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const d=t.oi.newChangeBuffer({trackRemovals:!0});o=t.si;const m=[];e.targetChanges.forEach((C,x)=>{const N=o.get(x);if(!N)return;m.push(t.ls.removeMatchingKeys(l,C.removedDocuments,x).next(()=>t.ls.addMatchingKeys(l,C.addedDocuments,x)));let H=N.withSequenceNumber(l.currentSequenceNumber);var K,fe,Fe;e.targetMismatches.has(x)?H=H.withResumeToken(lr.EMPTY_BYTE_STRING,mt.min()).withLastLimboFreeSnapshotVersion(mt.min()):C.resumeToken.approximateByteSize()>0&&(H=H.withResumeToken(C.resumeToken,r)),o=o.insert(x,H),fe=H,Fe=C,(0===(K=N).resumeToken.approximateByteSize()||fe.snapshotVersion.toMicroseconds()-K.snapshotVersion.toMicroseconds()>=3e8||Fe.addedDocuments.size+Fe.modifiedDocuments.size+Fe.removedDocuments.size>0)&&m.push(t.ls.updateTargetData(l,H))});let w=Us();if(e.documentUpdates.forEach(C=>{e.resolvedLimboDocuments.has(C)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(l,C))}),m.push(Bm(l,d,e.documentUpdates).next(C=>{w=C})),!r.isEqual(mt.min())){const C=t.ls.getLastRemoteSnapshotVersion(l).next(x=>t.ls.setTargetsMetadata(l,l.currentSequenceNumber,r));m.push(C)}return ce.waitFor(m).next(()=>d.apply(l)).next(()=>t.ai.Gs(l,w)).next(()=>w)}).then(l=>(t.si=o,l))}function Bm(n,e,t){let r=rn();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let l=Us();return t.forEach((d,m)=>{const w=o.get(d);m.isNoDocument()&&m.version.isEqual(mt.min())?(e.removeEntry(d,m.readTime),l=l.insert(d,m)):!w.isValidDocument()||m.version.compareTo(w.version)>0||0===m.version.compareTo(w.version)&&w.hasPendingWrites?(e.addEntry(m),l=l.insert(d,m)):Ne("LocalStore","Ignoring outdated watch update for ",d,". Current version:",w.version," Watch version:",m.version)}),l})}function CA(n,e){const t=$e(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.$s.getNextMutationBatchAfterBatchId(r,e)))}function Ec(n,e){const t=$e(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return t.ls.getTargetData(r,e).next(l=>l?(o=l,ce.resolve(o)):t.ls.allocateTargetId(r).next(d=>(o=new gc(e,d,0,r.currentSequenceNumber),t.ls.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=t.si.get(r.targetId);return(null===o||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.si=t.si.insert(r.targetId,r),t.ii.set(e,r.targetId)),r})}function Gu(n,e,t){return Lv.apply(this,arguments)}function Lv(){return Lv=(0,_e.Z)(function*(n,e,t){const r=$e(n),o=r.si.get(e),l=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",l,d=>r.persistence.referenceDelegate.removeTarget(d,o)))}catch(d){if(!Vu(d))throw d;Ne("LocalStore",`Failed to update sequence numbers for target ${e}: ${d}`)}r.si=r.si.remove(e),r.ii.delete(o.target)}),Lv.apply(this,arguments)}function jm(n,e,t){const r=$e(n);let o=mt.min(),l=rn();return r.persistence.runTransaction("Execute query","readonly",d=>function(m,w,C){const x=$e(m),N=x.ii.get(C);return void 0!==N?ce.resolve(x.si.get(N)):x.ls.getTargetData(w,C)}(r,d,_o(e)).next(m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,r.ls.getMatchingKeysForTargetId(d,m.targetId).next(w=>{l=w})}).next(()=>r.ni.Ks(d,e,t?o:mt.min(),t?l:rn())).next(m=>(lC(r,xb(e),m),{documents:m,hi:l})))}function aC(n,e){const t=$e(n),r=$e(t.ls),o=t.si.get(e);return o?Promise.resolve(o.target):t.persistence.runTransaction("Get target data","readonly",l=>r.Et(l,e).next(d=>d?d.target:null))}function uC(n,e){const t=$e(n),r=t.ri.get(e)||mt.min();return t.persistence.runTransaction("Get new document changes","readonly",o=>t.oi.getAllFromCollectionGroup(o,e,hw(r,-1),Number.MAX_SAFE_INTEGER)).then(o=>(lC(t,e,o),o))}function lC(n,e,t){let r=mt.min();t.forEach((o,l)=>{l.readTime.compareTo(r)>0&&(r=l.readTime)}),n.ri.set(e,r)}function Vv(){return Vv=(0,_e.Z)(function*(n,e,t,r){const o=$e(n);let l=rn(),d=Us();for(const C of t){const x=e.li(C.metadata.name);C.document&&(l=l.add(x));const N=e.fi(C);N.setReadTime(e.di(C.metadata.readTime)),d=d.insert(x,N)}const m=o.oi.newChangeBuffer({trackRemovals:!0}),w=yield Ec(o,(C=r,_o(oh(Zt.fromString(`__bundle__/docs/${C}`)))));var C;return o.persistence.runTransaction("Apply bundle documents","readwrite",C=>Bm(C,m,d).next(x=>(m.apply(C),x)).next(x=>o.ls.removeMatchingKeysForTargetId(C,w.targetId).next(()=>o.ls.addMatchingKeys(C,l,w.targetId)).next(()=>o.ai.Gs(C,x)).next(()=>x)))}),Vv.apply(this,arguments)}function TA(n,e){return wI.apply(this,arguments)}function wI(){return wI=(0,_e.Z)(function*(n,e,t=rn()){const r=yield Ec(n,_o(dp(e.bundledQuery))),o=$e(n);return o.persistence.runTransaction("Save named query","readwrite",l=>{const d=sn(e.readTime);if(r.snapshotVersion.compareTo(d)>=0)return o.ds.saveNamedQuery(l,e);const m=r.withResumeToken(lr.EMPTY_BYTE_STRING,d);return o.si=o.si.insert(m.targetId,m),o.ls.updateTargetData(l,m).next(()=>o.ls.removeMatchingKeysForTargetId(l,r.targetId)).next(()=>o.ls.addMatchingKeys(l,t,r.targetId)).next(()=>o.ds.saveNamedQuery(l,e))})}),wI.apply(this,arguments)}class AA{constructor(e){this.M=e,this._i=new Map,this.wi=new Map}getBundleMetadata(e,t){return ce.resolve(this._i.get(t))}saveBundleMetadata(e,t){var r;return this._i.set(t.id,{id:(r=t).id,version:r.version,createTime:sn(r.createTime)}),ce.resolve()}getNamedQuery(e,t){return ce.resolve(this.wi.get(t))}saveNamedQuery(e,t){return this.wi.set(t.name,{name:(r=t).name,query:dp(r.bundledQuery),readTime:sn(r.readTime)}),ce.resolve();var r}}class SA{constructor(){this.overlays=new kn(Ve.comparator),this.mi=new Map}getOverlay(e,t){return ce.resolve(this.overlays.get(t))}saveOverlays(e,t,r){return r.forEach((o,l)=>{this.Xt(e,t,l)}),ce.resolve()}removeOverlaysForBatchId(e,t,r){const o=this.mi.get(r);return void 0!==o&&(o.forEach(l=>this.overlays=this.overlays.remove(l)),this.mi.delete(r)),ce.resolve()}getOverlaysForCollection(e,t,r){const o=dc(),l=t.length+1,d=new Ve(t.child("")),m=this.overlays.getIteratorFrom(d);for(;m.hasNext();){const w=m.getNext().value,C=w.getKey();if(!t.isPrefixOf(C.path))break;C.path.length===l&&w.largestBatchId>r&&o.set(w.getKey(),w)}return ce.resolve(o)}getOverlaysForCollectionGroup(e,t,r,o){let l=new kn((C,x)=>C-x);const d=this.overlays.getIterator();for(;d.hasNext();){const C=d.getNext().value;if(C.getKey().getCollectionGroup()===t&&C.largestBatchId>r){let x=l.get(C.largestBatchId);null===x&&(x=dc(),l=l.insert(C.largestBatchId,x)),x.set(C.getKey(),C)}}const m=dc(),w=l.getIterator();for(;w.hasNext()&&(w.getNext().value.forEach((C,x)=>m.set(C,x)),!(m.size()>=o)););return ce.resolve(m)}Xt(e,t,r){if(null===r)return;const o=this.overlays.get(r.key);if(null!==o){const d=this.mi.get(o.largestBatchId).delete(r.key);this.mi.set(o.largestBatchId,d)}this.overlays=this.overlays.insert(r.key,new tI(t,r));let l=this.mi.get(t);void 0===l&&(l=rn(),this.mi.set(t,l)),this.mi.set(t,l.add(r.key))}}class II{constructor(){this.gi=new En(Fr.yi),this.pi=new En(Fr.Ii)}isEmpty(){return this.gi.isEmpty()}addReference(e,t){const r=new Fr(e,t);this.gi=this.gi.add(r),this.pi=this.pi.add(r)}Ti(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Ei(new Fr(e,t))}Ai(e,t){e.forEach(r=>this.removeReference(r,t))}Ri(e){const t=new Ve(new Zt([])),r=new Fr(t,e),o=new Fr(t,e+1),l=[];return this.pi.forEachInRange([r,o],d=>{this.Ei(d),l.push(d.key)}),l}bi(){this.gi.forEach(e=>this.Ei(e))}Ei(e){this.gi=this.gi.delete(e),this.pi=this.pi.delete(e)}Pi(e){const t=new Ve(new Zt([])),r=new Fr(t,e),o=new Fr(t,e+1);let l=rn();return this.pi.forEachInRange([r,o],d=>{l=l.add(d.key)}),l}containsKey(e){const t=new Fr(e,0),r=this.gi.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Fr{constructor(e,t){this.key=e,this.Vi=t}static yi(e,t){return Ve.comparator(e.key,t.key)||$t(e.Vi,t.Vi)}static Ii(e,t){return $t(e.Vi,t.Vi)||Ve.comparator(e.key,t.key)}}class MA{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.$s=[],this.vi=1,this.Si=new En(Fr.yi)}checkEmpty(e){return ce.resolve(0===this.$s.length)}addMutationBatch(e,t,r,o){const l=this.vi;this.vi++;const d=new yv(l,t,r,o);this.$s.push(d);for(const m of o)this.Si=this.Si.add(new Fr(m.key,l)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return ce.resolve(d)}lookupMutationBatch(e,t){return ce.resolve(this.Di(t))}getNextMutationBatchAfterBatchId(e,t){const o=this.Ci(t+1),l=o<0?0:o;return ce.resolve(this.$s.length>l?this.$s[l]:null)}getHighestUnacknowledgedBatchId(){return ce.resolve(0===this.$s.length?-1:this.vi-1)}getAllMutationBatches(e){return ce.resolve(this.$s.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Fr(t,0),o=new Fr(t,Number.POSITIVE_INFINITY),l=[];return this.Si.forEachInRange([r,o],d=>{const m=this.Di(d.Vi);l.push(m)}),ce.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new En($t);return t.forEach(o=>{const l=new Fr(o,0),d=new Fr(o,Number.POSITIVE_INFINITY);this.Si.forEachInRange([l,d],m=>{r=r.add(m.Vi)})}),ce.resolve(this.xi(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let l=r;Ve.isDocumentKey(l)||(l=l.child(""));const d=new Fr(new Ve(l),0);let m=new En($t);return this.Si.forEachWhile(w=>{const C=w.key.path;return!!r.isPrefixOf(C)&&(C.length===o&&(m=m.add(w.Vi)),!0)},d),ce.resolve(this.xi(m))}xi(e){const t=[];return e.forEach(r=>{const o=this.Di(r);null!==o&&t.push(o)}),t}removeMutationBatch(e,t){vt(0===this.Ni(t.batchId,"removed")),this.$s.shift();let r=this.Si;return ce.forEach(t.mutations,o=>{const l=new Fr(o.key,t.batchId);return r=r.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.Si=r})}dn(e){}containsKey(e,t){const r=new Fr(t,0),o=this.Si.firstAfterOrEqual(r);return ce.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return ce.resolve()}Ni(e,t){return this.Ci(e)}Ci(e){return 0===this.$s.length?0:e-this.$s[0].batchId}Di(e){const t=this.Ci(e);return t<0||t>=this.$s.length?null:this.$s[t]}}class xA{constructor(e){this.ki=e,this.docs=new kn(Ve.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,o=this.docs.get(r),l=o?o.size:0,d=this.ki(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:d}),this.size+=d-l,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ce.resolve(r?r.document.mutableCopy():Tn.newInvalidDocument(t))}getEntries(e,t){let r=Us();return t.forEach(o=>{const l=this.docs.get(o);r=r.insert(o,l?l.document.mutableCopy():Tn.newInvalidDocument(o))}),ce.resolve(r)}getAllFromCollection(e,t,r){let o=Us();const l=new Ve(t.child("")),d=this.docs.getIteratorFrom(l);for(;d.hasNext();){const{key:m,value:{document:w}}=d.getNext();if(!t.isPrefixOf(m.path))break;m.path.length>t.length+1||Cb(bb(w),r)<=0||(o=o.insert(w.key,w.mutableCopy()))}return ce.resolve(o)}getAllFromCollectionGroup(e,t,r,o){tt()}Mi(e,t){return ce.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new RA(this)}getSize(e){return ce.resolve(this.size)}}class RA extends fI{constructor(e){super(),this.qn=e}applyChanges(e){const t=[];return this.changes.forEach((r,o)=>{o.isValidDocument()?t.push(this.qn.addEntry(e,o)):this.qn.removeEntry(r)}),ce.waitFor(t)}getFromCache(e,t){return this.qn.getEntry(e,t)}getAllFromCache(e,t){return this.qn.getEntries(e,t)}}class NA{constructor(e){this.persistence=e,this.Oi=new vo(t=>Nu(t),nh),this.lastRemoteSnapshotVersion=mt.min(),this.highestTargetId=0,this.Fi=0,this.$i=new II,this.targetCount=0,this.Bi=mh.mn()}forEachTarget(e,t){return this.Oi.forEach((r,o)=>t(o)),ce.resolve()}getLastRemoteSnapshotVersion(e){return ce.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ce.resolve(this.Fi)}allocateTargetId(e){return this.highestTargetId=this.Bi.next(),ce.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Fi&&(this.Fi=t),ce.resolve()}In(e){this.Oi.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Bi=new mh(t),this.highestTargetId=t),e.sequenceNumber>this.Fi&&(this.Fi=e.sequenceNumber)}addTargetData(e,t){return this.In(t),this.targetCount+=1,ce.resolve()}updateTargetData(e,t){return this.In(t),ce.resolve()}removeTargetData(e,t){return this.Oi.delete(t.target),this.$i.Ri(t.targetId),this.targetCount-=1,ce.resolve()}removeTargets(e,t,r){let o=0;const l=[];return this.Oi.forEach((d,m)=>{m.sequenceNumber<=t&&null===r.get(m.targetId)&&(this.Oi.delete(d),l.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)}),ce.waitFor(l).next(()=>o)}getTargetCount(e){return ce.resolve(this.targetCount)}getTargetData(e,t){const r=this.Oi.get(t)||null;return ce.resolve(r)}addMatchingKeys(e,t,r){return this.$i.Ti(t,r),ce.resolve()}removeMatchingKeys(e,t,r){this.$i.Ai(t,r);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach(d=>{l.push(o.markPotentiallyOrphaned(e,d))}),ce.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.$i.Ri(t),ce.resolve()}getMatchingKeysForTargetId(e,t){const r=this.$i.Pi(t);return ce.resolve(r)}containsKey(e,t){return ce.resolve(this.$i.containsKey(t))}}class i{constructor(e,t){this.Li={},this.overlays={},this.ts=new us(0),this.es=!1,this.es=!0,this.referenceDelegate=e(this),this.ls=new NA(this),this.indexManager=new uI,this.fs=new xA(r=>this.referenceDelegate.Ui(r)),this.M=new nI(t),this.ds=new AA(this.M)}start(){return Promise.resolve()}shutdown(){return this.es=!1,Promise.resolve()}get started(){return this.es}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new SA,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Li[e.toKey()];return r||(r=new MA(t,this.referenceDelegate),this.Li[e.toKey()]=r),r}getTargetCache(){return this.ls}getRemoteDocumentCache(){return this.fs}getBundleCache(){return this.ds}runTransaction(e,t,r){Ne("MemoryPersistence","Starting transaction:",e);const o=new s(this.ts.next());return this.referenceDelegate.qi(),r(o).next(l=>this.referenceDelegate.Gi(o).next(()=>l)).toPromise().then(l=>(o.raiseOnCommittedEvent(),l))}Ki(e,t){return ce.or(Object.values(this.Li).map(r=>()=>r.containsKey(e,t)))}}class s extends mv{constructor(e){super(),this.currentSequenceNumber=e}}class a{constructor(e){this.persistence=e,this.Qi=new II,this.ji=null}static Wi(e){return new a(e)}get zi(){if(this.ji)return this.ji;throw tt()}addReference(e,t,r){return this.Qi.addReference(r,t),this.zi.delete(r.toString()),ce.resolve()}removeReference(e,t,r){return this.Qi.removeReference(r,t),this.zi.add(r.toString()),ce.resolve()}markPotentiallyOrphaned(e,t){return this.zi.add(t.toString()),ce.resolve()}removeTarget(e,t){this.Qi.Ri(t.targetId).forEach(o=>this.zi.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(l=>this.zi.add(l.toString()))}).next(()=>r.removeTargetData(e,t))}qi(){this.ji=new Set}Gi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ce.forEach(this.zi,r=>{const o=Ve.fromPath(r);return this.Hi(e,o).next(l=>{l||t.removeEntry(o,mt.min())})}).next(()=>(this.ji=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hi(e,t).next(r=>{r?this.zi.delete(t.toString()):this.zi.add(t.toString())})}Ui(e){return 0}Hi(e,t){return ce.or([()=>ce.resolve(this.Qi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ki(e,t)])}}function u(n,e){return`firestore_clients_${n}_${e}`}function c(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function f(n,e){return`firestore_targets_${n}_${e}`}class _{constructor(e,t,r,o){this.user=e,this.batchId=t,this.state=r,this.error=o}static Ji(e,t,r){const o=JSON.parse(r);let l,d="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return d&&o.error&&(d="string"==typeof o.error.message&&"string"==typeof o.error.code,d&&(l=new Ae(o.error.code,o.error.message))),d?new _(e,t,o.state,l):(On("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class E{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Ji(e,t){const r=JSON.parse(t);let o,l="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return l&&r.error&&(l="string"==typeof r.error.message&&"string"==typeof r.error.code,l&&(o=new Ae(r.error.code,r.error.message))),l?new E(e,r.state,o):(On("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class I{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ji(e,t){const r=JSON.parse(t);let o="object"==typeof r&&r.activeTargetIds instanceof Array,l=Em();for(let d=0;o&&d<r.activeTargetIds.length;++d)o=sw(r.activeTargetIds[d]),l=l.add(r.activeTargetIds[d]);return o?new I(e,l):(On("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class A{constructor(e,t){this.clientId=e,this.onlineState=t}static Ji(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new A(t.clientId,t.onlineState):(On("SharedClientState",`Failed to parse online state: ${e}`),null)}}class S{constructor(){this.activeTargetIds=Em()}Xi(e){this.activeTargetIds=this.activeTargetIds.add(e)}Zi(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Yi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class P{constructor(e,t,r,o,l){this.window=e,this.Jn=t,this.persistenceKey=r,this.tr=o,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.er=this.nr.bind(this),this.sr=new kn($t),this.started=!1,this.ir=[];const d=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=l,this.rr=u(this.persistenceKey,this.tr),this.ur=`firestore_sequence_number_${this.persistenceKey}`,this.sr=this.sr.insert(this.tr,new S),this.ar=new RegExp(`^firestore_clients_${d}_([^_]*)$`),this.cr=new RegExp(`^firestore_mutations_${d}_(\\d+)(?:_(.*))?$`),this.hr=new RegExp(`^firestore_targets_${d}_(\\d+)$`),this.lr=`firestore_online_state_${this.persistenceKey}`,this.dr=function(m){return`firestore_bundle_loaded_v2_${m}`}(this.persistenceKey),this.window.addEventListener("storage",this.er)}static vt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,_e.Z)(function*(){const t=yield e.syncEngine.Os();for(const o of t){if(o===e.tr)continue;const l=e.getItem(u(e.persistenceKey,o));if(l){const d=I.Ji(o,l);d&&(e.sr=e.sr.insert(d.clientId,d))}}e._r();const r=e.storage.getItem(e.lr);if(r){const o=e.wr(r);o&&e.mr(o)}for(const o of e.ir)e.nr(o);e.ir=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ur,JSON.stringify(e))}getAllActiveQueryTargets(){return this.gr(this.sr)}isActiveQueryTarget(e){let t=!1;return this.sr.forEach((r,o)=>{o.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.yr(e,"pending")}updateMutationState(e,t,r){this.yr(e,t,r),this.pr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(f(this.persistenceKey,e));if(r){const o=E.Ji(e,r);o&&(t=o.state)}}return this.Ir.Xi(e),this._r(),t}removeLocalQueryTarget(e){this.Ir.Zi(e),this._r()}isLocalQueryTarget(e){return this.Ir.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(f(this.persistenceKey,e))}updateQueryState(e,t,r){this.Tr(e,t,r)}handleUserChange(e,t,r){t.forEach(o=>{this.pr(o)}),this.currentUser=e,r.forEach(o=>{this.addPendingMutation(o)})}setOnlineState(e){this.Er(e)}notifyBundleLoaded(e){this.Ar(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.er),this.removeItem(this.rr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Ne("SharedClientState","READ",e,t),t}setItem(e,t){Ne("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Ne("SharedClientState","REMOVE",e),this.storage.removeItem(e)}nr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Ne("SharedClientState","EVENT",r.key,r.newValue),r.key===this.rr)return void On("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Jn.enqueueRetryable((0,_e.Z)(function*(){if(t.started){if(null!==r.key)if(t.ar.test(r.key)){if(null==r.newValue){const o=t.Rr(r.key);return t.br(o,null)}{const o=t.Pr(r.key,r.newValue);if(o)return t.br(o.clientId,o)}}else if(t.cr.test(r.key)){if(null!==r.newValue){const o=t.Vr(r.key,r.newValue);if(o)return t.vr(o)}}else if(t.hr.test(r.key)){if(null!==r.newValue){const o=t.Sr(r.key,r.newValue);if(o)return t.Dr(o)}}else if(r.key===t.lr){if(null!==r.newValue){const o=t.wr(r.newValue);if(o)return t.mr(o)}}else if(r.key===t.ur){const o=function(l){let d=us.A;if(null!=l)try{const m=JSON.parse(l);vt("number"==typeof m),d=m}catch(m){On("SharedClientState","Failed to read sequence number from WebStorage",m)}return d}(r.newValue);o!==us.A&&t.sequenceNumberHandler(o)}else if(r.key===t.dr){const o=t.Cr(r.newValue);yield Promise.all(o.map(l=>t.syncEngine.Nr(l)))}}else t.ir.push(r)}))}}get Ir(){return this.sr.get(this.tr)}_r(){this.setItem(this.rr,this.Ir.Yi())}yr(e,t,r){const o=new _(this.currentUser,e,t,r),l=c(this.persistenceKey,this.currentUser,e);this.setItem(l,o.Yi())}pr(e){const t=c(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Er(e){this.storage.setItem(this.lr,JSON.stringify({clientId:this.tr,onlineState:e}))}Tr(e,t,r){const o=f(this.persistenceKey,e),l=new E(e,t,r);this.setItem(o,l.Yi())}Ar(e){const t=JSON.stringify(Array.from(e));this.setItem(this.dr,t)}Rr(e){const t=this.ar.exec(e);return t?t[1]:null}Pr(e,t){const r=this.Rr(e);return I.Ji(r,t)}Vr(e,t){const r=this.cr.exec(e),o=Number(r[1]);return _.Ji(new Pr(void 0!==r[2]?r[2]:null),o,t)}Sr(e,t){const r=this.hr.exec(e),o=Number(r[1]);return E.Ji(o,t)}wr(e){return A.Ji(e)}Cr(e){return JSON.parse(e)}vr(e){var t=this;return(0,_e.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.kr(e.batchId,e.state,e.error);Ne("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Dr(e){return this.syncEngine.Mr(e.targetId,e.state,e.error)}br(e,t){const r=t?this.sr.insert(e,t):this.sr.remove(e),o=this.gr(this.sr),l=this.gr(r),d=[],m=[];return l.forEach(w=>{o.has(w)||d.push(w)}),o.forEach(w=>{l.has(w)||m.push(w)}),this.syncEngine.Or(d,m).then(()=>{this.sr=r})}mr(e){this.sr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}gr(e){let t=Em();return e.forEach((r,o)=>{t=t.unionWith(o.activeTargetIds)}),t}}class V{constructor(){this.Fr=new S,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Fr.Xi(e),this.$r[e]||"not-current"}updateQueryState(e,t,r){this.$r[e]=t}removeLocalQueryTarget(e){this.Fr.Zi(e)}isLocalQueryTarget(e){return this.Fr.activeTargetIds.has(e)}clearQueryState(e){delete this.$r[e]}getAllActiveQueryTargets(){return this.Fr.activeTargetIds}isActiveQueryTarget(e){return this.Fr.activeTargetIds.has(e)}start(){return this.Fr=new S,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class W{Br(e){}shutdown(){}}class me{constructor(){this.Lr=()=>this.Ur(),this.qr=()=>this.Gr(),this.Kr=[],this.Qr()}Br(e){this.Kr.push(e)}shutdown(){window.removeEventListener("online",this.Lr),window.removeEventListener("offline",this.qr)}Qr(){window.addEventListener("online",this.Lr),window.addEventListener("offline",this.qr)}Ur(){Ne("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Kr)e(0)}Gr(){Ne("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Kr)e(1)}static vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const Oe={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class Be{constructor(e){this.jr=e.jr,this.Wr=e.Wr}zr(e){this.Hr=e}Jr(e){this.Yr=e}onMessage(e){this.Xr=e}close(){this.Wr()}send(e){this.jr(e)}Zr(){this.Hr()}eo(e){this.Yr(e)}no(e){this.Xr(e)}}class Qe extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.so=(e.ssl?"https":"http")+"://"+e.host,this.io="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}ro(e,t,r,o,l){const d=this.oo(e,t);Ne("RestConnection","Sending: ",d,r);const m={};return this.uo(m,o,l),this.ao(e,d,m,r).then(w=>(Ne("RestConnection","Received: ",w),w),w=>{throw zf("RestConnection",`${e} failed with error: `,w,"url: ",d,"request:",r),w})}co(e,t,r,o,l){return this.ro(e,t,r,o,l)}uo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Xl,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((o,l)=>e[l]=o),r&&r.headers.forEach((o,l)=>e[l]=o)}oo(e,t){return`${this.so}/v1/${t}:${Oe[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}ao(e,t,r,o){return new Promise((l,d)=>{const m=new cb;m.listenOnce(cm.COMPLETE,()=>{try{switch(m.getLastErrorCode()){case Zd.NO_ERROR:const C=m.getResponseJson();Ne("Connection","XHR received:",JSON.stringify(C)),l(C);break;case Zd.TIMEOUT:Ne("Connection",'RPC "'+e+'" timed out'),d(new Ae(ae.DEADLINE_EXCEEDED,"Request time out"));break;case Zd.HTTP_ERROR:const x=m.getStatus();if(Ne("Connection",'RPC "'+e+'" failed with status:',x,"response text:",m.getResponseText()),x>0){const N=m.getResponseJson().error;if(N&&N.status&&N.message){const H=function(K){const fe=K.toLowerCase().replace(/_/g,"-");return Object.values(ae).indexOf(fe)>=0?fe:ae.UNKNOWN}(N.status);d(new Ae(H,N.message))}else d(new Ae(ae.UNKNOWN,"Server responded with status "+m.getStatus()))}else d(new Ae(ae.UNAVAILABLE,"Connection failed."));break;default:tt()}}finally{Ne("Connection",'RPC "'+e+'" completed.')}});const w=JSON.stringify(o);m.send(t,"POST",w,r,15)})}ho(e,t,r){const o=[this.so,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=lm(),d=ub(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(m.xmlHttpFactory=new XE({})),this.uo(m.initMessageHeaders,t,r),(0,jt.uI)()||(0,jt.b$)()||(0,jt.d)()||(0,jt.w1)()||(0,jt.Mn)()||(0,jt.ru)()||(m.httpHeadersOverwriteParam="$httpHeaders");const w=o.join("");Ne("Connection","Creating WebChannel: "+w,m);const C=l.createWebChannel(w,m);let x=!1,N=!1;const H=new Be({jr:fe=>{N?Ne("Connection","Not sending because WebChannel is closed:",fe):(x||(Ne("Connection","Opening WebChannel transport."),C.open(),x=!0),Ne("Connection","WebChannel sending:",fe),C.send(fe))},Wr:()=>C.close()}),K=(fe,Fe,rt)=>{fe.listen(Fe,zt=>{try{rt(zt)}catch(ht){setTimeout(()=>{throw ht},0)}})};return K(C,dm.EventType.OPEN,()=>{N||Ne("Connection","WebChannel transport opened.")}),K(C,dm.EventType.CLOSE,()=>{N||(N=!0,Ne("Connection","WebChannel transport closed"),H.eo())}),K(C,dm.EventType.ERROR,fe=>{N||(N=!0,zf("Connection","WebChannel transport errored:",fe),H.eo(new Ae(ae.UNAVAILABLE,"The operation could not be completed")))}),K(C,dm.EventType.MESSAGE,fe=>{var Fe;if(!N){const rt=fe.data[0];vt(!!rt);const zt=rt,ht=zt.error||(null===(Fe=zt[0])||void 0===Fe?void 0:Fe.error);if(ht){Ne("Connection","WebChannel received error:",ht);const wn=ht.status;let Dt=function(Gt){const Ku=Pn[Gt];if(void 0!==Ku)return xw(Ku)}(wn),Ht=ht.message;void 0===Dt&&(Dt=ae.INTERNAL,Ht="Unknown error status: "+wn+" with message "+ht.message),N=!0,H.eo(new Ae(Dt,Ht)),C.close()}else Ne("Connection","WebChannel received:",rt),H.no(rt)}}),K(d,qn.STAT_EVENT,fe=>{fe.stat===lb.PROXY?Ne("Connection","Detected buffering proxy"):fe.stat===lb.NOPROXY&&Ne("Connection","Detected no buffering proxy")}),setTimeout(()=>{H.Zr()},0),H}}function Ie(){return"undefined"!=typeof window?window:null}function at(){return"undefined"!=typeof document?document:null}function Ot(n){return new Fw(n,!0)}class on{constructor(e,t,r=1e3,o=1.5,l=6e4){this.Jn=e,this.timerId=t,this.lo=r,this.fo=o,this._o=l,this.wo=0,this.mo=null,this.yo=Date.now(),this.reset()}reset(){this.wo=0}po(){this.wo=this._o}Io(e){this.cancel();const t=Math.floor(this.wo+this.To()),r=Math.max(0,Date.now()-this.yo),o=Math.max(0,t-r);o>0&&Ne("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.wo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.mo=this.Jn.enqueueAfterDelay(this.timerId,o,()=>(this.yo=Date.now(),e())),this.wo*=this.fo,this.wo<this.lo&&(this.wo=this.lo),this.wo>this._o&&(this.wo=this._o)}Eo(){null!==this.mo&&(this.mo.skipDelay(),this.mo=null)}cancel(){null!==this.mo&&(this.mo.cancel(),this.mo=null)}To(){return(Math.random()-.5)*this.wo}}class Bi{constructor(e,t,r,o,l,d,m,w){this.Jn=e,this.Ao=r,this.Ro=o,this.bo=l,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=m,this.listener=w,this.state=0,this.Po=0,this.Vo=null,this.vo=null,this.stream=null,this.So=new on(e,t)}Do(){return 1===this.state||5===this.state||this.Co()}Co(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.xo()}stop(){var e=this;return(0,_e.Z)(function*(){e.Do()&&(yield e.close(0))})()}No(){this.state=0,this.So.reset()}ko(){this.Co()&&null===this.Vo&&(this.Vo=this.Jn.enqueueAfterDelay(this.Ao,6e4,()=>this.Mo()))}Oo(e){this.Fo(),this.stream.send(e)}Mo(){var e=this;return(0,_e.Z)(function*(){if(e.Co())return e.close(0)})()}Fo(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}$o(){this.vo&&(this.vo.cancel(),this.vo=null)}close(e,t){var r=this;return(0,_e.Z)(function*(){r.Fo(),r.$o(),r.So.cancel(),r.Po++,4!==e?r.So.reset():t&&t.code===ae.RESOURCE_EXHAUSTED?(On(t.toString()),On("Using maximum backoff delay to prevent overloading the backend."),r.So.po()):t&&t.code===ae.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Bo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Jr(t)})()}Bo(){}auth(){this.state=1;const e=this.Lo(this.Po),t=this.Po;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,o])=>{this.Po===t&&this.Uo(r,o)},r=>{e(()=>{const o=new Ae(ae.UNKNOWN,"Fetching auth token failed: "+r.message);return this.qo(o)})})}Uo(e,t){const r=this.Lo(this.Po);this.stream=this.Go(e,t),this.stream.zr(()=>{r(()=>(this.state=2,this.vo=this.Jn.enqueueAfterDelay(this.Ro,1e4,()=>(this.Co()&&(this.state=3),Promise.resolve())),this.listener.zr()))}),this.stream.Jr(o=>{r(()=>this.qo(o))}),this.stream.onMessage(o=>{r(()=>this.onMessage(o))})}xo(){var e=this;this.state=5,this.So.Io((0,_e.Z)(function*(){e.state=0,e.start()}))}qo(e){return Ne("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Lo(e){return t=>{this.Jn.enqueueAndForget(()=>this.Po===e?t():(Ne("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class wc extends Bi{constructor(e,t,r,o,l,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,o,d),this.M=l}Go(e,t){return this.bo.ho("Listen",e,t)}onMessage(e){this.So.reset();const t=function dv(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(w=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===w?1:"REMOVE"===w?2:"CURRENT"===w?3:"RESET"===w?4:tt(),o=e.targetChange.targetIds||[],l=function(w,C){return w.N?(vt(void 0===C||"string"==typeof C),lr.fromBase64String(C||"")):(vt(void 0===C||C instanceof Uint8Array),lr.fromUint8Array(C||new Uint8Array))}(n,e.targetChange.resumeToken),d=e.targetChange.cause,m=d&&function(w){const C=void 0===w.code?ae.UNKNOWN:xw(w.code);return new Ae(C,w.message||"")}(d);t=new Im(r,o,l,m||null)}else if("documentChange"in e){const r=e.documentChange,o=xa(n,r.document.name),l=sn(r.document.updateTime),d=new ni({mapValue:{fields:r.document.fields}}),m=Tn.newFoundDocument(o,l,d);t=new wm(r.targetIds||[],r.removedTargetIds||[],m.key,m)}else if("documentDelete"in e){const r=e.documentDelete,o=xa(n,r.document),l=r.readTime?sn(r.readTime):mt.min(),d=Tn.newNoDocument(o,l);t=new wm([],r.removedTargetIds||[],d.key,d)}else if("documentRemove"in e){const r=e.documentRemove,o=xa(n,r.document);t=new wm([],r.removedTargetIds||[],o,null)}else{if(!("filter"in e))return tt();{const r=e.filter,l=new tv(r.count||0);t=new sv(r.targetId,l)}}var w;return t}(this.M,e),r=function(o){if(!("targetChange"in o))return mt.min();const l=o.targetChange;return l.targetIds&&l.targetIds.length?mt.min():l.readTime?sn(l.readTime):mt.min()}(e);return this.listener.Ko(t,r)}Qo(e){const t={};t.database=fc(this.M),t.addTarget=function(o,l){let d;const m=l.target;return d=z_(m)?{documents:Cm(o,m)}:{query:jb(o,m)},d.targetId=l.targetId,l.resumeToken.approximateByteSize()>0?d.resumeToken=lv(o,l.resumeToken):l.snapshotVersion.compareTo(mt.min())>0&&(d.readTime=up(o,l.snapshotVersion.toTimestamp())),d}(this.M,e);const r=function $b(n,e){const t=function(r,o){switch(o){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return tt()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Oo(t)}jo(e){const t={};t.database=fc(this.M),t.removeTarget=e,this.Oo(t)}}class Uv extends Bi{constructor(e,t,r,o,l,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,o,d),this.M=l,this.Wo=!1}get zo(){return this.Wo}start(){this.Wo=!1,this.lastStreamToken=void 0,super.start()}Bo(){this.Wo&&this.Ho([])}Go(e,t){return this.bo.ho("Write",e,t)}onMessage(e){if(vt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Wo){this.So.reset();const t=function bm(n,e){return n&&n.length>0?(vt(void 0!==e),n.map(t=>function(r,o){let l=sn(r.updateTime?r.updateTime:o);return l.isEqual(mt.min())&&(l=sn(o)),new Cw(l,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=sn(e.commitTime);return this.listener.Jo(r,t)}return vt(!e.writeResults||0===e.writeResults.length),this.Wo=!0,this.listener.Yo()}Xo(){const e={};e.database=fc(this.M),this.Oo(e)}Ho(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>dh(this.M,r))};this.Oo(t)}}class Bv extends class{}{constructor(e,t,r,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.bo=r,this.M=o,this.Zo=!1}tu(){if(this.Zo)throw new Ae(ae.FAILED_PRECONDITION,"The client has already been terminated.")}ro(e,t,r){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.bo.ro(e,t,r,o,l)).catch(o=>{throw"FirebaseError"===o.name?(o.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Ae(ae.UNKNOWN,o.toString())})}co(e,t,r){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.bo.co(e,t,r,o,l)).catch(o=>{throw"FirebaseError"===o.name?(o.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Ae(ae.UNKNOWN,o.toString())})}terminate(){this.Zo=!0}}class jv{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.eu=0,this.nu=null,this.su=!0}iu(){0===this.eu&&(this.ru("Unknown"),this.nu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.nu=null,this.ou("Backend didn't respond within 10 seconds."),this.ru("Offline"),Promise.resolve())))}uu(e){"Online"===this.state?this.ru("Unknown"):(this.eu++,this.eu>=1&&(this.au(),this.ou(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ru("Offline")))}set(e){this.au(),this.eu=0,"Online"===e&&(this.su=!1),this.ru(e)}ru(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ou(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.su?(On(t),this.su=!1):Ne("OnlineStateTracker",t)}au(){null!==this.nu&&(this.nu.cancel(),this.nu=null)}}class $v{constructor(e,t,r,o,l){var d=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.cu=[],this.hu=new Map,this.lu=new Set,this.fu=[],this.du=l,this.du.Br(m=>{r.enqueueAndForget((0,_e.Z)(function*(){var w;Eh(d)&&(Ne("RemoteStore","Restarting streams for network reachability change."),yield(w=(0,_e.Z)(function*(C){const x=$e(C);x.lu.add(4),yield qu(x),x._u.set("Unknown"),x.lu.delete(4),yield Ic(x)}),function(C){return w.apply(this,arguments)})(d))}))}),this._u=new jv(r,o)}}function Ic(n){return gp.apply(this,arguments)}function gp(){return gp=(0,_e.Z)(function*(n){if(Eh(n))for(const e of n.fu)yield e(!0)}),gp.apply(this,arguments)}function qu(n){return mp.apply(this,arguments)}function mp(){return mp=(0,_e.Z)(function*(n){for(const e of n.fu)yield e(!1)}),mp.apply(this,arguments)}function vh(n,e){const t=$e(n);t.hu.has(e.targetId)||(t.hu.set(e.targetId,e),fC(t)?hC(t):Hm(t).Co()&&dC(t,e))}function Hv(n,e){const t=$e(n),r=Hm(t);t.hu.delete(e),r.Co()&&OA(t,e),0===t.hu.size&&(r.Co()?r.ko():Eh(t)&&t._u.set("Unknown"))}function dC(n,e){n.wu.Z(e.targetId),Hm(n).Qo(e)}function OA(n,e){n.wu.Z(e),Hm(n).jo(e)}function hC(n){n.wu=new Pw({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.hu.get(e)||null}),Hm(n).start(),n._u.iu()}function fC(n){return Eh(n)&&!Hm(n).Do()&&n.hu.size>0}function Eh(n){return 0===$e(n).lu.size}function PA(n){n.wu=void 0}function RM(n){return pC.apply(this,arguments)}function pC(){return pC=(0,_e.Z)(function*(n){n.hu.forEach((e,t)=>{dC(n,e)})}),pC.apply(this,arguments)}function NM(n,e){return gC.apply(this,arguments)}function gC(){return gC=(0,_e.Z)(function*(n,e){PA(n),fC(n)?(n._u.uu(e),hC(n)):n._u.set("Unknown")}),gC.apply(this,arguments)}function OM(n,e,t){return mC.apply(this,arguments)}function mC(){return mC=(0,_e.Z)(function*(n,e,t){if(n._u.set("Online"),e instanceof Im&&2===e.state&&e.cause)try{yield(r=(0,_e.Z)(function*(o,l){const d=l.cause;for(const m of l.targetIds)o.hu.has(m)&&(yield o.remoteSyncer.rejectListen(m,d),o.hu.delete(m),o.wu.removeTarget(m))}),function(o,l){return r.apply(this,arguments)})(n,e)}catch(r){Ne("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield DI(n,r)}else if(e instanceof wm?n.wu.ut(e):e instanceof sv?n.wu._t(e):n.wu.ht(e),!t.isEqual(mt.min()))try{const r=yield vI(n.localStore);t.compareTo(r)>=0&&(yield function(o,l){const d=o.wu.yt(l);return d.targetChanges.forEach((m,w)=>{if(m.resumeToken.approximateByteSize()>0){const C=o.hu.get(w);C&&o.hu.set(w,C.withResumeToken(m.resumeToken,l))}}),d.targetMismatches.forEach(m=>{const w=o.hu.get(m);if(!w)return;o.hu.set(m,w.withResumeToken(lr.EMPTY_BYTE_STRING,w.snapshotVersion)),OA(o,m);const C=new gc(w.target,m,1,w.sequenceNumber);dC(o,C)}),o.remoteSyncer.applyRemoteEvent(d)}(n,t))}catch(r){Ne("RemoteStore","Failed to raise snapshot:",r),yield DI(n,r)}var r}),mC.apply(this,arguments)}function DI(n,e,t){return yC.apply(this,arguments)}function yC(){return yC=(0,_e.Z)(function*(n,e,t){if(!Vu(e))throw e;n.lu.add(1),yield qu(n),n._u.set("Offline"),t||(t=()=>vI(n.localStore)),n.asyncQueue.enqueueRetryable((0,_e.Z)(function*(){Ne("RemoteStore","Retrying IndexedDB access"),yield t(),n.lu.delete(1),yield Ic(n)}))}),yC.apply(this,arguments)}function kA(n,e){return e().catch(t=>DI(n,t,e))}function $m(n){return _C.apply(this,arguments)}function _C(){return _C=(0,_e.Z)(function*(n){const e=$e(n),t=wh(e);let r=e.cu.length>0?e.cu[e.cu.length-1].batchId:-1;for(;PM(e);)try{const o=yield CA(e.localStore,r);if(null===o){0===e.cu.length&&t.ko();break}r=o.batchId,kM(e,o)}catch(o){yield DI(e,o)}FA(e)&&LA(e)}),_C.apply(this,arguments)}function PM(n){return Eh(n)&&n.cu.length<10}function kM(n,e){n.cu.push(e);const t=wh(n);t.Co()&&t.zo&&t.Ho(e.mutations)}function FA(n){return Eh(n)&&!wh(n).Do()&&n.cu.length>0}function LA(n){wh(n).start()}function FM(n){return vC.apply(this,arguments)}function vC(){return vC=(0,_e.Z)(function*(n){wh(n).Xo()}),vC.apply(this,arguments)}function LM(n){return EC.apply(this,arguments)}function EC(){return EC=(0,_e.Z)(function*(n){const e=wh(n);for(const t of n.cu)e.Ho(t.mutations)}),EC.apply(this,arguments)}function VM(n,e,t){return wC.apply(this,arguments)}function wC(){return wC=(0,_e.Z)(function*(n,e,t){const r=n.cu.shift(),o=eI.from(r,e,t);yield kA(n,()=>n.remoteSyncer.applySuccessfulWrite(o)),yield $m(n)}),wC.apply(this,arguments)}function UM(n,e){return IC.apply(this,arguments)}function IC(){return IC=(0,_e.Z)(function*(n,e){var t;e&&wh(n).zo&&(yield(t=(0,_e.Z)(function*(r,o){if(Mw(l=o.code)&&l!==ae.ABORTED){const d=r.cu.shift();wh(r).No(),yield kA(r,()=>r.remoteSyncer.rejectFailedWrite(d.batchId,o)),yield $m(r)}var l}),function(r,o){return t.apply(this,arguments)})(n,e)),FA(n)&&LA(n)}),IC.apply(this,arguments)}function VA(n,e){return DC.apply(this,arguments)}function DC(){return DC=(0,_e.Z)(function*(n,e){const t=$e(n);t.asyncQueue.verifyOperationInProgress(),Ne("RemoteStore","RemoteStore received new credentials");const r=Eh(t);t.lu.add(3),yield qu(t),r&&t._u.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.lu.delete(3),yield Ic(t)}),DC.apply(this,arguments)}function bC(n,e){return CC.apply(this,arguments)}function CC(){return CC=(0,_e.Z)(function*(n,e){const t=$e(n);e?(t.lu.delete(2),yield Ic(t)):e||(t.lu.add(2),yield qu(t),t._u.set("Unknown"))}),CC.apply(this,arguments)}function Hm(n){return n.mu||(n.mu=function(e,t,r){const o=$e(e);return o.tu(),new wc(t,o.bo,o.authCredentials,o.appCheckCredentials,o.M,r)}(n.datastore,n.asyncQueue,{zr:RM.bind(null,n),Jr:NM.bind(null,n),Ko:OM.bind(null,n)}),n.fu.push(function(){var e=(0,_e.Z)(function*(t){t?(n.mu.No(),fC(n)?hC(n):n._u.set("Unknown")):(yield n.mu.stop(),PA(n))});return function(t){return e.apply(this,arguments)}}())),n.mu}function wh(n){return n.gu||(n.gu=function(e,t,r){const o=$e(e);return o.tu(),new Uv(t,o.bo,o.authCredentials,o.appCheckCredentials,o.M,r)}(n.datastore,n.asyncQueue,{zr:FM.bind(null,n),Jr:UM.bind(null,n),Yo:LM.bind(null,n),Jo:VM.bind(null,n)}),n.fu.push(function(){var e=(0,_e.Z)(function*(t){t?(n.gu.No(),yield $m(n)):(yield n.gu.stop(),n.cu.length>0&&(Ne("RemoteStore",`Stopping write stream with ${n.cu.length} pending writes`),n.cu=[]))});return function(t){return e.apply(this,arguments)}}())),n.gu}class TC{constructor(e,t,r,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=l,this.deferred=new zn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(d=>{})}static createAndSchedule(e,t,r,o,l){const d=Date.now()+r,m=new TC(e,t,d,o,l);return m.start(r),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ae(ae.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Gm(n,e){if(On("AsyncQueue",`${e}: ${n}`),Vu(n))return new Ae(ae.UNAVAILABLE,`${e}: ${n}`);throw n}class qm{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ve.comparator(t.key,r.key):(t,r)=>Ve.comparator(t.key,r.key),this.keyedMap=Nw(),this.sortedSet=new kn(this.comparator)}static emptySet(e){return new qm(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof qm)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=r.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new qm;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class UA{constructor(){this.yu=new kn(Ve.comparator)}track(e){const t=e.doc.key,r=this.yu.get(t);r?0!==e.type&&3===r.type?this.yu=this.yu.insert(t,e):3===e.type&&1!==r.type?this.yu=this.yu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.yu=this.yu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.yu=this.yu.remove(t):1===e.type&&2===r.type?this.yu=this.yu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):tt():this.yu=this.yu.insert(t,e)}pu(){const e=[];return this.yu.inorderTraversal((t,r)=>{e.push(r)}),e}}class zm{constructor(e,t,r,o,l,d,m,w){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=l,this.fromCache=d,this.syncStateChanged=m,this.excludesMetadataChanges=w}static fromInitialDocuments(e,t,r,o){const l=[];return t.forEach(d=>{l.push({type:0,doc:d})}),new zm(e,t,qm.emptySet(t),l,r,o,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&tp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}class BM{constructor(){this.Iu=void 0,this.listeners=[]}}class jM{constructor(){this.queries=new vo(e=>ac(e),tp),this.onlineState="Unknown",this.Tu=new Set}}function AC(n,e){return SC.apply(this,arguments)}function SC(){return SC=(0,_e.Z)(function*(n,e){const t=$e(n),r=e.query;let o=!1,l=t.queries.get(r);if(l||(o=!0,l=new BM),o)try{l.Iu=yield t.onListen(r)}catch(d){const m=Gm(d,`Initialization of query '${ym(e.query)}' failed`);return void e.onError(m)}t.queries.set(r,l),l.listeners.push(e),e.Eu(t.onlineState),l.Iu&&e.Au(l.Iu)&&RC(t)}),SC.apply(this,arguments)}function MC(n,e){return xC.apply(this,arguments)}function xC(){return xC=(0,_e.Z)(function*(n,e){const t=$e(n),r=e.query;let o=!1;const l=t.queries.get(r);if(l){const d=l.listeners.indexOf(e);d>=0&&(l.listeners.splice(d,1),o=0===l.listeners.length)}if(o)return t.queries.delete(r),t.onUnlisten(r)}),xC.apply(this,arguments)}function $M(n,e){const t=$e(n);let r=!1;for(const o of e){const d=t.queries.get(o.query);if(d){for(const m of d.listeners)m.Au(o)&&(r=!0);d.Iu=o}}r&&RC(t)}function HM(n,e,t){const r=$e(n),o=r.queries.get(e);if(o)for(const l of o.listeners)l.onError(t);r.queries.delete(e)}function RC(n){n.Tu.forEach(e=>{e.next()})}class NC{constructor(e,t,r){this.query=e,this.Ru=t,this.bu=!1,this.Pu=null,this.onlineState="Unknown",this.options=r||{}}Au(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)3!==o.type&&r.push(o);e=new zm(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.bu?this.Vu(e)&&(this.Ru.next(e),t=!0):this.vu(e,this.onlineState)&&(this.Su(e),t=!0),this.Pu=e,t}onError(e){this.Ru.error(e)}Eu(e){this.onlineState=e;let t=!1;return this.Pu&&!this.bu&&this.vu(this.Pu,e)&&(this.Su(this.Pu),t=!0),t}vu(e,t){return!e.fromCache||!(this.options.Du&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}Vu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Pu&&this.Pu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Su(e){e=zm.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Ru.next(e)}}class GM{constructor(e,t){this.payload=e,this.byteLength=t}Cu(){return"metadata"in this.payload}}class BA{constructor(e){this.M=e}li(e){return xa(this.M,e)}fi(e){return e.metadata.exists?Bw(this.M,e.document,!1):Tn.newNoDocument(this.li(e.metadata.name),this.di(e.metadata.readTime))}di(e){return sn(e)}}class qM{constructor(e,t,r){this.xu=e,this.localStore=t,this.M=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=jA(e)}Nu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=Zt.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ku(e){const t=new Map,r=new BA(this.M);for(const o of e)if(o.metadata.queries){const l=r.li(o.metadata.name);for(const d of o.metadata.queries){const m=(t.get(d)||rn()).add(l);t.set(d,m)}}return t}complete(){var e=this;return(0,_e.Z)(function*(){const t=yield function cC(n,e,t,r){return Vv.apply(this,arguments)}(e.localStore,new BA(e.M),e.documents,e.xu.id),r=e.ku(e.documents);for(const o of e.queries)yield TA(e.localStore,o,r.get(o.name));return e.progress.taskState="Success",{progress:e.progress,Mu:e.collectionGroups,Ou:t}})()}}function jA(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class $A{constructor(e){this.key=e}}class HA{constructor(e){this.key=e}}class GA{constructor(e,t){this.query=e,this.Fu=t,this.$u=null,this.current=!1,this.Bu=rn(),this.mutatedKeys=rn(),this.Lu=Y_(e),this.Uu=new qm(this.Lu)}get qu(){return this.Fu}Gu(e,t){const r=t?t.Ku:new UA,o=t?t.Uu:this.Uu;let l=t?t.mutatedKeys:this.mutatedKeys,d=o,m=!1;const w=Jf(this.query)&&o.size===this.query.limit?o.last():null,C=Xf(this.query)&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((x,N)=>{const H=o.get(x),K=Pu(this.query,N)?N:null,fe=!!H&&this.mutatedKeys.has(H.key),Fe=!!K&&(K.hasLocalMutations||this.mutatedKeys.has(K.key)&&K.hasCommittedMutations);let rt=!1;H&&K?H.data.isEqual(K.data)?fe!==Fe&&(r.track({type:3,doc:K}),rt=!0):this.Qu(H,K)||(r.track({type:2,doc:K}),rt=!0,(w&&this.Lu(K,w)>0||C&&this.Lu(K,C)<0)&&(m=!0)):!H&&K?(r.track({type:0,doc:K}),rt=!0):H&&!K&&(r.track({type:1,doc:H}),rt=!0,(w||C)&&(m=!0)),rt&&(K?(d=d.add(K),l=Fe?l.add(x):l.delete(x)):(d=d.delete(x),l=l.delete(x)))}),Jf(this.query)||Xf(this.query))for(;d.size>this.query.limit;){const x=Jf(this.query)?d.last():d.first();d=d.delete(x.key),l=l.delete(x.key),r.track({type:1,doc:x})}return{Uu:d,Ku:r,ei:m,mutatedKeys:l}}Qu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const o=this.Uu;this.Uu=e.Uu,this.mutatedKeys=e.mutatedKeys;const l=e.Ku.pu();l.sort((C,x)=>function(N,H){const K=fe=>{switch(fe){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return tt()}};return K(N)-K(H)}(C.type,x.type)||this.Lu(C.doc,x.doc)),this.ju(r);const d=t?this.Wu():[],m=0===this.Bu.size&&this.current?1:0,w=m!==this.$u;return this.$u=m,0!==l.length||w?{snapshot:new zm(this.query,e.Uu,o,l,e.mutatedKeys,0===m,w,!1),zu:d}:{zu:d}}Eu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Uu:this.Uu,Ku:new UA,mutatedKeys:this.mutatedKeys,ei:!1},!1)):{zu:[]}}Hu(e){return!this.Fu.has(e)&&!!this.Uu.has(e)&&!this.Uu.get(e).hasLocalMutations}ju(e){e&&(e.addedDocuments.forEach(t=>this.Fu=this.Fu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Fu=this.Fu.delete(t)),this.current=e.current)}Wu(){if(!this.current)return[];const e=this.Bu;this.Bu=rn(),this.Uu.forEach(r=>{this.Hu(r.key)&&(this.Bu=this.Bu.add(r.key))});const t=[];return e.forEach(r=>{this.Bu.has(r)||t.push(new HA(r))}),this.Bu.forEach(r=>{e.has(r)||t.push(new $A(r))}),t}Ju(e){this.Fu=e.hi,this.Bu=rn();const t=this.Gu(e.documents);return this.applyChanges(t,!0)}Yu(){return zm.fromInitialDocuments(this.query,this.Uu,this.mutatedKeys,0===this.$u)}}class zM{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class WM{constructor(e){this.key=e,this.Xu=!1}}class KM{constructor(e,t,r,o,l,d){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=d,this.Zu={},this.ta=new vo(m=>ac(m),tp),this.ea=new Map,this.na=new Set,this.sa=new kn(Ve.comparator),this.ia=new Map,this.ra=new II,this.oa={},this.ua=new Map,this.aa=mh.gn(),this.onlineState="Unknown",this.ca=void 0}get isPrimaryClient(){return!0===this.ca}}function ZM(n,e){return OC.apply(this,arguments)}function OC(){return OC=(0,_e.Z)(function*(n,e){const t=nT(n);let r,o;const l=t.ta.get(e);if(l)r=l.targetId,t.sharedClientState.addLocalQueryTarget(r),o=l.view.Yu();else{const d=yield Ec(t.localStore,_o(e));t.isPrimaryClient&&vh(t.remoteStore,d);const m=t.sharedClientState.addLocalQueryTarget(d.targetId);r=d.targetId,o=yield PC(t,e,r,"current"===m)}return o}),OC.apply(this,arguments)}function PC(n,e,t,r){return kC.apply(this,arguments)}function kC(){return kC=(0,_e.Z)(function*(n,e,t,r){n.ha=(x,N,H)=>{return(K=(0,_e.Z)(function*(fe,Fe,rt,zt){let ht=Fe.view.Gu(rt);ht.ei&&(ht=yield jm(fe.localStore,Fe.query,!1).then(({documents:Ht})=>Fe.view.Gu(Ht,ht)));const wn=zt&&zt.targetChanges.get(Fe.targetId),Dt=Fe.view.applyChanges(ht,fe.isPrimaryClient,wn);return qC(fe,Fe.targetId,Dt.zu),Dt.snapshot}),function(fe,Fe,rt,zt){return K.apply(this,arguments)})(n,x,N,H);var K};const o=yield jm(n.localStore,e,!0),l=new GA(e,o.hi),d=l.Gu(o.documents),m=ap.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),w=l.applyChanges(d,n.isPrimaryClient,m);qC(n,t,w.zu);const C=new zM(e,t,l);return n.ta.set(e,C),n.ea.has(t)?n.ea.get(t).push(e):n.ea.set(t,[e]),w.snapshot}),kC.apply(this,arguments)}function YM(n,e){return FC.apply(this,arguments)}function FC(){return FC=(0,_e.Z)(function*(n,e){const t=$e(n),r=t.ta.get(e),o=t.ea.get(r.targetId);if(o.length>1)return t.ea.set(r.targetId,o.filter(l=>!tp(l,e))),void t.ta.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Gu(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),Hv(t.remoteStore,r.targetId),Wm(t,r.targetId)}).catch(_h))):(Wm(t,r.targetId),yield Gu(t.localStore,r.targetId,!0))}),FC.apply(this,arguments)}function LC(){return LC=(0,_e.Z)(function*(n,e,t){const r=rT(n);try{const o=yield function(l,d){const m=$e(l),w=Wn.now(),C=d.reduce((N,H)=>N.add(H.key),rn());let x;return m.persistence.runTransaction("Locally write mutations","readwrite",N=>m.ai.qs(N,C).next(H=>{x=H;const K=[];for(const fe of d){const Fe=Fb(fe,x.get(fe.key));null!=Fe&&K.push(new cc(fe.key,Fe,dw(Fe.value.mapValue),Xn.exists(!0)))}return m.$s.addMutationBatch(N,w,K,d)})).then(N=>(N.applyToLocalDocumentSet(x),{batchId:N.batchId,changes:x}))}(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),function(l,d,m){let w=l.oa[l.currentUser.toKey()];w||(w=new kn($t)),w=w.insert(d,m),l.oa[l.currentUser.toKey()]=w}(r,o.batchId,t),yield Dc(r,o.changes),yield $m(r.remoteStore)}catch(o){const l=Gm(o,"Failed to persist write");t.reject(l)}}),LC.apply(this,arguments)}function qA(n,e){return VC.apply(this,arguments)}function VC(){return VC=(0,_e.Z)(function*(n,e){const t=$e(n);try{const r=yield EI(t.localStore,e);e.targetChanges.forEach((o,l)=>{const d=t.ia.get(l);d&&(vt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?d.Xu=!0:o.modifiedDocuments.size>0?vt(d.Xu):o.removedDocuments.size>0&&(vt(d.Xu),d.Xu=!1))}),yield Dc(t,r,e)}catch(r){yield _h(r)}}),VC.apply(this,arguments)}function zA(n,e,t){const r=$e(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const o=[];r.ta.forEach((l,d)=>{const m=d.view.Eu(e);m.snapshot&&o.push(m.snapshot)}),function(l,d){const m=$e(l);m.onlineState=d;let w=!1;m.queries.forEach((C,x)=>{for(const N of x.listeners)N.Eu(d)&&(w=!0)}),w&&RC(m)}(r.eventManager,e),o.length&&r.Zu.Ko(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function JM(n,e,t){return UC.apply(this,arguments)}function UC(){return UC=(0,_e.Z)(function*(n,e,t){const r=$e(n);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.ia.get(e),l=o&&o.key;if(l){let d=new kn(Ve.comparator);d=d.insert(l,Tn.newNoDocument(l,mt.min()));const m=rn().add(l),w=new op(mt.min(),new Map,new En($t),d,m);yield qA(r,w),r.sa=r.sa.remove(l),r.ia.delete(e),zC(r)}else yield Gu(r.localStore,e,!1).then(()=>Wm(r,e,t)).catch(_h)}),UC.apply(this,arguments)}function XM(n,e){return BC.apply(this,arguments)}function BC(){return BC=(0,_e.Z)(function*(n,e){const t=$e(n),r=e.batch.batchId;try{const o=yield oC(t.localStore,e);GC(t,r,null),HC(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Dc(t,o)}catch(o){yield _h(o)}}),BC.apply(this,arguments)}function ex(n,e,t){return jC.apply(this,arguments)}function jC(){return jC=(0,_e.Z)(function*(n,e,t){const r=$e(n);try{const o=yield function(l,d){const m=$e(l);return m.persistence.runTransaction("Reject batch","readwrite-primary",w=>{let C;return m.$s.lookupMutationBatch(w,d).next(x=>(vt(null!==x),C=x.keys(),m.$s.removeMutationBatch(w,x))).next(()=>m.$s.performConsistencyCheck(w)).next(()=>m.ai.qs(w,C))})}(r.localStore,e);GC(r,e,t),HC(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Dc(r,o)}catch(o){yield _h(o)}}),jC.apply(this,arguments)}function $C(){return $C=(0,_e.Z)(function*(n,e){const t=$e(n);Eh(t.remoteStore)||Ne("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(l){const d=$e(l);return d.persistence.runTransaction("Get highest unacknowledged batch id","readonly",m=>d.$s.getHighestUnacknowledgedBatchId(m))}(t.localStore);if(-1===r)return void e.resolve();const o=t.ua.get(r)||[];o.push(e),t.ua.set(r,o)}catch(r){const o=Gm(r,"Initialization of waitForPendingWrites() operation failed");e.reject(o)}}),$C.apply(this,arguments)}function HC(n,e){(n.ua.get(e)||[]).forEach(t=>{t.resolve()}),n.ua.delete(e)}function GC(n,e,t){const r=$e(n);let o=r.oa[r.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),r.oa[r.currentUser.toKey()]=o}}function Wm(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.ea.get(e))n.ta.delete(r),t&&n.Zu.la(r,t);n.ea.delete(e),n.isPrimaryClient&&n.ra.Ri(e).forEach(r=>{n.ra.containsKey(r)||WA(n,r)})}function WA(n,e){n.na.delete(e.path.canonicalString());const t=n.sa.get(e);null!==t&&(Hv(n.remoteStore,t),n.sa=n.sa.remove(e),n.ia.delete(t),zC(n))}function qC(n,e,t){for(const r of t)r instanceof $A?(n.ra.addReference(r.key,e),nx(n,r)):r instanceof HA?(Ne("SyncEngine","Document no longer in limbo: "+r.key),n.ra.removeReference(r.key,e),n.ra.containsKey(r.key)||WA(n,r.key)):tt()}function nx(n,e){const t=e.key,r=t.path.canonicalString();n.sa.get(t)||n.na.has(r)||(Ne("SyncEngine","New document in limbo: "+t),n.na.add(r),zC(n))}function zC(n){for(;n.na.size>0&&n.sa.size<n.maxConcurrentLimboResolutions;){const e=n.na.values().next().value;n.na.delete(e);const t=new Ve(Zt.fromString(e)),r=n.aa.next();n.ia.set(r,new WM(t)),n.sa=n.sa.insert(t,r),vh(n.remoteStore,new gc(_o(oh(t.path)),r,2,us.A))}}function Dc(n,e,t){return WC.apply(this,arguments)}function WC(){return WC=(0,_e.Z)(function*(n,e,t){const r=$e(n),o=[],l=[],d=[];var m;r.ta.isEmpty()||(r.ta.forEach((m,w)=>{d.push(r.ha(w,e,t).then(C=>{if(C){r.isPrimaryClient&&r.sharedClientState.updateQueryState(w.targetId,C.fromCache?"not-current":"current"),o.push(C);const x=Pv.Js(w.targetId,C);l.push(x)}}))}),yield Promise.all(d),r.Zu.Ko(o),yield(m=(0,_e.Z)(function*(w,C){const x=$e(w);try{yield x.persistence.runTransaction("notifyLocalViewChanges","readwrite",N=>ce.forEach(C,H=>ce.forEach(H.zs,K=>x.persistence.referenceDelegate.addReference(N,H.targetId,K)).next(()=>ce.forEach(H.Hs,K=>x.persistence.referenceDelegate.removeReference(N,H.targetId,K)))))}catch(N){if(!Vu(N))throw N;Ne("LocalStore","Failed to update sequence numbers: "+N)}for(const N of C){const H=N.targetId;if(!N.fromCache){const K=x.si.get(H),Fe=K.withLastLimboFreeSnapshotVersion(K.snapshotVersion);x.si=x.si.insert(H,Fe)}}}),function(w,C){return m.apply(this,arguments)})(r.localStore,l))}),WC.apply(this,arguments)}function rx(n,e){return KC.apply(this,arguments)}function KC(){return KC=(0,_e.Z)(function*(n,e){const t=$e(n);if(!t.currentUser.isEqual(e)){Ne("SyncEngine","User change. New user:",e.toKey());const r=yield Fv(t.localStore,e);t.currentUser=e,(o=t).ua.forEach(d=>{d.forEach(m=>{m.reject(new Ae(ae.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.ua.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Dc(t,r.ci)}var o}),KC.apply(this,arguments)}function ix(n,e){const t=$e(n),r=t.ia.get(e);if(r&&r.Xu)return rn().add(r.key);{let o=rn();const l=t.ea.get(e);if(!l)return o;for(const d of l){const m=t.ta.get(d);o=o.unionWith(m.view.qu)}return o}}function sx(n,e){return ZC.apply(this,arguments)}function ZC(){return ZC=(0,_e.Z)(function*(n,e){const t=$e(n),r=yield jm(t.localStore,e.query,!0),o=e.view.Ju(r);return t.isPrimaryClient&&qC(t,e.targetId,o.zu),o}),ZC.apply(this,arguments)}function ox(n,e){return YC.apply(this,arguments)}function YC(){return YC=(0,_e.Z)(function*(n,e){const t=$e(n);return uC(t.localStore,e).then(r=>Dc(t,r))}),YC.apply(this,arguments)}function ax(n,e,t,r){return QC.apply(this,arguments)}function QC(){return QC=(0,_e.Z)(function*(n,e,t,r){const o=$e(n),l=yield function(d,m){const w=$e(d),C=$e(w.$s);return w.persistence.runTransaction("Lookup mutation documents","readonly",x=>C.ln(x,m).next(N=>N?w.ai.qs(x,N):ce.resolve(null)))}(o.localStore,e);var m;null!==l?("pending"===t?yield $m(o.remoteStore):"acknowledged"===t||"rejected"===t?(GC(o,e,r||null),HC(o,e),m=e,$e($e(o.localStore).$s).dn(m)):tt(),yield Dc(o,l)):Ne("SyncEngine","Cannot apply mutation batch with id: "+e)}),QC.apply(this,arguments)}function JC(){return JC=(0,_e.Z)(function*(n,e){const t=$e(n);if(nT(t),rT(t),!0===e&&!0!==t.ca){const r=t.sharedClientState.getAllActiveQueryTargets(),o=yield KA(t,r.toArray());t.ca=!0,yield bC(t.remoteStore,!0);for(const l of o)vh(t.remoteStore,l)}else if(!1===e&&!1!==t.ca){const r=[];let o=Promise.resolve();t.ea.forEach((l,d)=>{t.sharedClientState.isLocalQueryTarget(d)?r.push(d):o=o.then(()=>(Wm(t,d),Gu(t.localStore,d,!0))),Hv(t.remoteStore,d)}),yield o,yield KA(t,r),function(l){const d=$e(l);d.ia.forEach((m,w)=>{Hv(d.remoteStore,w)}),d.ra.bi(),d.ia=new Map,d.sa=new kn(Ve.comparator)}(t),t.ca=!1,yield bC(t.remoteStore,!1)}}),JC.apply(this,arguments)}function KA(n,e,t){return XC.apply(this,arguments)}function XC(){return XC=(0,_e.Z)(function*(n,e,t){const r=$e(n),o=[],l=[];for(const d of e){let m;const w=r.ea.get(d);if(w&&0!==w.length){m=yield Ec(r.localStore,_o(w[0]));for(const C of w){const x=r.ta.get(C),N=yield sx(r,x);N.snapshot&&l.push(N.snapshot)}}else{const C=yield aC(r.localStore,d);m=yield Ec(r.localStore,C),yield PC(r,ZA(C),d,!1)}o.push(m)}return r.Zu.Ko(l),o}),XC.apply(this,arguments)}function ZA(n){return sh(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function lx(n){const e=$e(n);return $e($e(e.localStore).persistence).Os()}function cx(n,e,t,r){return eT.apply(this,arguments)}function eT(){return eT=(0,_e.Z)(function*(n,e,t,r){const o=$e(n);if(o.ca)return void Ne("SyncEngine","Ignoring unexpected query state notification.");const l=o.ea.get(e);if(l&&l.length>0)switch(t){case"current":case"not-current":{const d=yield uC(o.localStore,xb(l[0])),m=op.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield Dc(o,d,m);break}case"rejected":yield Gu(o.localStore,e,!0),Wm(o,e,r);break;default:tt()}}),eT.apply(this,arguments)}function dx(n,e,t){return tT.apply(this,arguments)}function tT(){return tT=(0,_e.Z)(function*(n,e,t){const r=nT(n);if(r.ca){for(const o of e){if(r.ea.has(o)){Ne("SyncEngine","Adding an already active target "+o);continue}const l=yield aC(r.localStore,o),d=yield Ec(r.localStore,l);yield PC(r,ZA(l),d.targetId,!1),vh(r.remoteStore,d)}for(const o of t)r.ea.has(o)&&(yield Gu(r.localStore,o,!1).then(()=>{Hv(r.remoteStore,o),Wm(r,o)}).catch(_h))}}),tT.apply(this,arguments)}function nT(n){const e=$e(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=qA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=ix.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=JM.bind(null,e),e.Zu.Ko=$M.bind(null,e.eventManager),e.Zu.la=HM.bind(null,e.eventManager),e}function rT(n){const e=$e(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=XM.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=ex.bind(null,e),e}class YA{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,_e.Z)(function*(){t.M=Ot(e.databaseInfo.databaseId),t.sharedClientState=t.da(e),t.persistence=t._a(e),yield t.persistence.start(),t.gcScheduler=t.wa(e),t.localStore=t.ma(e)})()}wa(e){return null}ma(e){return kv(this.persistence,new _I,e.initialUser,this.M)}_a(e){return new i(a.Wi,this.M)}da(e){return new V}terminate(){var e=this;return(0,_e.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class QA extends YA{constructor(e,t,r){super(),this.ga=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,_e.Z)(function*(){yield t().call(r,e),yield r.ga.initialize(r,e),yield rT(r.ga.syncEngine),yield $m(r.ga.remoteStore),yield r.persistence.Is(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()))})()}ma(e){return kv(this.persistence,new _I,e.initialUser,this.M)}wa(e){return new bA(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}_a(e){const t=Vm(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?mi.withCacheSize(this.cacheSizeBytes):mi.DEFAULT;return new yI(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,Ie(),at(),this.M,this.sharedClientState,!!this.forceOwnership)}da(e){return new V}}class fx extends QA{constructor(e,t){super(e,t,!1),this.ga=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,_e.Z)(function*(){yield t().call(r,e);const o=r.ga.syncEngine;r.sharedClientState instanceof P&&(r.sharedClientState.syncEngine={kr:ax.bind(null,o),Mr:cx.bind(null,o),Or:dx.bind(null,o),Os:lx.bind(null,o),Nr:ox.bind(null,o)},yield r.sharedClientState.start()),yield r.persistence.Is(function(){var l=(0,_e.Z)(function*(d){yield function ux(n,e){return JC.apply(this,arguments)}(r.ga.syncEngine,d),r.gcScheduler&&(d&&!r.gcScheduler.started?r.gcScheduler.start(r.localStore):d||r.gcScheduler.stop())});return function(d){return l.apply(this,arguments)}}())})()}da(e){const t=Ie();if(!P.vt(t))throw new Ae(ae.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=Vm(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new P(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class iT{initialize(e,t){var r=this;return(0,_e.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=o=>zA(r.syncEngine,o,1),r.remoteStore.remoteSyncer.handleCredentialChange=rx.bind(null,r.syncEngine),yield bC(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new jM}createDatastore(e){const t=Ot(e.databaseInfo.databaseId),r=new Qe(e.databaseInfo);return new Bv(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,o=e.asyncQueue,l=m=>zA(this.syncEngine,m,0),d=me.vt()?new me:new W,new $v(t,r,o,l,d);var t,r,o,l,d}createSyncEngine(e,t){return function(r,o,l,d,m,w,C){const x=new KM(r,o,l,d,m,w);return C&&(x.ca=!0),x}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,_e.Z)(function*(t){const r=$e(t);Ne("RemoteStore","RemoteStore shutting down."),r.lu.add(5),yield qu(r),r.du.shutdown(),r._u.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function JA(n,e=10240){let t=0;return{read:()=>(0,_e.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,_e.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class bI{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.ya(this.observer.next,e)}error(e){this.observer.error?this.ya(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}pa(){this.muted=!0}ya(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class px{constructor(e,t){this.Ia=e,this.M=t,this.metadata=new zn,this.buffer=new Uint8Array,this.Ta=new TextDecoder("utf-8"),this.Ea().then(r=>{r&&r.Cu()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Ia.cancel()}getMetadata(){var e=this;return(0,_e.Z)(function*(){return e.metadata.promise})()}fa(){var e=this;return(0,_e.Z)(function*(){return yield e.getMetadata(),e.Ea()})()}Ea(){var e=this;return(0,_e.Z)(function*(){const t=yield e.Aa();if(null===t)return null;const r=e.Ta.decode(t),o=Number(r);isNaN(o)&&e.Ra(`length string (${r}) is not valid number`);const l=yield e.ba(o);return new GM(JSON.parse(l),t.length+o)})()}Pa(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Aa(){var e=this;return(0,_e.Z)(function*(){for(;e.Pa()<0&&!(yield e.Va()););if(0===e.buffer.length)return null;const t=e.Pa();t<0&&e.Ra("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}ba(e){var t=this;return(0,_e.Z)(function*(){for(;t.buffer.length<e;)(yield t.Va())&&t.Ra("Reached the end of bundle when more is expected.");const r=t.Ta.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Ra(e){throw this.Ia.cancel(),new Error(`Invalid bundle format: ${e}`)}Va(){var e=this;return(0,_e.Z)(function*(){const t=yield e.Ia.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class gx{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,_e.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Ae(ae.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(o=(0,_e.Z)(function*(l,d){const m=$e(l),w=fc(m.M)+"/documents",C={documents:d.map(K=>lp(m.M,K))},x=yield m.co("BatchGetDocuments",w,C),N=new Map;x.forEach(K=>{const fe=function Bb(n,e){return"found"in e?function(t,r){vt(!!r.found);const o=xa(t,r.found.name),l=sn(r.found.updateTime),d=new ni({mapValue:{fields:r.found.fields}});return Tn.newFoundDocument(o,l,d)}(n,e):"missing"in e?function(t,r){vt(!!r.missing),vt(!!r.readTime);const o=xa(t,r.missing),l=sn(r.readTime);return Tn.newNoDocument(o,l)}(n,e):tt()}(m.M,K);N.set(fe.key.toString(),fe)});const H=[];return d.forEach(K=>{const fe=N.get(K.toString());vt(!!fe),H.push(fe)}),H}),function(l,d){return o.apply(this,arguments)})(t.datastore,e);var o;return r.forEach(o=>t.recordVersion(o)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Ui(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,_e.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,o)=>{const l=Ve.fromPath(o);e.mutations.push(new ev(l,e.precondition(l)))}),yield(r=(0,_e.Z)(function*(o,l){const d=$e(o),m=fc(d.M)+"/documents",w={writes:l.map(C=>dh(d.M,C))};yield d.ro("Commit",m,w)}),function(o,l){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw tt();t=mt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Ae(ae.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?Xn.updateTime(t):Xn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(mt.min()))throw new Ae(ae.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Xn.updateTime(t)}return Xn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class mx{constructor(e,t,r,o){this.asyncQueue=e,this.datastore=t,this.updateFunction=r,this.deferred=o,this.va=5,this.So=new on(this.asyncQueue,"transaction_retry")}run(){this.va-=1,this.Sa()}Sa(){var e=this;this.So.Io((0,_e.Z)(function*(){const t=new gx(e.datastore),r=e.Da(t);r&&r.then(o=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(o)}).catch(l=>{e.Ca(l)}))}).catch(o=>{e.Ca(o)})}))}Da(e){try{const t=this.updateFunction(e);return!nc(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Ca(e){this.va>0&&this.xa(e)?(this.va-=1,this.asyncQueue.enqueueAndForget(()=>(this.Sa(),Promise.resolve()))):this.deferred.reject(e)}xa(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!Mw(t)}return!1}}class yx{constructor(e,t,r,o){var l=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=o,this.user=Pr.UNAUTHENTICATED,this.clientId=_b.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var d=(0,_e.Z)(function*(m){Ne("FirestoreClient","Received user=",m.uid),yield l.authCredentialListener(m),l.user=m});return function(m){return d.apply(this,arguments)}}()),this.appCheckCredentials.start(r,d=>(Ne("FirestoreClient","Received new app check token=",d),this.appCheckCredentialListener(d,this.user)))}getConfiguration(){var e=this;return(0,_e.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ae(ae.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new zn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,_e.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const o=Gm(r,"Failed to shutdown persistence");t.reject(o)}})),t.promise}}function XA(n,e){return sT.apply(this,arguments)}function sT(){return sT=(0,_e.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Ne("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var o=(0,_e.Z)(function*(l){r.isEqual(l)||(yield Fv(e.localStore,l),r=l)});return function(l){return o.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),sT.apply(this,arguments)}function eS(n,e){return oT.apply(this,arguments)}function oT(){return oT=(0,_e.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield aT(n);Ne("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(o=>VA(e.remoteStore,o)),n.setAppCheckTokenChangeListener((o,l)=>VA(e.remoteStore,l)),n.onlineComponents=e}),oT.apply(this,arguments)}function aT(n){return uT.apply(this,arguments)}function uT(){return uT=(0,_e.Z)(function*(n){return n.offlineComponents||(Ne("FirestoreClient","Using default OfflineComponentProvider"),yield XA(n,new YA)),n.offlineComponents}),uT.apply(this,arguments)}function CI(n){return lT.apply(this,arguments)}function lT(){return lT=(0,_e.Z)(function*(n){return n.onlineComponents||(Ne("FirestoreClient","Using default OnlineComponentProvider"),yield eS(n,new iT)),n.onlineComponents}),lT.apply(this,arguments)}function tS(n){return aT(n).then(e=>e.persistence)}function cT(n){return aT(n).then(e=>e.localStore)}function nS(n){return CI(n).then(e=>e.remoteStore)}function dT(n){return CI(n).then(e=>e.syncEngine)}function Km(n){return hT.apply(this,arguments)}function hT(){return hT=(0,_e.Z)(function*(n){const e=yield CI(n),t=e.eventManager;return t.onListen=ZM.bind(null,e.syncEngine),t.onUnlisten=YM.bind(null,e.syncEngine),t}),hT.apply(this,arguments)}function rS(n,e,t={}){const r=new zn;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return function(o,l,d,m,w){const C=new bI({next:N=>{l.enqueueAndForget(()=>MC(o,x));const H=N.docs.has(d);!H&&N.fromCache?w.reject(new Ae(ae.UNAVAILABLE,"Failed to get document because the client is offline.")):H&&N.fromCache&&m&&"server"===m.source?w.reject(new Ae(ae.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):w.resolve(N)},error:N=>w.reject(N)}),x=new NC(oh(d.path),C,{includeMetadataChanges:!0,Du:!0});return AC(o,x)}(yield Km(n),n.asyncQueue,e,t,r)})),r.promise}function iS(n,e,t={}){const r=new zn;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return function(o,l,d,m,w){const C=new bI({next:N=>{l.enqueueAndForget(()=>MC(o,x)),N.fromCache&&"server"===m.source?w.reject(new Ae(ae.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):w.resolve(N)},error:N=>w.reject(N)}),x=new NC(d,C,{includeMetadataChanges:!0,Du:!0});return AC(o,x)}(yield Km(n),n.asyncQueue,e,t,r)})),r.promise}const sS=new Map;function fT(n,e,t){if(!t)throw new Ae(ae.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function oS(n,e,t,r){if(!0===e&&!0===r)throw new Ae(ae.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function aS(n){if(!Ve.isDocumentKey(n))throw new Ae(ae.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function uS(n){if(Ve.isDocumentKey(n))throw new Ae(ae.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function TI(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":tt()}function Jt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ae(ae.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=TI(n);throw new Ae(ae.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function lS(n,e){if(e<=0)throw new Ae(ae.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class cS{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Ae(ae.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Ae(ae.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,oS("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Gv{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new cS({}),this._settingsFrozen=!1,e instanceof Go?this._databaseId=e:(this._app=e,this._databaseId=function(o){if(!Object.prototype.hasOwnProperty.apply(o.options,["projectId"]))throw new Ae(ae.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Go(o.options.projectId)}(e))}get app(){if(!this._app)throw new Ae(ae.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Ae(ae.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new cS(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new hb;switch(t.type){case"gapi":const r=t.client;return vt(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new nw(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Ae(ae.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=sS.get(e);t&&(Ne("ComponentProvider","Removing Datastore"),sS.delete(e),t.terminate())}(this),Promise.resolve()}}class Un{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new zu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Un(this.firestore,e,this._key)}}class ji{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ji(this.firestore,e,this._query)}}class zu extends ji{constructor(e,t,r){super(e,t,oh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Un(this.firestore,null,new Ve(e))}withConverter(e){return new zu(this.firestore,e,this._path)}}function dS(n,e,...t){if(n=(0,jt.m9)(n),fT("collection","path",e),n instanceof Gv){const r=Zt.fromString(e,...t);return uS(r),new zu(n,null,r)}{if(!(n instanceof Un||n instanceof zu))throw new Ae(ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Zt.fromString(e,...t));return uS(r),new zu(n.firestore,null,r)}}function AI(n,e,...t){if(n=(0,jt.m9)(n),1===arguments.length&&(e=_b.R()),fT("doc","path",e),n instanceof Gv){const r=Zt.fromString(e,...t);return aS(r),new Un(n,null,new Ve(r))}{if(!(n instanceof Un||n instanceof zu))throw new Ae(ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Zt.fromString(e,...t));return aS(r),new Un(n.firestore,n instanceof zu?n.converter:null,new Ve(r))}}function hS(n,e){return n=(0,jt.m9)(n),e=(0,jt.m9)(e),(n instanceof Un||n instanceof zu)&&(e instanceof Un||e instanceof zu)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function fS(n,e){return n=(0,jt.m9)(n),e=(0,jt.m9)(e),n instanceof ji&&e instanceof ji&&n.firestore===e.firestore&&tp(n._query,e._query)&&n.converter===e.converter}class Sx{constructor(){this.Na=Promise.resolve(),this.ka=[],this.Ma=!1,this.Oa=[],this.Fa=null,this.$a=!1,this.Ba=!1,this.La=[],this.So=new on(this,"async_queue_retry"),this.Ua=()=>{const t=at();t&&Ne("AsyncQueue","Visibility state changed to "+t.visibilityState),this.So.Eo()};const e=at();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ua)}get isShuttingDown(){return this.Ma}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.qa(),this.Ga(e)}enterRestrictedMode(e){if(!this.Ma){this.Ma=!0,this.Ba=e||!1;const t=at();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Ua)}}enqueue(e){if(this.qa(),this.Ma)return new Promise(()=>{});const t=new zn;return this.Ga(()=>this.Ma&&this.Ba?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.ka.push(e),this.Ka()))}Ka(){var e=this;return(0,_e.Z)(function*(){if(0!==e.ka.length){try{yield e.ka[0](),e.ka.shift(),e.So.reset()}catch(t){if(!Vu(t))throw t;Ne("AsyncQueue","Operation failed with retryable error: "+t)}e.ka.length>0&&e.So.Io(()=>e.Ka())}})()}Ga(e){const t=this.Na.then(()=>(this.$a=!0,e().catch(r=>{throw this.Fa=r,this.$a=!1,On("INTERNAL UNHANDLED ERROR: ",function(l){let d=l.message||"";return l.stack&&(d=l.stack.includes(l.message)?l.stack:l.message+"\n"+l.stack),d}(r)),r}).then(r=>(this.$a=!1,r))));return this.Na=t,t}enqueueAfterDelay(e,t,r){this.qa(),this.La.indexOf(e)>-1&&(t=0);const o=TC.createAndSchedule(this,e,t,r,l=>this.Qa(l));return this.Oa.push(o),o}qa(){this.Fa&&tt()}verifyOperationInProgress(){}ja(){var e=this;return(0,_e.Z)(function*(){let t;do{t=e.Na,yield t}while(t!==e.Na)})()}Wa(e){for(const t of this.Oa)if(t.timerId===e)return!0;return!1}za(e){return this.ja().then(()=>{this.Oa.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Oa)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.ja()})}Ha(e){this.La.push(e)}Qa(e){const t=this.Oa.indexOf(e);this.Oa.splice(t,1)}}function pT(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const o of["next","error","complete"])if(o in r&&"function"==typeof r[o])return!0;return!1}(n)}class Mx{constructor(){this._progressObserver={},this._taskCompletionResolver=new zn,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Kn extends Gv{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new Sx,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||pS(this),this._firestoreClient.terminate()}}function Lr(n){return n._firestoreClient||pS(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function pS(n){var e;const t=n._freezeSettings(),r=(l=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new Db(n._databaseId,l,n._persistenceKey,(m=t).host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,m.useFetchStreams));var l,m;n._firestoreClient=new yx(n._authCredentials,n._appCheckCredentials,n._queue,r)}function gS(n,e,t){const r=new zn;return n.asyncQueue.enqueue((0,_e.Z)(function*(){try{yield XA(n,t),yield eS(n,e),r.resolve()}catch(o){if(!("FirebaseError"===(l=o).name?l.code===ae.FAILED_PRECONDITION||l.code===ae.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&l instanceof DOMException)||22===l.code||20===l.code||11===l.code))throw o;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+o),r.reject(o)}var l})).then(()=>r.promise)}function mS(n){if(n._initialized||n._terminated)throw new Ae(ae.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class bc{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Ae(ae.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new kr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Wu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Wu(lr.fromBase64String(e))}catch(t){throw new Ae(ae.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Wu(lr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class yp{constructor(e){this._methodName=e}}class SI{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ae(ae.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ae(ae.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return $t(this._lat,e._lat)||$t(this._long,e._long)}}const Ux=/^__.*__$/;class Bx{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new cc(e,this.data,this.fieldMask,t,this.fieldTransforms):new sp(e,this.data,t,this.fieldTransforms)}}class yS{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new cc(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function _S(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw tt()}}class MI{constructor(e,t,r,o,l,d){this.settings=e,this.databaseId=t,this.M=r,this.ignoreUndefinedProperties=o,void 0===l&&this.Ja(),this.fieldTransforms=l||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Ya(){return this.settings.Ya}Xa(e){return new MI(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Za(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.Xa({path:r,tc:!1});return o.ec(e),o}nc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.Xa({path:r,tc:!1});return o.Ja(),o}sc(e){return this.Xa({path:void 0,tc:!0})}ic(e){return NI(e,this.settings.methodName,this.settings.rc||!1,this.path,this.settings.oc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Ja(){if(this.path)for(let e=0;e<this.path.length;e++)this.ec(this.path.get(e))}ec(e){if(0===e.length)throw this.ic("Document fields must not be empty");if(_S(this.Ya)&&Ux.test(e))throw this.ic('Document fields cannot begin and end with "__"')}}class jx{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.M=r||Ot(e)}uc(e,t,r,o=!1){return new MI({Ya:e,methodName:t,oc:r,path:kr.emptyPath(),tc:!1,rc:o},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function _p(n){const e=n._freezeSettings(),t=Ot(n._databaseId);return new jx(n._databaseId,!!e.ignoreUndefinedProperties,t)}function xI(n,e,t,r,o,l={}){const d=n.uc(l.merge||l.mergeFields?2:0,e,t,o);_T("Data must be an object, but it was:",d,r);const m=wS(r,d);let w,C;if(l.merge)w=new Qd(d.fieldMask),C=d.fieldTransforms;else if(l.mergeFields){const x=[];for(const N of l.mergeFields){const H=vT(e,N,t);if(!d.contains(H))throw new Ae(ae.INVALID_ARGUMENT,`Field '${H}' is specified in your field mask but missing from your input data.`);DS(x,H)||x.push(H)}w=new Qd(x),C=d.fieldTransforms.filter(N=>w.covers(N.field))}else w=null,C=d.fieldTransforms;return new Bx(new ni(m),w,C)}class qv extends yp{_toFieldTransform(e){if(2!==e.Ya)throw e.ic(1===e.Ya?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof qv}}function vS(n,e,t){return new MI({Ya:3,oc:e.settings.oc,methodName:n._methodName,tc:t},e.databaseId,e.M,e.ignoreUndefinedProperties)}class gT extends yp{_toFieldTransform(e){return new Ma(e.path,new uh)}isEqual(e){return e instanceof gT}}class $x extends yp{constructor(e,t){super(e),this.ac=t}_toFieldTransform(e){const t=vS(this,e,!0),r=this.ac.map(l=>vp(l,t)),o=new uc(r);return new Ma(e.path,o)}isEqual(e){return this===e}}class Hx extends yp{constructor(e,t){super(e),this.ac=t}_toFieldTransform(e){const t=vS(this,e,!0),r=this.ac.map(l=>vp(l,t)),o=new lc(r);return new Ma(e.path,o)}isEqual(e){return this===e}}class Gx extends yp{constructor(e,t){super(e),this.cc=t}_toFieldTransform(e){const t=new lh(e.M,Ob(e.M,this.cc));return new Ma(e.path,t)}isEqual(e){return this===e}}function mT(n,e,t,r){const o=n.uc(1,e,t);_T("Data must be an object, but it was:",o,r);const l=[],d=ni.empty();ec(r,(w,C)=>{const x=RI(e,w,t);C=(0,jt.m9)(C);const N=o.nc(x);if(C instanceof qv)l.push(x);else{const H=vp(C,N);null!=H&&(l.push(x),d.set(x,H))}});const m=new Qd(l);return new yS(d,m,o.fieldTransforms)}function yT(n,e,t,r,o,l){const d=n.uc(1,e,t),m=[vT(e,r,t)],w=[o];if(l.length%2!=0)throw new Ae(ae.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let H=0;H<l.length;H+=2)m.push(vT(e,l[H])),w.push(l[H+1]);const C=[],x=ni.empty();for(let H=m.length-1;H>=0;--H)if(!DS(C,m[H])){const K=m[H];let fe=w[H];fe=(0,jt.m9)(fe);const Fe=d.nc(K);if(fe instanceof qv)C.push(K);else{const rt=vp(fe,Fe);null!=rt&&(C.push(K),x.set(K,rt))}}const N=new Qd(C);return new yS(x,N,d.fieldTransforms)}function ES(n,e,t,r=!1){return vp(t,n.uc(r?4:3,e))}function vp(n,e){if(IS(n=(0,jt.m9)(n)))return _T("Unsupported field value:",e,n),wS(n,e);if(n instanceof yp)return function(t,r){if(!_S(r.Ya))throw r.ic(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ic(`${t._methodName}() is not currently supported inside arrays`);const o=t._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.tc&&4!==e.Ya)throw e.ic("Nested arrays are not supported");return function(t,r){const o=[];let l=0;for(const d of t){let m=vp(d,r.sc(l));null==m&&(m={nullValue:"NULL_VALUE"}),o.push(m),l++}return{arrayValue:{values:o}}}(n,e)}return function(t,r){if(null===(t=(0,jt.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Ob(r.M,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const o=Wn.fromDate(t);return{timestampValue:up(r.M,o)}}if(t instanceof Wn){const o=new Wn(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:up(r.M,o)}}if(t instanceof SI)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Wu)return{bytesValue:lv(r.M,t._byteString)};if(t instanceof Un){const o=r.databaseId,l=t.firestore._databaseId;if(!l.isEqual(o))throw r.ic(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Fu(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ic(`Unsupported field value: ${TI(t)}`)}(n,e)}function wS(n,e){const t={};return B_(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ec(n,(r,o)=>{const l=vp(o,e.Za(r));null!=l&&(t[r]=l)}),{mapValue:{fields:t}}}function IS(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Wn||n instanceof SI||n instanceof Wu||n instanceof Un||n instanceof yp)}function _T(n,e,t){if(!IS(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=TI(t);throw e.ic("an object"===r?n+" a custom object":n+" "+r)}var r}function vT(n,e,t){if((e=(0,jt.m9)(e))instanceof bc)return e._internalPath;if("string"==typeof e)return RI(n,e);throw NI("Field path arguments must be of type string or ",n,!1,void 0,t)}const qx=new RegExp("[~\\*/\\[\\]]");function RI(n,e,t){if(e.search(qx)>=0)throw NI(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new bc(...e.split("."))._internalPath}catch(r){throw NI(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function NI(n,e,t,r,o){const l=r&&!r.isEmpty(),d=void 0!==o;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let w="";return(l||d)&&(w+=" (found",l&&(w+=` in field ${r}`),d&&(w+=` in document ${o}`),w+=")"),new Ae(ae.INVALID_ARGUMENT,m+n+w)}function DS(n,e){return n.some(t=>t.isEqual(e))}class zv{constructor(e,t,r,o,l){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Un(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new zx(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(OI("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class zx extends zv{data(){return super.data()}}function OI(n,e){return"string"==typeof e?RI(n,e):e instanceof bc?e._internalPath:e._delegate._internalPath}class Ep{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Cc extends zv{constructor(e,t,r,o,l,d){super(e,t,r,o,d),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Wv(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(OI("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Wv extends Cc{data(e={}){return super.data(e)}}class Ih{constructor(e,t,r,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Ep(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Wv(this._firestore,this._userDataWriter,r.key,r,new Ep(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ae(ae.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let l=0;return r._snapshot.docChanges.map(d=>({type:"added",doc:new Wv(r._firestore,r._userDataWriter,d.doc.key,d.doc,new Ep(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:l++}))}{let l=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(d=>o||3!==d.type).map(d=>{const m=new Wv(r._firestore,r._userDataWriter,d.doc.key,d.doc,new Ep(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter);let w=-1,C=-1;return 0!==d.type&&(w=l.indexOf(d.doc.key),l=l.delete(d.doc.key)),1!==d.type&&(l=l.add(d.doc),C=l.indexOf(d.doc.key)),{type:Wx(d.type),doc:m,oldIndex:w,newIndex:C}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Wx(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return tt()}}function bS(n,e){return n instanceof Cc&&e instanceof Cc?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Ih&&e instanceof Ih&&n._firestore===e._firestore&&fS(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function CS(n){if(Xf(n)&&0===n.explicitOrderBy.length)throw new Ae(ae.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Kv{}function Dh(n,...e){for(const t of e)n=t._apply(n);return n}class Kx extends Kv{constructor(e,t,r){super(),this.hc=e,this.lc=t,this.fc=r,this.type="where"}_apply(e){const t=_p(e.firestore),r=function(o,l,d,m,w,C,x){let N;if(w.isKeyField()){if("array-contains"===C||"array-contains-any"===C)throw new Ae(ae.INVALID_ARGUMENT,`Invalid Query. You can't perform '${C}' queries on documentId().`);if("in"===C||"not-in"===C){RS(x,C);const K=[];for(const fe of x)K.push(xS(m,o,fe));N={arrayValue:{values:K}}}else N=xS(m,o,x)}else"in"!==C&&"not-in"!==C&&"array-contains-any"!==C||RS(x,C),N=ES(d,"where",x,"in"===C||"not-in"===C);const H=cr.create(w,C,N);return function(K,fe){if(fe.S()){const rt=Z_(K);if(null!==rt&&!rt.isEqual(fe.field))throw new Ae(ae.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${rt.toString()}' and '${fe.field.toString()}'`);const zt=K_(K);null!==zt&&NS(0,fe.field,zt)}const Fe=function(rt,zt){for(const ht of rt.filters)if(zt.indexOf(ht.op)>=0)return ht.op;return null}(K,function(rt){switch(rt){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(fe.op));if(null!==Fe)throw new Ae(ae.INVALID_ARGUMENT,Fe===fe.op?`Invalid query. You cannot use more than one '${fe.op.toString()}' filter.`:`Invalid query. You cannot use '${fe.op.toString()}' filters with '${Fe.toString()}' filters.`)}(o,H),H}(e._query,0,t,e.firestore._databaseId,this.hc,this.lc,this.fc);return new ji(e.firestore,e.converter,function(o,l){const d=o.filters.concat([l]);return new Vs(o.path,o.collectionGroup,o.explicitOrderBy.slice(),d,o.limit,o.limitType,o.startAt,o.endAt)}(e._query,r))}}class Yx extends Kv{constructor(e,t){super(),this.hc=e,this.dc=t,this.type="orderBy"}_apply(e){const t=function(r,o,l){if(null!==r.startAt)throw new Ae(ae.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Ae(ae.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const d=new ih(o,l);return function(m,w){if(null===K_(m)){const C=Z_(m);null!==C&&NS(0,C,w.field)}}(r,d),d}(e._query,this.hc,this.dc);return new ji(e.firestore,e.converter,function(r,o){const l=r.explicitOrderBy.concat([o]);return new Vs(r.path,r.collectionGroup,l,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class TS extends Kv{constructor(e,t,r){super(),this.type=e,this._c=t,this.wc=r}_apply(e){return new ji(e.firestore,e.converter,_w(e._query,this._c,this.wc))}}class AS extends Kv{constructor(e,t,r){super(),this.type=e,this.mc=t,this.gc=r}_apply(e){const t=MS(e,this.type,this.mc,this.gc);return new ji(e.firestore,e.converter,(o=t,new Vs((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,o,r.endAt)));var r,o}}class SS extends Kv{constructor(e,t,r){super(),this.type=e,this.mc=t,this.gc=r}_apply(e){const t=MS(e,this.type,this.mc,this.gc);return new ji(e.firestore,e.converter,(o=t,new Vs((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,o)));var r,o}}function MS(n,e,t,r){if(t[0]=(0,jt.m9)(t[0]),t[0]instanceof zv)return function(o,l,d,m,w){if(!m)throw new Ae(ae.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${d}().`);const C=[];for(const x of ah(o))if(x.field.isKeyField())C.push(eh(l,m.key));else{const N=m.data.field(x.field);if(hm(N))throw new Ae(ae.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+x.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===N){const H=x.field.canonicalString();throw new Ae(ae.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${H}' (used as the orderBy) does not exist.`)}C.push(N)}return new Ou(C,w)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const o=_p(n.firestore);return function(l,d,m,w,C,x){const N=l.explicitOrderBy;if(C.length>N.length)throw new Ae(ae.INVALID_ARGUMENT,`Too many arguments provided to ${w}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const H=[];for(let K=0;K<C.length;K++){const fe=C[K];if(N[K].field.isKeyField()){if("string"!=typeof fe)throw new Ae(ae.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${w}(), but got a ${typeof fe}`);if(!ep(l)&&-1!==fe.indexOf("/"))throw new Ae(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${w}() must be a plain document ID, but '${fe}' contains a slash.`);const Fe=l.path.child(Zt.fromString(fe));if(!Ve.isDocumentKey(Fe))throw new Ae(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${w}() must result in a valid document path, but '${Fe}' is not because it contains an odd number of segments.`);const rt=new Ve(Fe);H.push(eh(d,rt))}else{const Fe=ES(m,w,fe);H.push(Fe)}}return new Ou(H,x)}(n._query,n.firestore._databaseId,o,e,t,r)}}function xS(n,e,t){if("string"==typeof(t=(0,jt.m9)(t))){if(""===t)throw new Ae(ae.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ep(e)&&-1!==t.indexOf("/"))throw new Ae(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Zt.fromString(t));if(!Ve.isDocumentKey(r))throw new Ae(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return eh(n,new Ve(r))}if(t instanceof Un)return eh(n,t._key);throw new Ae(ae.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${TI(t)}.`)}function RS(n,e){if(!Array.isArray(n)||0===n.length)throw new Ae(ae.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Ae(ae.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function NS(n,e,t){if(!t.isEqual(e))throw new Ae(ae.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class ET{convertValue(e,t="none"){switch(ic(e)){case 0:return null;case 1:return e.booleanValue;case 2:return yn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(tc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw tt()}}convertObject(e,t){const r={};return ec(e.fields,(o,l)=>{r[o]=this.convertValue(l,t)}),r}convertGeoPoint(e){return new SI(yn(e.latitude),yn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=iw(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Jd(e));default:return null}}convertTimestamp(e){const t=Mu(e);return new Wn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Zt.fromString(e);vt($w(r));const o=new Go(r.get(1),r.get(3)),l=new Ve(r.popFirst(5));return o.isEqual(t)||On(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}function PI(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class iR extends ET{constructor(e){super(),this.firestore=e}convertBytes(e){return new Wu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Un(this.firestore,null,t)}}class OS{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=_p(e)}set(e,t,r){this._verifyNotCommitted();const o=bh(e,this._firestore),l=PI(o.converter,t,r),d=xI(this._dataReader,"WriteBatch.set",o._key,l,null!==o.converter,r);return this._mutations.push(d.toMutation(o._key,Xn.none())),this}update(e,t,r,...o){this._verifyNotCommitted();const l=bh(e,this._firestore);let d;return d="string"==typeof(t=(0,jt.m9)(t))||t instanceof bc?yT(this._dataReader,"WriteBatch.update",l._key,t,r,o):mT(this._dataReader,"WriteBatch.update",l._key,t),this._mutations.push(d.toMutation(l._key,Xn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=bh(e,this._firestore);return this._mutations=this._mutations.concat(new Ui(t._key,Xn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ae(ae.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function bh(n,e){if((n=(0,jt.m9)(n)).firestore!==e)throw new Ae(ae.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class wp extends ET{constructor(e){super(),this.firestore=e}convertBytes(e){return new Wu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Un(this.firestore,null,t)}}function PS(n,e,t){n=Jt(n,Un);const r=Jt(n.firestore,Kn),o=PI(n.converter,e,t);return Zm(r,[xI(_p(r),"setDoc",n._key,o,null!==n.converter,t).toMutation(n._key,Xn.none())])}function kS(n,e,t,...r){n=Jt(n,Un);const o=Jt(n.firestore,Kn),l=_p(o);let d;return d="string"==typeof(e=(0,jt.m9)(e))||e instanceof bc?yT(l,"updateDoc",n._key,e,t,r):mT(l,"updateDoc",n._key,e),Zm(o,[d.toMutation(n._key,Xn.exists(!0))])}function FS(n,...e){var t,r,o;n=(0,jt.m9)(n);let l={includeMetadataChanges:!1},d=0;"object"!=typeof e[d]||pT(e[d])||(l=e[d],d++);const m={includeMetadataChanges:l.includeMetadataChanges};if(pT(e[d])){const N=e[d];e[d]=null===(t=N.next)||void 0===t?void 0:t.bind(N),e[d+1]=null===(r=N.error)||void 0===r?void 0:r.bind(N),e[d+2]=null===(o=N.complete)||void 0===o?void 0:o.bind(N)}let w,C,x;if(n instanceof Un)C=Jt(n.firestore,Kn),x=oh(n._key.path),w={next:N=>{e[d]&&e[d](wT(C,n,N))},error:e[d+1],complete:e[d+2]};else{const N=Jt(n,ji);C=Jt(N.firestore,Kn),x=N._query;const H=new wp(C);w={next:K=>{e[d]&&e[d](new Ih(C,H,N,K))},error:e[d+1],complete:e[d+2]},CS(n._query)}return function(N,H,K,fe){const Fe=new bI(fe),rt=new NC(H,Fe,K);return N.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return AC(yield Km(N),rt)})),()=>{Fe.pa(),N.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return MC(yield Km(N),rt)}))}}(Lr(C),x,m,w)}function Zm(n,e){return function(t,r){const o=new zn;return t.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return function QM(n,e,t){return LC.apply(this,arguments)}(yield dT(t),r,o)})),o.promise}(Lr(n),e)}function wT(n,e,t){const r=t.docs.get(e._key),o=new wp(n);return new Cc(n,o,e._key,r,new Ep(t.hasPendingWrites,t.fromCache),e.converter)}class pR extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=_p(e)}get(e){const t=bh(e,this._firestore),r=new iR(this._firestore);return this._transaction.lookup([t._key]).then(o=>{if(!o||1!==o.length)return tt();const l=o[0];if(l.isFoundDocument())return new zv(this._firestore,r,l.key,l,t.converter);if(l.isNoDocument())return new zv(this._firestore,r,t._key,null,t.converter);throw tt()})}set(e,t,r){const o=bh(e,this._firestore),l=PI(o.converter,t,r),d=xI(this._dataReader,"Transaction.set",o._key,l,null!==o.converter,r);return this._transaction.set(o._key,d),this}update(e,t,r,...o){const l=bh(e,this._firestore);let d;return d="string"==typeof(t=(0,jt.m9)(t))||t instanceof bc?yT(this._dataReader,"Transaction.update",l._key,t,r,o):mT(this._dataReader,"Transaction.update",l._key,t),this._transaction.update(l._key,d),this}delete(e){const t=bh(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=bh(e,this._firestore),r=new wp(this._firestore);return super.get(e).then(o=>new Cc(this._firestore,r,t._key,o._document,new Ep(!1,!1),t.converter))}}function IT(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Ae("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function VS(){if("undefined"==typeof Uint8Array)throw new Ae("unimplemented","Uint8Arrays are not available in this environment.")}function US(){if(!function wb(){return"undefined"!=typeof atob}())throw new Ae("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){Xl=Td.SDK_VERSION,(0,Td._registerComponent)(new bf.wA("firestore",(t,{options:r})=>{const o=t.getProvider("app").getImmediate(),l=new Kn(o,new pb(t.getProvider("auth-internal")),new gb(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),l._setSettings(r),l},"PUBLIC")),(0,Td.registerVersion)(F_,"3.4.7",n),(0,Td.registerVersion)(F_,"3.4.7","esm2017")}();class Zv{constructor(e){this._delegate=e}static fromBase64String(e){return US(),new Zv(Wu.fromBase64String(e))}static fromUint8Array(e){return VS(),new Zv(Wu.fromUint8Array(e))}toBase64(){return US(),this._delegate.toBase64()}toUint8Array(){return VS(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function DT(n){return function DR(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class bR{enableIndexedDbPersistence(e,t){return function Rx(n,e){mS(n=Jt(n,Kn));const t=Lr(n),r=n._freezeSettings(),o=new iT;return gS(t,o,new QA(o,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function Nx(n){mS(n=Jt(n,Kn));const e=Lr(n),t=n._freezeSettings(),r=new iT;return gS(e,r,new fx(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function Ox(n){if(n._initialized&&!n._terminated)throw new Ae(ae.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new zn;return n._queue.enqueueAndForgetEvenWhileRestricted((0,_e.Z)(function*(){try{yield(t=(0,_e.Z)(function*(r){if(!js.vt())return Promise.resolve();const o=r+"main";yield js.delete(o)}),function(r){return t.apply(this,arguments)})(Vm(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class BS{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Go||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&zf("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function Tx(n,e,t,r={}){var o;const l=(n=Jt(n,Gv))._getSettings();if("firestore.googleapis.com"!==l.host&&l.host!==e&&zf("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},l),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let d,m;if("string"==typeof r.mockUserToken)d=r.mockUserToken,m=Pr.MOCK_USER;else{d=(0,jt.Sg)(r.mockUserToken,null===(o=n._app)||void 0===o?void 0:o.options.projectId);const w=r.mockUserToken.sub||r.mockUserToken.user_id;if(!w)throw new Ae(ae.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new Pr(w)}n._authCredentials=new fb(new Yd(d,m))}}(this._delegate,e,t,r)}enableNetwork(){return function kx(n){return function _x(n){return n.asyncQueue.enqueue((0,_e.Z)(function*(){const e=yield tS(n),t=yield nS(n);return e.setNetworkEnabled(!0),function(r){const o=$e(r);return o.lu.delete(0),Ic(o)}(t)}))}(Lr(n=Jt(n,Kn)))}(this._delegate)}disableNetwork(){return function Fx(n){return function vx(n){return n.asyncQueue.enqueue((0,_e.Z)(function*(){const e=yield tS(n),t=yield nS(n);return e.setNetworkEnabled(!1),(r=(0,_e.Z)(function*(o){const l=$e(o);l.lu.add(0),yield qu(l),l._u.set("Offline")}),function(o){return r.apply(this,arguments)})(t);var r}))}(Lr(n=Jt(n,Kn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,oS("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function Px(n){return function(e){const t=new zn;return e.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return function tx(n,e){return $C.apply(this,arguments)}(yield dT(e),t)})),t.promise}(Lr(n=Jt(n,Kn)))}(this._delegate)}onSnapshotsInSync(e){return function fR(n,e){return function Ix(n,e){const t=new bI(e);return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return r=yield Km(n),o=t,$e(r).Tu.add(o),void o.next();var r,o})),()=>{t.pa(),n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return r=yield Km(n),o=t,void $e(r).Tu.delete(o);var r,o}))}}(Lr(n=Jt(n,Kn)),pT(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Ae("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Ym(this,dS(this._delegate,e))}catch(t){throw ls(t,"collection()","Firestore.collection()")}}doc(e){try{return new zo(this,AI(this._delegate,e))}catch(t){throw ls(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new cs(this,function Ax(n,e){if(n=Jt(n,Gv),fT("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Ae(ae.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ji(n,null,(t=e,new Vs(Zt.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw ls(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function gR(n,e){return function Dx(n,e){const t=new zn;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){const r=yield(o=n,CI(o).then(l=>l.datastore));var o;new mx(n.asyncQueue,r,e,t).run()})),t.promise}(Lr(n=Jt(n,Kn)),t=>e(new pR(n,t)))}(this._delegate,t=>e(new jS(this,t)))}batch(){return Lr(this._delegate),new $S(new OS(this._delegate,e=>Zm(this._delegate,e)))}loadBundle(e){return function Lx(n,e){const t=Lr(n=Jt(n,Kn)),r=new Mx;return function bx(n,e,t,r){const o=function(l,d){let m;return m="string"==typeof l?(new TextEncoder).encode(l):l,w=function(w,C){if(w instanceof Uint8Array)return JA(w,C);if(w instanceof ArrayBuffer)return JA(new Uint8Array(w),C);if(w instanceof ReadableStream)return w.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(m),new px(w,d);var w}(t,Ot(e));n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){!function hx(n,e,t){const r=$e(n);var o;(o=(0,_e.Z)(function*(l,d,m){try{const w=yield d.getMetadata();if(yield function(H,K){const fe=$e(H),Fe=sn(K.createTime);return fe.persistence.runTransaction("hasNewerBundle","readonly",rt=>fe.ds.getBundleMetadata(rt,K.id)).then(rt=>!!rt&&rt.createTime.compareTo(Fe)>=0)}(l.localStore,w))return yield d.close(),m._completeWith({taskState:"Success",documentsLoaded:(H=w).totalDocuments,bytesLoaded:H.totalBytes,totalDocuments:H.totalDocuments,totalBytes:H.totalBytes}),Promise.resolve(new Set);m._updateProgress(jA(w));const C=new qM(w,l.localStore,d.M);let x=yield d.fa();for(;x;){const H=yield C.Nu(x);H&&m._updateProgress(H),x=yield d.fa()}const N=yield C.complete();return yield Dc(l,N.Ou,void 0),yield function(H,K){const fe=$e(H);return fe.persistence.runTransaction("Save bundle","readwrite",Fe=>fe.ds.saveBundleMetadata(Fe,K))}(l.localStore,w),m._completeWith(N.progress),Promise.resolve(N.Mu)}catch(w){return zf("SyncEngine",`Loading bundle failed with ${w}`),m._failWith(w),Promise.resolve(new Set)}var H}),function(l,d,m){return o.apply(this,arguments)})(r,e,t).then(o=>{r.sharedClientState.notifyBundleLoaded(o)})}(yield dT(n),o,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function Vx(n,e){return function Cx(n,e){return n.asyncQueue.enqueue((0,_e.Z)(function*(){return function(t,r){const o=$e(t);return o.persistence.runTransaction("Get named query","readonly",l=>o.ds.getNamedQuery(l,r))}(yield cT(n),e)}))}(Lr(n=Jt(n,Kn)),e).then(t=>t?new ji(n,null,t.query):null)}(this._delegate,e).then(t=>t?new cs(this,t):null)}}class kI extends ET{constructor(e){super(),this.firestore=e}convertBytes(e){return new Zv(new Wu(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return zo.forKey(t,this.firestore,null)}}class jS{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new kI(e)}get(e){const t=Dp(e);return this._delegate.get(t).then(r=>new Yv(this._firestore,new Cc(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const o=Dp(e);return r?(IT("Transaction.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const l=Dp(e);return 2===arguments.length?this._delegate.update(l,t):this._delegate.update(l,t,r,...o),this}delete(e){const t=Dp(e);return this._delegate.delete(t),this}}class $S{constructor(e){this._delegate=e}set(e,t,r){const o=Dp(e);return r?(IT("WriteBatch.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const l=Dp(e);return 2===arguments.length?this._delegate.update(l,t):this._delegate.update(l,t,r,...o),this}delete(e){const t=Dp(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Ip{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new Wv(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Qv(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Ip.INSTANCES;let o=r.get(e);o||(o=new WeakMap,r.set(e,o));let l=o.get(t);return l||(l=new Ip(e,new kI(e),t),o.set(t,l)),l}}Ip.INSTANCES=new WeakMap;class zo{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new kI(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Ae("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new zo(t,new Un(t._delegate,r,new Ve(e)))}static forKey(e,t,r){return new zo(t,new Un(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Ym(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Ym(this.firestore,dS(this._delegate,e))}catch(t){throw ls(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,jt.m9)(e))instanceof Un&&hS(this._delegate,e)}set(e,t){t=IT("DocumentReference.set",t);try{return t?PS(this._delegate,e,t):PS(this._delegate,e)}catch(r){throw ls(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?kS(this._delegate,e):kS(this._delegate,e,t,...r)}catch(o){throw ls(o,"updateDoc()","DocumentReference.update()")}}delete(){return function dR(n){return Zm(Jt(n.firestore,Kn),[new Ui(n._key,Xn.none())])}(this._delegate)}onSnapshot(...e){const t=HS(e),r=GS(e,o=>new Yv(this.firestore,new Cc(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)));return FS(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function oR(n){n=Jt(n,Un);const e=Jt(n.firestore,Kn),t=Lr(e),r=new wp(e);return function Ex(n,e){const t=new zn;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return(r=(0,_e.Z)(function*(o,l,d){try{const m=yield function(w,C){const x=$e(w);return x.persistence.runTransaction("read document","readonly",N=>x.ai.Bs(N,C))}(o,l);m.isFoundDocument()?d.resolve(m):m.isNoDocument()?d.resolve(null):d.reject(new Ae(ae.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(m){const w=Gm(m,`Failed to get document '${l} from cache`);d.reject(w)}}),function(o,l,d){return r.apply(this,arguments)})(yield cT(n),e,t);var r})),t.promise}(t,n._key).then(o=>new Cc(e,r,n._key,o,new Ep(null!==o&&o.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function aR(n){n=Jt(n,Un);const e=Jt(n.firestore,Kn);return rS(Lr(e),n._key,{source:"server"}).then(t=>wT(e,n,t))}(this._delegate):function sR(n){n=Jt(n,Un);const e=Jt(n.firestore,Kn);return rS(Lr(e),n._key).then(t=>wT(e,n,t))}(this._delegate),t.then(r=>new Yv(this.firestore,new Cc(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new zo(this.firestore,this._delegate.withConverter(e?Ip.getInstance(this.firestore,e):null))}}function ls(n,e,t){return n.message=n.message.replace(e,t),n}function HS(n){for(const e of n)if("object"==typeof e&&!DT(e))return e;return{}}function GS(n,e){var t,r;let o;return o=DT(n[0])?n[0]:DT(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:l=>{o.next&&o.next(e(l))},error:null===(t=o.error)||void 0===t?void 0:t.bind(o),complete:null===(r=o.complete)||void 0===r?void 0:r.bind(o)}}class Yv{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new zo(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return bS(this._delegate,e._delegate)}}class Qv extends Yv{data(e){const t=this._delegate.data(e);return function ew(n,e){n||tt()}(void 0!==t),t}}class cs{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new kI(e)}where(e,t,r){try{return new cs(this.firestore,Dh(this._delegate,function Zx(n,e,t){const r=e,o=OI("where",n);return new Kx(o,r,t)}(e,t,r)))}catch(o){throw ls(o,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new cs(this.firestore,Dh(this._delegate,function Qx(n,e="asc"){const t=e,r=OI("orderBy",n);return new Yx(r,t)}(e,t)))}catch(r){throw ls(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new cs(this.firestore,Dh(this._delegate,function Jx(n){return lS("limit",n),new TS("limit",n,"F")}(e)))}catch(t){throw ls(t,"limit()","Query.limit()")}}limitToLast(e){try{return new cs(this.firestore,Dh(this._delegate,function Xx(n){return lS("limitToLast",n),new TS("limitToLast",n,"L")}(e)))}catch(t){throw ls(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new cs(this.firestore,Dh(this._delegate,function eR(...n){return new AS("startAt",n,!0)}(...e)))}catch(t){throw ls(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new cs(this.firestore,Dh(this._delegate,function tR(...n){return new AS("startAfter",n,!1)}(...e)))}catch(t){throw ls(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new cs(this.firestore,Dh(this._delegate,function nR(...n){return new SS("endBefore",n,!1)}(...e)))}catch(t){throw ls(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new cs(this.firestore,Dh(this._delegate,function rR(...n){return new SS("endAt",n,!0)}(...e)))}catch(t){throw ls(t,"endAt()","Query.endAt()")}}isEqual(e){return fS(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function lR(n){n=Jt(n,ji);const e=Jt(n.firestore,Kn),t=Lr(e),r=new wp(e);return function wx(n,e){const t=new zn;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return(r=(0,_e.Z)(function*(o,l,d){try{const m=yield jm(o,l,!0),w=new GA(l,m.hi),C=w.Gu(m.documents),x=w.applyChanges(C,!1);d.resolve(x.snapshot)}catch(m){const w=Gm(m,`Failed to execute query '${l} against cache`);d.reject(w)}}),function(o,l,d){return r.apply(this,arguments)})(yield cT(n),e,t);var r})),t.promise}(t,n._query).then(o=>new Ih(e,r,n,o))}(this._delegate):"server"===(null==e?void 0:e.source)?function cR(n){n=Jt(n,ji);const e=Jt(n.firestore,Kn),t=Lr(e),r=new wp(e);return iS(t,n._query,{source:"server"}).then(o=>new Ih(e,r,n,o))}(this._delegate):function uR(n){n=Jt(n,ji);const e=Jt(n.firestore,Kn),t=Lr(e),r=new wp(e);return CS(n._query),iS(t,n._query).then(o=>new Ih(e,r,n,o))}(this._delegate),t.then(r=>new bT(this.firestore,new Ih(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=HS(e),r=GS(e,o=>new bT(this.firestore,new Ih(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)));return FS(this._delegate,t,r)}withConverter(e){return new cs(this.firestore,this._delegate.withConverter(e?Ip.getInstance(this.firestore,e):null))}}class TR{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Qv(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class bT{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new cs(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Qv(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new TR(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new Qv(this._firestore,r))})}isEqual(e){return bS(this._delegate,e._delegate)}}class Ym extends cs{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new zo(this.firestore,e):null}doc(e){try{return new zo(this.firestore,void 0===e?AI(this._delegate):AI(this._delegate,e))}catch(t){throw ls(t,"doc()","CollectionReference.doc()")}}add(e){return function hR(n,e){const t=Jt(n.firestore,Kn),r=AI(n),o=PI(n.converter,e);return Zm(t,[xI(_p(n.firestore),"addDoc",r._key,o,null!==n.converter,{}).toMutation(r._key,Xn.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new zo(this.firestore,t))}isEqual(e){return hS(this._delegate,e._delegate)}withConverter(e){return new Ym(this.firestore,this._delegate.withConverter(e?Ip.getInstance(this.firestore,e):null))}}function Dp(n){return Jt(n,Un)}class CT{constructor(...e){this._delegate=new bc(...e)}static documentId(){return new CT(kr.keyField().canonicalString())}isEqual(e){return(e=(0,jt.m9)(e))instanceof bc&&this._delegate._internalPath.isEqual(e._internalPath)}}class bp{constructor(e){this._delegate=e}static serverTimestamp(){const e=function yR(){return new gT("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new bp(e)}static delete(){const e=function mR(){return new qv("deleteField")}();return e._methodName="FieldValue.delete",new bp(e)}static arrayUnion(...e){const t=function _R(...n){return new $x("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new bp(t)}static arrayRemove(...e){const t=function vR(...n){return new Hx("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new bp(t)}static increment(e){const t=function ER(n){return new Gx("increment",n)}(e);return t._methodName="FieldValue.increment",new bp(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const AR={Firestore:BS,GeoPoint:SI,Timestamp:Wn,Blob:Zv,Transaction:jS,WriteBatch:$S,DocumentReference:zo,DocumentSnapshot:Yv,Query:cs,QueryDocumentSnapshot:Qv,QuerySnapshot:bT,CollectionReference:Ym,FieldPath:CT,FieldValue:bp,setLogLevel:function CR(n){!function db(n){Aa.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function MR(n){(function SR(n,e){n.INTERNAL.registerComponent(new bf.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),o=t.getProvider("firestore").getImmediate();return e(r,o)},"PUBLIC").setServiceProps(Object.assign({},AR)))})(n,(e,t)=>new BS(e,t,new bR)),n.registerVersion("@firebase/firestore-compat","0.1.16")}(FD.Z);var xR=k(6451),FI=k(5363),RR=k(6063);class NR extends gi.x{constructor(e=1/0,t=1/0,r=RR.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:o,_timestampProvider:l,_windowTime:d}=this;t||(r.push(e),!o&&r.push(l.now()+d)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:o}=this,l=o.slice();for(let d=0;d<l.length&&!e.closed;d+=r?1:2)e.next(l[d]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:o}=this,l=(o?1:2)*e;if(e<1/0&&l<r.length&&r.splice(0,r.length-l),!o){const d=t.now();let m=0;for(let w=1;w<r.length&&r[w]<=d;w+=2)m=w;m&&r.splice(0,m+1)}}}var OR=k(3099);function qS(n,e,t){let r,o=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:o=!1,scheduler:t}=n):r=null!=n?n:1/0,(0,OR.B)({connector:()=>new NR(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:o})}function zS(n,e){return(0,Ol.m)(e)?Yr(()=>n,e):Yr(()=>n)}var TT=k(9468);k(5867);const KS=new Map,VR={activated:!1,tokenObservers:[]},UR={initialized:!1,enabled:!1};function yi(n){return KS.get(n)||VR}function Oa(n,e){KS.set(n,e)}function VI(){return UR}class GR{constructor(e,t,r,o,l){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=o,this.upperBound=l,this.pending=null,this.nextErrorWaitInterval=o,o>l)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,_e.Z)(function*(){t.stop();try{t.pending=new jt.BH,yield function qR(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new jt.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const ds=new jt.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function YS(n){if(!yi(n).activated)throw ds.create("use-before-activation",{appName:n.name})}function xT(n,e){return RT.apply(this,arguments)}function RT(){return RT=(0,_e.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},o=t.getImmediate({optional:!0});if(o){const N=yield o.getHeartbeatsHeader();N&&(r["X-Firebase-Client"]=N)}const l={method:"POST",body:JSON.stringify(e),headers:r};let d,m;try{d=yield fetch(n,l)}catch(N){throw ds.create("fetch-network-error",{originalErrorMessage:N.message})}if(200!==d.status)throw ds.create("fetch-status-error",{httpStatus:d.status});try{m=yield d.json()}catch(N){throw ds.create("fetch-parse-error",{originalErrorMessage:N.message})}const w=m.ttl.match(/^([\d.]+)(s)$/);if(!w||!w[2]||isNaN(Number(w[1])))throw ds.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${m.ttl}`});const C=1e3*Number(w[1]),x=Date.now();return{token:m.attestationToken,expireTimeMillis:x+C,issuedAtTimeMillis:x}}),RT.apply(this,arguments)}function YR(n,e){const{projectId:t,appId:r,apiKey:o}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1beta/projects/${t}/apps/${r}:exchangeDebugToken?key=${o}`,body:{debug_token:e}}}const Jv="firebase-app-check-store";let jI=null;function JS(){return jI||(jI=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var o;e(ds.create("storage-open",{originalErrorMessage:null===(o=r.target.error)||void 0===o?void 0:o.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(Jv,{keyPath:"compositeKey"})}}catch(t){e(ds.create("storage-open",{originalErrorMessage:t.message}))}}),jI)}function NT(){return NT=(0,_e.Z)(function*(n,e){const r=(yield JS()).transaction(Jv,"readwrite"),l=r.objectStore(Jv).put({compositeKey:n,value:e});return new Promise((d,m)=>{l.onsuccess=w=>{d()},r.onerror=w=>{var C;m(ds.create("storage-set",{originalErrorMessage:null===(C=w.target.error)||void 0===C?void 0:C.message}))}})}),NT.apply(this,arguments)}const Xv=new vu.Yd("@firebase/app-check");function nM(n,e){return(0,jt.hl)()?function eN(n,e){return function XS(n,e){return NT.apply(this,arguments)}(function tM(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Xv.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function rM(){return VI().enabled}function iM(){return FT.apply(this,arguments)}function FT(){return FT=(0,_e.Z)(function*(){const n=VI();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),FT.apply(this,arguments)}const oN={error:"UNKNOWN_ERROR"};function aN(n){return jt.US.encodeString(JSON.stringify(n),!1)}function $I(n){return LT.apply(this,arguments)}function LT(){return LT=(0,_e.Z)(function*(n,e=!1){const t=n.app;YS(t);const r=yi(t);let l,o=r.token;if(!o){const w=yield r.cachedTokenPromise;w&&HI(w)&&(o=w)}if(!e&&o&&HI(o))return{token:o.token};let m,d=!1;if(rM()){r.exchangeTokenPromise||(r.exchangeTokenPromise=xT(YR(t,yield iM()),n.heartbeatServiceProvider).then(C=>(r.exchangeTokenPromise=void 0,C)),d=!0);const w=yield r.exchangeTokenPromise;return yield nM(t,w),Oa(t,Object.assign(Object.assign({},r),{token:w})),{token:w.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(w=>(r.exchangeTokenPromise=void 0,w)),d=!0),o=yield r.exchangeTokenPromise}catch(w){"appCheck/throttled"===w.code?Xv.warn(w.message):Xv.error(w),l=w}return o?(m={token:o.token},Oa(t,Object.assign(Object.assign({},r),{token:o})),yield nM(t,o)):m=lN(l),d&&oM(t,m),m}),LT.apply(this,arguments)}function UT(n,e){const t=yi(n),r=t.tokenObservers.filter(o=>o.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),Oa(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function sM(n){const{app:e}=n,t=yi(e);let r=t.tokenRefresher;r||(r=function uN(n){const{app:e}=n;return new GR((0,_e.Z)(function*(){let r;if(r=yi(e).token?yield $I(n,!0):yield $I(n),r.error)throw r.error}),()=>!0,()=>{const t=yi(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),Oa(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function oM(n,e){const t=yi(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(o){}}function HI(n){return n.expireTimeMillis-Date.now()>0}function lN(n){return{token:aN(oN),error:n}}class cN{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=yi(this.app);for(const t of e)UT(this.app,t.next);return Promise.resolve()}}const pM="app-check-internal";!function bN(){(0,Td._registerComponent)(new bf.wA("app-check",n=>function dN(n,e){return new cN(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(pM).initialize()})),(0,Td._registerComponent)(new bf.wA(pM,n=>function hN(n){return{getToken:e=>$I(n,e),addTokenListener:e=>function VT(n,e,t,r){const{app:o}=n,l=yi(o),d={next:t,error:r,type:e};if(Oa(o,Object.assign(Object.assign({},l),{tokenObservers:[...l.tokenObservers,d]})),l.token&&HI(l.token)){const m=l.token;Promise.resolve().then(()=>{t({token:m.token}),sM(n)}).catch(()=>{})}l.cachedTokenPromise.then(()=>sM(n))}(n,"INTERNAL",e),removeTokenListener:e=>UT(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Td.registerVersion)("@firebase/app-check","0.5.5")}();class HT{constructor(){return(0,Qr.vb)("app-check")}}"undefined"!=typeof window&&window,k(127);const mM=new g.OlP("angularfire2.auth.use-emulator"),yM=new g.OlP("angularfire2.auth.settings"),_M=new g.OlP("angularfire2.auth.tenant-id"),vM=new g.OlP("angularfire2.auth.langugage-code"),EM=new g.OlP("angularfire2.auth.use-device-language"),wM=new g.OlP("angularfire.auth.persistence"),IM=(n,e,t,r,o,l,d,m)=>(0,fo.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const w=e.runOutsideAngular(()=>n.auth());if(t&&w.useEmulator(...t),r&&(w.tenantId=r),w.languageCode=o,l&&w.useDeviceLanguage(),d)for(const[C,x]of Object.entries(d))w.settings[C]=x;return m&&w.setPersistence(m),w},[t,r,o,l,d,m]);let DM=(()=>{class n{constructor(t,r,o,l,d,m,w,C,x,N,H,K){const fe=new gi.x,Fe=Xe(void 0).pipe((0,FI.Q)(d.outsideAngular),Yr(()=>l.runOutsideAngular(()=>Promise.resolve().then(k.bind(k,4087)))),(0,Ct.U)(()=>(0,fo.on)(t,l,r)),(0,Ct.U)(rt=>IM(rt,l,m,C,x,N,w,H)),qS({bufferSize:1,refCount:!1}));if(sr(o))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Xe(null);else{Fe.pipe(v()).subscribe();const zt=Fe.pipe(Yr(Dt=>Dt.getRedirectResult().then(Ht=>Ht,()=>null)),Qr.iC,qS({bufferSize:1,refCount:!1})),ht=Fe.pipe(Yr(Dt=>new gn.y(Ht=>({unsubscribe:l.runOutsideAngular(()=>Dt.onAuthStateChanged(Gt=>Ht.next(Gt),Gt=>Ht.error(Gt),()=>Ht.complete()))})))),wn=Fe.pipe(Yr(Dt=>new gn.y(Ht=>({unsubscribe:l.runOutsideAngular(()=>Dt.onIdTokenChanged(Gt=>Ht.next(Gt),Gt=>Ht.error(Gt),()=>Ht.complete()))}))));this.authState=zt.pipe(zS(ht),(0,TT.R)(d.outsideAngular),(0,FI.Q)(d.insideAngular)),this.user=zt.pipe(zS(wn),(0,TT.R)(d.outsideAngular),(0,FI.Q)(d.insideAngular)),this.idToken=this.user.pipe(Yr(Dt=>Dt?(0,xn.D)(Dt.getIdToken()):Xe(null))),this.idTokenResult=this.user.pipe(Yr(Dt=>Dt?(0,xn.D)(Dt.getIdTokenResult()):Xe(null))),this.credential=(0,xR.T)(zt,fe,this.authState.pipe(uo(Dt=>!Dt))).pipe((0,Ct.U)(Dt=>(null==Dt?void 0:Dt.user)?Dt:null),(0,TT.R)(d.outsideAngular),(0,FI.Q)(d.insideAngular))}return(0,fo.pX)(this,Fe,l,{spy:{apply:(rt,zt,ht)=>{(rt.startsWith("signIn")||rt.startsWith("createUser"))&&ht.then(wn=>fe.next(wn))}}})}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(fo.Dh),g.LFG(fo.xv,8),g.LFG(g.Lbi),g.LFG(g.R0b),g.LFG(Qr.HU),g.LFG(mM,8),g.LFG(yM,8),g.LFG(_M,8),g.LFG(vM,8),g.LFG(EM,8),g.LFG(wM,8),g.LFG(HT,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function bM(n,e){return function xN(n,e=nE.z){return new gn.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function qT(n,e){return bM(n,e).pipe((0,Ct.U)(t=>({payload:t,type:"query"})))}function qI(n,e){return qT(n,e).pipe(Fo(void 0),xg(),(0,Ct.U)(([t,r])=>{const o=r.payload.docChanges(),l=o.map(d=>({type:d.type,payload:d}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((d,m)=>{const w=o.find(x=>x.doc.ref.isEqual(d.ref)),C=null==t?void 0:t.payload.docs.find(x=>x.ref.isEqual(d.ref));w&&JSON.stringify(w.doc.metadata)===JSON.stringify(d.metadata)||!w&&C&&JSON.stringify(C.metadata)===JSON.stringify(d.metadata)||l.push({type:"modified",payload:{oldIndex:m,newIndex:m,type:"modified",doc:d}})}),l}))}function CM(n,e,t){return qI(n,t).pipe(hu((r,o)=>function NN(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function ON(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return zT(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return zT(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return zT(n,e.oldIndex,1)}return n}(n,r))}),n}(r,o.map(l=>l.payload),e),[]),function rE(n,e=Er.y){return n=null!=n?n:kD,(0,ln.e)((t,r)=>{let o,l=!0;t.subscribe((0,mn.x)(r,d=>{const m=e(d);(l||!n(o,m))&&(l=!1,o=m,r.next(d))}))})}(),(0,Ct.U)(r=>r.map(o=>({type:o.type,payload:o}))))}function zT(n,e,t,...r){const o=n.slice();return o.splice(e,t,...r),o}function TM(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class AM{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=qI(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,Ct.U)(r=>r.filter(o=>e.indexOf(o.type)>-1)))),t.pipe(Fo(void 0),xg(),uo(([r,o])=>o.length>0||!r),(0,Ct.U)(([r,o])=>o),Qr.iC)}auditTrail(e){return this.stateChanges(e).pipe(hu((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=TM(e);return CM(this.query,t,this.afs.schedulers.outsideAngular).pipe(Qr.iC)}valueChanges(e={}){return qT(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ct.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),Qr.iC)}get(e){return(0,xn.D)(this.query.get(e)).pipe(Qr.iC)}add(e){return this.ref.add(e)}doc(e){return new SM(this.ref.doc(e),this.afs)}}class SM{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:o,query:l}=MM(r,t);return new AM(o,l,this.afs)}snapshotChanges(){return function RN(n,e){return bM(n,e).pipe(Fo(void 0),xg(),(0,Ct.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Qr.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Ct.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,xn.D)(this.ref.get(e)).pipe(Qr.iC)}}class PN{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?qI(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ct.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),uo(t=>t.length>0),Qr.iC):qI(this.query,this.afs.schedulers.outsideAngular).pipe(Qr.iC)}auditTrail(e){return this.stateChanges(e).pipe(hu((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=TM(e);return CM(this.query,t,this.afs.schedulers.outsideAngular).pipe(Qr.iC)}valueChanges(e={}){return qT(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ct.U)(r=>r.payload.docs.map(o=>e.idField?Object.assign({[e.idField]:o.id},o.data()):o.data())),Qr.iC)}get(e){return(0,xn.D)(this.query.get(e)).pipe(Qr.iC)}}const kN=new g.OlP("angularfire2.enableFirestorePersistence"),FN=new g.OlP("angularfire2.firestore.persistenceSettings"),LN=new g.OlP("angularfire2.firestore.settings"),VN=new g.OlP("angularfire2.firestore.use-emulator");function MM(n,e=(t=>t)){return{query:e(n),ref:n}}let UN=(()=>{class n{constructor(t,r,o,l,d,m,w,C,x,N,H,K,fe,Fe,rt,zt,ht){this.schedulers=w;const wn=(0,fo.on)(t,m,r),Dt=x;N&&IM(wn,m,H,fe,Fe,rt,K,zt),[this.firestore,this.persistenceEnabled$]=(0,fo.cc)(`${wn.name}.firestore`,"AngularFirestore",wn.name,()=>{const Ht=m.runOutsideAngular(()=>wn.firestore());if(l&&Ht.settings(l),Dt&&Ht.useEmulator(...Dt),o&&!sr(d)){const Gt=()=>{try{return(0,xn.D)(Ht.enablePersistence(C||void 0).then(()=>!0,()=>!1))}catch(Ku){return"undefined"!=typeof console&&console.warn(Ku),Xe(!1)}};return[Ht,m.runOutsideAngular(Gt)]}return[Ht,Xe(!1)]},[l,Dt,o])}collection(t,r){let o;o="string"==typeof t?this.firestore.collection(t):t;const{ref:l,query:d}=MM(o,r),m=this.schedulers.ngZone.run(()=>l);return new AM(m,d,this)}collectionGroup(t,r){const o=r||(d=>d),l=this.firestore.collectionGroup(t);return new PN(o(l),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const o=this.schedulers.ngZone.run(()=>r);return new SM(o,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(fo.Dh),g.LFG(fo.xv,8),g.LFG(kN,8),g.LFG(LN,8),g.LFG(g.Lbi),g.LFG(g.R0b),g.LFG(Qr.HU),g.LFG(FN,8),g.LFG(VN,8),g.LFG(DM,8),g.LFG(mM,8),g.LFG(yM,8),g.LFG(_M,8),g.LFG(vM,8),g.LFG(EM,8),g.LFG(wM,8),g.LFG(HT,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),zI=(()=>{class n{constructor(t){this.afs=t}addTree(t,r,o){switch(t.id=this.afs.createId(),t.elementsCount=o,console.log(t.id),r){case"small":return this.afs.collection("/small").add(t);case"medium":return this.afs.collection("/medium").add(t);case"big":return this.afs.collection("/big").add(t);default:return this.afs.collection("/errors").add(t)}}getSmallTrees(){return this.afs.collection("/small").snapshotChanges()}getMediumTrees(){return this.afs.collection("/medium").snapshotChanges()}getBigTrees(){return this.afs.collection("/big").snapshotChanges()}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(UN))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const BN=["mainDiv"];let WT=(()=>{class n{constructor(t,r){this.renderer=t,this.el=r,this.countId=0}ngOnChanges(t){t.generatedTree.firstChange||(this.dom=JSON.parse(t.generatedTree.currentValue.treeTable))}ngOnInit(){}createLeaf(){this.renderer.setStyle(this.mainDiv.nativeElement,"background-color","pink"),console.time("doSomething"),this.createLeafs(this.dom),console.timeEnd("doSomething")}createLeafs(t){this.generate(t,this.mainDiv.nativeElement,0)}generate(t,r,o){if(!Array.isArray(t))return this.createElement(t,r,o);t.forEach(l=>{this.createElement(l,r,o+1)})}createElement(t,r,o){let l=["green","pink","yellow","blue","red","magenta","grey","gold","brown","white"];if(!Array.isArray(t)){let d;switch(t){case 0:d="h1";break;case 1:d="p";break;case 2:d="h3";break;default:d="span"}const m=this.renderer.createElement(d);return this.renderer.appendChild(m,this.renderer.createText(this.makeid(20))),this.renderer.setAttribute(m,"id",this.countId.toString()),this.renderer.setStyle(m,"background-color",l[o]),this.renderer.appendChild(r,m)}{const d=this.renderer.createElement("div");this.renderer.setStyle(d,"background-color",l[o]),this.renderer.setStyle(d,"margin","20px"),this.renderer.appendChild(r,d),this.generate(t,d,o)}}makeid(t){for(var r="",o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",l=o.length,d=0;d<t;d++)r+=o.charAt(Math.floor(Math.random()*l));return r}addLeaf(){console.time("addChild"),Array.from(this.mainDiv.nativeElement.querySelectorAll("div")).forEach(r=>{let o=this.renderer.createElement("h1");this.renderer.appendChild(o,this.renderer.createText(this.makeid(20))),this.renderer.setAttribute(o,"id",this.countId.toString()),this.renderer.setStyle(o,"background-color","black"),this.renderer.appendChild(r,o)}),console.timeEnd("addChild")}removeTree(){console.time("deleteTree"),this.renderer.removeChild(this.el.nativeElement,this.mainDiv.nativeElement),console.timeEnd("deleteTree")}changeLeafColor(){console.time("changeLeaf");let t=Array.from(this.mainDiv.nativeElement.querySelectorAll("*"));console.log(t),t.forEach((r,o)=>{this.renderer.setStyle(r,"color","green")}),console.timeEnd("changeLeaf")}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.Qsj),g.Y36(g.SBq))},n.\u0275cmp=g.Xpm({type:n,selectors:[["app-generated-tree"]],viewQuery:function(t,r){if(1&t&&g.Gf(BN,5),2&t){let o;g.iGM(o=g.CRH())&&(r.mainDiv=o.first)}},inputs:{generatedTree:"generatedTree"},features:[g.TTD],decls:10,vars:0,consts:[[3,"click"],["mainDiv",""]],template:function(t,r){1&t&&(g.TgZ(0,"button",0),g.NdJ("click",function(){return r.createLeaf()}),g._uU(1,"Generuj"),g.qZA(),g.TgZ(2,"button",0),g.NdJ("click",function(){return r.addLeaf()}),g._uU(3,"Dodaj li\u015bcie"),g.qZA(),g.TgZ(4,"button",0),g.NdJ("click",function(){return r.changeLeafColor()}),g._uU(5,"Zmie\u0144 teksty"),g.qZA(),g.TgZ(6,"button",0),g.NdJ("click",function(){return r.removeTree()}),g._uU(7,"Usu\u0144 drzewo"),g.qZA(),g._UZ(8,"div",null,1))},styles:["div[_ngcontent-%COMP%]{margin:40px}"]}),n})();const jN=[{path:"",pathMatch:"full",redirectTo:"main"},{path:"main",component:(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=g.Xpm({type:n,selectors:[["app-main"]],decls:6,vars:3,consts:[[3,"routerLink"]],template:function(t,r){1&t&&(g.TgZ(0,"button",0),g._uU(1," Small trees"),g.qZA(),g.TgZ(2,"button",0),g._uU(3," Medium trees"),g.qZA(),g.TgZ(4,"button",0),g._uU(5," Big trees"),g.qZA()),2&t&&(g.Q6J("routerLink","/small-trees"),g.xp6(2),g.Q6J("routerLink","/medium-trees"),g.xp6(2),g.Q6J("routerLink","/big-trees"))},directives:[ql],styles:[""]}),n})()},{path:"generate-tree",component:(()=>{class n{constructor(t){this.data=t,this.treeList=[],this.id="",this.treeTable="",this.TreeObj={id:"",elementsCount:0,treeTable:""},this.elementsCount=0}ngOnInit(){}addTree(t,r,o){switch(this.TreeObj.id="",this.TreeObj.treeTable=t,r){case"small":this.data.addTree(this.TreeObj,"small",o);break;case"medium":this.data.addTree(this.TreeObj,"medium",o);break;case"big":this.data.addTree(this.TreeObj,"big",o)}}generateSmallTree(){this.elementsCount=0,this.generatedTree=this.generateTree(5,4,6),console.log(this.generatedTree),console.log(this.elementsCount),this.addTree(JSON.stringify(this.generatedTree),"small",this.elementsCount)}generateMediumTree(){this.elementsCount=0,this.generatedTree=this.generateTree(4,5,9),console.log(this.generatedTree),console.log(this.elementsCount),this.addTree(JSON.stringify(this.generatedTree),"medium",this.elementsCount)}generateBigTree(){this.elementsCount=0,this.generatedTree=this.generateTree(0,3,7),console.log(this.generatedTree),console.log(this.elementsCount),this.addTree(JSON.stringify(this.generatedTree),"big",this.elementsCount)}generateTree(t,r,o){for(var l=Math.floor(Math.random()*(o-r+1)+r),m=[],w=0;w<l;w++)if(this.elementsCount++,t<=10&&0==Math.floor(2*Math.random()))m.push(this.generateTree(t+1,r,o));else switch(Math.floor(4*Math.random())){case 0:m.push(1);break;case 1:m.push(2);break;case 2:m.push(3);break;default:m.push(0)}return m}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(zI))},n.\u0275cmp=g.Xpm({type:n,selectors:[["app-generate-tree"]],decls:6,vars:0,consts:[[3,"click"]],template:function(t,r){1&t&&(g.TgZ(0,"button",0),g.NdJ("click",function(){return r.generateSmallTree()}),g._uU(1,"Dodaj ma\u0142e drzewo"),g.qZA(),g.TgZ(2,"button",0),g.NdJ("click",function(){return r.generateMediumTree()}),g._uU(3,"Dodaj \u015brednie drzewo"),g.qZA(),g.TgZ(4,"button",0),g.NdJ("click",function(){return r.generateBigTree()}),g._uU(5,"Dodaj du\u017ce drzewo"),g.qZA())},styles:[""]}),n})()},{path:"small-trees",component:(()=>{class n{constructor(t){this.data=t,this.treeList=[]}ngOnInit(){this.getSmallTrees(),console.log(this.treeList)}getSmallTrees(){this.data.getSmallTrees().subscribe(t=>{this.treeList=t.map(r=>{const o=r.payload.doc.data();return o.id=r.payload.doc.id,o})},t=>{alert("Error while fetching Tree data")})}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(zI))},n.\u0275cmp=g.Xpm({type:n,selectors:[["app-display-small-tree"]],decls:1,vars:1,consts:[[3,"generatedTree"]],template:function(t,r){1&t&&g._UZ(0,"app-generated-tree",0),2&t&&g.Q6J("generatedTree",r.treeList[1])},directives:[WT],styles:[""]}),n})()},{path:"medium-trees",component:(()=>{class n{constructor(t){this.data=t,this.treeList=[]}ngOnInit(){this.getSmallTrees(),console.log(this.treeList)}getSmallTrees(){this.data.getMediumTrees().subscribe(t=>{this.treeList=t.map(r=>{const o=r.payload.doc.data();return o.id=r.payload.doc.id,o})},t=>{alert("Error while fetching Tree data")})}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(zI))},n.\u0275cmp=g.Xpm({type:n,selectors:[["app-display-medium-tree"]],decls:1,vars:1,consts:[[3,"generatedTree"]],template:function(t,r){1&t&&g._UZ(0,"app-generated-tree",0),2&t&&g.Q6J("generatedTree",r.treeList[0])},directives:[WT],styles:[""]}),n})()},{path:"big-trees",component:(()=>{class n{constructor(t){this.data=t,this.treeList=[]}ngOnInit(){this.getSmallTrees()}getSmallTrees(){this.data.getBigTrees().subscribe(t=>{this.treeList=t.map(r=>{const o=r.payload.doc.data();return o.id=r.payload.doc.id,o})},t=>{alert("Error while fetching Tree data")})}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(zI))},n.\u0275cmp=g.Xpm({type:n,selectors:[["app-display-big-tree"]],decls:1,vars:1,consts:[[3,"generatedTree"]],template:function(t,r){1&t&&g._UZ(0,"app-generated-tree",0),2&t&&g.Q6J("generatedTree",r.treeList[0])},directives:[WT],styles:[""]}),n})()}];let $N=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({imports:[[J0.forRoot(jN)],J0]}),n})(),HN=(()=>{class n{constructor(){this.title="treeApp"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=g.Xpm({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,r){1&t&&g._UZ(0,"router-outlet")},directives:[_g],styles:[""]}),n})();const xM_firebase={projectId:"mgr-tree-app",appId:"1:733147577498:web:53c2f6365e6294358a3323",storageBucket:"mgr-tree-app.appspot.com",apiKey:"AIzaSyBSUl3zd6N-4EHPe6B34yRB1teZWtS_Nk0",authDomain:"mgr-tree-app.firebaseapp.com",messagingSenderId:"733147577498",measurementId:"G-XCWFY4BGDY"};let GN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n,bootstrap:[HN]}),n.\u0275inj=g.cJS({providers:[],imports:[[na,$N,xl,fo.hO.initializeApp(xM_firebase)]]}),n})();(0,g.G48)(),il().bootstrapModule(GN).catch(n=>console.error(n))},5867:(it,Ce,k)=>{k.d(Ce,{Mq:()=>g.getApp,C6:()=>g.getApps});var g=k(9681);(0,g.registerVersion)("firebase","9.6.10","app")},127:(it,Ce,k)=>{k.d(Ce,{Z:()=>g.Z});var g=k(3942);g.Z.registerVersion("firebase","9.6.10","app-compat")},4087:(it,Ce,k)=>{k.r(Ce);var g=k(5861),Z=k(3942),O=k(2090),oe=k(9681),J=k(655),pe=k(1877),ie=k(4859);const xe=function He(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Pe=function Te(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},he=new O.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Ye=new pe.Yd("@firebase/auth");function Ge(y,...h){Ye.logLevel<=pe.in.ERROR&&Ye.error(`Auth (${oe.SDK_VERSION}): ${y}`,...h)}function De(y,...h){throw Ue(y,...h)}function ye(y,...h){return Ue(y,...h)}function ve(y,h,p){const v=Object.assign(Object.assign({},Pe()),{[h]:p});return new O.LL("auth","Firebase",v).create(h,{appName:y.name})}function je(y,h,p){if(!(h instanceof p))throw p.name!==h.constructor.name&&De(y,"argument-error"),ve(y,"argument-error",`Type of ${h.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ue(y,...h){if("string"!=typeof y){const p=h[0],v=[...h.slice(1)];return v[0]&&(v[0].appName=y.name),y._errorFactory.create(p,...v)}return he.create(y,...h)}function ee(y,h,...p){if(!y)throw Ue(h,...p)}function q(y){const h="INTERNAL ASSERTION FAILED: "+y;throw Ge(h),new Error(h)}function te(y,h){y||q(h)}const ge=new Map;function re(y){te(y instanceof Function,"Expected a class definition");let h=ge.get(y);return h?(te(h instanceof y,"Instance stored in cache mismatched with class"),h):(h=new y,ge.set(y,h),h)}function Et(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function Wt(){return"http:"===An()||"https:"===An()}function An(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class an{constructor(h,p){this.shortDelay=h,this.longDelay=p,te(p>h,"Short delay should be less than long delay!"),this.isMobile=(0,O.uI)()||(0,O.b$)()}get(){return function st(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Wt()||(0,O.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function un(y,h){te(y.emulator,"Emulator should always be set here");const{url:p}=y.emulator;return h?`${p}${h.startsWith("/")?h.slice(1):h}`:p}class _i{static initialize(h,p,v){this.fetchImpl=h,p&&(this.headersImpl=p),v&&(this.responseImpl=v)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void q("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void q("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void q("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Xt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},$i=new an(3e4,6e4);function Kt(y,h){return y.tenantId&&!h.tenantId?Object.assign(Object.assign({},h),{tenantId:y.tenantId}):h}function Lt(y,h,p,v){return tr.apply(this,arguments)}function tr(){return(tr=(0,g.Z)(function*(y,h,p,v,T={}){return si(y,T,(0,g.Z)(function*(){let R={},G={};v&&("GET"===h?G=v:R={body:JSON.stringify(v)});const ne=(0,O.xO)(Object.assign({key:y.config.apiKey},G)).slice(1),ke=yield y._getAdditionalHeaders();return ke["Content-Type"]="application/json",y.languageCode&&(ke["X-Firebase-Locale"]=y.languageCode),_i.fetch()(br(y,y.config.apiHost,p,ne),Object.assign({method:h,headers:ke,referrerPolicy:"no-referrer"},R))}))})).apply(this,arguments)}function si(y,h,p){return hs.apply(this,arguments)}function hs(){return(hs=(0,g.Z)(function*(y,h,p){y._canInitEmulator=!1;const v=Object.assign(Object.assign({},Xt),h);try{const T=new Hi(y),R=yield Promise.race([p(),T.promise]);T.clearNetworkTimeout();const G=yield R.json();if("needConfirmation"in G)throw Gi(y,"account-exists-with-different-credential",G);if(R.ok&&!("errorMessage"in G))return G;{const ne=R.ok?G.errorMessage:G.error.message,[ke,Ke]=ne.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===ke)throw Gi(y,"credential-already-in-use",G);if("EMAIL_EXISTS"===ke)throw Gi(y,"email-already-in-use",G);const gt=v[ke]||ke.toLowerCase().replace(/[_\s]+/g,"-");if(Ke)throw ve(y,gt,Ke);De(y,gt)}}catch(T){if(T instanceof O.ZR)throw T;De(y,"network-request-failed")}})).apply(this,arguments)}function Dr(y,h,p,v){return Ri.apply(this,arguments)}function Ri(){return(Ri=(0,g.Z)(function*(y,h,p,v,T={}){const R=yield Lt(y,h,p,v,T);return"mfaPendingCredential"in R&&De(y,"multi-factor-auth-required",{_serverResponse:R}),R})).apply(this,arguments)}function br(y,h,p,v){const T=`${h}${p}?${v}`;return y.config.emulator?un(y.config,T):`${y.config.apiScheme}://${T}`}class Hi{constructor(h){this.auth=h,this.timer=null,this.promise=new Promise((p,v)=>{this.timer=setTimeout(()=>v(ye(this.auth,"network-request-failed")),$i.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Gi(y,h,p){const v={appName:y.name};p.email&&(v.email=p.email),p.phoneNumber&&(v.phoneNumber=p.phoneNumber);const T=ye(y,h,v);return T.customData._tokenResponse=p,T}function Vr(){return(Vr=(0,g.Z)(function*(y,h){return Lt(y,"POST","/v1/accounts:delete",h)})).apply(this,arguments)}function Zn(y,h){return Bn.apply(this,arguments)}function Bn(){return(Bn=(0,g.Z)(function*(y,h){return Lt(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function oi(y,h){return $s.apply(this,arguments)}function $s(){return($s=(0,g.Z)(function*(y,h){return Lt(y,"POST","/v1/accounts:lookup",h)})).apply(this,arguments)}function fn(y){if(y)try{const h=new Date(Number(y));if(!isNaN(h.getTime()))return h.toUTCString()}catch(h){}}function Wo(){return(Wo=(0,g.Z)(function*(y,h=!1){const p=(0,O.m9)(y),v=yield p.getIdToken(h),T=nt(v);ee(T&&T.exp&&T.auth_time&&T.iat,p.auth,"internal-error");const R="object"==typeof T.firebase?T.firebase:void 0,G=null==R?void 0:R.sign_in_provider;return{claims:T,token:v,authTime:fn(Vt(T.auth_time)),issuedAtTime:fn(Vt(T.iat)),expirationTime:fn(Vt(T.exp)),signInProvider:G||null,signInSecondFactor:(null==R?void 0:R.sign_in_second_factor)||null}})).apply(this,arguments)}function Vt(y){return 1e3*Number(y)}function nt(y){const[h,p,v]=y.split(".");if(void 0===h||void 0===p||void 0===v)return Ge("JWT malformed, contained fewer than 3 sections"),null;try{const T=(0,O.tV)(p);return T?JSON.parse(T):(Ge("Failed to decode base64 JWT payload"),null)}catch(T){return Ge("Caught error parsing JWT payload as JSON",T),null}}function nr(y,h){return Ni.apply(this,arguments)}function Ni(){return(Ni=(0,g.Z)(function*(y,h,p=!1){if(p)return h;try{return yield h}catch(v){throw v instanceof O.ZR&&kt(v)&&y.auth.currentUser===y&&(yield y.auth.signOut()),v}})).apply(this,arguments)}function kt({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}class Hs{constructor(h){this.user=h,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(h){var p;if(h){const v=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),v}{this.errorBackoff=3e4;const T=(null!==(p=this.user.stsTokenManager.expirationTime)&&void 0!==p?p:0)-Date.now()-3e5;return Math.max(0,T)}}schedule(h=!1){var p=this;if(!this.isRunning)return;const v=this.getInterval(h);this.timerId=setTimeout((0,g.Z)(function*(){yield p.iteration()}),v)}iteration(){var h=this;return(0,g.Z)(function*(){try{yield h.user.getIdToken(!0)}catch(p){return void("auth/network-request-failed"===p.code&&h.schedule(!0))}h.schedule()})()}}class hr{constructor(h,p){this.createdAt=h,this.lastLoginAt=p,this._initializeTime()}_initializeTime(){this.lastSignInTime=fn(this.lastLoginAt),this.creationTime=fn(this.createdAt)}_copy(h){this.createdAt=h.createdAt,this.lastLoginAt=h.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function rr(y){return lt.apply(this,arguments)}function lt(){return(lt=(0,g.Z)(function*(y){var h;const p=y.auth,v=yield y.getIdToken(),T=yield nr(y,oi(p,{idToken:v}));ee(null==T?void 0:T.users.length,p,"internal-error");const R=T.users[0];y._notifyReloadListener(R);const G=(null===(h=R.providerUserInfo)||void 0===h?void 0:h.length)?be(R.providerUserInfo):[],ne=qe(y.providerData,G),gt=!!y.isAnonymous&&!(y.email&&R.passwordHash||(null==ne?void 0:ne.length)),ot={uid:R.localId,displayName:R.displayName||null,photoURL:R.photoUrl||null,email:R.email||null,emailVerified:R.emailVerified||!1,phoneNumber:R.phoneNumber||null,tenantId:R.tenantId||null,providerData:ne,metadata:new hr(R.createdAt,R.lastLoginAt),isAnonymous:gt};Object.assign(y,ot)})).apply(this,arguments)}function Nt(){return(Nt=(0,g.Z)(function*(y){const h=(0,O.m9)(y);yield rr(h),yield h.auth._persistUserIfCurrent(h),h.auth._notifyListenersIfCurrent(h)})).apply(this,arguments)}function qe(y,h){return[...y.filter(v=>!h.some(T=>T.providerId===v.providerId)),...h]}function be(y){return y.map(h=>{var{providerId:p}=h,v=(0,J._T)(h,["providerId"]);return{providerId:p,uid:v.rawId||"",displayName:v.displayName||null,email:v.email||null,phoneNumber:v.phoneNumber||null,photoURL:v.photoUrl||null}})}function ct(){return(ct=(0,g.Z)(function*(y,h){const p=yield si(y,{},(0,g.Z)(function*(){const v=(0,O.xO)({grant_type:"refresh_token",refresh_token:h}).slice(1),{tokenApiHost:T,apiKey:R}=y.config,G=br(y,T,"/v1/token",`key=${R}`),ne=yield y._getAdditionalHeaders();return ne["Content-Type"]="application/x-www-form-urlencoded",_i.fetch()(G,{method:"POST",headers:ne,body:v})}));return{accessToken:p.access_token,expiresIn:p.expires_in,refreshToken:p.refresh_token}})).apply(this,arguments)}class Pt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(h){ee(h.idToken,"internal-error"),ee(void 0!==h.idToken,"internal-error"),ee(void 0!==h.refreshToken,"internal-error");const p="expiresIn"in h&&void 0!==h.expiresIn?Number(h.expiresIn):function _t(y){const h=nt(y);return ee(h,"internal-error"),ee(void 0!==h.exp,"internal-error"),ee(void 0!==h.iat,"internal-error"),Number(h.exp)-Number(h.iat)}(h.idToken);this.updateTokensAndExpiration(h.idToken,h.refreshToken,p)}getToken(h,p=!1){var v=this;return(0,g.Z)(function*(){return ee(!v.accessToken||v.refreshToken,h,"user-token-expired"),p||!v.accessToken||v.isExpired?v.refreshToken?(yield v.refresh(h,v.refreshToken),v.accessToken):null:v.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(h,p){var v=this;return(0,g.Z)(function*(){const{accessToken:T,refreshToken:R,expiresIn:G}=yield function We(y,h){return ct.apply(this,arguments)}(h,p);v.updateTokensAndExpiration(T,R,Number(G))})()}updateTokensAndExpiration(h,p,v){this.refreshToken=p||null,this.accessToken=h||null,this.expirationTime=Date.now()+1e3*v}static fromJSON(h,p){const{refreshToken:v,accessToken:T,expirationTime:R}=p,G=new Pt;return v&&(ee("string"==typeof v,"internal-error",{appName:h}),G.refreshToken=v),T&&(ee("string"==typeof T,"internal-error",{appName:h}),G.accessToken=T),R&&(ee("number"==typeof R,"internal-error",{appName:h}),G.expirationTime=R),G}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(h){this.accessToken=h.accessToken,this.refreshToken=h.refreshToken,this.expirationTime=h.expirationTime}_clone(){return Object.assign(new Pt,this.toJSON())}_performRefresh(){return q("not implemented")}}function xt(y,h){ee("string"==typeof y||void 0===y,"internal-error",{appName:h})}class U{constructor(h){var{uid:p,auth:v,stsTokenManager:T}=h,R=(0,J._T)(h,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Hs(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=p,this.auth=v,this.stsTokenManager=T,this.accessToken=T.accessToken,this.displayName=R.displayName||null,this.email=R.email||null,this.emailVerified=R.emailVerified||!1,this.phoneNumber=R.phoneNumber||null,this.photoURL=R.photoURL||null,this.isAnonymous=R.isAnonymous||!1,this.tenantId=R.tenantId||null,this.providerData=R.providerData?[...R.providerData]:[],this.metadata=new hr(R.createdAt||void 0,R.lastLoginAt||void 0)}getIdToken(h){var p=this;return(0,g.Z)(function*(){const v=yield nr(p,p.stsTokenManager.getToken(p.auth,h));return ee(v,p.auth,"internal-error"),p.accessToken!==v&&(p.accessToken=v,yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)),v})()}getIdTokenResult(h){return function fs(y){return Wo.apply(this,arguments)}(this,h)}reload(){return function fr(y){return Nt.apply(this,arguments)}(this)}_assign(h){this!==h&&(ee(this.uid===h.uid,this.auth,"internal-error"),this.displayName=h.displayName,this.photoURL=h.photoURL,this.email=h.email,this.emailVerified=h.emailVerified,this.phoneNumber=h.phoneNumber,this.isAnonymous=h.isAnonymous,this.tenantId=h.tenantId,this.providerData=h.providerData.map(p=>Object.assign({},p)),this.metadata._copy(h.metadata),this.stsTokenManager._assign(h.stsTokenManager))}_clone(h){return new U(Object.assign(Object.assign({},this),{auth:h,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(h){ee(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=h,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(h){this.reloadListener?this.reloadListener(h):this.reloadUserInfo=h}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(h,p=!1){var v=this;return(0,g.Z)(function*(){let T=!1;h.idToken&&h.idToken!==v.stsTokenManager.accessToken&&(v.stsTokenManager.updateFromServerResponse(h),T=!0),p&&(yield rr(v)),yield v.auth._persistUserIfCurrent(v),T&&v.auth._notifyListenersIfCurrent(v)})()}delete(){var h=this;return(0,g.Z)(function*(){const p=yield h.getIdToken();return yield nr(h,function ut(y,h){return Vr.apply(this,arguments)}(h.auth,{idToken:p})),h.stsTokenManager.clearRefreshToken(),h.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(h=>Object.assign({},h)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(h,p){var v,T,R,G,ne,ke,Ke,gt;const ot=null!==(v=p.displayName)&&void 0!==v?v:void 0,Cn=null!==(T=p.email)&&void 0!==T?T:void 0,Fi=null!==(R=p.phoneNumber)&&void 0!==R?R:void 0,Fl=null!==(G=p.photoURL)&&void 0!==G?G:void 0,hd=null!==(ne=p.tenantId)&&void 0!==ne?ne:void 0,fu=null!==(ke=p._redirectEventId)&&void 0!==ke?ke:void 0,fd=null!==(Ke=p.createdAt)&&void 0!==Ke?Ke:void 0,py=null!==(gt=p.lastLoginAt)&&void 0!==gt?gt:void 0,{uid:Lo,emailVerified:pd,isAnonymous:lf,providerData:gd,stsTokenManager:Mt}=p;ee(Lo&&Mt,h,"internal-error");const gy=Pt.fromJSON(this.name,Mt);ee("string"==typeof Lo,h,"internal-error"),xt(ot,h.name),xt(Cn,h.name),ee("boolean"==typeof pd,h,"internal-error"),ee("boolean"==typeof lf,h,"internal-error"),xt(Fi,h.name),xt(Fl,h.name),xt(hd,h.name),xt(fu,h.name),xt(fd,h.name),xt(py,h.name);const Vo=new U({uid:Lo,auth:h,email:Cn,emailVerified:pd,displayName:ot,isAnonymous:lf,photoURL:Fl,phoneNumber:Fi,tenantId:hd,stsTokenManager:gy,createdAt:fd,lastLoginAt:py});return gd&&Array.isArray(gd)&&(Vo.providerData=gd.map(sg=>Object.assign({},sg))),fu&&(Vo._redirectEventId=fu),Vo}static _fromIdTokenResponse(h,p,v=!1){return(0,g.Z)(function*(){const T=new Pt;T.updateFromServerResponse(p);const R=new U({uid:p.localId,auth:h,stsTokenManager:T,isAnonymous:v});return yield rr(R),R})()}}const $=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,g.Z)(function*(){return!0})()}_set(p,v){var T=this;return(0,g.Z)(function*(){T.storage[p]=v})()}_get(p){var v=this;return(0,g.Z)(function*(){const T=v.storage[p];return void 0===T?null:T})()}_remove(p){var v=this;return(0,g.Z)(function*(){delete v.storage[p]})()}_addListener(p,v){}_removeListener(p,v){}}return y.type="NONE",y})();function le(y,h,p){return`firebase:${y}:${h}:${p}`}class Y{constructor(h,p,v){this.persistence=h,this.auth=p,this.userKey=v;const{config:T,name:R}=this.auth;this.fullUserKey=le(this.userKey,T.apiKey,R),this.fullPersistenceKey=le("persistence",T.apiKey,R),this.boundEventHandler=p._onStorageEvent.bind(p),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(h){return this.persistence._set(this.fullUserKey,h.toJSON())}getCurrentUser(){var h=this;return(0,g.Z)(function*(){const p=yield h.persistence._get(h.fullUserKey);return p?U._fromJSON(h.auth,p):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(h){var p=this;return(0,g.Z)(function*(){if(p.persistence===h)return;const v=yield p.getCurrentUser();return yield p.removeCurrentUser(),p.persistence=h,v?p.setCurrentUser(v):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(h,p,v="authUser"){return(0,g.Z)(function*(){if(!p.length)return new Y(re($),h,v);const T=(yield Promise.all(p.map(function(){var Ke=(0,g.Z)(function*(gt){if(yield gt._isAvailable())return gt});return function(gt){return Ke.apply(this,arguments)}}()))).filter(Ke=>Ke);let R=T[0]||re($);const G=le(v,h.config.apiKey,h.name);let ne=null;for(const Ke of p)try{const gt=yield Ke._get(G);if(gt){const ot=U._fromJSON(h,gt);Ke!==R&&(ne=ot),R=Ke;break}}catch(gt){}const ke=T.filter(Ke=>Ke._shouldAllowMigration);return R._shouldAllowMigration&&ke.length?(R=ke[0],ne&&(yield R._set(G,ne.toJSON())),yield Promise.all(p.map(function(){var Ke=(0,g.Z)(function*(gt){if(gt!==R)try{yield gt._remove(G)}catch(ot){}});return function(gt){return Ke.apply(this,arguments)}}())),new Y(R,h,v)):new Y(R,h,v)})()}}function Le(y){const h=y.toLowerCase();if(h.includes("opera/")||h.includes("opr/")||h.includes("opios/"))return"Opera";if(Ut(h))return"IEMobile";if(h.includes("msie")||h.includes("trident/"))return"IE";if(h.includes("edge/"))return"Edge";if(pt(h))return"Firefox";if(h.includes("silk/"))return"Silk";if(At(h))return"Blackberry";if(cn(h))return"Webos";if(qt(h))return"Safari";if((h.includes("chrome/")||pr(h))&&!h.includes("edge/"))return"Chrome";if(In(h))return"Android";{const v=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==v?void 0:v.length))return v[1]}return"Other"}function pt(y=(0,O.z$)()){return/firefox\//i.test(y)}function qt(y=(0,O.z$)()){const h=y.toLowerCase();return h.includes("safari/")&&!h.includes("chrome/")&&!h.includes("crios/")&&!h.includes("android")}function pr(y=(0,O.z$)()){return/crios\//i.test(y)}function Ut(y=(0,O.z$)()){return/iemobile/i.test(y)}function In(y=(0,O.z$)()){return/android/i.test(y)}function At(y=(0,O.z$)()){return/blackberry/i.test(y)}function cn(y=(0,O.z$)()){return/webos/i.test(y)}function Qn(y=(0,O.z$)()){return/iphone|ipad|ipod/i.test(y)}function qi(y=(0,O.z$)()){return Qn(y)||In(y)||cn(y)||At(y)||/windows phone/i.test(y)||Ut(y)}function Zo(y,h=[]){let p;switch(y){case"Browser":p=Le((0,O.z$)());break;case"Worker":p=`${Le((0,O.z$)())}-${y}`;break;default:p=y}const v=h.length?h.join(","):"FirebaseCore-web";return`${p}/JsCore/${oe.SDK_VERSION}/${v}`}class ai{constructor(h,p,v){this.app=h,this.heartbeatServiceProvider=p,this.config=v,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new St(this),this.idTokenSubscription=new St(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=he,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=h.name,this.clientVersion=v.sdkClientVersion}_initializeWithPersistence(h,p){var v=this;return p&&(this._popupRedirectResolver=re(p)),this._initializationPromise=this.queue((0,g.Z)(function*(){var T,R;if(!v._deleted&&(v.persistenceManager=yield Y.create(v,h),!v._deleted)){if(null===(T=v._popupRedirectResolver)||void 0===T?void 0:T._shouldInitProactively)try{yield v._popupRedirectResolver._initialize(v)}catch(G){}yield v.initializeCurrentUser(p),v.lastNotifiedUid=(null===(R=v.currentUser)||void 0===R?void 0:R.uid)||null,!v._deleted&&(v._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var h=this;return(0,g.Z)(function*(){if(h._deleted)return;const p=yield h.assertedPersistence.getCurrentUser();if(h.currentUser||p){if(h.currentUser&&p&&h.currentUser.uid===p.uid)return h._currentUser._assign(p),void(yield h.currentUser.getIdToken());yield h._updateCurrentUser(p)}})()}initializeCurrentUser(h){var p=this;return(0,g.Z)(function*(){var v;let T=yield p.assertedPersistence.getCurrentUser();if(h&&p.config.authDomain){yield p.getOrInitRedirectPersistenceManager();const R=null===(v=p.redirectUser)||void 0===v?void 0:v._redirectEventId,G=null==T?void 0:T._redirectEventId,ne=yield p.tryRedirectSignIn(h);(!R||R===G)&&(null==ne?void 0:ne.user)&&(T=ne.user)}return T?T._redirectEventId?(ee(p._popupRedirectResolver,p,"argument-error"),yield p.getOrInitRedirectPersistenceManager(),p.redirectUser&&p.redirectUser._redirectEventId===T._redirectEventId?p.directlySetCurrentUser(T):p.reloadAndSetCurrentUserOrClear(T)):p.reloadAndSetCurrentUserOrClear(T):p.directlySetCurrentUser(null)})()}tryRedirectSignIn(h){var p=this;return(0,g.Z)(function*(){let v=null;try{v=yield p._popupRedirectResolver._completeRedirectFn(p,h,!0)}catch(T){yield p._setRedirectUser(null)}return v})()}reloadAndSetCurrentUserOrClear(h){var p=this;return(0,g.Z)(function*(){try{yield rr(h)}catch(v){if("auth/network-request-failed"!==v.code)return p.directlySetCurrentUser(null)}return p.directlySetCurrentUser(h)})()}useDeviceLanguage(){this.languageCode=function ft(){if("undefined"==typeof navigator)return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var h=this;return(0,g.Z)(function*(){h._deleted=!0})()}updateCurrentUser(h){var p=this;return(0,g.Z)(function*(){const v=h?(0,O.m9)(h):null;return v&&ee(v.auth.config.apiKey===p.config.apiKey,p,"invalid-user-token"),p._updateCurrentUser(v&&v._clone(p))})()}_updateCurrentUser(h){var p=this;return(0,g.Z)(function*(){if(!p._deleted)return h&&ee(p.tenantId===h.tenantId,p,"tenant-id-mismatch"),p.queue((0,g.Z)(function*(){yield p.directlySetCurrentUser(h),p.notifyAuthListeners()}))})()}signOut(){var h=this;return(0,g.Z)(function*(){return(h.redirectPersistenceManager||h._popupRedirectResolver)&&(yield h._setRedirectUser(null)),h._updateCurrentUser(null)})()}setPersistence(h){var p=this;return this.queue((0,g.Z)(function*(){yield p.assertedPersistence.setPersistence(re(h))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(h){this._errorFactory=new O.LL("auth","Firebase",h())}onAuthStateChanged(h,p,v){return this.registerStateListener(this.authStateSubscription,h,p,v)}onIdTokenChanged(h,p,v){return this.registerStateListener(this.idTokenSubscription,h,p,v)}toJSON(){var h;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(h=this._currentUser)||void 0===h?void 0:h.toJSON()}}_setRedirectUser(h,p){var v=this;return(0,g.Z)(function*(){const T=yield v.getOrInitRedirectPersistenceManager(p);return null===h?T.removeCurrentUser():T.setCurrentUser(h)})()}getOrInitRedirectPersistenceManager(h){var p=this;return(0,g.Z)(function*(){if(!p.redirectPersistenceManager){const v=h&&re(h)||p._popupRedirectResolver;ee(v,p,"argument-error"),p.redirectPersistenceManager=yield Y.create(p,[re(v._redirectPersistence)],"redirectUser"),p.redirectUser=yield p.redirectPersistenceManager.getCurrentUser()}return p.redirectPersistenceManager})()}_redirectUserForId(h){var p=this;return(0,g.Z)(function*(){var v,T;return p._isInitialized&&(yield p.queue((0,g.Z)(function*(){}))),(null===(v=p._currentUser)||void 0===v?void 0:v._redirectEventId)===h?p._currentUser:(null===(T=p.redirectUser)||void 0===T?void 0:T._redirectEventId)===h?p.redirectUser:null})()}_persistUserIfCurrent(h){var p=this;return(0,g.Z)(function*(){if(h===p.currentUser)return p.queue((0,g.Z)(function*(){return p.directlySetCurrentUser(h)}))})()}_notifyListenersIfCurrent(h){h===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var h,p;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const v=null!==(p=null===(h=this.currentUser)||void 0===h?void 0:h.uid)&&void 0!==p?p:null;this.lastNotifiedUid!==v&&(this.lastNotifiedUid=v,this.authStateSubscription.next(this.currentUser))}registerStateListener(h,p,v,T){if(this._deleted)return()=>{};const R="function"==typeof p?p:p.next.bind(p),G=this._isInitialized?Promise.resolve():this._initializationPromise;return ee(G,this,"internal-error"),G.then(()=>R(this.currentUser)),"function"==typeof p?h.addObserver(p,v,T):h.addObserver(p)}directlySetCurrentUser(h){var p=this;return(0,g.Z)(function*(){p.currentUser&&p.currentUser!==h&&(p._currentUser._stopProactiveRefresh(),h&&p.isProactiveRefreshEnabled&&h._startProactiveRefresh()),p.currentUser=h,h?yield p.assertedPersistence.setCurrentUser(h):yield p.assertedPersistence.removeCurrentUser()})()}queue(h){return this.operations=this.operations.then(h,h),this.operations}get assertedPersistence(){return ee(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(h){!h||this.frameworks.includes(h)||(this.frameworks.push(h),this.frameworks.sort(),this.clientVersion=Zo(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var h=this;return(0,g.Z)(function*(){var p;const v={"X-Client-Version":h.clientVersion};h.app.options.appId&&(v["X-Firebase-gmpid"]=h.app.options.appId);const T=yield null===(p=h.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===p?void 0:p.getHeartbeatsHeader();return T&&(v["X-Firebase-Client"]=T),v})()}}function Re(y){return(0,O.m9)(y)}class St{constructor(h){this.auth=h,this.observer=null,this.addObserver=(0,O.ne)(p=>this.observer=p)}get next(){return ee(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function ir(y){const h=y.indexOf(":");return h<0?"":y.substr(0,h+1)}function Fn(y){if(!y)return null;const h=Number(y);return isNaN(h)?null:h}class en{constructor(h,p){this.providerId=h,this.signInMethod=p}toJSON(){return q("not implemented")}_getIdTokenResponse(h){return q("not implemented")}_linkToIdToken(h,p){return q("not implemented")}_getReauthenticationResolver(h){return q("not implemented")}}function Sn(y,h){return gs.apply(this,arguments)}function gs(){return(gs=(0,g.Z)(function*(y,h){return Lt(y,"POST","/v1/accounts:resetPassword",Kt(y,h))})).apply(this,arguments)}function bt(y,h){return Io.apply(this,arguments)}function Io(){return(Io=(0,g.Z)(function*(y,h){return Lt(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function qs(y,h){return Yo.apply(this,arguments)}function Yo(){return(Yo=(0,g.Z)(function*(y,h){return Lt(y,"POST","/v1/accounts:update",Kt(y,h))})).apply(this,arguments)}function gr(){return(gr=(0,g.Z)(function*(y,h){return Dr(y,"POST","/v1/accounts:signInWithPassword",Kt(y,h))})).apply(this,arguments)}function zi(y,h){return Wi.apply(this,arguments)}function Wi(){return(Wi=(0,g.Z)(function*(y,h){return Lt(y,"POST","/v1/accounts:sendOobCode",Kt(y,h))})).apply(this,arguments)}function vi(y,h){return tn.apply(this,arguments)}function tn(){return(tn=(0,g.Z)(function*(y,h){return zi(y,h)})).apply(this,arguments)}function ka(y,h){return Fa.apply(this,arguments)}function Fa(){return(Fa=(0,g.Z)(function*(y,h){return zi(y,h)})).apply(this,arguments)}function Ei(y,h){return ui.apply(this,arguments)}function ui(){return(ui=(0,g.Z)(function*(y,h){return zi(y,h)})).apply(this,arguments)}function Tc(y,h){return ys.apply(this,arguments)}function ys(){return(ys=(0,g.Z)(function*(y,h){return zi(y,h)})).apply(this,arguments)}function Ur(){return(Ur=(0,g.Z)(function*(y,h){return Dr(y,"POST","/v1/accounts:signInWithEmailLink",Kt(y,h))})).apply(this,arguments)}function Ac(){return(Ac=(0,g.Z)(function*(y,h){return Dr(y,"POST","/v1/accounts:signInWithEmailLink",Kt(y,h))})).apply(this,arguments)}class Va extends en{constructor(h,p,v,T=null){super("password",v),this._email=h,this._password=p,this._tenantId=T}static _fromEmailAndPassword(h,p){return new Va(h,p,"password")}static _fromEmailAndCode(h,p,v=null){return new Va(h,p,"emailLink",v)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(h){const p="string"==typeof h?JSON.parse(h):h;if((null==p?void 0:p.email)&&(null==p?void 0:p.password)){if("password"===p.signInMethod)return this._fromEmailAndPassword(p.email,p.password);if("emailLink"===p.signInMethod)return this._fromEmailAndCode(p.email,p.password,p.tenantId)}return null}_getIdTokenResponse(h){var p=this;return(0,g.Z)(function*(){switch(p.signInMethod){case"password":return function ms(y,h){return gr.apply(this,arguments)}(h,{returnSecureToken:!0,email:p._email,password:p._password});case"emailLink":return function La(y,h){return Ur.apply(this,arguments)}(h,{email:p._email,oobCode:p._password});default:De(h,"internal-error")}})()}_linkToIdToken(h,p){var v=this;return(0,g.Z)(function*(){switch(v.signInMethod){case"password":return bt(h,{idToken:p,returnSecureToken:!0,email:v._email,password:v._password});case"emailLink":return function Ch(y,h){return Ac.apply(this,arguments)}(h,{idToken:p,email:v._email,oobCode:v._password});default:De(h,"internal-error")}})()}_getReauthenticationResolver(h){return this._getIdTokenResponse(h)}}function Ln(y,h){return Sc.apply(this,arguments)}function Sc(){return(Sc=(0,g.Z)(function*(y,h){return Dr(y,"POST","/v1/accounts:signInWithIdp",Kt(y,h))})).apply(this,arguments)}class Ki extends en{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(h){const p=new Ki(h.providerId,h.signInMethod);return h.idToken||h.accessToken?(h.idToken&&(p.idToken=h.idToken),h.accessToken&&(p.accessToken=h.accessToken),h.nonce&&!h.pendingToken&&(p.nonce=h.nonce),h.pendingToken&&(p.pendingToken=h.pendingToken)):h.oauthToken&&h.oauthTokenSecret?(p.accessToken=h.oauthToken,p.secret=h.oauthTokenSecret):De("argument-error"),p}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(h){const p="string"==typeof h?JSON.parse(h):h,{providerId:v,signInMethod:T}=p,R=(0,J._T)(p,["providerId","signInMethod"]);if(!v||!T)return null;const G=new Ki(v,T);return G.idToken=R.idToken||void 0,G.accessToken=R.accessToken||void 0,G.secret=R.secret,G.nonce=R.nonce,G.pendingToken=R.pendingToken||null,G}_getIdTokenResponse(h){return Ln(h,this.buildRequest())}_linkToIdToken(h,p){const v=this.buildRequest();return v.idToken=p,Ln(h,v)}_getReauthenticationResolver(h){const p=this.buildRequest();return p.autoCreate=!1,Ln(h,p)}buildRequest(){const h={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)h.pendingToken=this.pendingToken;else{const p={};this.idToken&&(p.id_token=this.idToken),this.accessToken&&(p.access_token=this.accessToken),this.secret&&(p.oauth_token_secret=this.secret),p.providerId=this.providerId,this.nonce&&!this.pendingToken&&(p.nonce=this.nonce),h.postBody=(0,O.xO)(p)}return h}}function Ap(y,h){return Mc.apply(this,arguments)}function Mc(){return(Mc=(0,g.Z)(function*(y,h){return Lt(y,"POST","/v1/accounts:sendVerificationCode",Kt(y,h))})).apply(this,arguments)}function _s(){return(_s=(0,g.Z)(function*(y,h){return Dr(y,"POST","/v1/accounts:signInWithPhoneNumber",Kt(y,h))})).apply(this,arguments)}function xc(){return(xc=(0,g.Z)(function*(y,h){const p=yield Dr(y,"POST","/v1/accounts:signInWithPhoneNumber",Kt(y,h));if(p.temporaryProof)throw Gi(y,"account-exists-with-different-credential",p);return p})).apply(this,arguments)}const Mp={USER_NOT_FOUND:"user-not-found"};function Rc(){return(Rc=(0,g.Z)(function*(y,h){return Dr(y,"POST","/v1/accounts:signInWithPhoneNumber",Kt(y,Object.assign(Object.assign({},h),{operation:"REAUTH"})),Mp)})).apply(this,arguments)}class Do extends en{constructor(h){super("phone","phone"),this.params=h}static _fromVerification(h,p){return new Do({verificationId:h,verificationCode:p})}static _fromTokenResponse(h,p){return new Do({phoneNumber:h,temporaryProof:p})}_getIdTokenResponse(h){return function Zu(y,h){return _s.apply(this,arguments)}(h,this._makeVerificationRequest())}_linkToIdToken(h,p){return function Sp(y,h){return xc.apply(this,arguments)}(h,Object.assign({idToken:p},this._makeVerificationRequest()))}_getReauthenticationResolver(h){return function xp(y,h){return Rc.apply(this,arguments)}(h,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:h,phoneNumber:p,verificationId:v,verificationCode:T}=this.params;return h&&p?{temporaryProof:h,phoneNumber:p}:{sessionInfo:v,code:T}}toJSON(){const h={providerId:this.providerId};return this.params.phoneNumber&&(h.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(h.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(h.verificationCode=this.params.verificationCode),this.params.verificationId&&(h.verificationId=this.params.verificationId),h}static fromJSON(h){"string"==typeof h&&(h=JSON.parse(h));const{verificationId:p,verificationCode:v,phoneNumber:T,temporaryProof:R}=h;return v||p||T||R?new Do({verificationId:p,verificationCode:v,phoneNumber:T,temporaryProof:R}):null}}class zs{constructor(h){var p,v,T,R,G,ne;const ke=(0,O.zd)((0,O.pd)(h)),Ke=null!==(p=ke.apiKey)&&void 0!==p?p:null,gt=null!==(v=ke.oobCode)&&void 0!==v?v:null,ot=function Jm(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(T=ke.mode)&&void 0!==T?T:null);ee(Ke&&gt&&ot,"argument-error"),this.apiKey=Ke,this.operation=ot,this.code=gt,this.continueUrl=null!==(R=ke.continueUrl)&&void 0!==R?R:null,this.languageCode=null!==(G=ke.languageCode)&&void 0!==G?G:null,this.tenantId=null!==(ne=ke.tenantId)&&void 0!==ne?ne:null}static parseLink(h){const p=function Ua(y){const h=(0,O.zd)((0,O.pd)(y)).link,p=h?(0,O.zd)((0,O.pd)(h)).deep_link_id:null,v=(0,O.zd)((0,O.pd)(y)).deep_link_id;return(v?(0,O.zd)((0,O.pd)(v)).link:null)||v||p||h||y}(h);try{return new zs(p)}catch(v){return null}}}let Yu=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(p,v){return Va._fromEmailAndPassword(p,v)}static credentialWithLink(p,v){const T=zs.parseLink(v);return ee(T,"argument-error"),Va._fromEmailAndCode(p,T.code,T.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class vs{constructor(h){this.providerId=h,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(h){this.defaultLanguageCode=h}setCustomParameters(h){return this.customParameters=h,this}getCustomParameters(){return this.customParameters}}class Br extends vs{constructor(){super(...arguments),this.scopes=[]}addScope(h){return this.scopes.includes(h)||this.scopes.push(h),this}getScopes(){return[...this.scopes]}}class bo extends Br{static credentialFromJSON(h){const p="string"==typeof h?JSON.parse(h):h;return ee("providerId"in p&&"signInMethod"in p,"argument-error"),Ki._fromParams(p)}credential(h){return this._credential(Object.assign(Object.assign({},h),{nonce:h.rawNonce}))}_credential(h){return ee(h.idToken||h.accessToken,"argument-error"),Ki._fromParams(Object.assign(Object.assign({},h),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(h){return bo.oauthCredentialFromTaggedObject(h)}static credentialFromError(h){return bo.oauthCredentialFromTaggedObject(h.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthIdToken:p,oauthAccessToken:v,oauthTokenSecret:T,pendingToken:R,nonce:G,providerId:ne}=h;if(!v&&!T&&!p&&!R||!ne)return null;try{return new bo(ne)._credential({idToken:p,accessToken:v,nonce:G,pendingToken:R})}catch(ke){return null}}}let Ws=(()=>{class y extends Br{constructor(){super("facebook.com")}static credential(p){return Ki._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return y.credential(p.oauthAccessToken)}catch(v){return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),Qo=(()=>{class y extends Br{constructor(){super("google.com"),this.addScope("profile")}static credential(p,v){return Ki._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:p,accessToken:v})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:v,oauthAccessToken:T}=p;if(!v&&!T)return null;try{return y.credential(v,T)}catch(R){return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),Nc=(()=>{class y extends Br{constructor(){super("github.com")}static credential(p){return Ki._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return y.credential(p.oauthAccessToken)}catch(v){return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class Co extends en{constructor(h,p){super(h,h),this.pendingToken=p}_getIdTokenResponse(h){return Ln(h,this.buildRequest())}_linkToIdToken(h,p){const v=this.buildRequest();return v.idToken=p,Ln(h,v)}_getReauthenticationResolver(h){const p=this.buildRequest();return p.autoCreate=!1,Ln(h,p)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(h){const p="string"==typeof h?JSON.parse(h):h,{providerId:v,signInMethod:T,pendingToken:R}=p;return v&&T&&R&&v===T?new Co(v,R):null}static _create(h,p){return new Co(h,p)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class li extends vs{constructor(h){ee(h.startsWith("saml."),"argument-error"),super(h)}static credentialFromResult(h){return li.samlCredentialFromTaggedObject(h)}static credentialFromError(h){return li.samlCredentialFromTaggedObject(h.customData||{})}static credentialFromJSON(h){const p=Co.fromJSON(h);return ee(p,"argument-error"),p}static samlCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{pendingToken:p,providerId:v}=h;if(!p||!v)return null;try{return Co._create(v,p)}catch(T){return null}}}let Ba=(()=>{class y extends Br{constructor(){super("twitter.com")}static credential(p,v){return Ki._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:p,oauthTokenSecret:v})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthAccessToken:v,oauthTokenSecret:T}=p;if(!v||!T)return null;try{return y.credential(v,T)}catch(R){return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function ja(y,h){return jr.apply(this,arguments)}function jr(){return(jr=(0,g.Z)(function*(y,h){return Dr(y,"POST","/v1/accounts:signUp",Kt(y,h))})).apply(this,arguments)}class sr{constructor(h){this.user=h.user,this.providerId=h.providerId,this._tokenResponse=h._tokenResponse,this.operationType=h.operationType}static _fromIdTokenResponse(h,p,v,T=!1){return(0,g.Z)(function*(){const R=yield U._fromIdTokenResponse(h,v,T),G=Ah(v);return new sr({user:R,providerId:G,_tokenResponse:v,operationType:p})})()}static _forOperation(h,p,v){return(0,g.Z)(function*(){yield h._updateTokensIfNecessary(v,!0);const T=Ah(v);return new sr({user:h,providerId:T,_tokenResponse:v,operationType:p})})()}}function Ah(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function Oc(){return(Oc=(0,g.Z)(function*(y){var h;const p=Re(y);if(yield p._initializationPromise,null===(h=p.currentUser)||void 0===h?void 0:h.isAnonymous)return new sr({user:p.currentUser,providerId:null,operationType:"signIn"});const v=yield ja(p,{returnSecureToken:!0}),T=yield sr._fromIdTokenResponse(p,"signIn",v,!0);return yield p._updateCurrentUser(T.user),T})).apply(this,arguments)}class Ha extends O.ZR{constructor(h,p,v,T){var R;super(p.code,p.message),this.operationType=v,this.user=T,Object.setPrototypeOf(this,Ha.prototype),this.customData={appName:h.name,tenantId:null!==(R=h.tenantId)&&void 0!==R?R:void 0,_serverResponse:p.customData._serverResponse,operationType:v}}static _fromErrorAndOperation(h,p,v,T){return new Ha(h,p,v,T)}}function Ga(y,h,p,v){return("reauthenticate"===h?p._getReauthenticationResolver(y):p._getIdTokenResponse(y)).catch(R=>{throw"auth/multi-factor-auth-required"===R.code?Ha._fromErrorAndOperation(y,R,h,v):R})}function Zi(y){return new Set(y.map(({providerId:h})=>h).filter(h=>!!h))}function Qu(){return(Qu=(0,g.Z)(function*(y,h){const p=(0,O.m9)(y);yield ws(!0,p,h);const{providerUserInfo:v}=yield Zn(p.auth,{idToken:yield p.getIdToken(),deleteProvider:[h]}),T=Zi(v||[]);return p.providerData=p.providerData.filter(R=>T.has(R.providerId)),T.has("phone")||(p.phoneNumber=null),yield p.auth._persistUserIfCurrent(p),p})).apply(this,arguments)}function hn(y,h){return To.apply(this,arguments)}function To(){return(To=(0,g.Z)(function*(y,h,p=!1){const v=yield nr(y,h._linkToIdToken(y.auth,yield y.getIdToken()),p);return sr._forOperation(y,"link",v)})).apply(this,arguments)}function ws(y,h,p){return nn.apply(this,arguments)}function nn(){return(nn=(0,g.Z)(function*(y,h,p){yield rr(h);const T=!1===y?"provider-already-linked":"no-such-provider";ee(Zi(h.providerData).has(p)===y,h.auth,T)})).apply(this,arguments)}function Pc(y,h){return Ks.apply(this,arguments)}function Ks(){return(Ks=(0,g.Z)(function*(y,h,p=!1){const{auth:v}=y,T="reauthenticate";try{const R=yield nr(y,Ga(v,T,h,y),p);ee(R.idToken,v,"internal-error");const G=nt(R.idToken);ee(G,v,"internal-error");const{sub:ne}=G;return ee(y.uid===ne,v,"user-mismatch"),sr._forOperation(y,T,R)}catch(R){throw"auth/user-not-found"===(null==R?void 0:R.code)&&De(v,"user-mismatch"),R}})).apply(this,arguments)}function Zs(y,h){return mr.apply(this,arguments)}function mr(){return(mr=(0,g.Z)(function*(y,h,p=!1){const v="signIn",T=yield Ga(y,v,h),R=yield sr._fromIdTokenResponse(y,v,T);return p||(yield y._updateCurrentUser(R.user)),R})).apply(this,arguments)}function Mn(y,h){return Xo.apply(this,arguments)}function Xo(){return(Xo=(0,g.Z)(function*(y,h){return Zs(Re(y),h)})).apply(this,arguments)}function wi(y,h){return yr.apply(this,arguments)}function yr(){return(yr=(0,g.Z)(function*(y,h){const p=(0,O.m9)(y);return yield ws(!1,p,h.providerId),hn(p,h)})).apply(this,arguments)}function Is(y,h){return Yi.apply(this,arguments)}function Yi(){return(Yi=(0,g.Z)(function*(y,h){return Pc((0,O.m9)(y),h)})).apply(this,arguments)}function qa(y,h){return $r.apply(this,arguments)}function $r(){return($r=(0,g.Z)(function*(y,h){return Dr(y,"POST","/v1/accounts:signInWithCustomToken",Kt(y,h))})).apply(this,arguments)}function bs(){return(bs=(0,g.Z)(function*(y,h){const p=Re(y),v=yield qa(p,{token:h,returnSecureToken:!0}),T=yield sr._fromIdTokenResponse(p,"signIn",v);return yield p._updateCurrentUser(T.user),T})).apply(this,arguments)}class dt{constructor(h,p){this.factorId=h,this.uid=p.mfaEnrollmentId,this.enrollmentTime=new Date(p.enrolledAt).toUTCString(),this.displayName=p.displayName}static _fromServerResponse(h,p){return"phoneInfo"in p?za._fromServerResponse(h,p):De(h,"internal-error")}}class za extends dt{constructor(h){super("phone",h),this.phoneNumber=h.phoneInfo}static _fromServerResponse(h,p){return new za(p)}}function ea(y,h,p){var v;ee((null===(v=p.url)||void 0===v?void 0:v.length)>0,y,"invalid-continue-uri"),ee(void 0===p.dynamicLinkDomain||p.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),h.continueUrl=p.url,h.dynamicLinkDomain=p.dynamicLinkDomain,h.canHandleCodeInApp=p.handleCodeInApp,p.iOS&&(ee(p.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),h.iOSBundleId=p.iOS.bundleId),p.android&&(ee(p.android.packageName.length>0,y,"missing-android-pkg-name"),h.androidInstallApp=p.android.installApp,h.androidMinimumVersionCode=p.android.minimumVersion,h.androidPackageName=p.android.packageName)}function Ka(){return(Ka=(0,g.Z)(function*(y,h,p){const v=(0,O.m9)(y),T={requestType:"PASSWORD_RESET",email:h};p&&ea(v,T,p),yield ka(v,T)})).apply(this,arguments)}function Ju(){return(Ju=(0,g.Z)(function*(y,h,p){yield Sn((0,O.m9)(y),{oobCode:h,newPassword:p})})).apply(this,arguments)}function we(){return(we=(0,g.Z)(function*(y,h){yield qs((0,O.m9)(y),{oobCode:h})})).apply(this,arguments)}function Rt(y,h){return kc.apply(this,arguments)}function kc(){return(kc=(0,g.Z)(function*(y,h){const p=(0,O.m9)(y),v=yield Sn(p,{oobCode:h}),T=v.requestType;switch(ee(T,p,"internal-error"),T){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ee(v.newEmail,p,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ee(v.mfaInfo,p,"internal-error");default:ee(v.email,p,"internal-error")}let R=null;return v.mfaInfo&&(R=dt._fromServerResponse(Re(p),v.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===v.requestType?v.newEmail:v.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===v.requestType?v.email:v.newEmail)||null,multiFactorInfo:R},operation:T}})).apply(this,arguments)}function Ao(){return(Ao=(0,g.Z)(function*(y,h){const{data:p}=yield Rt((0,O.m9)(y),h);return p.email})).apply(this,arguments)}function Hr(){return(Hr=(0,g.Z)(function*(y,h,p){const v=Re(y),T=yield ja(v,{returnSecureToken:!0,email:h,password:p}),R=yield sr._fromIdTokenResponse(v,"signIn",T);return yield v._updateCurrentUser(R.user),R})).apply(this,arguments)}function Fc(){return(Fc=(0,g.Z)(function*(y,h,p){const v=(0,O.m9)(y),T={requestType:"EMAIL_SIGNIN",email:h};ee(p.handleCodeInApp,v,"argument-error"),p&&ea(v,T,p),yield Ei(v,T)})).apply(this,arguments)}function Cs(){return(Cs=(0,g.Z)(function*(y,h,p){const v=(0,O.m9)(y),T=Yu.credentialWithLink(h,p||Et());return ee(T._tenantId===(v.tenantId||null),v,"tenant-id-mismatch"),Mn(v,T)})).apply(this,arguments)}function or(y,h){return ci.apply(this,arguments)}function ci(){return(ci=(0,g.Z)(function*(y,h){return Lt(y,"POST","/v1/accounts:createAuthUri",Kt(y,h))})).apply(this,arguments)}function Ts(){return(Ts=(0,g.Z)(function*(y,h){const v={identifier:h,continueUri:Wt()?Et():"http://localhost"},{signinMethods:T}=yield or((0,O.m9)(y),v);return T||[]})).apply(this,arguments)}function rl(){return(rl=(0,g.Z)(function*(y,h){const p=(0,O.m9)(y),T={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};h&&ea(p.auth,T,h);const{email:R}=yield vi(p.auth,T);R!==y.email&&(yield y.reload())})).apply(this,arguments)}function Xa(){return(Xa=(0,g.Z)(function*(y,h,p){const v=(0,O.m9)(y),R={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:h};p&&ea(v.auth,R,p);const{email:G}=yield Tc(v.auth,R);G!==y.email&&(yield y.reload())})).apply(this,arguments)}function il(y,h){return ta.apply(this,arguments)}function ta(){return(ta=(0,g.Z)(function*(y,h){return Lt(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function sl(){return(sl=(0,g.Z)(function*(y,{displayName:h,photoURL:p}){if(void 0===h&&void 0===p)return;const v=(0,O.m9)(y),R={idToken:yield v.getIdToken(),displayName:h,photoUrl:p,returnSecureToken:!0},G=yield nr(v,il(v.auth,R));v.displayName=G.displayName||null,v.photoURL=G.photoUrl||null;const ne=v.providerData.find(({providerId:ke})=>"password"===ke);ne&&(ne.displayName=v.displayName,ne.photoURL=v.photoURL),yield v._updateTokensIfNecessary(G)})).apply(this,arguments)}function al(y,h,p){return Ys.apply(this,arguments)}function Ys(){return(Ys=(0,g.Z)(function*(y,h,p){const{auth:v}=y,R={idToken:yield y.getIdToken(),returnSecureToken:!0};h&&(R.email=h),p&&(R.password=p);const G=yield nr(y,bt(v,R));yield y._updateTokensIfNecessary(G,!0)})).apply(this,arguments)}class Qs{constructor(h,p,v={}){this.isNewUser=h,this.providerId=p,this.profile=v}}class Uc extends Qs{constructor(h,p,v,T){super(h,p,v),this.username=T}}class Bc extends Qs{constructor(h,p){super(h,"facebook.com",p)}}class Js extends Uc{constructor(h,p){super(h,"github.com",p,"string"==typeof(null==p?void 0:p.login)?null==p?void 0:p.login:null)}}class As extends Qs{constructor(h,p){super(h,"google.com",p)}}class ul extends Uc{constructor(h,p,v){super(h,"twitter.com",p,v)}}function _r(y){const{user:h,_tokenResponse:p}=y;return h.isAnonymous&&!p?{providerId:null,isNewUser:!1,profile:null}:function Vc(y){var h,p;if(!y)return null;const{providerId:v}=y,T=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},R=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!v&&(null==y?void 0:y.idToken)){const G=null===(p=null===(h=nt(y.idToken))||void 0===h?void 0:h.firebase)||void 0===p?void 0:p.sign_in_provider;if(G)return new Qs(R,"anonymous"!==G&&"custom"!==G?G:null)}if(!v)return null;switch(v){case"facebook.com":return new Bc(R,T);case"github.com":return new Js(R,T);case"google.com":return new As(R,T);case"twitter.com":return new ul(R,T,y.screenName||null);case"custom":case"anonymous":return new Qs(R,null);default:return new Qs(R,v,T)}}(p)}class Qi{constructor(h,p){this.type=h,this.credential=p}static _fromIdtoken(h){return new Qi("enroll",h)}static _fromMfaPendingCredential(h){return new Qi("signin",h)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(h){var p,v;if(null==h?void 0:h.multiFactorSession){if(null===(p=h.multiFactorSession)||void 0===p?void 0:p.pendingCredential)return Qi._fromMfaPendingCredential(h.multiFactorSession.pendingCredential);if(null===(v=h.multiFactorSession)||void 0===v?void 0:v.idToken)return Qi._fromIdtoken(h.multiFactorSession.idToken)}return null}}class ra{constructor(h,p,v){this.session=h,this.hints=p,this.signInResolver=v}static _fromError(h,p){const v=Re(h),T=p.customData._serverResponse,R=(T.mfaInfo||[]).map(ne=>dt._fromServerResponse(v,ne));ee(T.mfaPendingCredential,v,"internal-error");const G=Qi._fromMfaPendingCredential(T.mfaPendingCredential);return new ra(G,R,function(){var ne=(0,g.Z)(function*(ke){const Ke=yield ke._process(v,G);delete T.mfaInfo,delete T.mfaPendingCredential;const gt=Object.assign(Object.assign({},T),{idToken:Ke.idToken,refreshToken:Ke.refreshToken});switch(p.operationType){case"signIn":const ot=yield sr._fromIdTokenResponse(v,p.operationType,gt);return yield v._updateCurrentUser(ot.user),ot;case"reauthenticate":return ee(p.user,v,"internal-error"),sr._forOperation(p.user,p.operationType,gt);default:De(v,"internal-error")}});return function(ke){return ne.apply(this,arguments)}}())}resolveSignIn(h){var p=this;return(0,g.Z)(function*(){return p.signInResolver(h)})()}}function Vn(y,h){return Lt(y,"POST","/v2/accounts/mfaEnrollment:start",Kt(y,h))}class Ji{constructor(h){this.user=h,this.enrolledFactors=[],h._onReload(p=>{p.mfaInfo&&(this.enrolledFactors=p.mfaInfo.map(v=>dt._fromServerResponse(h.auth,v)))})}static _fromUser(h){return new Ji(h)}getSession(){var h=this;return(0,g.Z)(function*(){return Qi._fromIdtoken(yield h.user.getIdToken())})()}enroll(h,p){var v=this;return(0,g.Z)(function*(){const T=h,R=yield v.getSession(),G=yield nr(v.user,T._process(v.user.auth,R,p));return yield v.user._updateTokensIfNecessary(G),v.user.reload()})()}unenroll(h){var p=this;return(0,g.Z)(function*(){const v="string"==typeof h?h:h.uid,T=yield p.user.getIdToken(),R=yield nr(p.user,function Np(y,h){return Lt(y,"POST","/v2/accounts/mfaEnrollment:withdraw",Kt(y,h))}(p.user.auth,{idToken:T,mfaEnrollmentId:v}));p.enrolledFactors=p.enrolledFactors.filter(({uid:G})=>G!==v),yield p.user._updateTokensIfNecessary(R);try{yield p.user.reload()}catch(G){if("auth/user-token-expired"!==G.code)throw G}})()}}const Mo=new WeakMap,dl="__sak";class Xs{constructor(h,p){this.storageRetriever=h,this.type=p}_isAvailable(){try{return this.storage?(this.storage.setItem(dl,"1"),this.storage.removeItem(dl),Promise.resolve(!0)):Promise.resolve(!1)}catch(h){return Promise.resolve(!1)}}_set(h,p){return this.storage.setItem(h,JSON.stringify(p)),Promise.resolve()}_get(h){const p=this.storage.getItem(h);return Promise.resolve(p?JSON.parse(p):null)}_remove(h){return this.storage.removeItem(h),Promise.resolve()}get storage(){return this.storageRetriever()}}const gn=(()=>{class y extends Xs{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(p,v)=>this.onStorageEvent(p,v),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Hc(){const y=(0,O.z$)();return qt(y)||Qn(y)}()&&function jn(){try{return!(!window||window===window.top)}catch(y){return!1}}(),this.fallbackToPolling=qi(),this._shouldAllowMigration=!0}forAllChangedKeys(p){for(const v of Object.keys(this.listeners)){const T=this.storage.getItem(v),R=this.localCache[v];T!==R&&p(v,R,T)}}onStorageEvent(p,v=!1){if(!p.key)return void this.forAllChangedKeys((ne,ke,Ke)=>{this.notifyListeners(ne,Ke)});const T=p.key;if(v?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ne=this.storage.getItem(T);if(p.newValue!==ne)null!==p.newValue?this.storage.setItem(T,p.newValue):this.storage.removeItem(T);else if(this.localCache[T]===p.newValue&&!v)return}const R=()=>{const ne=this.storage.getItem(T);!v&&this.localCache[T]===ne||this.notifyListeners(T,ne)},G=this.storage.getItem(T);!function Ko(){return(0,O.w1)()&&10===document.documentMode}()||G===p.newValue||p.newValue===p.oldValue?R():setTimeout(R,10)}notifyListeners(p,v){this.localCache[p]=v;const T=this.listeners[p];if(T)for(const R of Array.from(T))R(v&&JSON.parse(v))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((p,v,T)=>{this.onStorageEvent(new StorageEvent("storage",{key:p,oldValue:v,newValue:T}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(p,v){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[p]||(this.listeners[p]=new Set,this.localCache[p]=this.storage.getItem(p)),this.listeners[p].add(v)}_removeListener(p,v){this.listeners[p]&&(this.listeners[p].delete(v),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(p,v){var T=()=>super._set,R=this;return(0,g.Z)(function*(){yield T().call(R,p,v),R.localCache[p]=JSON.stringify(v)})()}_get(p){var v=()=>super._get,T=this;return(0,g.Z)(function*(){const R=yield v().call(T,p);return T.localCache[p]=JSON.stringify(R),R})()}_remove(p){var v=()=>super._remove,T=this;return(0,g.Z)(function*(){yield v().call(T,p),delete T.localCache[p]})()}}return y.type="LOCAL",y})(),Xi=(()=>{class y extends Xs{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(p,v){}_removeListener(p,v){}}return y.type="SESSION",y})();let ia=(()=>{class y{constructor(p){this.eventTarget=p,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(p){const v=this.receivers.find(R=>R.isListeningto(p));if(v)return v;const T=new y(p);return this.receivers.push(T),T}isListeningto(p){return this.eventTarget===p}handleEvent(p){var v=this;return(0,g.Z)(function*(){const T=p,{eventId:R,eventType:G,data:ne}=T.data,ke=v.handlersMap[G];if(!(null==ke?void 0:ke.size))return;T.ports[0].postMessage({status:"ack",eventId:R,eventType:G});const Ke=Array.from(ke).map(function(){var ot=(0,g.Z)(function*(Cn){return Cn(T.origin,ne)});return function(Cn){return ot.apply(this,arguments)}}()),gt=yield function fl(y){return Promise.all(y.map(function(){var h=(0,g.Z)(function*(p){try{return{fulfilled:!0,value:yield p}}catch(v){return{fulfilled:!1,reason:v}}});return function(p){return h.apply(this,arguments)}}()))}(Ke);T.ports[0].postMessage({status:"done",eventId:R,eventType:G,response:gt})})()}_subscribe(p,v){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[p]||(this.handlersMap[p]=new Set),this.handlersMap[p].add(v)}_unsubscribe(p,v){this.handlersMap[p]&&v&&this.handlersMap[p].delete(v),(!v||0===this.handlersMap[p].size)&&delete this.handlersMap[p],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function eo(y="",h=10){let p="";for(let v=0;v<h;v++)p+=Math.floor(10*Math.random());return y+p}class Gc{constructor(h){this.target=h,this.handlers=new Set}removeMessageHandler(h){h.messageChannel&&(h.messageChannel.port1.removeEventListener("message",h.onMessage),h.messageChannel.port1.close()),this.handlers.delete(h)}_send(h,p,v=50){var T=this;return(0,g.Z)(function*(){const R="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!R)throw new Error("connection_unavailable");let G,ne;return new Promise((ke,Ke)=>{const gt=eo("",20);R.port1.start();const ot=setTimeout(()=>{Ke(new Error("unsupported_event"))},v);ne={messageChannel:R,onMessage(Cn){const Fi=Cn;if(Fi.data.eventId===gt)switch(Fi.data.status){case"ack":clearTimeout(ot),G=setTimeout(()=>{Ke(new Error("timeout"))},3e3);break;case"done":clearTimeout(G),ke(Fi.data.response);break;default:clearTimeout(ot),clearTimeout(G),Ke(new Error("invalid_response"))}}},T.handlers.add(ne),R.port1.addEventListener("message",ne.onMessage),T.target.postMessage({eventType:h,eventId:gt,data:p},[R.port2])}).finally(()=>{ne&&T.removeMessageHandler(ne)})})()}}function Qt(){return window}function mn(){return void 0!==Qt().WorkerGlobalScope&&"function"==typeof Qt().importScripts}function Ms(){return(Ms=(0,g.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(y){return null}})).apply(this,arguments)}const tu="firebaseLocalStorageDb",to="firebaseLocalStorage",di="fbase_key";class $n{constructor(h){this.request=h}toPromise(){return new Promise((h,p)=>{this.request.addEventListener("success",()=>{h(this.request.result)}),this.request.addEventListener("error",()=>{p(this.request.error)})})}}function Ro(y,h){return y.transaction([to],h?"readwrite":"readonly").objectStore(to)}function no(){const y=indexedDB.open(tu,1);return new Promise((h,p)=>{y.addEventListener("error",()=>{p(y.error)}),y.addEventListener("upgradeneeded",()=>{const v=y.result;try{v.createObjectStore(to,{keyPath:di})}catch(T){p(T)}}),y.addEventListener("success",(0,g.Z)(function*(){const v=y.result;v.objectStoreNames.contains(to)?h(v):(v.close(),yield function Gr(){const y=indexedDB.deleteDatabase(tu);return new $n(y).toPromise()}(),h(yield no()))}))})}function gl(y,h,p){return ro.apply(this,arguments)}function ro(){return(ro=(0,g.Z)(function*(y,h,p){const v=Ro(y,!0).put({[di]:h,value:p});return new $n(v).toPromise()})).apply(this,arguments)}function hi(){return(hi=(0,g.Z)(function*(y,h){const p=Ro(y,!1).get(h),v=yield new $n(p).toPromise();return void 0===v?null:v.value})).apply(this,arguments)}function xs(y,h){const p=Ro(y,!0).delete(h);return new $n(p).toPromise()}const es=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var p=this;return(0,g.Z)(function*(){return p.db||(p.db=yield no()),p.db})()}_withRetries(p){var v=this;return(0,g.Z)(function*(){let T=0;for(;;)try{const R=yield v._openDb();return yield p(R)}catch(R){if(T++>3)throw R;v.db&&(v.db.close(),v.db=void 0)}})()}initializeServiceWorkerMessaging(){var p=this;return(0,g.Z)(function*(){return mn()?p.initializeReceiver():p.initializeSender()})()}initializeReceiver(){var p=this;return(0,g.Z)(function*(){p.receiver=ia._getInstance(function pl(){return mn()?self:null}()),p.receiver._subscribe("keyChanged",function(){var v=(0,g.Z)(function*(T,R){return{keyProcessed:(yield p._poll()).includes(R.key)}});return function(T,R){return v.apply(this,arguments)}}()),p.receiver._subscribe("ping",function(){var v=(0,g.Z)(function*(T,R){return["keyChanged"]});return function(T,R){return v.apply(this,arguments)}}())})()}initializeSender(){var p=this;return(0,g.Z)(function*(){var v,T;if(p.activeServiceWorker=yield function Ct(){return Ms.apply(this,arguments)}(),!p.activeServiceWorker)return;p.sender=new Gc(p.activeServiceWorker);const R=yield p.sender._send("ping",{},800);!R||(null===(v=R[0])||void 0===v?void 0:v.fulfilled)&&(null===(T=R[0])||void 0===T?void 0:T.value.includes("keyChanged"))&&(p.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(p){var v=this;return(0,g.Z)(function*(){if(v.sender&&v.activeServiceWorker&&function Pp(){var y;return(null===(y=null==navigator?void 0:navigator.serviceWorker)||void 0===y?void 0:y.controller)||null}()===v.activeServiceWorker)try{yield v.sender._send("keyChanged",{key:p},v.serviceWorkerReceiverAvailable?800:50)}catch(T){}})()}_isAvailable(){return(0,g.Z)(function*(){try{if(!indexedDB)return!1;const p=yield no();return yield gl(p,dl,"1"),yield xs(p,dl),!0}catch(p){}return!1})()}_withPendingWrite(p){var v=this;return(0,g.Z)(function*(){v.pendingWrites++;try{yield p()}finally{v.pendingWrites--}})()}_set(p,v){var T=this;return(0,g.Z)(function*(){return T._withPendingWrite((0,g.Z)(function*(){return yield T._withRetries(R=>gl(R,p,v)),T.localCache[p]=v,T.notifyServiceWorker(p)}))})()}_get(p){var v=this;return(0,g.Z)(function*(){const T=yield v._withRetries(R=>function sa(y,h){return hi.apply(this,arguments)}(R,p));return v.localCache[p]=T,T})()}_remove(p){var v=this;return(0,g.Z)(function*(){return v._withPendingWrite((0,g.Z)(function*(){return yield v._withRetries(T=>xs(T,p)),delete v.localCache[p],v.notifyServiceWorker(p)}))})()}_poll(){var p=this;return(0,g.Z)(function*(){const v=yield p._withRetries(G=>{const ne=Ro(G,!1).getAll();return new $n(ne).toPromise()});if(!v)return[];if(0!==p.pendingWrites)return[];const T=[],R=new Set;for(const{fbase_key:G,value:ne}of v)R.add(G),JSON.stringify(p.localCache[G])!==JSON.stringify(ne)&&(p.notifyListeners(G,ne),T.push(G));for(const G of Object.keys(p.localCache))p.localCache[G]&&!R.has(G)&&(p.notifyListeners(G,null),T.push(G));return T})()}notifyListeners(p,v){this.localCache[p]=v;const T=this.listeners[p];if(T)for(const R of Array.from(T))R(v)}startPolling(){var p=this;this.stopPolling(),this.pollTimer=setInterval((0,g.Z)(function*(){return p._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(p,v){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[p]||(this.listeners[p]=new Set,this._get(p)),this.listeners[p].add(v)}_removeListener(p,v){this.listeners[p]&&(this.listeners[p].delete(v),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})();function qc(y,h){return Lt(y,"POST","/v2/accounts/mfaSignIn:start",Kt(y,h))}function Di(){return(Di=(0,g.Z)(function*(y){return(yield Lt(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function so(y){return new Promise((h,p)=>{const v=document.createElement("script");v.setAttribute("src",y),v.onload=h,v.onerror=T=>{const R=ye("internal-error");R.customData=T,p(R)},v.type="text/javascript",v.charset="UTF-8",function _l(){var y,h;return null!==(h=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==h?h:document}().appendChild(v)})}function aa(y){return`__${y}${Math.floor(1e6*Math.random())}`}const fi=1e12;class zc{constructor(h){this.auth=h,this.counter=fi,this._widgets=new Map}render(h,p){const v=this.counter;return this._widgets.set(v,new nu(h,this.auth.name,p||{})),this.counter++,v}reset(h){var p;const v=h||fi;null===(p=this._widgets.get(v))||void 0===p||p.delete(),this._widgets.delete(v)}getResponse(h){var p;return(null===(p=this._widgets.get(h||fi))||void 0===p?void 0:p.getResponse())||""}execute(h){var p=this;return(0,g.Z)(function*(){var v;return null===(v=p._widgets.get(h||fi))||void 0===v||v.execute(),""})()}}class nu{constructor(h,p,v){this.params=v,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const T="string"==typeof h?document.getElementById(h):h;ee(T,"argument-error",{appName:p}),this.container=T,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function oo(y){const h=[],p="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let v=0;v<y;v++)h.push(p.charAt(Math.floor(Math.random()*p.length)));return h.join("")}(50);const{callback:h,"expired-callback":p}=this.params;if(h)try{h(this.responseToken)}catch(v){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,p)try{p()}catch(v){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const ru=aa("rcb"),Rh=new an(3e4,6e4);class Wc{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Qt().grecaptcha}load(h,p=""){return ee(function kp(y){return y.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y)}(p),h,"argument-error"),this.shouldResolveImmediately(p)?Promise.resolve(Qt().grecaptcha):new Promise((v,T)=>{const R=Qt().setTimeout(()=>{T(ye(h,"network-request-failed"))},Rh.get());Qt()[ru]=()=>{Qt().clearTimeout(R),delete Qt()[ru];const ne=Qt().grecaptcha;if(!ne)return void T(ye(h,"internal-error"));const ke=ne.render;ne.render=(Ke,gt)=>{const ot=ke(Ke,gt);return this.counter++,ot},this.hostLanguage=p,v(ne)},so(`https://www.google.com/recaptcha/api.js??${(0,O.xO)({onload:ru,render:"explicit",hl:p})}`).catch(()=>{clearTimeout(R),T(ye(h,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(h){return!!Qt().grecaptcha&&(h===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Kc{load(h){return(0,g.Z)(function*(){return new zc(h)})()}clearedOneInstance(){}}const vl="recaptcha",Zc={theme:"light",type:"image"};class Nh{constructor(h,p=Object.assign({},Zc),v){this.parameters=p,this.type=vl,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Re(v),this.isInvisible="invisible"===this.parameters.size,ee("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const T="string"==typeof h?document.getElementById(h):h;ee(T,this.auth,"argument-error"),this.container=T,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Kc:new Wc,this.validateStartingState()}verify(){var h=this;return(0,g.Z)(function*(){h.assertNotDestroyed();const p=yield h.render(),v=h.getAssertedRecaptcha();return v.getResponse(p)||new Promise(R=>{const G=ne=>{!ne||(h.tokenChangeListeners.delete(G),R(ne))};h.tokenChangeListeners.add(G),h.isInvisible&&v.execute(p)})})()}render(){try{this.assertNotDestroyed()}catch(h){return Promise.reject(h)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(h=>{throw this.renderPromise=null,h})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(h=>{this.container.removeChild(h)})}validateStartingState(){ee(!this.parameters.sitekey,this.auth,"argument-error"),ee(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ee("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(h){return p=>{if(this.tokenChangeListeners.forEach(v=>v(p)),"function"==typeof h)h(p);else if("string"==typeof h){const v=Qt()[h];"function"==typeof v&&v(p)}}}assertNotDestroyed(){ee(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var h=this;return(0,g.Z)(function*(){if(yield h.init(),!h.widgetId){let p=h.container;if(!h.isInvisible){const v=document.createElement("div");p.appendChild(v),p=v}h.widgetId=h.getAssertedRecaptcha().render(p,h.parameters)}return h.widgetId})()}init(){var h=this;return(0,g.Z)(function*(){ee(Wt()&&!mn(),h.auth,"internal-error"),yield function Yc(){let y=null;return new Promise(h=>{"complete"!==document.readyState?(y=()=>h(),window.addEventListener("load",y)):h()}).catch(h=>{throw y&&window.removeEventListener("load",y),h})}(),h.recaptcha=yield h._recaptchaLoader.load(h.auth,h.auth.languageCode||void 0);const p=yield function yl(y){return Di.apply(this,arguments)}(h.auth);ee(p,h.auth,"internal-error"),h.parameters.sitekey=p})()}getAssertedRecaptcha(){return ee(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Pi{constructor(h,p){this.verificationId=h,this.onConfirmation=p}confirm(h){const p=Do._fromVerification(this.verificationId,h);return this.onConfirmation(p)}}function _n(){return(_n=(0,g.Z)(function*(y,h,p){const v=Re(y),T=yield Tr(v,h,(0,O.m9)(p));return new Pi(T,R=>Mn(v,R))})).apply(this,arguments)}function qr(){return(qr=(0,g.Z)(function*(y,h,p){const v=(0,O.m9)(y);yield ws(!1,v,"phone");const T=yield Tr(v.auth,h,(0,O.m9)(p));return new Pi(T,R=>wi(v,R))})).apply(this,arguments)}function su(){return(su=(0,g.Z)(function*(y,h,p){const v=(0,O.m9)(y),T=yield Tr(v.auth,h,(0,O.m9)(p));return new Pi(T,R=>Is(v,R))})).apply(this,arguments)}function Tr(y,h,p){return bi.apply(this,arguments)}function bi(){return(bi=(0,g.Z)(function*(y,h,p){var v;const T=yield p.verify();try{let R;if(ee("string"==typeof T,y,"argument-error"),ee(p.type===vl,y,"argument-error"),R="string"==typeof h?{phoneNumber:h}:h,"session"in R){const G=R.session;if("phoneNumber"in R)return ee("enroll"===G.type,y,"internal-error"),(yield Vn(y,{idToken:G.credential,phoneEnrollmentInfo:{phoneNumber:R.phoneNumber,recaptchaToken:T}})).phoneSessionInfo.sessionInfo;{ee("signin"===G.type,y,"internal-error");const ne=(null===(v=R.multiFactorHint)||void 0===v?void 0:v.uid)||R.multiFactorUid;return ee(ne,y,"missing-multi-factor-info"),(yield qc(y,{mfaPendingCredential:G.credential,mfaEnrollmentId:ne,phoneSignInInfo:{recaptchaToken:T}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:G}=yield Ap(y,{phoneNumber:R.phoneNumber,recaptchaToken:T});return G}}finally{p._reset()}})).apply(this,arguments)}function Rs(){return(Rs=(0,g.Z)(function*(y,h){yield hn((0,O.m9)(y),h)})).apply(this,arguments)}let zr=(()=>{class y{constructor(p){this.providerId=y.PROVIDER_ID,this.auth=Re(p)}verifyPhoneNumber(p,v){return Tr(this.auth,p,(0,O.m9)(v))}static credential(p,v){return Do._fromVerification(p,v)}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{phoneNumber:v,temporaryProof:T}=p;return v&&T?Do._fromTokenResponse(v,T):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function Wr(y,h){return h?re(h):(ee(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class ua extends en{constructor(h){super("custom","custom"),this.params=h}_getIdTokenResponse(h){return Ln(h,this._buildIdpRequest())}_linkToIdToken(h,p){return Ln(h,this._buildIdpRequest(p))}_getReauthenticationResolver(h){return Ln(h,this._buildIdpRequest())}_buildIdpRequest(h){const p={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return h&&(p.idToken=h),p}}function la(y){return Zs(y.auth,new ua(y),y.bypassAuthState)}function Jc(y){const{auth:h,user:p}=y;return ee(p,h,"internal-error"),Pc(p,new ua(y),y.bypassAuthState)}function Ph(y){return Xc.apply(this,arguments)}function Xc(){return(Xc=(0,g.Z)(function*(y){const{auth:h,user:p}=y;return ee(p,h,"internal-error"),hn(p,new ua(y),y.bypassAuthState)})).apply(this,arguments)}class pi{constructor(h,p,v,T,R=!1){this.auth=h,this.resolver=v,this.user=T,this.bypassAuthState=R,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(p)?p:[p]}execute(){var h=this;return new Promise(function(){var p=(0,g.Z)(function*(v,T){h.pendingPromise={resolve:v,reject:T};try{h.eventManager=yield h.resolver._initialize(h.auth),yield h.onExecution(),h.eventManager.registerConsumer(h)}catch(R){h.reject(R)}});return function(v,T){return p.apply(this,arguments)}}())}onAuthEvent(h){var p=this;return(0,g.Z)(function*(){const{urlResponse:v,sessionId:T,postBody:R,tenantId:G,error:ne,type:ke}=h;if(ne)return void p.reject(ne);const Ke={auth:p.auth,requestUri:v,sessionId:T,tenantId:G||void 0,postBody:R||void 0,user:p.user,bypassAuthState:p.bypassAuthState};try{p.resolve(yield p.getIdpTask(ke)(Ke))}catch(gt){p.reject(gt)}})()}onError(h){this.reject(h)}getIdpTask(h){switch(h){case"signInViaPopup":case"signInViaRedirect":return la;case"linkViaPopup":case"linkViaRedirect":return Ph;case"reauthViaPopup":case"reauthViaRedirect":return Jc;default:De(this.auth,"internal-error")}}resolve(h){te(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(h),this.unregisterAndCleanUp()}reject(h){te(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(h),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const kh=new an(2e3,1e4);function Fh(){return(Fh=(0,g.Z)(function*(y,h,p){const v=Re(y);je(y,h,vs);const T=Wr(v,p);return new rs(v,"signInViaPopup",h,T).executeNotNull()})).apply(this,arguments)}function da(){return(da=(0,g.Z)(function*(y,h,p){const v=(0,O.m9)(y);je(v.auth,h,vs);const T=Wr(v.auth,p);return new rs(v.auth,"reauthViaPopup",h,T,v).executeNotNull()})).apply(this,arguments)}function El(){return(El=(0,g.Z)(function*(y,h,p){const v=(0,O.m9)(y);je(v.auth,h,vs);const T=Wr(v.auth,p);return new rs(v.auth,"linkViaPopup",h,T,v).executeNotNull()})).apply(this,arguments)}let rs=(()=>{class y extends pi{constructor(p,v,T,R,G){super(p,v,R,G),this.provider=T,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var p=this;return(0,g.Z)(function*(){const v=yield p.execute();return ee(v,p.auth,"internal-error"),v})()}onExecution(){var p=this;return(0,g.Z)(function*(){te(1===p.filter.length,"Popup operations only handle one event");const v=eo();p.authWindow=yield p.resolver._openPopup(p.auth,p.provider,p.filter[0],v),p.authWindow.associatedEvent=v,p.resolver._originValidation(p.auth).catch(T=>{p.reject(T)}),p.resolver._isIframeWebStorageSupported(p.auth,T=>{T||p.reject(ye(p.auth,"web-storage-unsupported"))}),p.pollUserCancellation()})()}get eventId(){var p;return(null===(p=this.authWindow)||void 0===p?void 0:p.associatedEvent)||null}cancel(){this.reject(ye(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const p=()=>{var v,T;this.pollId=(null===(T=null===(v=this.authWindow)||void 0===v?void 0:v.window)||void 0===T?void 0:T.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(ye(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(p,kh.get())};p()}}return y.currentPopupAction=null,y})();const vr=new Map;class ha extends pi{constructor(h,p,v=!1){super(h,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],p,void 0,v),this.eventId=null}execute(){var h=()=>super.execute,p=this;return(0,g.Z)(function*(){let v=vr.get(p.auth._key());if(!v){try{const R=(yield function No(y,h){return wl.apply(this,arguments)}(p.resolver,p.auth))?yield h().call(p):null;v=()=>Promise.resolve(R)}catch(T){v=()=>Promise.reject(T)}vr.set(p.auth._key(),v)}return p.bypassAuthState||vr.set(p.auth._key(),()=>Promise.resolve(null)),v()})()}onAuthEvent(h){var p=()=>super.onAuthEvent,v=this;return(0,g.Z)(function*(){if("signInViaRedirect"===h.type)return p().call(v,h);if("unknown"!==h.type){if(h.eventId){const T=yield v.auth._redirectUserForId(h.eventId);if(T)return v.user=T,p().call(v,h);v.resolve(null)}}else v.resolve(null)})()}onExecution(){return(0,g.Z)(function*(){})()}cleanUp(){}}function wl(){return(wl=(0,g.Z)(function*(y,h){const p=b(h),v=D(y);if(!(yield v._isAvailable()))return!1;const T="true"===(yield v._get(p));return yield v._remove(p),T})).apply(this,arguments)}function is(y,h){return Ns.apply(this,arguments)}function Ns(){return(Ns=(0,g.Z)(function*(y,h){return D(y)._set(b(h),"true")})).apply(this,arguments)}function D(y){return re(y._redirectPersistence)}function b(y){return le("pendingRedirect",y.config.apiKey,y.name)}function z(){return(z=(0,g.Z)(function*(y,h,p){const v=Re(y);je(y,h,vs);const T=Wr(v,p);return yield is(T,v),T._openRedirect(v,h,"signInViaRedirect")})).apply(this,arguments)}function ze(){return(ze=(0,g.Z)(function*(y,h,p){const v=(0,O.m9)(y);je(v.auth,h,vs);const T=Wr(v.auth,p);yield is(T,v.auth);const R=yield Oo(v);return T._openRedirect(v.auth,h,"reauthViaRedirect",R)})).apply(this,arguments)}function Bt(){return(Bt=(0,g.Z)(function*(y,h,p){const v=(0,O.m9)(y);je(v.auth,h,vs);const T=Wr(v.auth,p);yield ws(!1,v,h.providerId),yield is(T,v.auth);const R=yield Oo(v);return T._openRedirect(v.auth,h,"linkViaRedirect",R)})).apply(this,arguments)}function Rn(){return(Rn=(0,g.Z)(function*(y,h){return yield Re(y)._initializationPromise,vn(y,h,!1)})).apply(this,arguments)}function vn(y,h){return fa.apply(this,arguments)}function fa(){return(fa=(0,g.Z)(function*(y,h,p=!1){const v=Re(y),T=Wr(v,h),G=yield new ha(v,T,p).execute();return G&&!p&&(delete G.user._redirectEventId,yield v._persistUserIfCurrent(G.user),yield v._setRedirectUser(null,h)),G})).apply(this,arguments)}function Oo(y){return Ar.apply(this,arguments)}function Ar(){return(Ar=(0,g.Z)(function*(y){const h=eo(`${y.uid}:::`);return y._redirectEventId=h,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),h})).apply(this,arguments)}class Kr{constructor(h){this.auth=h,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(h){this.consumers.add(h),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,h)&&(this.sendToConsumer(this.queuedRedirectEvent,h),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(h){this.consumers.delete(h)}onEvent(h){if(this.hasEventBeenHandled(h))return!1;let p=!1;return this.consumers.forEach(v=>{this.isEventForConsumer(h,v)&&(p=!0,this.sendToConsumer(h,v),this.saveEventToCache(h))}),this.hasHandledPotentialRedirect||!function ed(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Fp(y);default:return!1}}(h)||(this.hasHandledPotentialRedirect=!0,p||(this.queuedRedirectEvent=h,p=!0)),p}sendToConsumer(h,p){var v;if(h.error&&!Fp(h)){const T=(null===(v=h.error.code)||void 0===v?void 0:v.split("auth/")[1])||"internal-error";p.onError(ye(this.auth,T))}else p.onAuthEvent(h)}isEventForConsumer(h,p){const v=null===p.eventId||!!h.eventId&&h.eventId===p.eventId;return p.filter.includes(h.type)&&v}hasEventBeenHandled(h){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ci(h))}saveEventToCache(h){this.cachedEventUids.add(Ci(h)),this.lastProcessedEventTime=Date.now()}}function Ci(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(h=>h).join("-")}function Fp({type:y,error:h}){return"unknown"===y&&"auth/no-auth-event"===(null==h?void 0:h.code)}function Dl(y){return Po.apply(this,arguments)}function Po(){return(Po=(0,g.Z)(function*(y,h={}){return Lt(y,"GET","/v1/projects",h)})).apply(this,arguments)}const Vh=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,td=/^https?/;function Os(){return(Os=(0,g.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:h}=yield Dl(y);for(const p of h)try{if(bl(p))return}catch(v){}De(y,"unauthorized-domain")})).apply(this,arguments)}function bl(y){const h=Et(),{protocol:p,hostname:v}=new URL(h);if(y.startsWith("chrome-extension://")){const G=new URL(y);return""===G.hostname&&""===v?"chrome-extension:"===p&&y.replace("chrome-extension://","")===h.replace("chrome-extension://",""):"chrome-extension:"===p&&G.hostname===v}if(!td.test(p))return!1;if(Vh.test(y))return v===y;const T=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+T+"|"+T+")$","i").test(v)}const Vp=new an(3e4,6e4);function Up(){const y=Qt().___jsl;if(null==y?void 0:y.H)for(const h of Object.keys(y.H))if(y.H[h].r=y.H[h].r||[],y.H[h].L=y.H[h].L||[],y.H[h].r=[...y.H[h].L],y.CP)for(let p=0;p<y.CP.length;p++)y.CP[p]=null}let au=null;function ey(y){return au=au||function Uh(y){return new Promise((h,p)=>{var v,T,R;function G(){Up(),gapi.load("gapi.iframes",{callback:()=>{h(gapi.iframes.getContext())},ontimeout:()=>{Up(),p(ye(y,"network-request-failed"))},timeout:Vp.get()})}if(null===(T=null===(v=Qt().gapi)||void 0===v?void 0:v.iframes)||void 0===T?void 0:T.Iframe)h(gapi.iframes.getContext());else{if(!(null===(R=Qt().gapi)||void 0===R?void 0:R.load)){const ne=aa("iframefcb");return Qt()[ne]=()=>{gapi.load?G():p(ye(y,"network-request-failed"))},so(`https://apis.google.com/js/api.js?onload=${ne}`).catch(ke=>p(ke))}G()}}).catch(h=>{throw au=null,h})}(y),au}const Bh=new an(5e3,15e3),ko={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Cl=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function pa(y){const h=y.config;ee(h.authDomain,y,"auth-domain-config-required");const p=h.emulator?un(h,"emulator/auth/iframe"):`https://${y.config.authDomain}/__/auth/iframe`,v={apiKey:h.apiKey,appName:y.name,v:oe.SDK_VERSION},T=Cl.get(y.config.apiHost);T&&(v.eid=T);const R=y._getFrameworks();return R.length&&(v.fw=R.join(",")),`${p}?${(0,O.xO)(v).slice(1)}`}function Bp(){return Bp=(0,g.Z)(function*(y){const h=yield ey(y),p=Qt().gapi;return ee(p,y,"internal-error"),h.open({where:document.body,url:pa(y),messageHandlersFilter:p.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ko,dontclear:!0},v=>new Promise(function(){var T=(0,g.Z)(function*(R,G){yield v.restyle({setHideOnLeave:!1});const ne=ye(y,"network-request-failed"),ke=Qt().setTimeout(()=>{G(ne)},Bh.get());function Ke(){Qt().clearTimeout(ke),R(v)}v.ping(Ke).then(Ke,()=>{G(ne)})});return function(R,G){return T.apply(this,arguments)}}()))}),Bp.apply(this,arguments)}const WI={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class nd{constructor(h){this.window=h,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(h){}}}function qh(y,h,p,v,T,R){ee(y.config.authDomain,y,"auth-domain-config-required"),ee(y.config.apiKey,y,"invalid-api-key");const G={apiKey:y.config.apiKey,appName:y.name,authType:p,redirectUrl:v,v:oe.SDK_VERSION,eventId:T};if(h instanceof vs){h.setDefaultLanguage(y.languageCode),G.providerId=h.providerId||"",(0,O.xb)(h.getCustomParameters())||(G.customParameters=JSON.stringify(h.getCustomParameters()));for(const[ke,Ke]of Object.entries(R||{}))G[ke]=Ke}if(h instanceof Br){const ke=h.getScopes().filter(Ke=>""!==Ke);ke.length>0&&(G.scopes=ke.join(","))}y.tenantId&&(G.tid=y.tenantId);const ne=G;for(const ke of Object.keys(ne))void 0===ne[ke]&&delete ne[ke];return`${function r0({config:y}){return y.emulator?un(y,"emulator/auth/handler"):`https://${y.authDomain}/__/auth/handler`}(y)}?${(0,O.xO)(ne).slice(1)}`}const ss="webStorageSupport";class Wh extends class s0{constructor(h){this.factorId=h}_process(h,p,v){switch(p.type){case"enroll":return this._finalizeEnroll(h,p.credential,v);case"signin":return this._finalizeSignIn(h,p.credential);default:return q("unexpected MultiFactorSessionType")}}}{constructor(h){super("phone"),this.credential=h}static _fromCredential(h){return new Wh(h)}_finalizeEnroll(h,p,v){return function jc(y,h){return Lt(y,"POST","/v2/accounts/mfaEnrollment:finalize",Kt(y,h))}(h,{idToken:p,displayName:v,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(h,p){return function oa(y,h){return Lt(y,"POST","/v2/accounts/mfaSignIn:finalize",Kt(y,h))}(h,{mfaPendingCredential:p,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let sy=(()=>{class y{constructor(){}static assertion(p){return Wh._fromCredential(p)}}return y.FACTOR_ID="phone",y})();var oy="@firebase/auth",Hp="0.19.11";class Gp{constructor(h){this.auth=h,this.internalListeners=new Map}getUid(){var h;return this.assertAuthConfigured(),(null===(h=this.auth.currentUser)||void 0===h?void 0:h.uid)||null}getToken(h){var p=this;return(0,g.Z)(function*(){return p.assertAuthConfigured(),yield p.auth._initializationPromise,p.auth.currentUser?{accessToken:yield p.auth.currentUser.getIdToken(h)}:null})()}addAuthTokenListener(h){if(this.assertAuthConfigured(),this.internalListeners.has(h))return;const p=this.auth.onIdTokenChanged(v=>{var T;h((null===(T=v)||void 0===T?void 0:T.stsTokenManager.accessToken)||null)});this.internalListeners.set(h,p),this.updateProactiveRefresh()}removeAuthTokenListener(h){this.assertAuthConfigured();const p=this.internalListeners.get(h);!p||(this.internalListeners.delete(h),p(),this.updateProactiveRefresh())}assertAuthConfigured(){ee(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function ga(){return window}function uu(){return(uu=(0,g.Z)(function*(y,h,p){var v;const{BuildInfo:T}=ga();te(h.sessionId,"AuthEvent did not contain a session ID");const R=yield o0(h.sessionId),G={};return Qn()?G.ibi=T.packageName:In()?G.apn=T.packageName:De(y,"operation-not-supported-in-this-environment"),T.displayName&&(G.appDisplayName=T.displayName),G.sessionId=R,qh(y,p,h.type,void 0,null!==(v=h.eventId)&&void 0!==v?v:void 0,G)})).apply(this,arguments)}function ki(){return(ki=(0,g.Z)(function*(y){const{BuildInfo:h}=ga(),p={};Qn()?p.iosBundleId=h.packageName:In()?p.androidPackageName=h.packageName:De(y,"operation-not-supported-in-this-environment"),yield Dl(y,p)})).apply(this,arguments)}function cu(){return(cu=(0,g.Z)(function*(y,h,p){const{cordova:v}=ga();let T=()=>{};try{yield new Promise((R,G)=>{let ne=null;function ke(){var ot;R();const Cn=null===(ot=v.plugins.browsertab)||void 0===ot?void 0:ot.close;"function"==typeof Cn&&Cn(),"function"==typeof(null==p?void 0:p.close)&&p.close()}function Ke(){ne||(ne=window.setTimeout(()=>{G(ye(y,"redirect-cancelled-by-user"))},2e3))}function gt(){"visible"===(null==document?void 0:document.visibilityState)&&Ke()}h.addPassiveListener(ke),document.addEventListener("resume",Ke,!1),In()&&document.addEventListener("visibilitychange",gt,!1),T=()=>{h.removePassiveListener(ke),document.removeEventListener("resume",Ke,!1),document.removeEventListener("visibilitychange",gt,!1),ne&&window.clearTimeout(ne)}})}finally{T()}})).apply(this,arguments)}function o0(y){return Yh.apply(this,arguments)}function Yh(){return(Yh=(0,g.Z)(function*(y){const h=a0(y),p=yield crypto.subtle.digest("SHA-256",h);return Array.from(new Uint8Array(p)).map(T=>T.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function a0(y){if(te(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(y);const h=new ArrayBuffer(y.length),p=new Uint8Array(h);for(let v=0;v<y.length;v++)p[v]=y.charCodeAt(v);return p}!function ay(y){(0,oe._registerComponent)(new ie.wA("auth",(h,{options:p})=>{const v=h.getProvider("app").getImmediate(),T=h.getProvider("heartbeat"),{apiKey:R,authDomain:G}=v.options;return((ne,ke)=>{ee(R&&!R.includes(":"),"invalid-api-key",{appName:ne.name}),ee(!(null==G?void 0:G.includes(":")),"argument-error",{appName:ne.name});const Ke={apiKey:R,authDomain:G,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Zo(y)},gt=new ai(ne,ke,Ke);return function se(y,h){const p=(null==h?void 0:h.persistence)||[],v=(Array.isArray(p)?p:[p]).map(re);(null==h?void 0:h.errorMap)&&y._updateErrorMap(h.errorMap),y._initializeWithPersistence(v,null==h?void 0:h.popupRedirectResolver)}(gt,p),gt})(v,T)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((h,p,v)=>{h.getProvider("auth-internal").initialize()})),(0,oe._registerComponent)(new ie.wA("auth-internal",h=>{const p=Re(h.getProvider("auth").getImmediate());return new Gp(p)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,oe.registerVersion)(oy,Hp,function Kh(y){switch(y){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(y)),(0,oe.registerVersion)(oy,Hp,"esm2017")}("Browser");class Al extends Kr{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(h=>{this.resolveInialized=h})}addPassiveListener(h){this.passiveListeners.add(h)}removePassiveListener(h){this.passiveListeners.delete(h)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(h){return this.resolveInialized(),this.passiveListeners.forEach(p=>p(h)),super.onEvent(h)}initialized(){var h=this;return(0,g.Z)(function*(){yield h.initPromise})()}}function ly(y){return Sl.apply(this,arguments)}function Sl(){return(Sl=(0,g.Z)(function*(y){const h=yield rd()._get(Jh(y));return h&&(yield rd()._remove(Jh(y))),h})).apply(this,arguments)}function cy(){const y=[],h="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let p=0;p<20;p++){const v=Math.floor(Math.random()*h.length);y.push(h.charAt(v))}return y.join("")}function rd(){return re(gn)}function Jh(y){return le("authEvent",y.config.apiKey,y.name)}function sd(y){if(!(null==y?void 0:y.includes("?")))return{};const[h,...p]=y.split("?");return(0,O.zd)(p.join("?"))}function ef(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:ye("no-auth-event")}}function ad(){var y;return(null===(y=null==self?void 0:self.location)||void 0===y?void 0:y.protocol)||null}function hy(y=(0,O.z$)()){return!("file:"!==ad()&&"ionic:"!==ad()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function Zr(){try{const y=self.localStorage,h=eo();if(y)return y.setItem(h,"1"),y.removeItem(h),!function xl(y=(0,O.z$)()){return function KI(){return(0,O.w1)()&&11===(null==document?void 0:document.documentMode)}()||function l0(y=(0,O.z$)()){return/Edge\/\d+/.test(y)}(y)}()||(0,O.hl)()}catch(y){return ud()&&(0,O.hl)()}return!1}function ud(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function tf(){return(function eg(){return"http:"===ad()||"https:"===ad()}()||(0,O.ru)()||hy())&&!function u0(){return(0,O.b$)()||(0,O.UG)()}()&&Zr()&&!ud()}function tg(){return hy()&&"undefined"!=typeof document}function gi(){return(gi=(0,g.Z)(function*(){return!!tg()&&new Promise(y=>{const h=setTimeout(()=>{y(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(h),y(!0)})})})).apply(this,arguments)}const Er={LOCAL:"local",NONE:"none",SESSION:"session"},Rl=ee,nf="persistence";function Nl(y){return Ol.apply(this,arguments)}function Ol(){return(Ol=(0,g.Z)(function*(y){yield y._initializationPromise;const h=ng(),p=le(nf,y.config.apiKey,y.name);h&&h.setItem(p,y._getPersistence())})).apply(this,arguments)}function ng(){var y;try{return(null===(y=function Ti(){return"undefined"!=typeof window?window:null}())||void 0===y?void 0:y.sessionStorage)||null}catch(h){return null}}const ld=ee;class Ai{constructor(){this.browserResolver=re(class Tl{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Xi,this._completeRedirectFn=vn}_openPopup(h,p,v,T){var R=this;return(0,g.Z)(function*(){var G;te(null===(G=R.eventManagers[h._key()])||void 0===G?void 0:G.manager,"_initialize() not called before _openPopup()");const ne=qh(h,p,v,Et(),T);return function Gh(y,h,p,v=500,T=600){const R=Math.max((window.screen.availHeight-T)/2,0).toString(),G=Math.max((window.screen.availWidth-v)/2,0).toString();let ne="";const ke=Object.assign(Object.assign({},WI),{width:v.toString(),height:T.toString(),top:R,left:G}),Ke=(0,O.z$)().toLowerCase();p&&(ne=pr(Ke)?"_blank":p),pt(Ke)&&(h=h||"http://localhost",ke.scrollbars="yes");const gt=Object.entries(ke).reduce((Cn,[Fi,Fl])=>`${Cn}${Fi}=${Fl},`,"");if(function Pa(y=(0,O.z$)()){var h;return Qn(y)&&!!(null===(h=window.navigator)||void 0===h?void 0:h.standalone)}(Ke)&&"_self"!==ne)return function ry(y,h){const p=document.createElement("a");p.href=y,p.target=h;const v=document.createEvent("MouseEvent");v.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),p.dispatchEvent(v)}(h||"",ne),new nd(null);const ot=window.open(h||"",ne,gt);ee(ot,y,"popup-blocked");try{ot.focus()}catch(Cn){}return new nd(ot)}(h,ne,eo())})()}_openRedirect(h,p,v,T){var R=this;return(0,g.Z)(function*(){return yield R._originValidation(h),function xo(y){Qt().location.href=y}(qh(h,p,v,Et(),T)),new Promise(()=>{})})()}_initialize(h){const p=h._key();if(this.eventManagers[p]){const{manager:T,promise:R}=this.eventManagers[p];return T?Promise.resolve(T):(te(R,"If manager is not set, promise should be"),R)}const v=this.initAndGetManager(h);return this.eventManagers[p]={promise:v},v.catch(()=>{delete this.eventManagers[p]}),v}initAndGetManager(h){var p=this;return(0,g.Z)(function*(){const v=yield function n0(y){return Bp.apply(this,arguments)}(h),T=new Kr(h);return v.register("authEvent",R=>(ee(null==R?void 0:R.authEvent,h,"invalid-auth-event"),{status:T.onEvent(R.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),p.eventManagers[h._key()]={manager:T},p.iframes[h._key()]=v,T})()}_isIframeWebStorageSupported(h,p){this.iframes[h._key()].send(ss,{type:ss},T=>{var R;const G=null===(R=null==T?void 0:T[0])||void 0===R?void 0:R[ss];void 0!==G&&p(!!G),De(h,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(h){const p=h._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function Lp(y){return Os.apply(this,arguments)}(h)),this.originValidationPromises[p]}get _shouldInitProactively(){return qi()||qt()||Qn()}}),this.cordovaResolver=re(class Qp{constructor(){this._redirectPersistence=Xi,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=vn}_initialize(h){var p=this;return(0,g.Z)(function*(){const v=h._key();let T=p.eventManagers.get(v);return T||(T=new Al(h),p.eventManagers.set(v,T),p.attachCallbackListeners(h,T)),T})()}_openPopup(h){De(h,"operation-not-supported-in-this-environment")}_openRedirect(h,p,v,T){var R=this;return(0,g.Z)(function*(){!function Zp(y){var h,p,v,T,R,G,ne,ke,Ke,gt;const ot=ga();ee("function"==typeof(null===(h=null==ot?void 0:ot.universalLinks)||void 0===h?void 0:h.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),ee(void 0!==(null===(p=null==ot?void 0:ot.BuildInfo)||void 0===p?void 0:p.packageName),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),ee("function"==typeof(null===(R=null===(T=null===(v=null==ot?void 0:ot.cordova)||void 0===v?void 0:v.plugins)||void 0===T?void 0:T.browsertab)||void 0===R?void 0:R.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ee("function"==typeof(null===(ke=null===(ne=null===(G=null==ot?void 0:ot.cordova)||void 0===G?void 0:G.plugins)||void 0===ne?void 0:ne.browsertab)||void 0===ke?void 0:ke.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ee("function"==typeof(null===(gt=null===(Ke=null==ot?void 0:ot.cordova)||void 0===Ke?void 0:Ke.InAppBrowser)||void 0===gt?void 0:gt.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(h);const G=yield R._initialize(h);yield G.initialized(),G.resetRedirect(),function Il(){vr.clear()}(),yield R._originValidation(h);const ne=function Qh(y,h,p=null){return{type:h,eventId:p,urlResponse:null,sessionId:cy(),postBody:null,tenantId:y.tenantId,error:ye(y,"no-auth-event")}}(h,v,T);yield function uy(y,h){return rd()._set(Jh(y),h)}(h,ne);const ke=yield function Wp(y,h,p){return uu.apply(this,arguments)}(h,ne,p),Ke=yield function lu(y){const{cordova:h}=ga();return new Promise(p=>{h.plugins.browsertab.isAvailable(v=>{let T=null;v?h.plugins.browsertab.openUrl(y):T=h.InAppBrowser.open(y,function Gs(y=(0,O.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}()?"_blank":"_system","location=yes"),p(T)})})}(ke);return function Kp(y,h,p){return cu.apply(this,arguments)}(h,G,Ke)})()}_isIframeWebStorageSupported(h,p){throw new Error("Method not implemented.")}_originValidation(h){const p=h._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function Zh(y){return ki.apply(this,arguments)}(h)),this.originValidationPromises[p]}attachCallbackListeners(h,p){const{universalLinks:v,handleOpenURL:T,BuildInfo:R}=ga(),G=setTimeout((0,g.Z)(function*(){yield ly(h),p.onEvent(ef())}),500),ne=function(){var gt=(0,g.Z)(function*(ot){clearTimeout(G);const Cn=yield ly(h);let Fi=null;Cn&&(null==ot?void 0:ot.url)&&(Fi=function ma(y,h){var p,v;const T=function id(y){const h=sd(y),p=h.link?decodeURIComponent(h.link):void 0,v=sd(p).link,T=h.deep_link_id?decodeURIComponent(h.deep_link_id):void 0;return sd(T).link||T||v||p||y}(h);if(T.includes("/__/auth/callback")){const R=sd(T),G=R.firebaseError?function Xh(y){try{return JSON.parse(y)}catch(h){return null}}(decodeURIComponent(R.firebaseError)):null,ne=null===(v=null===(p=null==G?void 0:G.code)||void 0===p?void 0:p.split("auth/"))||void 0===v?void 0:v[1],ke=ne?ye(ne):null;return ke?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:ke,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:T,postBody:null}}return null}(Cn,ot.url)),p.onEvent(Fi||ef())});return function(Cn){return gt.apply(this,arguments)}}();void 0!==v&&"function"==typeof v.subscribe&&v.subscribe(null,ne);const ke=T,Ke=`${R.packageName.toLowerCase()}://`;ga().handleOpenURL=function(){var gt=(0,g.Z)(function*(ot){if(ot.toLowerCase().startsWith(Ke)&&ne({url:ot}),"function"==typeof ke)try{ke(ot)}catch(Cn){console.error(Cn)}});return function(ot){return gt.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=Xi,this._completeRedirectFn=vn}_initialize(h){var p=this;return(0,g.Z)(function*(){return yield p.selectUnderlyingResolver(),p.assertedUnderlyingResolver._initialize(h)})()}_openPopup(h,p,v,T){var R=this;return(0,g.Z)(function*(){return yield R.selectUnderlyingResolver(),R.assertedUnderlyingResolver._openPopup(h,p,v,T)})()}_openRedirect(h,p,v,T){var R=this;return(0,g.Z)(function*(){return yield R.selectUnderlyingResolver(),R.assertedUnderlyingResolver._openRedirect(h,p,v,T)})()}_isIframeWebStorageSupported(h,p){this.assertedUnderlyingResolver._isIframeWebStorageSupported(h,p)}_originValidation(h){return this.assertedUnderlyingResolver._originValidation(h)}get _shouldInitProactively(){return tg()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return ld(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var h=this;return(0,g.Z)(function*(){if(h.underlyingResolver)return;const p=yield function Xe(){return gi.apply(this,arguments)}();h.underlyingResolver=p?h.cordovaResolver:h.browserResolver})()}}function rg(y){return y.unwrap()}function cd(y){return sf(y)}function sf(y){const{_tokenResponse:h}=y instanceof O.ZR?y.customData:y;if(!h)return null;if(!(y instanceof O.ZR)&&"temporaryProof"in h&&"phoneNumber"in h)return zr.credentialFromResult(y);const p=h.providerId;if(!p||"password"===p)return null;let v;switch(p){case"google.com":v=Qo;break;case"facebook.com":v=Ws;break;case"github.com":v=Nc;break;case"twitter.com":v=Ba;break;default:const{oauthIdToken:T,oauthAccessToken:R,oauthTokenSecret:G,pendingToken:ne,nonce:ke}=h;return R||G||T||ne?ne?p.startsWith("saml.")?Co._create(p,ne):Ki._fromParams({providerId:p,signInMethod:p,pendingToken:ne,idToken:T,accessToken:R}):new bo(p).credential({idToken:T,accessToken:R,rawNonce:ke}):null}return y instanceof O.ZR?v.credentialFromError(y):v.credentialFromResult(y)}function ln(y,h){return h.catch(p=>{throw p instanceof O.ZR&&function du(y,h){var p;const v=null===(p=h.customData)||void 0===p?void 0:p._tokenResponse;if("auth/multi-factor-auth-required"===h.code)h.resolver=new Yr(y,function eu(y,h){var p;const v=(0,O.m9)(y),T=h;return ee(h.customData.operationType,v,"argument-error"),ee(null===(p=T.customData._serverResponse)||void 0===p?void 0:p.mfaPendingCredential,v,"argument-error"),ra._fromError(v,T)}(y,h));else if(v){const T=sf(h),R=h;T&&(R.credential=T,R.tenantId=v.tenantId||void 0,R.email=v.email||void 0,R.phoneNumber=v.phoneNumber||void 0)}}(y,p),p}).then(p=>{const T=p.user;return{operationType:p.operationType,credential:cd(p),additionalUserInfo:_r(p),user:os.getOrCreate(T)}})}function dd(y,h){return of.apply(this,arguments)}function of(){return(of=(0,g.Z)(function*(y,h){const p=yield h;return{verificationId:p.verificationId,confirm:v=>ln(y,p.confirm(v))}})).apply(this,arguments)}class Yr{constructor(h,p){this.resolver=p,this.auth=function rf(y){return y.wrapped()}(h)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(h){return ln(rg(this.auth),this.resolver.resolveSignIn(h))}}class os{constructor(h){this._delegate=h,this.multiFactor=function $c(y){const h=(0,O.m9)(y);return Mo.has(h)||Mo.set(h,Ji._fromUser(h)),Mo.get(h)}(h)}static getOrCreate(h){return os.USER_MAP.has(h)||os.USER_MAP.set(h,new os(h)),os.USER_MAP.get(h)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(h){return this._delegate.getIdTokenResult(h)}getIdToken(h){return this._delegate.getIdToken(h)}linkAndRetrieveDataWithCredential(h){return this.linkWithCredential(h)}linkWithCredential(h){var p=this;return(0,g.Z)(function*(){return ln(p.auth,wi(p._delegate,h))})()}linkWithPhoneNumber(h,p){var v=this;return(0,g.Z)(function*(){return dd(v.auth,function iu(y,h,p){return qr.apply(this,arguments)}(v._delegate,h,p))})()}linkWithPopup(h){var p=this;return(0,g.Z)(function*(){return ln(p.auth,function Lh(y,h,p){return El.apply(this,arguments)}(p._delegate,h,Ai))})()}linkWithRedirect(h){var p=this;return(0,g.Z)(function*(){return yield Nl(Re(p.auth)),function Je(y,h,p){return function yt(y,h,p){return Bt.apply(this,arguments)}(y,h,p)}(p._delegate,h,Ai)})()}reauthenticateAndRetrieveDataWithCredential(h){return this.reauthenticateWithCredential(h)}reauthenticateWithCredential(h){var p=this;return(0,g.Z)(function*(){return ln(p.auth,Is(p._delegate,h))})()}reauthenticateWithPhoneNumber(h,p){return dd(this.auth,function Cr(y,h,p){return su.apply(this,arguments)}(this._delegate,h,p))}reauthenticateWithPopup(h){return ln(this.auth,function ao(y,h,p){return da.apply(this,arguments)}(this._delegate,h,Ai))}reauthenticateWithRedirect(h){var p=this;return(0,g.Z)(function*(){return yield Nl(Re(p.auth)),function X(y,h,p){return function Se(y,h,p){return ze.apply(this,arguments)}(y,h,p)}(p._delegate,h,Ai)})()}sendEmailVerification(h){return function Ii(y,h){return rl.apply(this,arguments)}(this._delegate,h)}unlink(h){var p=this;return(0,g.Z)(function*(){return yield function Jo(y,h){return Qu.apply(this,arguments)}(p._delegate,h),p})()}updateEmail(h){return function ol(y,h){return al((0,O.m9)(y),h,null)}(this._delegate,h)}updatePassword(h){return function Lc(y,h){return al((0,O.m9)(y),null,h)}(this._delegate,h)}updatePhoneNumber(h){return function Qc(y,h){return Rs.apply(this,arguments)}(this._delegate,h)}updateProfile(h){return function na(y,h){return sl.apply(this,arguments)}(this._delegate,h)}verifyBeforeUpdateEmail(h,p){return function Ja(y,h,p){return Xa.apply(this,arguments)}(this._delegate,h,p)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}os.USER_MAP=new WeakMap;const Fo=ee;let af=(()=>{class y{constructor(p,v){if(this.app=p,v.isInitialized())return this._delegate=v.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:T}=p.options;Fo(T,"invalid-api-key",{appName:p.name}),Fo(T,"invalid-api-key",{appName:p.name});const R="undefined"!=typeof window?Ai:void 0;this._delegate=v.initialize({options:{persistence:uo(T,p.name),popupRedirectResolver:R}}),this._delegate._updateErrorMap(xe),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?os.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(p){this._delegate.languageCode=p}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(p){this._delegate.tenantId=p}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(p,v){!function dn(y,h,p){const v=Re(y);ee(v._canInitEmulator,v,"emulator-config-failed"),ee(/^https?:\/\//.test(h),v,"invalid-emulator-scheme");const T=!!(null==p?void 0:p.disableWarnings),R=ir(h),{host:G,port:ne}=function ps(y){const h=ir(y),p=/(\/\/)?([^?#/]+)/.exec(y.substr(h.length));if(!p)return{host:"",port:null};const v=p[2].split("@").pop()||"",T=/^(\[[^\]]+\])(:|$)/.exec(v);if(T){const R=T[1];return{host:R,port:Fn(v.substr(R.length+1))}}{const[R,G]=v.split(":");return{host:R,port:Fn(G)}}}(h);v.config.emulator={url:`${R}//${G}${null===ne?"":`:${ne}`}/`},v.settings.appVerificationDisabledForTesting=!0,v.emulatorConfig=Object.freeze({host:G,port:ne,protocol:R.replace(":",""),options:Object.freeze({disableWarnings:T})}),T||function Oi(){function y(){const h=document.createElement("p"),p=h.style;h.innerText="Running in emulator mode. Do not use with production credentials.",p.position="fixed",p.width="100%",p.backgroundColor="#ffffff",p.border=".1em solid #000000",p.color="#b50000",p.bottom="0px",p.left="0px",p.margin="0px",p.zIndex="10000",p.textAlign="center",h.classList.add("firebase-emulator-warning"),document.body.appendChild(h)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}(this._delegate,p,v)}applyActionCode(p){return function Xu(y,h){return we.apply(this,arguments)}(this._delegate,p)}checkActionCode(p){return Rt(this._delegate,p)}confirmPasswordReset(p,v){return function Za(y,h,p){return Ju.apply(this,arguments)}(this._delegate,p,v)}createUserWithEmailAndPassword(p,v){var T=this;return(0,g.Z)(function*(){return ln(T._delegate,function So(y,h,p){return Hr.apply(this,arguments)}(T._delegate,p,v))})()}fetchProvidersForEmail(p){return this.fetchSignInMethodsForEmail(p)}fetchSignInMethodsForEmail(p){return function Qa(y,h){return Ts.apply(this,arguments)}(this._delegate,p)}isSignInWithEmailLink(p){return function nl(y,h){const p=zs.parseLink(h);return"EMAIL_SIGNIN"===(null==p?void 0:p.operation)}(0,p)}getRedirectResult(){var p=this;return(0,g.Z)(function*(){Fo(tf(),p._delegate,"operation-not-supported-in-this-environment");const v=yield function wt(y,h){return Rn.apply(this,arguments)}(p._delegate,Ai);return v?ln(p._delegate,Promise.resolve(v)):{credential:null,user:null}})()}addFrameworkForLogging(p){!function dy(y,h){Re(y)._logFramework(h)}(this._delegate,p)}onAuthStateChanged(p,v,T){const{next:R,error:G,complete:ne}=hu(p,v,T);return this._delegate.onAuthStateChanged(R,G,ne)}onIdTokenChanged(p,v,T){const{next:R,error:G,complete:ne}=hu(p,v,T);return this._delegate.onIdTokenChanged(R,G,ne)}sendSignInLinkToEmail(p,v){return function tl(y,h,p){return Fc.apply(this,arguments)}(this._delegate,p,v)}sendPasswordResetEmail(p,v){return function Wa(y,h,p){return Ka.apply(this,arguments)}(this._delegate,p,v||void 0)}setPersistence(p){var v=this;return(0,g.Z)(function*(){let T;switch(function fy(y,h){Rl(Object.values(Er).includes(h),y,"invalid-persistence-type"),(0,O.b$)()?Rl(h!==Er.SESSION,y,"unsupported-persistence-type"):(0,O.UG)()?Rl(h===Er.NONE,y,"unsupported-persistence-type"):ud()?Rl(h===Er.NONE||h===Er.LOCAL&&(0,O.hl)(),y,"unsupported-persistence-type"):Rl(h===Er.NONE||Zr(),y,"unsupported-persistence-type")}(v._delegate,p),p){case Er.SESSION:T=Xi;break;case Er.LOCAL:T=(yield re(es)._isAvailable())?es:gn;break;case Er.NONE:T=$;break;default:return De("argument-error",{appName:v._delegate.name})}return v._delegate.setPersistence(T)})()}signInAndRetrieveDataWithCredential(p){return this.signInWithCredential(p)}signInAnonymously(){return ln(this._delegate,function $a(y){return Oc.apply(this,arguments)}(this._delegate))}signInWithCredential(p){return ln(this._delegate,Mn(this._delegate,p))}signInWithCustomToken(p){return ln(this._delegate,function Ds(y,h){return bs.apply(this,arguments)}(this._delegate,p))}signInWithEmailAndPassword(p,v){return ln(this._delegate,function el(y,h,p){return Mn((0,O.m9)(y),Yu.credential(h,p))}(this._delegate,p,v))}signInWithEmailLink(p,v){return ln(this._delegate,function Ya(y,h,p){return Cs.apply(this,arguments)}(this._delegate,p,v))}signInWithPhoneNumber(p,v){return dd(this._delegate,function Oh(y,h,p){return _n.apply(this,arguments)}(this._delegate,p,v))}signInWithPopup(p){var v=this;return(0,g.Z)(function*(){return Fo(tf(),v._delegate,"operation-not-supported-in-this-environment"),ln(v._delegate,function ca(y,h,p){return Fh.apply(this,arguments)}(v._delegate,p,Ai))})()}signInWithRedirect(p){var v=this;return(0,g.Z)(function*(){return Fo(tf(),v._delegate,"operation-not-supported-in-this-environment"),yield Nl(v._delegate),function M(y,h,p){return function F(y,h,p){return z.apply(this,arguments)}(y,h,p)}(v._delegate,p,Ai)})()}updateCurrentUser(p){return this._delegate.updateCurrentUser(p)}verifyPasswordResetCode(p){return function pn(y,h){return Ao.apply(this,arguments)}(this._delegate,p)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=Er,y})();function hu(y,h,p){let v=y;"function"!=typeof y&&({next:v,error:h,complete:p}=y);const T=v;return{next:G=>T(G&&os.getOrCreate(G)),error:h,complete:p}}function uo(y,h){const p=function Pl(y,h){const p=ng();if(!p)return[];const v=le(nf,y,h);switch(p.getItem(v)){case Er.NONE:return[$];case Er.LOCAL:return[es,Xi];case Er.SESSION:return[Xi];default:return[]}}(y,h);if("undefined"!=typeof self&&!p.includes(es)&&p.push(es),"undefined"!=typeof window)for(const v of[gn,Xi])p.includes(v)||p.push(v);return p.includes($)||p.push($),p}class Ps{constructor(){this.providerId="phone",this._delegate=new zr(rg(Z.Z.auth()))}static credential(h,p){return zr.credential(h,p)}verifyPhoneNumber(h,p){return this._delegate.verifyPhoneNumber(h,p)}unwrap(){return this._delegate}}Ps.PHONE_SIGN_IN_METHOD=zr.PHONE_SIGN_IN_METHOD,Ps.PROVIDER_ID=zr.PROVIDER_ID;const Mr=ee;class kl{constructor(h,p,v=Z.Z.app()){var T;Mr(null===(T=v.options)||void 0===T?void 0:T.apiKey,"invalid-api-key",{appName:v.name}),this._delegate=new Nh(h,p,v.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function ig(y){y.INTERNAL.registerComponent(new ie.wA("auth-compat",h=>{const p=h.getProvider("app-compat").getImmediate(),v=h.getProvider("auth");return new af(p,v)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Yu,FacebookAuthProvider:Ws,GithubAuthProvider:Nc,GoogleAuthProvider:Qo,OAuthProvider:bo,SAMLAuthProvider:li,PhoneAuthProvider:Ps,PhoneMultiFactorGenerator:sy,RecaptchaVerifier:kl,TwitterAuthProvider:Ba,Auth:af,AuthCredential:en,Error:O.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.2.11")}(Z.Z)},8306:(it,Ce,k)=>{k.d(Ce,{y:()=>B});var g=k(2961),Z=k(727),O=k(8822),oe=k(4671);var ie=k(2416),de=k(576),ue=k(2806);let B=(()=>{class Te{constructor(Pe){Pe&&(this._subscribe=Pe)}lift(Pe){const he=new Te;return he.source=this,he.operator=Pe,he}subscribe(Pe,he,Ee){const Ye=function He(Te){return Te&&Te instanceof g.Lv||function Q(Te){return Te&&(0,de.m)(Te.next)&&(0,de.m)(Te.error)&&(0,de.m)(Te.complete)}(Te)&&(0,Z.Nn)(Te)}(Pe)?Pe:new g.Hp(Pe,he,Ee);return(0,ue.x)(()=>{const{operator:Ge,source:De}=this;Ye.add(Ge?Ge.call(Ye,De):De?this._subscribe(Ye):this._trySubscribe(Ye))}),Ye}_trySubscribe(Pe){try{return this._subscribe(Pe)}catch(he){Pe.error(he)}}forEach(Pe,he){return new(he=j(he))((Ee,Ye)=>{const Ge=new g.Hp({next:De=>{try{Pe(De)}catch(ye){Ye(ye),Ge.unsubscribe()}},error:Ye,complete:Ee});this.subscribe(Ge)})}_subscribe(Pe){var he;return null===(he=this.source)||void 0===he?void 0:he.subscribe(Pe)}[O.L](){return this}pipe(...Pe){return function pe(Te){return 0===Te.length?oe.y:1===Te.length?Te[0]:function(Pe){return Te.reduce((he,Ee)=>Ee(he),Pe)}}(Pe)(this)}toPromise(Pe){return new(Pe=j(Pe))((he,Ee)=>{let Ye;this.subscribe(Ge=>Ye=Ge,Ge=>Ee(Ge),()=>he(Ye))})}}return Te.create=xe=>new Te(xe),Te})();function j(Te){var xe;return null!==(xe=null!=Te?Te:ie.v.Promise)&&void 0!==xe?xe:Promise}},7579:(it,Ce,k)=>{k.d(Ce,{x:()=>ie});var g=k(8306),Z=k(727);const oe=(0,k(3888).d)(ue=>function(){ue(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var J=k(8737),pe=k(2806);let ie=(()=>{class ue extends g.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(j){const Q=new de(this,this);return Q.operator=j,Q}_throwIfClosed(){if(this.closed)throw new oe}next(j){(0,pe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Q of this.currentObservers)Q.next(j)}})}error(j){(0,pe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=j;const{observers:Q}=this;for(;Q.length;)Q.shift().error(j)}})}complete(){(0,pe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:j}=this;for(;j.length;)j.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var j;return(null===(j=this.observers)||void 0===j?void 0:j.length)>0}_trySubscribe(j){return this._throwIfClosed(),super._trySubscribe(j)}_subscribe(j){return this._throwIfClosed(),this._checkFinalizedStatuses(j),this._innerSubscribe(j)}_innerSubscribe(j){const{hasError:Q,isStopped:He,observers:Te}=this;return Q||He?Z.Lc:(this.currentObservers=null,Te.push(j),new Z.w0(()=>{this.currentObservers=null,(0,J.P)(Te,j)}))}_checkFinalizedStatuses(j){const{hasError:Q,thrownError:He,isStopped:Te}=this;Q?j.error(He):Te&&j.complete()}asObservable(){const j=new g.y;return j.source=this,j}}return ue.create=(B,j)=>new de(B,j),ue})();class de extends ie{constructor(B,j){super(),this.destination=B,this.source=j}next(B){var j,Q;null===(Q=null===(j=this.destination)||void 0===j?void 0:j.next)||void 0===Q||Q.call(j,B)}error(B){var j,Q;null===(Q=null===(j=this.destination)||void 0===j?void 0:j.error)||void 0===Q||Q.call(j,B)}complete(){var B,j;null===(j=null===(B=this.destination)||void 0===B?void 0:B.complete)||void 0===j||j.call(B)}_subscribe(B){var j,Q;return null!==(Q=null===(j=this.source)||void 0===j?void 0:j.subscribe(B))&&void 0!==Q?Q:Z.Lc}}},2961:(it,Ce,k)=>{k.d(Ce,{Hp:()=>Pe,Lv:()=>Q});var g=k(576),Z=k(727),O=k(2416),oe=k(7849);function J(){}const pe=ue("C",void 0,void 0);function ue(De,ye,ve){return{kind:De,value:ye,error:ve}}var B=k(3410),j=k(2806);class Q extends Z.w0{constructor(ye){super(),this.isStopped=!1,ye?(this.destination=ye,(0,Z.Nn)(ye)&&ye.add(this)):this.destination=Ge}static create(ye,ve,je){return new Pe(ye,ve,je)}next(ye){this.isStopped?Ye(function de(De){return ue("N",De,void 0)}(ye),this):this._next(ye)}error(ye){this.isStopped?Ye(function ie(De){return ue("E",void 0,De)}(ye),this):(this.isStopped=!0,this._error(ye))}complete(){this.isStopped?Ye(pe,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(ye){this.destination.next(ye)}_error(ye){try{this.destination.error(ye)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const He=Function.prototype.bind;function Te(De,ye){return He.call(De,ye)}class xe{constructor(ye){this.partialObserver=ye}next(ye){const{partialObserver:ve}=this;if(ve.next)try{ve.next(ye)}catch(je){he(je)}}error(ye){const{partialObserver:ve}=this;if(ve.error)try{ve.error(ye)}catch(je){he(je)}else he(ye)}complete(){const{partialObserver:ye}=this;if(ye.complete)try{ye.complete()}catch(ve){he(ve)}}}class Pe extends Q{constructor(ye,ve,je){let Ue;if(super(),(0,g.m)(ye)||!ye)Ue={next:null!=ye?ye:void 0,error:null!=ve?ve:void 0,complete:null!=je?je:void 0};else{let ee;this&&O.v.useDeprecatedNextContext?(ee=Object.create(ye),ee.unsubscribe=()=>this.unsubscribe(),Ue={next:ye.next&&Te(ye.next,ee),error:ye.error&&Te(ye.error,ee),complete:ye.complete&&Te(ye.complete,ee)}):Ue=ye}this.destination=new xe(Ue)}}function he(De){O.v.useDeprecatedSynchronousErrorHandling?(0,j.O)(De):(0,oe.h)(De)}function Ye(De,ye){const{onStoppedNotification:ve}=O.v;ve&&B.z.setTimeout(()=>ve(De,ye))}const Ge={closed:!0,next:J,error:function Ee(De){throw De},complete:J}},727:(it,Ce,k)=>{k.d(Ce,{Lc:()=>pe,w0:()=>J,Nn:()=>ie});var g=k(576);const O=(0,k(3888).d)(ue=>function(j){ue(this),this.message=j?`${j.length} errors occurred during unsubscription:\n${j.map((Q,He)=>`${He+1}) ${Q.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=j});var oe=k(8737);class J{constructor(B){this.initialTeardown=B,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let B;if(!this.closed){this.closed=!0;const{_parentage:j}=this;if(j)if(this._parentage=null,Array.isArray(j))for(const Te of j)Te.remove(this);else j.remove(this);const{initialTeardown:Q}=this;if((0,g.m)(Q))try{Q()}catch(Te){B=Te instanceof O?Te.errors:[Te]}const{_finalizers:He}=this;if(He){this._finalizers=null;for(const Te of He)try{de(Te)}catch(xe){B=null!=B?B:[],xe instanceof O?B=[...B,...xe.errors]:B.push(xe)}}if(B)throw new O(B)}}add(B){var j;if(B&&B!==this)if(this.closed)de(B);else{if(B instanceof J){if(B.closed||B._hasParent(this))return;B._addParent(this)}(this._finalizers=null!==(j=this._finalizers)&&void 0!==j?j:[]).push(B)}}_hasParent(B){const{_parentage:j}=this;return j===B||Array.isArray(j)&&j.includes(B)}_addParent(B){const{_parentage:j}=this;this._parentage=Array.isArray(j)?(j.push(B),j):j?[j,B]:B}_removeParent(B){const{_parentage:j}=this;j===B?this._parentage=null:Array.isArray(j)&&(0,oe.P)(j,B)}remove(B){const{_finalizers:j}=this;j&&(0,oe.P)(j,B),B instanceof J&&B._removeParent(this)}}J.EMPTY=(()=>{const ue=new J;return ue.closed=!0,ue})();const pe=J.EMPTY;function ie(ue){return ue instanceof J||ue&&"closed"in ue&&(0,g.m)(ue.remove)&&(0,g.m)(ue.add)&&(0,g.m)(ue.unsubscribe)}function de(ue){(0,g.m)(ue)?ue():ue.unsubscribe()}},2416:(it,Ce,k)=>{k.d(Ce,{v:()=>g});const g={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(it,Ce,k)=>{k.d(Ce,{E:()=>Z});const Z=new(k(8306).y)(J=>J.complete())},8996:(it,Ce,k)=>{k.d(Ce,{D:()=>ye});var g=k(8421),Z=k(5363),O=k(9468),pe=k(8306),de=k(2202),ue=k(576),B=k(9672);function Q(ve,je){if(!ve)throw new Error("Iterable cannot be null");return new pe.y(Ue=>{(0,B.f)(Ue,je,()=>{const ee=ve[Symbol.asyncIterator]();(0,B.f)(Ue,je,()=>{ee.next().then(q=>{q.done?Ue.complete():Ue.next(q.value)})},0,!0)})})}var He=k(3670),Te=k(8239),xe=k(1144),Pe=k(6495),he=k(2206),Ee=k(4532),Ye=k(3260);function ye(ve,je){return je?function De(ve,je){if(null!=ve){if((0,He.c)(ve))return function oe(ve,je){return(0,g.Xf)(ve).pipe((0,O.R)(je),(0,Z.Q)(je))}(ve,je);if((0,xe.z)(ve))return function ie(ve,je){return new pe.y(Ue=>{let ee=0;return je.schedule(function(){ee===ve.length?Ue.complete():(Ue.next(ve[ee++]),Ue.closed||this.schedule())})})}(ve,je);if((0,Te.t)(ve))return function J(ve,je){return(0,g.Xf)(ve).pipe((0,O.R)(je),(0,Z.Q)(je))}(ve,je);if((0,he.D)(ve))return Q(ve,je);if((0,Pe.T)(ve))return function j(ve,je){return new pe.y(Ue=>{let ee;return(0,B.f)(Ue,je,()=>{ee=ve[de.h](),(0,B.f)(Ue,je,()=>{let q,te;try{({value:q,done:te}=ee.next())}catch(ge){return void Ue.error(ge)}te?Ue.complete():Ue.next(q)},0,!0)}),()=>(0,ue.m)(null==ee?void 0:ee.return)&&ee.return()})}(ve,je);if((0,Ye.L)(ve))return function Ge(ve,je){return Q((0,Ye.Q)(ve),je)}(ve,je)}throw(0,Ee.z)(ve)}(ve,je):(0,g.Xf)(ve)}},8421:(it,Ce,k)=>{k.d(Ce,{Xf:()=>He});var g=k(655),Z=k(1144),O=k(8239),oe=k(8306),J=k(3670),pe=k(2206),ie=k(4532),de=k(6495),ue=k(3260),B=k(576),j=k(7849),Q=k(8822);function He(De){if(De instanceof oe.y)return De;if(null!=De){if((0,J.c)(De))return function Te(De){return new oe.y(ye=>{const ve=De[Q.L]();if((0,B.m)(ve.subscribe))return ve.subscribe(ye);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(De);if((0,Z.z)(De))return function xe(De){return new oe.y(ye=>{for(let ve=0;ve<De.length&&!ye.closed;ve++)ye.next(De[ve]);ye.complete()})}(De);if((0,O.t)(De))return function Pe(De){return new oe.y(ye=>{De.then(ve=>{ye.closed||(ye.next(ve),ye.complete())},ve=>ye.error(ve)).then(null,j.h)})}(De);if((0,pe.D)(De))return Ee(De);if((0,de.T)(De))return function he(De){return new oe.y(ye=>{for(const ve of De)if(ye.next(ve),ye.closed)return;ye.complete()})}(De);if((0,ue.L)(De))return function Ye(De){return Ee((0,ue.Q)(De))}(De)}throw(0,ie.z)(De)}function Ee(De){return new oe.y(ye=>{(function Ge(De,ye){var ve,je,Ue,ee;return(0,g.mG)(this,void 0,void 0,function*(){try{for(ve=(0,g.KL)(De);!(je=yield ve.next()).done;)if(ye.next(je.value),ye.closed)return}catch(q){Ue={error:q}}finally{try{je&&!je.done&&(ee=ve.return)&&(yield ee.call(ve))}finally{if(Ue)throw Ue.error}}ye.complete()})})(De,ye).catch(ve=>ye.error(ve))})}},6451:(it,Ce,k)=>{k.d(Ce,{T:()=>pe});var g=k(8189),Z=k(8421),O=k(515),oe=k(7669),J=k(8996);function pe(...ie){const de=(0,oe.yG)(ie),ue=(0,oe._6)(ie,1/0),B=ie;return B.length?1===B.length?(0,Z.Xf)(B[0]):(0,g.J)(ue)((0,J.D)(B,de)):O.E}},5403:(it,Ce,k)=>{k.d(Ce,{x:()=>Z});var g=k(2961);function Z(oe,J,pe,ie,de){return new O(oe,J,pe,ie,de)}class O extends g.Lv{constructor(J,pe,ie,de,ue,B){super(J),this.onFinalize=ue,this.shouldUnsubscribe=B,this._next=pe?function(j){try{pe(j)}catch(Q){J.error(Q)}}:super._next,this._error=de?function(j){try{de(j)}catch(Q){J.error(Q)}finally{this.unsubscribe()}}:super._error,this._complete=ie?function(){try{ie()}catch(j){J.error(j)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var J;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:pe}=this;super.unsubscribe(),!pe&&(null===(J=this.onFinalize)||void 0===J||J.call(this))}}}},4004:(it,Ce,k)=>{k.d(Ce,{U:()=>O});var g=k(4482),Z=k(5403);function O(oe,J){return(0,g.e)((pe,ie)=>{let de=0;pe.subscribe((0,Z.x)(ie,ue=>{ie.next(oe.call(J,ue,de++))}))})}},8189:(it,Ce,k)=>{k.d(Ce,{J:()=>O});var g=k(5577),Z=k(4671);function O(oe=1/0){return(0,g.z)(Z.y,oe)}},5577:(it,Ce,k)=>{k.d(Ce,{z:()=>de});var g=k(4004),Z=k(8421),O=k(4482),oe=k(9672),J=k(5403),ie=k(576);function de(ue,B,j=1/0){return(0,ie.m)(B)?de((Q,He)=>(0,g.U)((Te,xe)=>B(Q,Te,He,xe))((0,Z.Xf)(ue(Q,He))),j):("number"==typeof B&&(j=B),(0,O.e)((Q,He)=>function pe(ue,B,j,Q,He,Te,xe,Pe){const he=[];let Ee=0,Ye=0,Ge=!1;const De=()=>{Ge&&!he.length&&!Ee&&B.complete()},ye=je=>Ee<Q?ve(je):he.push(je),ve=je=>{Te&&B.next(je),Ee++;let Ue=!1;(0,Z.Xf)(j(je,Ye++)).subscribe((0,J.x)(B,ee=>{null==He||He(ee),Te?ye(ee):B.next(ee)},()=>{Ue=!0},void 0,()=>{if(Ue)try{for(Ee--;he.length&&Ee<Q;){const ee=he.shift();xe?(0,oe.f)(B,xe,()=>ve(ee)):ve(ee)}De()}catch(ee){B.error(ee)}}))};return ue.subscribe((0,J.x)(B,ye,()=>{Ge=!0,De()})),()=>{null==Pe||Pe()}}(Q,He,ue,j)))}},5363:(it,Ce,k)=>{k.d(Ce,{Q:()=>oe});var g=k(9672),Z=k(4482),O=k(5403);function oe(J,pe=0){return(0,Z.e)((ie,de)=>{ie.subscribe((0,O.x)(de,ue=>(0,g.f)(de,J,()=>de.next(ue),pe),()=>(0,g.f)(de,J,()=>de.complete(),pe),ue=>(0,g.f)(de,J,()=>de.error(ue),pe)))})}},3099:(it,Ce,k)=>{k.d(Ce,{B:()=>pe});var g=k(8996),Z=k(5698),O=k(7579),oe=k(2961),J=k(4482);function pe(de={}){const{connector:ue=(()=>new O.x),resetOnError:B=!0,resetOnComplete:j=!0,resetOnRefCountZero:Q=!0}=de;return He=>{let Te=null,xe=null,Pe=null,he=0,Ee=!1,Ye=!1;const Ge=()=>{null==xe||xe.unsubscribe(),xe=null},De=()=>{Ge(),Te=Pe=null,Ee=Ye=!1},ye=()=>{const ve=Te;De(),null==ve||ve.unsubscribe()};return(0,J.e)((ve,je)=>{he++,!Ye&&!Ee&&Ge();const Ue=Pe=null!=Pe?Pe:ue();je.add(()=>{he--,0===he&&!Ye&&!Ee&&(xe=ie(ye,Q))}),Ue.subscribe(je),Te||(Te=new oe.Hp({next:ee=>Ue.next(ee),error:ee=>{Ye=!0,Ge(),xe=ie(De,B,ee),Ue.error(ee)},complete:()=>{Ee=!0,Ge(),xe=ie(De,j),Ue.complete()}}),(0,g.D)(ve).subscribe(Te))})(He)}}function ie(de,ue,...B){return!0===ue?(de(),null):!1===ue?null:ue(...B).pipe((0,Z.q)(1)).subscribe(()=>de())}},9468:(it,Ce,k)=>{k.d(Ce,{R:()=>Z});var g=k(4482);function Z(O,oe=0){return(0,g.e)((J,pe)=>{pe.add(O.schedule(()=>J.subscribe(pe),oe))})}},5698:(it,Ce,k)=>{k.d(Ce,{q:()=>oe});var g=k(515),Z=k(4482),O=k(5403);function oe(J){return J<=0?()=>g.E:(0,Z.e)((pe,ie)=>{let de=0;pe.subscribe((0,O.x)(ie,ue=>{++de<=J&&(ie.next(ue),J<=de&&ie.complete())}))})}},8505:(it,Ce,k)=>{k.d(Ce,{b:()=>J});var g=k(576),Z=k(4482),O=k(5403),oe=k(4671);function J(pe,ie,de){const ue=(0,g.m)(pe)||ie||de?{next:pe,error:ie,complete:de}:pe;return ue?(0,Z.e)((B,j)=>{var Q;null===(Q=ue.subscribe)||void 0===Q||Q.call(ue);let He=!0;B.subscribe((0,O.x)(j,Te=>{var xe;null===(xe=ue.next)||void 0===xe||xe.call(ue,Te),j.next(Te)},()=>{var Te;He=!1,null===(Te=ue.complete)||void 0===Te||Te.call(ue),j.complete()},Te=>{var xe;He=!1,null===(xe=ue.error)||void 0===xe||xe.call(ue,Te),j.error(Te)},()=>{var Te,xe;He&&(null===(Te=ue.unsubscribe)||void 0===Te||Te.call(ue)),null===(xe=ue.finalize)||void 0===xe||xe.call(ue)}))}):oe.y}},4408:(it,Ce,k)=>{k.d(Ce,{o:()=>J});var g=k(727);class Z extends g.w0{constructor(ie,de){super()}schedule(ie,de=0){return this}}const O={setInterval(pe,ie,...de){const{delegate:ue}=O;return(null==ue?void 0:ue.setInterval)?ue.setInterval(pe,ie,...de):setInterval(pe,ie,...de)},clearInterval(pe){const{delegate:ie}=O;return((null==ie?void 0:ie.clearInterval)||clearInterval)(pe)},delegate:void 0};var oe=k(8737);class J extends Z{constructor(ie,de){super(ie,de),this.scheduler=ie,this.work=de,this.pending=!1}schedule(ie,de=0){if(this.closed)return this;this.state=ie;const ue=this.id,B=this.scheduler;return null!=ue&&(this.id=this.recycleAsyncId(B,ue,de)),this.pending=!0,this.delay=de,this.id=this.id||this.requestAsyncId(B,this.id,de),this}requestAsyncId(ie,de,ue=0){return O.setInterval(ie.flush.bind(ie,this),ue)}recycleAsyncId(ie,de,ue=0){if(null!=ue&&this.delay===ue&&!1===this.pending)return de;O.clearInterval(de)}execute(ie,de){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ue=this._execute(ie,de);if(ue)return ue;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ie,de){let B,ue=!1;try{this.work(ie)}catch(j){ue=!0,B=j||new Error("Scheduled action threw falsy error")}if(ue)return this.unsubscribe(),B}unsubscribe(){if(!this.closed){const{id:ie,scheduler:de}=this,{actions:ue}=de;this.work=this.state=this.scheduler=null,this.pending=!1,(0,oe.P)(ue,this),null!=ie&&(this.id=this.recycleAsyncId(de,ie,null)),this.delay=null,super.unsubscribe()}}}},7565:(it,Ce,k)=>{k.d(Ce,{v:()=>O});var g=k(6063);class Z{constructor(J,pe=Z.now){this.schedulerActionCtor=J,this.now=pe}schedule(J,pe=0,ie){return new this.schedulerActionCtor(this,J).schedule(ie,pe)}}Z.now=g.l.now;class O extends Z{constructor(J,pe=Z.now){super(J,pe),this.actions=[],this._active=!1,this._scheduled=void 0}flush(J){const{actions:pe}=this;if(this._active)return void pe.push(J);let ie;this._active=!0;do{if(ie=J.execute(J.state,J.delay))break}while(J=pe.shift());if(this._active=!1,ie){for(;J=pe.shift();)J.unsubscribe();throw ie}}}},4986:(it,Ce,k)=>{k.d(Ce,{z:()=>O});var g=k(4408);const O=new(k(7565).v)(g.o)},6063:(it,Ce,k)=>{k.d(Ce,{l:()=>g});const g={now:()=>(g.delegate||Date).now(),delegate:void 0}},3410:(it,Ce,k)=>{k.d(Ce,{z:()=>g});const g={setTimeout(Z,O,...oe){const{delegate:J}=g;return(null==J?void 0:J.setTimeout)?J.setTimeout(Z,O,...oe):setTimeout(Z,O,...oe)},clearTimeout(Z){const{delegate:O}=g;return((null==O?void 0:O.clearTimeout)||clearTimeout)(Z)},delegate:void 0}},2202:(it,Ce,k)=>{k.d(Ce,{h:()=>Z});const Z=function g(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(it,Ce,k)=>{k.d(Ce,{L:()=>g});const g="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(it,Ce,k)=>{k.d(Ce,{_6:()=>pe,jO:()=>oe,yG:()=>J});var g=k(576);function O(ie){return ie[ie.length-1]}function oe(ie){return(0,g.m)(O(ie))?ie.pop():void 0}function J(ie){return function Z(ie){return ie&&(0,g.m)(ie.schedule)}(O(ie))?ie.pop():void 0}function pe(ie,de){return"number"==typeof O(ie)?ie.pop():de}},8737:(it,Ce,k)=>{function g(Z,O){if(Z){const oe=Z.indexOf(O);0<=oe&&Z.splice(oe,1)}}k.d(Ce,{P:()=>g})},3888:(it,Ce,k)=>{function g(Z){const oe=Z(J=>{Error.call(J),J.stack=(new Error).stack});return oe.prototype=Object.create(Error.prototype),oe.prototype.constructor=oe,oe}k.d(Ce,{d:()=>g})},2806:(it,Ce,k)=>{k.d(Ce,{x:()=>O,O:()=>oe});var g=k(2416);let Z=null;function O(J){if(g.v.useDeprecatedSynchronousErrorHandling){const pe=!Z;if(pe&&(Z={errorThrown:!1,error:null}),J(),pe){const{errorThrown:ie,error:de}=Z;if(Z=null,ie)throw de}}else J()}function oe(J){g.v.useDeprecatedSynchronousErrorHandling&&Z&&(Z.errorThrown=!0,Z.error=J)}},9672:(it,Ce,k)=>{function g(Z,O,oe,J=0,pe=!1){const ie=O.schedule(function(){oe(),pe?Z.add(this.schedule(null,J)):this.unsubscribe()},J);if(Z.add(ie),!pe)return ie}k.d(Ce,{f:()=>g})},4671:(it,Ce,k)=>{function g(Z){return Z}k.d(Ce,{y:()=>g})},1144:(it,Ce,k)=>{k.d(Ce,{z:()=>g});const g=Z=>Z&&"number"==typeof Z.length&&"function"!=typeof Z},2206:(it,Ce,k)=>{k.d(Ce,{D:()=>Z});var g=k(576);function Z(O){return Symbol.asyncIterator&&(0,g.m)(null==O?void 0:O[Symbol.asyncIterator])}},576:(it,Ce,k)=>{function g(Z){return"function"==typeof Z}k.d(Ce,{m:()=>g})},3670:(it,Ce,k)=>{k.d(Ce,{c:()=>O});var g=k(8822),Z=k(576);function O(oe){return(0,Z.m)(oe[g.L])}},6495:(it,Ce,k)=>{k.d(Ce,{T:()=>O});var g=k(2202),Z=k(576);function O(oe){return(0,Z.m)(null==oe?void 0:oe[g.h])}},8239:(it,Ce,k)=>{k.d(Ce,{t:()=>Z});var g=k(576);function Z(O){return(0,g.m)(null==O?void 0:O.then)}},3260:(it,Ce,k)=>{k.d(Ce,{Q:()=>O,L:()=>oe});var g=k(655),Z=k(576);function O(J){return(0,g.FC)(this,arguments,function*(){const ie=J.getReader();try{for(;;){const{value:de,done:ue}=yield(0,g.qq)(ie.read());if(ue)return yield(0,g.qq)(void 0);yield yield(0,g.qq)(de)}}finally{ie.releaseLock()}})}function oe(J){return(0,Z.m)(null==J?void 0:J.getReader)}},4482:(it,Ce,k)=>{k.d(Ce,{A:()=>Z,e:()=>O});var g=k(576);function Z(oe){return(0,g.m)(null==oe?void 0:oe.lift)}function O(oe){return J=>{if(Z(J))return J.lift(function(pe){try{return oe(pe,this)}catch(ie){this.error(ie)}});throw new TypeError("Unable to lift unknown Observable type")}}},7849:(it,Ce,k)=>{k.d(Ce,{h:()=>O});var g=k(2416),Z=k(3410);function O(oe){Z.z.setTimeout(()=>{const{onUnhandledError:J}=g.v;if(!J)throw oe;J(oe)})}},4532:(it,Ce,k)=>{function g(Z){return new TypeError(`You provided ${null!==Z&&"object"==typeof Z?"an invalid object":`'${Z}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}k.d(Ce,{z:()=>g})},655:(it,Ce,k)=>{function oe(q,te){var ge={};for(var re in q)Object.prototype.hasOwnProperty.call(q,re)&&te.indexOf(re)<0&&(ge[re]=q[re]);if(null!=q&&"function"==typeof Object.getOwnPropertySymbols){var Me=0;for(re=Object.getOwnPropertySymbols(q);Me<re.length;Me++)te.indexOf(re[Me])<0&&Object.prototype.propertyIsEnumerable.call(q,re[Me])&&(ge[re[Me]]=q[re[Me]])}return ge}function de(q,te,ge,re){return new(ge||(ge=Promise))(function(se,Et){function Wt(ft){try{st(re.next(ft))}catch(an){Et(an)}}function An(ft){try{st(re.throw(ft))}catch(an){Et(an)}}function st(ft){ft.done?se(ft.value):function Me(se){return se instanceof ge?se:new ge(function(Et){Et(se)})}(ft.value).then(Wt,An)}st((re=re.apply(q,te||[])).next())})}function he(q){return this instanceof he?(this.v=q,this):new he(q)}function Ee(q,te,ge){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Me,re=ge.apply(q,te||[]),se=[];return Me={},Et("next"),Et("throw"),Et("return"),Me[Symbol.asyncIterator]=function(){return this},Me;function Et(un){re[un]&&(Me[un]=function(_i){return new Promise(function(Xt,$i){se.push([un,_i,Xt,$i])>1||Wt(un,_i)})})}function Wt(un,_i){try{!function An(un){un.value instanceof he?Promise.resolve(un.value.v).then(st,ft):an(se[0][2],un)}(re[un](_i))}catch(Xt){an(se[0][3],Xt)}}function st(un){Wt("next",un)}function ft(un){Wt("throw",un)}function an(un,_i){un(_i),se.shift(),se.length&&Wt(se[0][0],se[0][1])}}function Ge(q){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ge,te=q[Symbol.asyncIterator];return te?te.call(q):(q=function Q(q){var te="function"==typeof Symbol&&Symbol.iterator,ge=te&&q[te],re=0;if(ge)return ge.call(q);if(q&&"number"==typeof q.length)return{next:function(){return q&&re>=q.length&&(q=void 0),{value:q&&q[re++],done:!q}}};throw new TypeError(te?"Object is not iterable.":"Symbol.iterator is not defined.")}(q),ge={},re("next"),re("throw"),re("return"),ge[Symbol.asyncIterator]=function(){return this},ge);function re(se){ge[se]=q[se]&&function(Et){return new Promise(function(Wt,An){!function Me(se,Et,Wt,An){Promise.resolve(An).then(function(st){se({value:st,done:Wt})},Et)}(Wt,An,(Et=q[se](Et)).done,Et.value)})}}}k.d(Ce,{_T:()=>oe,mG:()=>de,qq:()=>he,FC:()=>Ee,KL:()=>Ge})},5e3:(it,Ce,k)=>{k.d(Ce,{deG:()=>Wc,tb:()=>Uu,AFp:()=>cp,ip1:()=>mv,CZH:()=>ce,hGG:()=>Vv,z2F:()=>Rm,sBO:()=>yh,Sil:()=>Qb,_Vd:()=>cr,EJc:()=>yv,SBq:()=>Qf,qLn:()=>ln,vpe:()=>Ui,tBr:()=>Ar,XFs:()=>ut,OlP:()=>bn,zs3:()=>ho,ZZ4:()=>Bm,aQg:()=>Gu,soG:()=>dr,YKP:()=>ym,h0i:()=>ac,PXZ:()=>aI,R0b:()=>xi,FiY:()=>Sr,Lbi:()=>Jw,g9A:()=>Vu,Qsj:()=>Sb,FYo:()=>mw,JOm:()=>ne,tp0:()=>Ci,Rgc:()=>Pn,dDg:()=>ph,q4F:()=>W_,GfV:()=>yw,s_b:()=>kn,ifc:()=>Vt,eFA:()=>uI,G48:()=>gh,Gpc:()=>j,X6Q:()=>$u,_c5:()=>cC,VLi:()=>oI,c2e:()=>Mm,zSh:()=>Gy,wAp:()=>et,vHH:()=>xe,cg1:()=>um,kL8:()=>O_,dqk:()=>kt,sIi:()=>wr,CqO:()=>f_,QGY:()=>zg,F4k:()=>Wg,RDi:()=>Zi,AaK:()=>de,qOj:()=>$o,TTD:()=>Ws,_Bn:()=>fw,xp6:()=>Cy,uIk:()=>wu,ekj:()=>w_,Suo:()=>av,Xpm:()=>xt,lG2:()=>qt,Yz7:()=>Xt,cJS:()=>Kt,oAB:()=>Y,Yjl:()=>pr,Y36:()=>Rf,_UZ:()=>$g,qZA:()=>Ql,TgZ:()=>Nf,n5z:()=>_l,LFG:()=>Je,$8M:()=>aa,$Z:()=>Zl,NdJ:()=>Kg,CRH:()=>uv,Q6J:()=>d_,iGM:()=>ov,LSH:()=>od,_uU:()=>UE,Gf:()=>Pw});var g=k(7579),Z=k(727),O=k(8306),oe=k(6451),J=k(3099);function pe(i){for(let s in i)if(i[s]===pe)return s;throw Error("Could not find renamed property on target object.")}function ie(i,s){for(const a in s)s.hasOwnProperty(a)&&!i.hasOwnProperty(a)&&(i[a]=s[a])}function de(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(de).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const s=i.toString();if(null==s)return""+s;const a=s.indexOf("\n");return-1===a?s:s.substring(0,a)}function ue(i,s){return null==i||""===i?null===s?"":s:null==s||""===s?i:i+" "+s}const B=pe({__forward_ref__:pe});function j(i){return i.__forward_ref__=j,i.toString=function(){return de(this())},i}function Q(i){return He(i)?i():i}function He(i){return"function"==typeof i&&i.hasOwnProperty(B)&&i.__forward_ref__===j}class xe extends Error{constructor(s,a){super(function Pe(i,s){return`NG0${Math.abs(i)}${s?": "+s:""}`}(s,a)),this.code=s}}function he(i){return"string"==typeof i?i:null==i?"":String(i)}function Ee(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():he(i)}function ye(i,s){const a=s?` in ${s}`:"";throw new xe(-201,`No provider for ${Ee(i)} found${a}`)}function st(i,s){null==i&&function ft(i,s,a,u){throw new Error(`ASSERTION ERROR: ${i}`+(null==u?"":` [Expected=> ${a} ${u} ${s} <=Actual]`))}(s,i,null,"!=")}function Xt(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function Kt(i){return{providers:i.providers||[],imports:i.imports||[]}}function Lt(i){return tr(i,Ri)||tr(i,Hi)}function tr(i,s){return i.hasOwnProperty(s)?i[s]:null}function Dr(i){return i&&(i.hasOwnProperty(br)||i.hasOwnProperty(Gi))?i[br]:null}const Ri=pe({\u0275prov:pe}),br=pe({\u0275inj:pe}),Hi=pe({ngInjectableDef:pe}),Gi=pe({ngInjectorDef:pe});var ut=(()=>((ut=ut||{})[ut.Default=0]="Default",ut[ut.Host=1]="Host",ut[ut.Self=2]="Self",ut[ut.SkipSelf=4]="SkipSelf",ut[ut.Optional=8]="Optional",ut))();let Vr;function Bn(i){const s=Vr;return Vr=i,s}function oi(i,s,a){const u=Lt(i);return u&&"root"==u.providedIn?void 0===u.value?u.value=u.factory():u.value:a&ut.Optional?null:void 0!==s?s:void ye(de(i),"Injector")}function fn(i){return{toString:i}.toString()}var Yn=(()=>((Yn=Yn||{})[Yn.OnPush=0]="OnPush",Yn[Yn.Default=1]="Default",Yn))(),Vt=(()=>{return(i=Vt||(Vt={}))[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",Vt;var i})();const nt="undefined"!=typeof globalThis&&globalThis,_t="undefined"!=typeof window&&window,nr="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,kt=nt||"undefined"!=typeof global&&global||_t||nr,rr={},lt=[],fr=pe({\u0275cmp:pe}),Nt=pe({\u0275dir:pe}),qe=pe({\u0275pipe:pe}),be=pe({\u0275mod:pe}),We=pe({\u0275fac:pe}),ct=pe({__NG_ELEMENT_ID__:pe});let Pt=0;function xt(i){return fn(()=>{const a={},u={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:a,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===Yn.OnPush,directiveDefs:null,pipeDefs:null,selectors:i.selectors||lt,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||Vt.Emulated,id:"c",styles:i.styles||lt,_:null,setInput:null,schemas:i.schemas||null,tView:null},c=i.directives,f=i.features,_=i.pipes;return u.id+=Pt++,u.inputs=pt(i.inputs,a),u.outputs=pt(i.outputs),f&&f.forEach(E=>E(u)),u.directiveDefs=c?()=>("function"==typeof c?c():c).map(L):null,u.pipeDefs=_?()=>("function"==typeof _?_():_).map($):null,u})}function L(i){return Ut(i)||function In(i){return i[Nt]||null}(i)}function $(i){return function At(i){return i[qe]||null}(i)}const le={};function Y(i){return fn(()=>{const s={type:i.type,bootstrap:i.bootstrap||lt,declarations:i.declarations||lt,imports:i.imports||lt,exports:i.exports||lt,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null};return null!=i.id&&(le[i.id]=i.type),s})}function pt(i,s){if(null==i)return rr;const a={};for(const u in i)if(i.hasOwnProperty(u)){let c=i[u],f=c;Array.isArray(c)&&(f=c[1],c=c[0]),a[c]=u,s&&(s[c]=f)}return a}const qt=xt;function pr(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,onDestroy:i.type.prototype.ngOnDestroy||null}}function Ut(i){return i[fr]||null}function cn(i,s){const a=i[be]||null;if(!a&&!0===s)throw new Error(`Type ${de(i)} does not have '\u0275mod' property.`);return a}function Ei(i){return Array.isArray(i)&&"object"==typeof i[1]}function ui(i){return Array.isArray(i)&&!0===i[1]}function Tc(i){return 0!=(8&i.flags)}function ys(i){return 2==(2&i.flags)}function La(i){return 1==(1&i.flags)}function Ur(i){return null!==i.template}function Ch(i){return 0!=(512&i[2])}function Br(i,s){return i.hasOwnProperty(We)?i[We]:null}class bo{constructor(s,a,u){this.previousValue=s,this.currentValue=a,this.firstChange=u}isFirstChange(){return this.firstChange}}function Ws(){return Qo}function Qo(i){return i.type.prototype.ngOnChanges&&(i.setInput=Rp),Nc}function Nc(){const i=Es(this),s=null==i?void 0:i.current;if(s){const a=i.previous;if(a===rr)i.previous=s;else for(let u in s)a[u]=s[u];i.current=null,this.ngOnChanges(s)}}function Rp(i,s,a,u){const c=Es(i)||function li(i,s){return i[Co]=s}(i,{previous:rr,current:null}),f=c.current||(c.current={}),_=c.previous,E=this.declaredInputs[a],I=_[E];f[E]=new bo(I&&I.currentValue,s,_===rr),i[u]=s}Ws.ngInherit=!0;const Co="__ngSimpleChanges__";function Es(i){return i[Co]||null}let Ga;function Zi(i){Ga=i}function hn(i){return!!i.listen}const To={createRenderer:(i,s)=>function Jo(){return void 0!==Ga?Ga:"undefined"!=typeof document?document:void 0}()};function nn(i){for(;Array.isArray(i);)i=i[0];return i}function mr(i,s){return nn(s[i.index])}function Xo(i,s){return i.data[s]}function yr(i,s){const a=s[i];return Ei(a)?a:a[0]}function Is(i){return 4==(4&i[2])}function Yi(i){return 128==(128&i[2])}function $r(i,s){return null==s?null:i[s]}function Ds(i){i[18]=0}function bs(i,s){i[5]+=s;let a=i,u=i[3];for(;null!==u&&(1===s&&1===a[5]||-1===s&&0===a[5]);)u[5]+=s,a=u,u=u[3]}const dt={lFrame:Qs(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Za(){return dt.bindingsEnabled}function we(){return dt.lFrame.lView}function Rt(){return dt.lFrame.tView}function pn(){let i=Ao();for(;null!==i&&64===i.type;)i=i.parent;return i}function Ao(){return dt.lFrame.currentTNode}function Hr(i,s){const a=dt.lFrame;a.currentTNode=i,a.isParent=s}function el(){return dt.lFrame.isParent}function Ya(){return dt.isInCheckNoChangesMode}function Cs(i){dt.isInCheckNoChangesMode=i}function Ts(){return dt.lFrame.bindingIndex++}function Xa(i,s){const a=dt.lFrame;a.bindingIndex=a.bindingRootIndex=i,ta(s)}function ta(i){dt.lFrame.currentDirectiveIndex=i}function sl(){return dt.lFrame.currentQueryIndex}function ol(i){dt.lFrame.currentQueryIndex=i}function Lc(i){const s=i[1];return 2===s.type?s.declTNode:1===s.type?i[6]:null}function al(i,s,a){if(a&ut.SkipSelf){let c=s,f=i;for(;!(c=c.parent,null!==c||a&ut.Host||(c=Lc(f),null===c||(f=f[15],10&c.type))););if(null===c)return!1;s=c,i=f}const u=dt.lFrame=Vc();return u.currentTNode=s,u.lView=i,!0}function Ys(i){const s=Vc(),a=i[1];dt.lFrame=s,s.currentTNode=a.firstChild,s.lView=i,s.tView=a,s.contextLView=i,s.bindingIndex=a.bindingStartIndex,s.inI18n=!1}function Vc(){const i=dt.lFrame,s=null===i?null:i.child;return null===s?Qs(i):s}function Qs(i){const s={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=s),s}function Uc(){const i=dt.lFrame;return dt.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const Bc=Uc;function Js(){const i=Uc();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function _r(){return dt.lFrame.selectedIndex}function Ss(i){dt.lFrame.selectedIndex=i}function Dn(){const i=dt.lFrame;return Xo(i.tView,i.selectedIndex)}function Qi(i,s){for(let a=s.directiveStart,u=s.directiveEnd;a<u;a++){const f=i.data[a].type.prototype,{ngAfterContentInit:_,ngAfterContentChecked:E,ngAfterViewInit:I,ngAfterViewChecked:A,ngOnDestroy:S}=f;_&&(i.contentHooks||(i.contentHooks=[])).push(-a,_),E&&((i.contentHooks||(i.contentHooks=[])).push(a,E),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(a,E)),I&&(i.viewHooks||(i.viewHooks=[])).push(-a,I),A&&((i.viewHooks||(i.viewHooks=[])).push(a,A),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(a,A)),null!=S&&(i.destroyHooks||(i.destroyHooks=[])).push(a,S)}}function ra(i,s,a){jc(i,s,3,a)}function eu(i,s,a,u){(3&i[2])===a&&jc(i,s,a,u)}function Vn(i,s){let a=i[2];(3&a)===s&&(a&=2047,a+=1,i[2]=a)}function jc(i,s,a,u){const f=null!=u?u:-1,_=s.length-1;let E=0;for(let I=void 0!==u?65535&i[18]:0;I<_;I++)if("number"==typeof s[I+1]){if(E=s[I],null!=u&&E>=u)break}else s[I]<0&&(i[18]+=65536),(E<f||-1==f)&&(Np(i,a,s,I),i[18]=(4294901760&i[18])+I+2),I++}function Np(i,s,a,u){const c=a[u]<0,f=a[u+1],E=i[c?-a[u]:a[u]];if(c){if(i[2]>>11<i[18]>>16&&(3&i[2])===s){i[2]+=2048;try{f.call(E)}finally{}}}else try{f.call(E)}finally{}}class Mo{constructor(s,a,u){this.factory=s,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=u}}function hl(i,s,a){const u=hn(i);let c=0;for(;c<a.length;){const f=a[c];if("number"==typeof f){if(0!==f)break;c++;const _=a[c++],E=a[c++],I=a[c++];u?i.setAttribute(s,E,I,_):s.setAttributeNS(_,E,I)}else{const _=f,E=a[++c];fl(_)?u&&i.setProperty(s,_,E):u?i.setAttribute(s,_,E):s.setAttribute(_,E),c++}}return c}function Xi(i){return 3===i||4===i||6===i}function fl(i){return 64===i.charCodeAt(0)}function ia(i,s){if(null!==s&&0!==s.length)if(null===i||0===i.length)i=s.slice();else{let a=-1;for(let u=0;u<s.length;u++){const c=s[u];"number"==typeof c?a=c:0===a||eo(i,a,c,null,-1===a||2===a?s[++u]:null)}}return i}function eo(i,s,a,u,c){let f=0,_=i.length;if(-1===s)_=-1;else for(;f<i.length;){const E=i[f++];if("number"==typeof E){if(E===s){_=-1;break}if(E>s){_=f-1;break}}}for(;f<i.length;){const E=i[f];if("number"==typeof E)break;if(E===a){if(null===u)return void(null!==c&&(i[f+1]=c));if(u===i[f+1])return void(i[f+2]=c)}f++,null!==u&&f++,null!==c&&f++}-1!==_&&(i.splice(_,0,s),f=_+1),i.splice(f++,0,a),null!==u&&i.splice(f++,0,u),null!==c&&i.splice(f++,0,c)}function Gc(i){return-1!==i}function Qt(i){return 32767&i}function mn(i,s){let a=function xo(i){return i>>16}(i),u=s;for(;a>0;)u=u[15],a--;return u}let Ct=!0;function Ms(i){const s=Ct;return Ct=i,s}let xh=0;function di(i,s){const a=Ro(i,s);if(-1!==a)return a;const u=s[1];u.firstCreatePass&&(i.injectorIndex=s.length,$n(u.data,i),$n(s,null),$n(u.blueprint,null));const c=Gr(i,s),f=i.injectorIndex;if(Gc(c)){const _=Qt(c),E=mn(c,s),I=E[1].data;for(let A=0;A<8;A++)s[f+A]=E[_+A]|I[_+A]}return s[f+8]=c,f}function $n(i,s){i.push(0,0,0,0,0,0,0,0,s)}function Ro(i,s){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===s[i.injectorIndex+8]?-1:i.injectorIndex}function Gr(i,s){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,u=null,c=s;for(;null!==c;){const f=c[1],_=f.type;if(u=2===_?f.declTNode:1===_?c[6]:null,null===u)return-1;if(a++,c=c[15],-1!==u.injectorIndex)return u.injectorIndex|a<<16}return-1}function no(i,s,a){!function to(i,s,a){let u;"string"==typeof a?u=a.charCodeAt(0)||0:a.hasOwnProperty(ct)&&(u=a[ct]),null==u&&(u=a[ct]=xh++);const c=255&u;s.data[i+(c>>5)]|=1<<c}(i,s,a)}function ro(i,s,a){if(a&ut.Optional)return i;ye(s,"NodeInjector")}function sa(i,s,a,u){if(a&ut.Optional&&void 0===u&&(u=null),0==(a&(ut.Self|ut.Host))){const c=i[9],f=Bn(void 0);try{return c?c.get(s,u,a&ut.Optional):oi(s,u,a&ut.Optional)}finally{Bn(f)}}return ro(u,s,a)}function hi(i,s,a,u=ut.Default,c){if(null!==i){const f=function qc(i){if("string"==typeof i)return i.charCodeAt(0)||0;const s=i.hasOwnProperty(ct)?i[ct]:void 0;return"number"==typeof s?s>=0?255&s:Hn:s}(a);if("function"==typeof f){if(!al(s,i,u))return u&ut.Host?ro(c,a,u):sa(s,a,u,c);try{const _=f(u);if(null!=_||u&ut.Optional)return _;ye(a)}finally{Bc()}}else if("number"==typeof f){let _=null,E=Ro(i,s),I=-1,A=u&ut.Host?s[16][6]:null;for((-1===E||u&ut.SkipSelf)&&(I=-1===E?Gr(i,s):s[E+8],-1!==I&&yl(u,!1)?(_=s[1],E=Qt(I),s=mn(I,s)):E=-1);-1!==E;){const S=s[1];if(oa(f,E,S.data)){const P=io(E,s,a,_,u,A);if(P!==xs)return P}I=s[E+8],-1!==I&&yl(u,s[1].data[E+8]===A)&&oa(f,E,s)?(_=S,E=Qt(I),s=mn(I,s)):E=-1}}}return sa(s,a,u,c)}const xs={};function Hn(){return new Di(pn(),we())}function io(i,s,a,u,c,f){const _=s[1],E=_.data[i+8],S=ml(E,_,a,null==u?ys(E)&&Ct:u!=_&&0!=(3&E.type),c&ut.Host&&f===E);return null!==S?es(s,_,S,E):xs}function ml(i,s,a,u,c){const f=i.providerIndexes,_=s.data,E=1048575&f,I=i.directiveStart,S=f>>20,V=c?E+S:i.directiveEnd;for(let W=u?E:E+S;W<V;W++){const me=_[W];if(W<I&&a===me||W>=I&&me.type===a)return W}if(c){const W=_[I];if(W&&Ur(W)&&W.type===a)return I}return null}function es(i,s,a,u){let c=i[a];const f=s.data;if(function $c(i){return i instanceof Mo}(c)){const _=c;_.resolving&&function Ye(i,s){const a=s?`. Dependency path: ${s.join(" > ")} > ${i}`:"";throw new xe(-200,`Circular dependency in DI detected for ${i}${a}`)}(Ee(f[a]));const E=Ms(_.canSeeViewProviders);_.resolving=!0;const I=_.injectImpl?Bn(_.injectImpl):null;al(i,u,ut.Default);try{c=i[a]=_.factory(void 0,f,i,u),s.firstCreatePass&&a>=u.directiveStart&&function cl(i,s,a){const{ngOnChanges:u,ngOnInit:c,ngDoCheck:f}=s.type.prototype;if(u){const _=Qo(s);(a.preOrderHooks||(a.preOrderHooks=[])).push(i,_),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,_)}c&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-i,c),f&&((a.preOrderHooks||(a.preOrderHooks=[])).push(i,f),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,f))}(a,f[a],s)}finally{null!==I&&Bn(I),Ms(E),_.resolving=!1,Bc()}}return c}function oa(i,s,a){return!!(a[s+(i>>5)]&1<<i)}function yl(i,s){return!(i&ut.Self||i&ut.Host&&s)}class Di{constructor(s,a){this._tNode=s,this._lView=a}get(s,a,u){return hi(this._tNode,this._lView,s,u,a)}}function _l(i){return fn(()=>{const s=i.prototype.constructor,a=s[We]||so(s),u=Object.prototype;let c=Object.getPrototypeOf(i.prototype).constructor;for(;c&&c!==u;){const f=c[We]||so(c);if(f&&f!==a)return f;c=Object.getPrototypeOf(c)}return f=>new f})}function so(i){return He(i)?()=>{const s=so(Q(i));return s&&s()}:Br(i)}function aa(i){return function gl(i,s){if("class"===s)return i.classes;if("style"===s)return i.styles;const a=i.attrs;if(a){const u=a.length;let c=0;for(;c<u;){const f=a[c];if(Xi(f))break;if(0===f)c+=2;else if("number"==typeof f)for(c++;c<u&&"string"==typeof a[c];)c++;else{if(f===s)return a[c+1];c+=2}}}return null}(pn(),i)}const ns="__parameters__";function oo(i,s,a){return fn(()=>{const u=function nu(i){return function(...a){if(i){const u=i(...a);for(const c in u)this[c]=u[c]}}}(s);function c(...f){if(this instanceof c)return u.apply(this,f),this;const _=new c(...f);return E.annotation=_,E;function E(I,A,S){const P=I.hasOwnProperty(ns)?I[ns]:Object.defineProperty(I,ns,{value:[]})[ns];for(;P.length<=S;)P.push(null);return(P[S]=P[S]||[]).push(_),I}}return a&&(c.prototype=Object.create(a.prototype)),c.prototype.ngMetadataName=i,c.annotationCls=c,c})}class bn{constructor(s,a){this._desc=s,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=Xt({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Wc=new bn("AnalyzeForEntryComponents");function Tr(i,s){void 0===s&&(s=i);for(let a=0;a<i.length;a++){let u=i[a];Array.isArray(u)?(s===i&&(s=i.slice(0,a)),Tr(u,s)):s!==i&&s.push(u)}return s}function bi(i,s){i.forEach(a=>Array.isArray(a)?bi(a,s):s(a))}function Qc(i,s,a){s>=i.length?i.push(a):i.splice(s,0,a)}function Rs(i,s){return s>=i.length-1?i.pop():i.splice(s,1)[0]}function pi(i,s,a){let u=ca(i,s);return u>=0?i[1|u]=a:(u=~u,function la(i,s,a,u){let c=i.length;if(c==s)i.push(a,u);else if(1===c)i.push(u,i[0]),i[0]=a;else{for(c--,i.push(i[c-1],i[c]);c>s;)i[c]=i[c-2],c--;i[s]=a,i[s+1]=u}}(i,u,s,a)),u}function kh(i,s){const a=ca(i,s);if(a>=0)return i[1|a]}function ca(i,s){return function ao(i,s,a){let u=0,c=i.length>>a;for(;c!==u;){const f=u+(c-u>>1),_=i[f<<a];if(s===_)return f<<a;_>s?c=f:u=f+1}return~(c<<a)}(i,s,1)}const is={},Ns="__NG_DI_FLAG__",Il="ngTempTokenPath",b=/\n/gm,F="__source",z=pe({provide:String,useValue:pe});let X;function Se(i){const s=X;return X=i,s}function ze(i,s=ut.Default){if(void 0===X)throw new xe(203,"");return null===X?oi(i,void 0,s):X.get(i,s&ut.Optional?null:void 0,s)}function Je(i,s=ut.Default){return(function Zn(){return Vr}()||ze)(Q(i),s)}const Bt=Je;function wt(i){const s=[];for(let a=0;a<i.length;a++){const u=Q(i[a]);if(Array.isArray(u)){if(0===u.length)throw new xe(900,"");let c,f=ut.Default;for(let _=0;_<u.length;_++){const E=u[_],I=vn(E);"number"==typeof I?-1===I?c=E.token:f|=I:c=E}s.push(Je(c,f))}else s.push(Je(u))}return s}function Rn(i,s){return i[Ns]=s,i.prototype[Ns]=s,i}function vn(i){return i[Ns]}const Ar=Rn(oo("Inject",i=>({token:i})),-1),Sr=Rn(oo("Optional"),8),Ci=Rn(oo("SkipSelf"),4);class Gh{constructor(s){this.changingThisBreaksApplicationSecurity=s}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function ss(i){return i instanceof Gh?i.changingThisBreaksApplicationSecurity:i}const ga=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Wp=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var Gn=(()=>((Gn=Gn||{})[Gn.NONE=0]="NONE",Gn[Gn.HTML=1]="HTML",Gn[Gn.STYLE=2]="STYLE",Gn[Gn.SCRIPT=3]="SCRIPT",Gn[Gn.URL=4]="URL",Gn[Gn.RESOURCE_URL=5]="RESOURCE_URL",Gn))();function od(i){const s=function xl(){const i=we();return i&&i[12]}();return s?s.sanitize(Gn.URL,i)||"":function Tl(i,s){const a=function zh(i){return i instanceof Gh&&i.getTypeName()||null}(i);if(null!=a&&a!==s){if("ResourceURL"===a&&"URL"===s)return!0;throw new Error(`Required a safe ${s}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===s}(i,"URL")?ss(i):function uu(i){return(i=String(i)).match(ga)||i.match(Wp)?i:"unsafe:"+i}(he(i))}const tg="__ngContext__";function Xe(i,s){i[tg]=s}function Ti(i){const s=function gi(i){return i[tg]||null}(i);return s?Array.isArray(s)?s:s.lView:null}function cd(i){return i.ngOriginalError}function sf(i,...s){i.error(...s)}class ln{constructor(){this._console=console}handleError(s){const a=this._findOriginalError(s),u=function du(i){return i&&i.ngErrorLogger||sf}(s);u(this._console,"ERROR",s),a&&u(this._console,"ORIGINAL ERROR",a)}_findOriginalError(s){let a=s&&cd(s);for(;a&&cd(a);)a=cd(a);return a||null}}const kl=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(kt))();function p(i){return i instanceof Function?i():i}var ne=(()=>((ne=ne||{})[ne.Important=1]="Important",ne[ne.DashCase=2]="DashCase",ne))();function Ke(i,s){return undefined(i,s)}function Cn(i){const s=i[3];return ui(s)?s[3]:s}function hd(i){return fd(i[13])}function fu(i){return fd(i[4])}function fd(i){for(;null!==i&&!ui(i);)i=i[4];return i}function Lo(i,s,a,u,c){if(null!=u){let f,_=!1;ui(u)?f=u:Ei(u)&&(_=!0,u=u[0]);const E=nn(u);0===i&&null!==a?null==c?h0(s,a,E):Ll(s,a,E,c||null,!0):1===i&&null!==a?Ll(s,a,E,c||null,!0):2===i?function y0(i,s,a){const u=ag(i,s);u&&function f0(i,s,a,u){hn(i)?i.removeChild(s,a,u):s.removeChild(a)}(i,u,s,a)}(s,E,_):3===i&&s.destroyNode(E),null!=f&&function df(i,s,a,u,c){const f=a[7];f!==nn(a)&&Lo(s,i,u,f,c);for(let E=10;E<a.length;E++){const I=a[E];yd(I[1],I,i,s,u,f)}}(s,i,f,a,c)}}function Mt(i,s,a){if(hn(i))return i.createElement(s,a);{const u=null!==a?function Ha(i){const s=i.toLowerCase();return"svg"===s?"http://www.w3.org/2000/svg":"math"===s?"http://www.w3.org/1998/MathML/":null}(a):null;return null===u?i.createElement(s):i.createElementNS(u,s)}}function c0(i,s){const a=i[9],u=a.indexOf(s),c=s[3];1024&s[2]&&(s[2]&=-1025,bs(c,-1)),a.splice(u,1)}function ks(i,s){if(i.length<=10)return;const a=10+s,u=i[a];if(u){const c=u[17];null!==c&&c!==i&&c0(c,u),s>0&&(i[a-1][4]=u[4]);const f=Rs(i,10+s);!function gy(i,s){yd(i,s,s[11],2,null,null),s[0]=null,s[6]=null}(u[1],u);const _=f[19];null!==_&&_.detachView(f[1]),u[3]=null,u[4]=null,u[2]&=-129}return u}function yy(i,s){if(!(256&s[2])){const a=s[11];hn(a)&&a.destroyNode&&yd(i,s,a,3,null,null),function my(i){let s=i[13];if(!s)return og(i[1],i);for(;s;){let a=null;if(Ei(s))a=s[13];else{const u=s[10];u&&(a=u)}if(!a){for(;s&&!s[4]&&s!==i;)Ei(s)&&og(s[1],s),s=s[3];null===s&&(s=i),Ei(s)&&og(s[1],s),a=s&&s[4]}s=a}}(s)}}function og(i,s){if(!(256&s[2])){s[2]&=-129,s[2]|=256,function KT(i,s){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let u=0;u<a.length;u+=2){const c=s[a[u]];if(!(c instanceof Mo)){const f=a[u+1];if(Array.isArray(f))for(let _=0;_<f.length;_+=2){const E=c[f[_]],I=f[_+1];try{I.call(E)}finally{}}else try{f.call(c)}finally{}}}}(i,s),function d0(i,s){const a=i.cleanup,u=s[7];let c=-1;if(null!==a)for(let f=0;f<a.length-1;f+=2)if("string"==typeof a[f]){const _=a[f+1],E="function"==typeof _?_(s):nn(s[_]),I=u[c=a[f+2]],A=a[f+3];"boolean"==typeof A?E.removeEventListener(a[f],I,A):A>=0?u[c=A]():u[c=-A].unsubscribe(),f+=2}else{const _=u[c=a[f+1]];a[f].call(_)}if(null!==u){for(let f=c+1;f<u.length;f++)u[f]();s[7]=null}}(i,s),1===s[1].type&&hn(s[11])&&s[11].destroy();const a=s[17];if(null!==a&&ui(s[3])){a!==s[3]&&c0(a,s);const u=s[19];null!==u&&u.detachView(i)}}}function xr(i,s,a){return function lo(i,s,a){let u=s;for(;null!==u&&40&u.type;)u=(s=u).parent;if(null===u)return a[0];if(2&u.flags){const c=i.data[u.directiveStart].encapsulation;if(c===Vt.None||c===Vt.Emulated)return null}return mr(u,a)}(i,s.parent,a)}function Ll(i,s,a,u,c){hn(i)?i.insertBefore(s,a,u,c):s.insertBefore(a,u,c)}function h0(i,s,a){hn(i)?i.appendChild(s,a):s.appendChild(a)}function _y(i,s,a,u,c){null!==u?Ll(i,s,a,u,c):h0(i,s,a)}function ag(i,s){return hn(i)?i.parentNode(s):s.parentNode}let Ey=function vy(i,s,a){return 40&i.type?mr(i,a):null};function Ft(i,s,a,u){const c=xr(i,u,s),f=s[11],E=function g0(i,s,a){return Ey(i,s,a)}(u.parent||s[6],u,s);if(null!=c)if(Array.isArray(a))for(let I=0;I<a.length;I++)_y(f,c,a[I],E,!1);else _y(f,c,a,E,!1)}function gu(i,s){if(null!==s){const a=s.type;if(3&a)return mr(s,i);if(4&a)return ya(-1,i[s.index]);if(8&a){const u=s.child;if(null!==u)return gu(i,u);{const c=i[s.index];return ui(c)?ya(-1,c):nn(c)}}if(32&a)return Ke(s,i)()||nn(i[s.index]);{const u=m0(i,s);return null!==u?Array.isArray(u)?u[0]:gu(Cn(i[16]),u):gu(i,s.next)}}return null}function m0(i,s){return null!==s?i[16][6].projection[s.projection]:null}function ya(i,s){const a=10+i+1;if(a<s.length){const u=s[a],c=u[1].firstChild;if(null!==c)return gu(u,c)}return s[7]}function ug(i,s,a,u,c,f,_){for(;null!=a;){const E=u[a.index],I=a.type;if(_&&0===s&&(E&&Xe(nn(E),u),a.flags|=4),64!=(64&a.flags))if(8&I)ug(i,s,a.child,u,c,f,!1),Lo(s,i,c,E,f);else if(32&I){const A=Ke(a,u);let S;for(;S=A();)Lo(s,i,c,S,f);Lo(s,i,c,E,f)}else 16&I?cf(i,s,u,a,c,f):Lo(s,i,c,E,f);a=_?a.projectionNext:a.next}}function yd(i,s,a,u,c,f){ug(a,u,i.firstChild,s,c,f,!1)}function cf(i,s,a,u,c,f){const _=a[16],I=_[6].projection[u.projection];if(Array.isArray(I))for(let A=0;A<I.length;A++)Lo(s,i,c,I[A],f);else ug(i,s,I,_[3],c,f,!0)}function hf(i,s,a){hn(i)?i.setAttribute(s,"style",a):s.style.cssText=a}function wy(i,s,a){hn(i)?""===a?i.removeAttribute(s,"class"):i.setAttribute(s,"class",a):s.className=a}function lg(i,s,a){let u=i.length;for(;;){const c=i.indexOf(s,a);if(-1===c)return c;if(0===c||i.charCodeAt(c-1)<=32){const f=s.length;if(c+f===u||i.charCodeAt(c+f)<=32)return c}a=c+1}}const Dy="ng-template";function v0(i,s,a){let u=0;for(;u<i.length;){let c=i[u++];if(a&&"class"===c){if(c=i[u],-1!==lg(c.toLowerCase(),s,0))return!0}else if(1===c){for(;u<i.length&&"string"==typeof(c=i[u++]);)if(c.toLowerCase()===s)return!0;return!1}}return!1}function E0(i){return 4===i.type&&i.value!==Dy}function JI(i,s,a){return s===(4!==i.type||a?i.value:Dy)}function XI(i,s,a){let u=4;const c=i.attrs||[],f=function nD(i){for(let s=0;s<i.length;s++)if(Xi(i[s]))return s;return i.length}(c);let _=!1;for(let E=0;E<s.length;E++){const I=s[E];if("number"!=typeof I){if(!_)if(4&u){if(u=2|1&u,""!==I&&!JI(i,I,a)||""===I&&1===s.length){if(Li(u))return!1;_=!0}}else{const A=8&u?I:s[++E];if(8&u&&null!==i.attrs){if(!v0(i.attrs,A,a)){if(Li(u))return!1;_=!0}continue}const P=eD(8&u?"class":I,c,E0(i),a);if(-1===P){if(Li(u))return!1;_=!0;continue}if(""!==A){let V;V=P>f?"":c[P+1].toLowerCase();const W=8&u?V:null;if(W&&-1!==lg(W,A,0)||2&u&&A!==V){if(Li(u))return!1;_=!0}}}}else{if(!_&&!Li(u)&&!Li(I))return!1;if(_&&Li(I))continue;_=!1,u=I|1&u}}return Li(u)||_}function Li(i){return 0==(1&i)}function eD(i,s,a,u){if(null===s)return-1;let c=0;if(u||!a){let f=!1;for(;c<s.length;){const _=s[c];if(_===i)return c;if(3===_||6===_)f=!0;else{if(1===_||2===_){let E=s[++c];for(;"string"==typeof E;)E=s[++c];continue}if(4===_)break;if(0===_){c+=4;continue}}c+=f?1:2}return-1}return function rD(i,s){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const u=i[a];if("number"==typeof u)return-1;if(u===s)return a;a++}return-1}(s,i)}function w0(i,s,a=!1){for(let u=0;u<s.length;u++)if(XI(i,s[u],a))return!0;return!1}function cg(i,s){return i?":not("+s.trim()+")":s}function by(i){let s=i[0],a=1,u=2,c="",f=!1;for(;a<i.length;){let _=i[a];if("string"==typeof _)if(2&u){const E=i[++a];c+="["+_+(E.length>0?'="'+E+'"':"")+"]"}else 8&u?c+="."+_:4&u&&(c+=" "+_);else""!==c&&!Li(_)&&(s+=cg(f,c),c=""),u=_,f=f||!Li(u);a++}return""!==c&&(s+=cg(f,c)),s}const Tt={};function Cy(i){D0(Rt(),we(),_r()+i,Ya())}function D0(i,s,a,u){if(!u)if(3==(3&s[2])){const f=i.preOrderCheckHooks;null!==f&&ra(s,f,a)}else{const f=i.preOrderHooks;null!==f&&eu(s,f,0,a)}Ss(a)}function ff(i,s){return i<<17|s<<2}function co(i){return i>>17&32767}function gf(i){return 2|i}function Uo(i){return(131068&i)>>2}function mf(i,s){return-131069&i|s<<2}function Ty(i){return 1|i}function My(i,s){const a=i.contentQueries;if(null!==a)for(let u=0;u<a.length;u+=2){const c=a[u],f=a[u+1];if(-1!==f){const _=i.data[f];ol(c),_.contentQueries(2,s[f],f)}}}function yu(i,s,a,u,c,f,_,E,I,A){const S=s.blueprint.slice();return S[0]=c,S[2]=140|u,Ds(S),S[3]=S[15]=i,S[8]=a,S[10]=_||i&&i[10],S[11]=E||i&&i[11],S[12]=I||i&&i[12]||null,S[9]=A||i&&i[9]||null,S[6]=f,S[16]=2==s.type?i[16]:S,S}function Ed(i,s,a,u,c){let f=i.data[s];if(null===f)f=function xy(i,s,a,u,c){const f=Ao(),_=el(),I=i.data[s]=function dD(i,s,a,u,c,f){return{type:a,index:u,insertBeforeIndex:null,injectorIndex:s?s.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:c,attrs:f,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:s,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,_?f:f&&f.parent,a,s,u,c);return null===i.firstChild&&(i.firstChild=I),null!==f&&(_?null==f.child&&null!==I.parent&&(f.child=I):null===f.next&&(f.next=I)),I}(i,s,a,u,c),function rl(){return dt.lFrame.inI18n}()&&(f.flags|=64);else if(64&f.type){f.type=a,f.value=u,f.attrs=c;const _=function So(){const i=dt.lFrame,s=i.currentTNode;return i.isParent?s:s.parent}();f.injectorIndex=null===_?-1:_.injectorIndex}return Hr(f,!0),f}function wd(i,s,a,u){if(0===a)return-1;const c=s.length;for(let f=0;f<a;f++)s.push(u),i.blueprint.push(u),i.data.push(null);return c}function Ef(i,s,a){Ys(s);try{const u=i.viewQuery;null!==u&&Uy(1,u,a);const c=i.template;null!==c&&Ry(i,s,c,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&My(i,s),i.staticViewQueries&&Uy(2,i.viewQuery,a);const f=i.components;null!==f&&function vg(i,s){for(let a=0;a<s.length;a++)bD(i,s[a])}(s,f)}catch(u){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),u}finally{s[2]&=-5,Js()}}function Ea(i,s,a,u){const c=s[2];if(256==(256&c))return;Ys(s);const f=Ya();try{Ds(s),function Qa(i){return dt.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&Ry(i,s,a,2,u);const _=3==(3&c);if(!f)if(_){const A=i.preOrderCheckHooks;null!==A&&ra(s,A,null)}else{const A=i.preOrderHooks;null!==A&&eu(s,A,0,null),Vn(s,0)}if(function ID(i){for(let s=hd(i);null!==s;s=fu(s)){if(!s[2])continue;const a=s[9];for(let u=0;u<a.length;u++){const c=a[u],f=c[3];0==(1024&c[2])&&bs(f,1),c[2]|=1024}}}(s),function q0(i){for(let s=hd(i);null!==s;s=fu(s))for(let a=10;a<s.length;a++){const u=s[a],c=u[1];Yi(u)&&Ea(c,u,c.template,u[8])}}(s),null!==i.contentQueries&&My(i,s),!f)if(_){const A=i.contentCheckHooks;null!==A&&ra(s,A)}else{const A=i.contentHooks;null!==A&&eu(s,A,1),Vn(s,1)}!function Fs(i,s){const a=i.hostBindingOpCodes;if(null!==a)try{for(let u=0;u<a.length;u++){const c=a[u];if(c<0)Ss(~c);else{const f=c,_=a[++u],E=a[++u];Xa(_,f),E(2,s[f])}}}finally{Ss(-1)}}(i,s);const E=i.components;null!==E&&function O0(i,s){for(let a=0;a<s.length;a++)DD(i,s[a])}(s,E);const I=i.viewQuery;if(null!==I&&Uy(2,I,u),!f)if(_){const A=i.viewCheckHooks;null!==A&&ra(s,A)}else{const A=i.viewHooks;null!==A&&eu(s,A,2),Vn(s,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),f||(s[2]&=-73),1024&s[2]&&(s[2]&=-1025,bs(s[3],-1))}finally{Js()}}function P0(i,s,a,u){const c=s[10],f=!Ya(),_=Is(s);try{f&&!_&&c.begin&&c.begin(),_&&Ef(i,s,u),Ea(i,s,a,u)}finally{f&&!_&&c.end&&c.end()}}function Ry(i,s,a,u,c){const f=_r(),_=2&u;try{Ss(-1),_&&s.length>20&&D0(i,s,20,Ya()),a(u,c)}finally{Ss(f)}}function Ny(i){const s=i.tView;return null===s||s.incompleteFirstPass?i.tView=wg(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):s}function wg(i,s,a,u,c,f,_,E,I,A){const S=20+u,P=S+c,V=function cD(i,s){const a=[];for(let u=0;u<s;u++)a.push(u<i?null:Tt);return a}(S,P),W="function"==typeof A?A():A;return V[1]={type:i,blueprint:V,template:a,queries:null,viewQuery:E,declTNode:s,data:V.slice().fill(null,S),bindingStartIndex:S,expandoStartIndex:P,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof f?f():f,pipeRegistry:"function"==typeof _?_():_,firstChild:null,schemas:I,consts:W,incompleteFirstPass:!1}}function Ig(i,s,a,u){const c=By(s);null===a?c.push(u):(c.push(a),i.firstCreatePass&&K0(i).push(u,c.length-1))}function Oy(i,s,a){for(let u in i)if(i.hasOwnProperty(u)){const c=i[u];(a=null===a?{}:a).hasOwnProperty(u)?a[u].push(s,c):a[u]=[s,c]}return a}function V0(i,s,a,u,c,f){const _=f.hostBindings;if(_){let E=i.hostBindingOpCodes;null===E&&(E=i.hostBindingOpCodes=[]);const I=~s.index;(function gD(i){let s=i.length;for(;s>0;){const a=i[--s];if("number"==typeof a&&a<0)return a}return 0})(E)!=I&&E.push(I),E.push(u,c,_)}}function U0(i,s){null!==i.hostBindings&&i.hostBindings(1,s)}function B0(i,s){s.flags|=2,(i.components||(i.components=[])).push(s.index)}function vD(i,s,a){if(a){if(s.exportAs)for(let u=0;u<s.exportAs.length;u++)a[s.exportAs[u]]=i;Ur(s)&&(a[""]=i)}}function $0(i,s,a){i.flags|=1,i.directiveStart=s,i.directiveEnd=s+a,i.providerIndexes=s}function H0(i,s,a,u,c){i.data[u]=c;const f=c.factory||(c.factory=Br(c.type)),_=new Mo(f,Ur(c),null);i.blueprint[u]=_,a[u]=_,V0(i,s,0,u,wd(i,a,c.hostVars,Tt),c)}function ED(i,s,a){const u=mr(s,i),c=Ny(a),f=i[10],_=Sg(i,yu(i,c,null,a.onPush?64:16,u,s,f,f.createRenderer(u,a),null,null));i[s.index]=_}function Bo(i,s,a,u,c,f){const _=mr(i,s);!function Ag(i,s,a,u,c,f,_){if(null==f)hn(i)?i.removeAttribute(s,c,a):s.removeAttribute(c);else{const E=null==_?he(f):_(f,u||"",c);hn(i)?i.setAttribute(s,c,E,a):a?s.setAttributeNS(a,c,E):s.setAttribute(c,E)}}(s[11],_,f,i.value,a,u,c)}function oA(i,s,a,u,c,f){const _=f[s];if(null!==_){const E=u.setInput;for(let I=0;I<_.length;){const A=_[I++],S=_[I++],P=_[I++];null!==E?u.setInput(a,P,A,S):a[S]=P}}}function G0(i,s){let a=null,u=0;for(;u<s.length;){const c=s[u];if(0!==c)if(5!==c){if("number"==typeof c)break;i.hasOwnProperty(c)&&(null===a&&(a=[]),a.push(c,i[c],s[u+1])),u+=2}else u+=2;else u+=4}return a}function DD(i,s){const a=yr(s,i);if(Yi(a)){const u=a[1];80&a[2]?Ea(u,a,u.template,a[8]):a[5]>0&&Fy(a)}}function Fy(i){for(let u=hd(i);null!==u;u=fu(u))for(let c=10;c<u.length;c++){const f=u[c];if(1024&f[2]){const _=f[1];Ea(_,f,_.template,f[8])}else f[5]>0&&Fy(f)}const a=i[1].components;if(null!==a)for(let u=0;u<a.length;u++){const c=yr(a[u],i);Yi(c)&&c[5]>0&&Fy(c)}}function bD(i,s){const a=yr(s,i),u=a[1];(function z0(i,s){for(let a=s.length;a<i.blueprint.length;a++)s.push(i.blueprint[a])})(u,a),Ef(u,a,a[8])}function Sg(i,s){return i[13]?i[14][4]=s:i[13]=s,i[14]=s,s}function If(i){for(;i;){i[2]|=64;const s=Cn(i);if(Ch(i)&&!s)return i;i=s}return null}function Vy(i,s,a){const u=s[10];u.begin&&u.begin();try{Ea(i,s,i.template,a)}catch(c){throw Vi(s,c),c}finally{u.end&&u.end()}}function Mg(i){!function Ly(i){for(let s=0;s<i.components.length;s++){const a=i.components[s],u=Ti(a),c=u[1];P0(c,u,c.template,a)}}(i[8])}function Uy(i,s,a){ol(0),s(i,a)}const AD=(()=>Promise.resolve(null))();function By(i){return i[7]||(i[7]=[])}function K0(i){return i.cleanup||(i.cleanup=[])}function Vi(i,s){const a=i[9],u=a?a.get(ln,null):null;u&&u.handleError(s)}function Y0(i,s,a,u,c){for(let f=0;f<a.length;){const _=a[f++],E=a[f++],I=s[_],A=i.data[_];null!==A.setInput?A.setInput(I,c,u,E):I[E]=c}}function ql(i,s,a){let u=a?i.styles:null,c=a?i.classes:null,f=0;if(null!==s)for(let _=0;_<s.length;_++){const E=s[_];"number"==typeof E?f=E:1==f?c=ue(c,E):2==f&&(u=ue(u,E+": "+s[++_]+";"))}a?i.styles=u:i.stylesWithoutHost=u,a?i.classes=c:i.classesWithoutHost=c}const $y=new bn("INJECTOR",-1);class Hy{get(s,a=is){if(a===is){const u=new Error(`NullInjectorError: No provider for ${de(s)}!`);throw u.name="NullInjectorError",u}return a}}const Gy=new bn("Set Injector scope."),Dd={},Q0={};let Df;function SD(){return void 0===Df&&(Df=new Hy),Df}function _u(i,s=null,a=null,u){const c=qy(i,s,a,u);return c._resolveInjectorDefTypes(),c}function qy(i,s=null,a=null,u){return new MD(i,a,s||SD(),u)}class MD{constructor(s,a,u,c=null){this.parent=u,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const f=[];a&&bi(a,E=>this.processProvider(E,s,a)),bi([s],E=>this.processInjectorType(E,[],f)),this.records.set($y,bd(void 0,this));const _=this.records.get(Gy);this.scope=null!=_?_.value:null,this.source=c||("object"==typeof s?null:de(s))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(s=>s.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(s,a=is,u=ut.Default){this.assertNotDestroyed();const c=Se(this),f=Bn(void 0);try{if(!(u&ut.SkipSelf)){let E=this.records.get(s);if(void 0===E){const I=function eE(i){return"function"==typeof i||"object"==typeof i&&i instanceof bn}(s)&&Lt(s);E=I&&this.injectableDefInScope(I)?bd(zy(s),Dd):null,this.records.set(s,E)}if(null!=E)return this.hydrate(s,E)}return(u&ut.Self?SD():this.parent).get(s,a=u&ut.Optional&&a===is?null:a)}catch(_){if("NullInjectorError"===_.name){if((_[Il]=_[Il]||[]).unshift(de(s)),c)throw _;return function fa(i,s,a,u){const c=i[Il];throw s[F]&&c.unshift(s[F]),i.message=function Oo(i,s,a,u=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.substr(2):i;let c=de(s);if(Array.isArray(s))c=s.map(de).join(" -> ");else if("object"==typeof s){let f=[];for(let _ in s)if(s.hasOwnProperty(_)){let E=s[_];f.push(_+":"+("string"==typeof E?JSON.stringify(E):de(E)))}c=`{${f.join(", ")}}`}return`${a}${u?"("+u+")":""}[${c}]: ${i.replace(b,"\n  ")}`}("\n"+i.message,c,a,u),i.ngTokenPath=c,i[Il]=null,i}(_,s,"R3InjectorError",this.source)}throw _}finally{Bn(f),Se(c)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(s=>this.get(s))}toString(){const s=[];return this.records.forEach((u,c)=>s.push(de(c))),`R3Injector[${s.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new xe(205,!1)}processInjectorType(s,a,u){if(!(s=Q(s)))return!1;let c=Dr(s);const f=null==c&&s.ngModule||void 0,_=void 0===f?s:f,E=-1!==u.indexOf(_);if(void 0!==f&&(c=Dr(f)),null==c)return!1;if(null!=c.imports&&!E){let S;u.push(_);try{bi(c.imports,P=>{this.processInjectorType(P,a,u)&&(void 0===S&&(S=[]),S.push(P))})}finally{}if(void 0!==S)for(let P=0;P<S.length;P++){const{ngModule:V,providers:W}=S[P];bi(W,me=>this.processProvider(me,V,W||lt))}}this.injectorDefTypes.add(_);const I=Br(_)||(()=>new _);this.records.set(_,bd(I,Dd));const A=c.providers;if(null!=A&&!E){const S=s;bi(A,P=>this.processProvider(P,S,A))}return void 0!==f&&void 0!==s.providers}processProvider(s,a,u){let c=Cd(s=Q(s))?s:Q(s&&s.provide);const f=function xD(i,s,a){return Wy(i)?bd(void 0,i.useValue):bd(X0(i),Dd)}(s);if(Cd(s)||!0!==s.multi)this.records.get(c);else{let _=this.records.get(c);_||(_=bd(void 0,Dd,!0),_.factory=()=>wt(_.multi),this.records.set(c,_)),c=s,_.multi.push(s)}this.records.set(c,f)}hydrate(s,a){return a.value===Dd&&(a.value=Q0,a.value=a.factory()),"object"==typeof a.value&&a.value&&function PD(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(a.value)&&this.onDestroy.add(a.value),a.value}injectableDefInScope(s){if(!s.providedIn)return!1;const a=Q(s.providedIn);return"string"==typeof a?"any"===a||a===this.scope:this.injectorDefTypes.has(a)}}function zy(i){const s=Lt(i),a=null!==s?s.factory:Br(i);if(null!==a)return a;if(i instanceof bn)throw new xe(204,!1);if(i instanceof Function)return function J0(i){const s=i.length;if(s>0)throw function zr(i,s){const a=[];for(let u=0;u<i;u++)a.push(s);return a}(s,"?"),new xe(204,!1);const a=function si(i){const s=i&&(i[Ri]||i[Hi]);if(s){const a=function hs(i){if(i.hasOwnProperty("name"))return i.name;const s=(""+i).match(/^function\s*([^\s(]+)/);return null===s?"":s[1]}(i);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),s}return null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new xe(204,!1)}function X0(i,s,a){let u;if(Cd(i)){const c=Q(i);return Br(c)||zy(c)}if(Wy(i))u=()=>Q(i.useValue);else if(function ND(i){return!(!i||!i.useFactory)}(i))u=()=>i.useFactory(...wt(i.deps||[]));else if(function RD(i){return!(!i||!i.useExisting)}(i))u=()=>Je(Q(i.useExisting));else{const c=Q(i&&(i.useClass||i.provide));if(!function OD(i){return!!i.deps}(i))return Br(c)||zy(c);u=()=>new c(...wt(i.deps))}return u}function bd(i,s,a=!1){return{factory:i,value:s,multi:a?[]:void 0}}function Wy(i){return null!==i&&"object"==typeof i&&z in i}function Cd(i){return"function"==typeof i}let ho=(()=>{class i{static create(a,u){var c;if(Array.isArray(a))return _u({name:""},u,a,"");{const f=null!==(c=a.name)&&void 0!==c?c:"";return _u({name:f},a.parent,a.providers,f)}}}return i.THROW_IF_NOT_FOUND=is,i.NULL=new Hy,i.\u0275prov=Xt({token:i,providedIn:"any",factory:()=>Je($y)}),i.__NG_ELEMENT_ID__=-1,i})();function Jr(i,s){Qi(Ti(i)[1],pn())}function $o(i){let s=function Rr(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),a=!0;const u=[i];for(;s;){let c;if(Ur(i))c=s.\u0275cmp||s.\u0275dir;else{if(s.\u0275cmp)throw new xe(903,"");c=s.\u0275dir}if(c){if(a){u.push(c);const _=i;_.inputs=Qy(i.inputs),_.declaredInputs=Qy(i.declaredInputs),_.outputs=Qy(i.outputs);const E=c.hostBindings;E&&VD(i,E);const I=c.viewQuery,A=c.contentQueries;if(I&&lE(i,I),A&&cE(i,A),ie(i.inputs,c.inputs),ie(i.declaredInputs,c.declaredInputs),ie(i.outputs,c.outputs),Ur(c)&&c.data.animation){const S=i.data;S.animation=(S.animation||[]).concat(c.data.animation)}}const f=c.features;if(f)for(let _=0;_<f.length;_++){const E=f[_];E&&E.ngInherit&&E(i),E===$o&&(a=!1)}}s=Object.getPrototypeOf(s)}!function LD(i){let s=0,a=null;for(let u=i.length-1;u>=0;u--){const c=i[u];c.hostVars=s+=c.hostVars,c.hostAttrs=ia(c.hostAttrs,a=ia(a,c.hostAttrs))}}(u)}function Qy(i){return i===rr?{}:i===lt?[]:i}function lE(i,s){const a=i.viewQuery;i.viewQuery=a?(u,c)=>{s(u,c),a(u,c)}:s}function cE(i,s){const a=i.contentQueries;i.contentQueries=a?(u,c,f)=>{s(u,c,f),a(u,c,f)}:s}function VD(i,s){const a=i.hostBindings;i.hostBindings=a?(u,c)=>{s(u,c),a(u,c)}:s}let Tf=null;function ar(){if(!Tf){const i=kt.Symbol;if(i&&i.iterator)Tf=i.iterator;else{const s=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<s.length;++a){const u=s[a];"entries"!==u&&"size"!==u&&Map.prototype[u]===Map.prototype.entries&&(Tf=u)}}}return Tf}function wr(i){return!!Af(i)&&(Array.isArray(i)||!(i instanceof Map)&&ar()in i)}function Af(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function Xr(i,s,a){return!Object.is(i[s],a)&&(i[s]=a,!0)}function wu(i,s,a,u){const c=we();return Xr(c,Ts(),s)&&(Rt(),Bo(Dn(),c,i,s,a,u)),wu}function Rf(i,s=ut.Default){const a=we();return null===a?Je(i,s):hi(pn(),a,Q(i),s)}function Zl(){throw new Error("invalid")}function d_(i,s,a){const u=we();return Xr(u,Ts(),s)&&function as(i,s,a,u,c,f,_,E){const I=mr(s,a);let S,A=s.inputs;!E&&null!=A&&(S=A[u])?(Y0(i,a,S,u,c),ys(s)&&function bg(i,s){const a=yr(s,i);16&a[2]||(a[2]|=64)}(a,s.index)):3&s.type&&(u=function hD(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(u),c=null!=_?_(c,s.value||"",u):c,hn(f)?f.setProperty(I,u,c):fl(u)||(I.setProperty?I.setProperty(u,c):I[u]=c))}(Rt(),Dn(),u,i,s,u[11],a,!1),d_}function h_(i,s,a,u,c){const _=c?"class":"style";Y0(i,a,s.inputs[_],_,u)}function Nf(i,s,a,u){const c=we(),f=Rt(),_=20+i,E=c[11],I=c[_]=Mt(E,s,function Xm(){return dt.lFrame.currentNamespace}()),A=f.firstCreatePass?function Yl(i,s,a,u,c,f,_){const E=s.consts,A=Ed(s,i,2,c,$r(E,f));return function Py(i,s,a,u){let c=!1;if(Za()){const f=function _D(i,s,a){const u=i.directiveRegistry;let c=null;if(u)for(let f=0;f<u.length;f++){const _=u[f];w0(a,_.selectors,!1)&&(c||(c=[]),no(di(a,s),i,_.type),Ur(_)?(B0(i,a),c.unshift(_)):c.push(_))}return c}(i,s,a),_=null===u?null:{"":-1};if(null!==f){c=!0,$0(a,i.data.length,f.length);for(let S=0;S<f.length;S++){const P=f[S];P.providersResolver&&P.providersResolver(P)}let E=!1,I=!1,A=wd(i,s,f.length,null);for(let S=0;S<f.length;S++){const P=f[S];a.mergedAttrs=ia(a.mergedAttrs,P.hostAttrs),H0(i,a,s,A,P),vD(A,P,_),null!==P.contentQueries&&(a.flags|=8),(null!==P.hostBindings||null!==P.hostAttrs||0!==P.hostVars)&&(a.flags|=128);const V=P.type.prototype;!E&&(V.ngOnChanges||V.ngOnInit||V.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(a.index),E=!0),!I&&(V.ngOnChanges||V.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(a.index),I=!0),A++}!function Dg(i,s){const u=s.directiveEnd,c=i.data,f=s.attrs,_=[];let E=null,I=null;for(let A=s.directiveStart;A<u;A++){const S=c[A],P=S.inputs,V=null===f||E0(s)?null:G0(P,f);_.push(V),E=Oy(P,A,E),I=Oy(S.outputs,A,I)}null!==E&&(E.hasOwnProperty("class")&&(s.flags|=16),E.hasOwnProperty("style")&&(s.flags|=32)),s.initialInputs=_,s.inputs=E,s.outputs=I}(i,a)}_&&function j0(i,s,a){if(s){const u=i.localNames=[];for(let c=0;c<s.length;c+=2){const f=a[s[c+1]];if(null==f)throw new xe(-301,!1);u.push(s[c],f)}}}(a,u,_)}return a.mergedAttrs=ia(a.mergedAttrs,a.attrs),c}(s,a,A,$r(E,_)),null!==A.attrs&&ql(A,A.attrs,!1),null!==A.mergedAttrs&&ql(A,A.mergedAttrs,!0),null!==s.queries&&s.queries.elementStart(s,A),A}(_,f,c,0,s,a,u):f.data[_];Hr(A,!0);const S=A.mergedAttrs;null!==S&&hl(E,I,S);const P=A.classes;null!==P&&wy(E,I,P);const V=A.styles;return null!==V&&hf(E,I,V),64!=(64&A.flags)&&Ft(f,c,I,A),0===function ea(){return dt.lFrame.elementDepthCount}()&&Xe(I,c),function Wa(){dt.lFrame.elementDepthCount++}(),La(A)&&(function Eg(i,s,a){!Za()||(function mD(i,s,a,u){const c=a.directiveStart,f=a.directiveEnd;i.firstCreatePass||di(a,s),Xe(u,s);const _=a.initialInputs;for(let E=c;E<f;E++){const I=i.data[E],A=Ur(I);A&&ED(s,a,I);const S=es(s,i,E,a);Xe(S,s),null!==_&&oA(0,E-c,S,I,0,_),A&&(yr(a.index,s)[8]=S)}}(i,s,a,mr(a,s)),128==(128&a.flags)&&function yD(i,s,a){const u=a.directiveStart,c=a.directiveEnd,_=a.index,E=function il(){return dt.lFrame.currentDirectiveIndex}();try{Ss(_);for(let I=u;I<c;I++){const A=i.data[I],S=s[I];ta(I),(null!==A.hostBindings||0!==A.hostVars||null!==A.hostAttrs)&&U0(A,S)}}finally{Ss(-1),ta(E)}}(i,s,a))}(f,c,A),function wf(i,s,a){if(Tc(s)){const c=s.directiveEnd;for(let f=s.directiveStart;f<c;f++){const _=i.data[f];_.contentQueries&&_.contentQueries(1,a[f],f)}}}(f,A,c)),null!==u&&function Gl(i,s,a=mr){const u=s.localNames;if(null!==u){let c=s.index+1;for(let f=0;f<u.length;f+=2){const _=u[f+1],E=-1===_?a(s,i):i[_];i[c++]=E}}}(c,A),Nf}function Ql(){let i=pn();el()?function tl(){dt.lFrame.isParent=!1}():(i=i.parent,Hr(i,!1));const s=i;!function Ka(){dt.lFrame.elementDepthCount--}();const a=Rt();return a.firstCreatePass&&(Qi(a,i),Tc(i)&&a.queries.elementEnd(i)),null!=s.classesWithoutHost&&function Mh(i){return 0!=(16&i.flags)}(s)&&h_(a,s,we(),s.classesWithoutHost,!0),null!=s.stylesWithoutHost&&function Op(i){return 0!=(32&i.flags)}(s)&&h_(a,s,we(),s.stylesWithoutHost,!1),Ql}function $g(i,s,a,u){return Nf(i,s,a,u),Ql(),$g}function zg(i){return!!i&&"function"==typeof i.then}function Wg(i){return!!i&&"function"==typeof i.subscribe}const f_=Wg;function Kg(i,s,a,u){const c=we(),f=Rt(),_=pn();return function Zg(i,s,a,u,c,f,_,E){const I=La(u),S=i.firstCreatePass&&K0(i),P=s[8],V=By(s);let W=!0;if(3&u.type||E){const Be=mr(u,s),Qe=E?E(Be):Be,Ie=V.length,at=E?Ot=>E(nn(Ot[u.index])):u.index;if(hn(a)){let Ot=null;if(!E&&I&&(Ot=function p_(i,s,a,u){const c=i.cleanup;if(null!=c)for(let f=0;f<c.length-1;f+=2){const _=c[f];if(_===a&&c[f+1]===u){const E=s[7],I=c[f+2];return E.length>I?E[I]:null}"string"==typeof _&&(f+=2)}return null}(i,s,c,u.index)),null!==Ot)(Ot.__ngLastListenerFn__||Ot).__ngNextListenerFn__=f,Ot.__ngLastListenerFn__=f,W=!1;else{f=kd(u,s,P,f,!1);const on=a.listen(Qe,c,f);V.push(f,on),S&&S.push(c,at,Ie,Ie+1)}}else f=kd(u,s,P,f,!0),Qe.addEventListener(c,f,_),V.push(f),S&&S.push(c,at,Ie,_)}else f=kd(u,s,P,f,!1);const me=u.outputs;let Oe;if(W&&null!==me&&(Oe=me[c])){const Be=Oe.length;if(Be)for(let Qe=0;Qe<Be;Qe+=2){const Bi=s[Oe[Qe]][Oe[Qe+1]].subscribe(f),wc=V.length;V.push(f,Bi),S&&S.push(c,u.index,wc,-(wc+1))}}}(f,c,c[11],_,i,s,!!a,u),Kg}function Yg(i,s,a,u){try{return!1!==a(u)}catch(c){return Vi(i,c),!1}}function kd(i,s,a,u,c){return function f(_){if(_===Function)return u;const E=2&i.flags?yr(i.index,s):s;0==(32&s[2])&&If(E);let I=Yg(s,0,u,_),A=f.__ngNextListenerFn__;for(;A;)I=Yg(s,0,A,_)&&I,A=A.__ngNextListenerFn__;return c&&!1===I&&(_.preventDefault(),_.returnValue=!1),I}}function Qg(i,s,a,u,c){const f=i[a+1],_=null===s;let E=u?co(f):Uo(f),I=!1;for(;0!==E&&(!1===I||_);){const S=i[E+1];Ud(i[E],s)&&(I=!0,i[E+1]=u?Ty(S):gf(S)),E=u?co(S):Uo(S)}I&&(i[a+1]=u?gf(f):Ty(f))}function Ud(i,s){return null===i||null==s||(Array.isArray(i)?i[1]:i)===s||!(!Array.isArray(i)||"string"!=typeof s)&&ca(i,s)>=0}function w_(i,s){return function mo(i,s,a,u){const c=we(),f=Rt(),_=function Ii(i){const s=dt.lFrame,a=s.bindingIndex;return s.bindingIndex=s.bindingIndex+i,a}(2);f.firstUpdatePass&&function I_(i,s,a,u){const c=i.data;if(null===c[a+1]){const f=c[_r()],_=function Ca(i,s){return s>=i.expandoStartIndex}(i,a);(function tm(i,s){return 0!=(i.flags&(s?16:32))})(f,u)&&null===s&&!_&&(s=!1),s=function kE(i,s,a,u){const c=function na(i){const s=dt.lFrame.currentDirectiveIndex;return-1===s?null:i[s]}(i);let f=u?s.residualClasses:s.residualStyles;if(null===c)0===(u?s.classBindings:s.styleBindings)&&(a=$d(a=D_(null,i,s,a,u),s.attrs,u),f=null);else{const _=s.directiveStylingLast;if(-1===_||i[_]!==c)if(a=D_(c,i,s,a,u),null===f){let I=function FE(i,s,a){const u=a?s.classBindings:s.styleBindings;if(0!==Uo(u))return i[co(u)]}(i,s,u);void 0!==I&&Array.isArray(I)&&(I=D_(null,i,s,I[1],u),I=$d(I,s.attrs,u),function jd(i,s,a,u){i[co(a?s.classBindings:s.styleBindings)]=u}(i,s,u,I))}else f=function eb(i,s,a){let u;const c=s.directiveEnd;for(let f=1+s.directiveStylingLast;f<c;f++)u=$d(u,i[f].hostAttrs,a);return $d(u,s.attrs,a)}(i,s,u)}return void 0!==f&&(u?s.residualClasses=f:s.residualStyles=f),a}(c,f,s,u),function E_(i,s,a,u,c,f){let _=f?s.classBindings:s.styleBindings,E=co(_),I=Uo(_);i[u]=a;let S,A=!1;if(Array.isArray(a)){const P=a;S=P[1],(null===S||ca(P,S)>0)&&(A=!0)}else S=a;if(c)if(0!==I){const V=co(i[E+1]);i[u+1]=ff(V,E),0!==V&&(i[V+1]=mf(i[V+1],u)),i[E+1]=function b0(i,s){return 131071&i|s<<17}(i[E+1],u)}else i[u+1]=ff(E,0),0!==E&&(i[E+1]=mf(i[E+1],u)),E=u;else i[u+1]=ff(I,0),0===E?E=u:i[I+1]=mf(i[I+1],u),I=u;A&&(i[u+1]=gf(i[u+1])),Qg(i,S,u,!0),Qg(i,S,u,!1),function ZD(i,s,a,u,c){const f=c?i.residualClasses:i.residualStyles;null!=f&&"string"==typeof s&&ca(f,s)>=0&&(a[u+1]=Ty(a[u+1]))}(s,S,i,u,f),_=ff(E,I),f?s.classBindings=_:s.styleBindings=_}(c,f,s,a,_,u)}}(f,i,_,u),s!==Tt&&Xr(c,_,s)&&function Xg(i,s,a,u,c,f,_,E){if(!(3&s.type))return;const I=i.data,A=I[E+1];Bf(function dg(i){return 1==(1&i)}(A)?em(I,s,a,c,Uo(A),_):void 0)||(Bf(f)||function pf(i){return 2==(2&i)}(A)&&(f=em(I,null,a,c,E,_)),function _0(i,s,a,u,c){const f=hn(i);if(s)c?f?i.addClass(a,u):a.classList.add(u):f?i.removeClass(a,u):a.classList.remove(u);else{let _=-1===u.indexOf("-")?void 0:ne.DashCase;if(null==c)f?i.removeStyle(a,u,_):a.style.removeProperty(u);else{const E="string"==typeof c&&c.endsWith("!important");E&&(c=c.slice(0,-10),_|=ne.Important),f?i.setStyle(a,u,c,_):a.style.setProperty(u,c,E?"important":"")}}}(u,_,function Zs(i,s){return nn(s[i])}(_r(),a),c,f))}(f,f.data[_r()],c,c[11],i,c[_+1]=function VE(i,s){return null==i||("string"==typeof s?i+=s:"object"==typeof i&&(i=de(ss(i)))),i}(s,a),u,_)}(i,s,null,!0),w_}function D_(i,s,a,u,c){let f=null;const _=a.directiveEnd;let E=a.directiveStylingLast;for(-1===E?E=a.directiveStart:E++;E<_&&(f=s[E],u=$d(u,f.hostAttrs,c),f!==i);)E++;return null!==i&&(a.directiveStylingLast=E),u}function $d(i,s,a){const u=a?1:2;let c=-1;if(null!==s)for(let f=0;f<s.length;f++){const _=s[f];"number"==typeof _?c=_:c===u&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),pi(i,_,!!a||s[++f]))}return void 0===i?null:i}function em(i,s,a,u,c,f){const _=null===s;let E;for(;c>0;){const I=i[c],A=Array.isArray(I),S=A?I[1]:I,P=null===S;let V=a[c+1];V===Tt&&(V=P?lt:void 0);let W=P?kh(V,u):S===u?V:void 0;if(A&&!Bf(W)&&(W=kh(I,u)),Bf(W)&&(E=W,_))return E;const me=i[c+1];c=_?co(me):Uo(me)}if(null!==s){let I=f?s.residualClasses:s.residualStyles;null!=I&&(E=kh(I,u))}return E}function Bf(i){return void 0!==i}function UE(i,s=""){const a=we(),u=Rt(),c=i+20,f=u.firstCreatePass?Ed(u,c,1,s,null):u.data[c],_=a[c]=function pd(i,s){return hn(i)?i.createText(s):i.createTextNode(s)}(a[11],s);Ft(u,a,_,f),Hr(f,!1)}const Su=void 0;var YE=["en",[["a","p"],["AM","PM"],Su],[["AM","PM"],Su,Su],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Su,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Su,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Su,"{1} 'at' {0}",Su],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function am(i){const a=Math.floor(Math.abs(i)),u=i.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===u?1:5}];let Jl={};function um(i){const s=function QE(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=P_(s);if(a)return a;const u=s.split("-")[0];if(a=P_(u),a)return a;if("en"===u)return YE;throw new Error(`Missing locale data for the locale "${i}".`)}function O_(i){return um(i)[et.PluralCase]}function P_(i){return i in Jl||(Jl[i]=kt.ng&&kt.ng.common&&kt.ng.common.locales&&kt.ng.common.locales[i]),Jl[i]}var et=(()=>((et=et||{})[et.LocaleId=0]="LocaleId",et[et.DayPeriodsFormat=1]="DayPeriodsFormat",et[et.DayPeriodsStandalone=2]="DayPeriodsStandalone",et[et.DaysFormat=3]="DaysFormat",et[et.DaysStandalone=4]="DaysStandalone",et[et.MonthsFormat=5]="MonthsFormat",et[et.MonthsStandalone=6]="MonthsStandalone",et[et.Eras=7]="Eras",et[et.FirstDayOfWeek=8]="FirstDayOfWeek",et[et.WeekendRange=9]="WeekendRange",et[et.DateFormat=10]="DateFormat",et[et.TimeFormat=11]="TimeFormat",et[et.DateTimeFormat=12]="DateTimeFormat",et[et.NumberSymbols=13]="NumberSymbols",et[et.NumberFormats=14]="NumberFormats",et[et.CurrencyCode=15]="CurrencyCode",et[et.CurrencySymbol=16]="CurrencySymbol",et[et.CurrencyName=17]="CurrencyName",et[et.Currencies=18]="Currencies",et[et.Directionality=19]="Directionality",et[et.PluralCase=20]="PluralCase",et[et.ExtraData=21]="ExtraData",et))();const lm="en-US";let XE=lm;function Zf(i,s,a,u,c){if(i=Q(i),Array.isArray(i))for(let f=0;f<i.length;f++)Zf(i[f],s,a,u,c);else{const f=Rt(),_=we();let E=Cd(i)?i:Q(i.provide),I=X0(i);const A=pn(),S=1048575&A.providerIndexes,P=A.directiveStart,V=A.providerIndexes>>20;if(Cd(i)||!i.multi){const W=new Mo(I,c,Rf),me=oc(E,s,c?S:S+V,P);-1===me?(no(di(A,_),f,E),Ru(f,i,s.length),s.push(E),A.directiveStart++,A.directiveEnd++,c&&(A.providerIndexes+=1048576),a.push(W),_.push(W)):(a[me]=W,_[me]=W)}else{const W=oc(E,s,S+V,P),me=oc(E,s,S,S+V),Oe=W>=0&&a[W],Be=me>=0&&a[me];if(c&&!Be||!c&&!Oe){no(di(A,_),f,E);const Qe=function Cb(i,s,a,u,c){const f=new Mo(i,a,Rf);return f.multi=[],f.index=s,f.componentProviders=0,Yf(f,c,u&&!a),f}(c?bb:hw,a.length,c,u,I);!c&&Be&&(a[me].providerFactory=Qe),Ru(f,i,s.length,0),s.push(E),A.directiveStart++,A.directiveEnd++,c&&(A.providerIndexes+=1048576),a.push(Qe),_.push(Qe)}else Ru(f,i,W>-1?W:me,Yf(a[c?me:W],I,!c&&u));!c&&u&&Be&&a[me].componentProviders++}}}function Ru(i,s,a,u){const c=Cd(s),f=function Ky(i){return!!i.useClass}(s);if(c||f){const I=(f?Q(s.useClass):s).prototype.ngOnDestroy;if(I){const A=i.destroyHooks||(i.destroyHooks=[]);if(!c&&s.multi){const S=A.indexOf(a);-1===S?A.push(a,[u,I]):A[S+1].push(u,I)}else A.push(a,I)}}}function Yf(i,s,a){return a&&i.componentProviders++,i.multi.push(s)-1}function oc(i,s,a,u){for(let c=a;c<u;c++)if(s[c]===i)return c;return-1}function hw(i,s,a,u){return yo(this.multi,[])}function bb(i,s,a,u){const c=this.multi;let f;if(this.providerFactory){const _=this.providerFactory.componentProviders,E=es(a,a[1],this.providerFactory.index,u);f=E.slice(0,_),yo(c,f);for(let I=_;I<E.length;I++)f.push(E[I])}else f=[],yo(c,f);return f}function yo(i,s){for(let a=0;a<i.length;a++)s.push((0,i[a])());return s}function fw(i,s=[]){return a=>{a.providersResolver=(u,c)=>function pm(i,s,a){const u=Rt();if(u.firstCreatePass){const c=Ur(i);Zf(a,u.data,u.blueprint,c,!0),Zf(s,u.data,u.blueprint,c,!1)}}(u,c?c(i):i,s)}}class Nu{}class gm{resolveComponentFactory(s){throw function Tb(i){const s=Error(`No component factory found for ${de(i)}. Did you add it to @NgModule.entryComponents?`);return s.ngComponent=i,s}(s)}}let cr=(()=>{class i{}return i.NULL=new gm,i})();function Ab(){return rh(pn(),we())}function rh(i,s){return new Qf(mr(i,s))}let Qf=(()=>{class i{constructor(a){this.nativeElement=a}}return i.__NG_ELEMENT_ID__=Ab,i})();function gw(i){return i instanceof Qf?i.nativeElement:i}class mw{}let Sb=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>function Ou(){const i=we(),a=yr(pn().index,i);return function Mb(i){return i[11]}(Ei(a)?a:i)}(),i})(),ih=(()=>{class i{}return i.\u0275prov=Xt({token:i,providedIn:"root",factory:()=>null}),i})();class yw{constructor(s){this.full=s,this.major=s.split(".")[0],this.minor=s.split(".")[1],this.patch=s.split(".").slice(2).join(".")}}const W_=new yw("13.2.7"),mm={};function Vs(i,s,a,u,c=!1){for(;null!==a;){const f=s[a.index];if(null!==f&&u.push(nn(f)),ui(f))for(let E=10;E<f.length;E++){const I=f[E],A=I[1].firstChild;null!==A&&Vs(I[1],I,A,u)}const _=a.type;if(8&_)Vs(i,s,a.child,u);else if(32&_){const E=Ke(a,s);let I;for(;I=E();)u.push(I)}else if(16&_){const E=m0(s,a);if(Array.isArray(E))u.push(...E);else{const I=Cn(s[16]);Vs(I[1],I,E,u,!0)}}a=c?a.projectionNext:a.next}return u}class sh{constructor(s,a){this._lView=s,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const s=this._lView,a=s[1];return Vs(a,s,a.firstChild,[])}get context(){return this._lView[8]}set context(s){this._lView[8]=s}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const s=this._lView[3];if(ui(s)){const a=s[8],u=a?a.indexOf(this):-1;u>-1&&(ks(s,u),Rs(a,u))}this._attachedToViewContainer=!1}yy(this._lView[1],this._lView)}onDestroy(s){Ig(this._lView[1],this._lView,null,s)}markForCheck(){If(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Vy(this._lView[1],this._lView,this.context)}checkNoChanges(){!function W0(i,s,a){Cs(!0);try{Vy(i,s,a)}finally{Cs(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new xe(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function sg(i,s){yd(i,s,s[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(s){if(this._attachedToViewContainer)throw new xe(902,"");this._appRef=s}}class oh extends sh{constructor(s){super(s),this._view=s}detectChanges(){Mg(this._view)}checkNoChanges(){!function TD(i){Cs(!0);try{Mg(i)}finally{Cs(!1)}}(this._view)}get context(){return null}}class Jf extends cr{constructor(s){super(),this.ngModule=s}resolveComponentFactory(s){const a=Ut(s);return new ep(a,this.ngModule)}}function Xf(i){const s=[];for(let a in i)i.hasOwnProperty(a)&&s.push({propName:i[a],templateName:a});return s}class ep extends Nu{constructor(s,a){super(),this.componentDef=s,this.ngModule=a,this.componentType=s.type,this.selector=function _a(i){return i.map(by).join(",")}(s.selectors),this.ngContentSelectors=s.ngContentSelectors?s.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return Xf(this.componentDef.inputs)}get outputs(){return Xf(this.componentDef.outputs)}create(s,a,u,c){const f=(c=c||this.ngModule)?function Z_(i,s){return{get:(a,u,c)=>{const f=i.get(a,mm,c);return f!==mm||u===mm?f:s.get(a,u,c)}}}(s,c.injector):s,_=f.get(mw,To),E=f.get(ih,null),I=_.createRenderer(null,this.componentDef),A=this.componentDef.selectors[0][0]||"div",S=u?function F0(i,s,a){if(hn(i))return i.selectRootElement(s,a===Vt.ShadowDom);let u="string"==typeof s?i.querySelector(s):s;return u.textContent="",u}(I,u,this.componentDef.encapsulation):Mt(_.createRenderer(null,this.componentDef),A,function K_(i){const s=i.toLowerCase();return"svg"===s?"svg":"math"===s?"math":null}(A)),P=this.componentDef.onPush?576:528,V=function uE(i,s){return{components:[],scheduler:i||kl,clean:AD,playerHandler:s||null,flags:0}}(),W=wg(0,null,null,1,0,null,null,null,null,null),me=yu(null,W,V,P,null,null,_,I,E,f);let Oe,Be;Ys(me);try{const Qe=function oE(i,s,a,u,c,f){const _=a[1];a[20]=i;const I=Ed(_,20,2,"#host",null),A=I.mergedAttrs=s.hostAttrs;null!==A&&(ql(I,A,!0),null!==i&&(hl(c,i,A),null!==I.classes&&wy(c,i,I.classes),null!==I.styles&&hf(c,i,I.styles)));const S=u.createRenderer(i,s),P=yu(a,Ny(s),null,s.onPush?64:16,a[20],I,u,S,f||null,null);return _.firstCreatePass&&(no(di(I,a),_,s.type),B0(_,I),$0(I,a.length,1)),Sg(a,P),a[20]=P}(S,this.componentDef,me,_,I);if(S)if(u)hl(I,S,["ng-version",W_.full]);else{const{attrs:Ie,classes:at}=function _d(i){const s=[],a=[];let u=1,c=2;for(;u<i.length;){let f=i[u];if("string"==typeof f)2===c?""!==f&&s.push(f,i[++u]):8===c&&a.push(f);else{if(!Li(c))break;c=f}u++}return{attrs:s,classes:a}}(this.componentDef.selectors[0]);Ie&&hl(I,S,Ie),at&&at.length>0&&wy(I,S,at.join(" "))}if(Be=Xo(W,20),void 0!==a){const Ie=Be.projection=[];for(let at=0;at<this.ngContentSelectors.length;at++){const Ot=a[at];Ie.push(null!=Ot?Array.from(Ot):null)}}Oe=function aE(i,s,a,u,c){const f=a[1],_=function pD(i,s,a){const u=pn();i.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),H0(i,u,s,wd(i,s,1,null),a));const c=es(s,i,u.directiveStart,u);Xe(c,s);const f=mr(u,s);return f&&Xe(f,s),c}(f,a,s);if(u.components.push(_),i[8]=_,c&&c.forEach(I=>I(_,s)),s.contentQueries){const I=pn();s.contentQueries(1,_,I.directiveStart)}const E=pn();return!f.firstCreatePass||null===s.hostBindings&&null===s.hostAttrs||(Ss(E.index),V0(a[1],E,0,E.directiveStart,E.directiveEnd,s),U0(s,_)),_}(Qe,this.componentDef,me,V,[Jr]),Ef(W,me,null)}finally{Js()}return new _w(this.componentType,Oe,rh(Be,me),me,Be)}}class _w extends class pw{}{constructor(s,a,u,c,f){super(),this.location=u,this._rootLView=c,this._tNode=f,this.instance=a,this.hostView=this.changeDetectorRef=new oh(c),this.componentType=s}get injector(){return new Di(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(s){this.hostView.onDestroy(s)}}class ac{}class ym{}const Pu=new Map;class np extends ac{constructor(s,a){super(),this._parent=a,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Jf(this);const u=cn(s);this._bootstrapComponents=p(u.bootstrap),this._r3Injector=qy(s,a,[{provide:ac,useValue:this},{provide:cr,useValue:this.componentFactoryResolver}],de(s)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(s)}get(s,a=ho.THROW_IF_NOT_FOUND,u=ut.Default){return s===ho||s===ac||s===$y?this:this._r3Injector.get(s,a,u)}destroy(){const s=this._r3Injector;!s.destroyed&&s.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(s){this.destroyCbs.push(s)}}class J_ extends ym{constructor(s){super(),this.moduleType=s,null!==cn(s)&&function Rb(i){const s=new Set;!function a(u){const c=cn(u,!0),f=c.id;null!==f&&(function Y_(i,s,a){if(s&&s!==a)throw new Error(`Duplicate module registered for ${i} - ${de(s)} vs ${de(s.name)}`)}(f,Pu.get(f),u),Pu.set(f,u));const _=p(c.imports);for(const E of _)s.has(E)||(s.add(E),a(E))}(i)}(s)}create(s){return new np(this.moduleType,s)}}function _m(i){return s=>{setTimeout(i,void 0,s)}}const Ui=class Sw extends g.x{constructor(s=!1){super(),this.__isAsync=s}emit(s){super.next(s)}subscribe(s,a,u){var c,f,_;let E=s,I=a||(()=>null),A=u;if(s&&"object"==typeof s){const P=s;E=null===(c=P.next)||void 0===c?void 0:c.bind(P),I=null===(f=P.error)||void 0===f?void 0:f.bind(P),A=null===(_=P.complete)||void 0===_?void 0:_.bind(P)}this.__isAsync&&(I=_m(I),E&&(E=_m(E)),A&&(A=_m(A)));const S=super.subscribe({next:E,error:I,complete:A});return s instanceof Z.w0&&s.add(S),S}};function ev(){return this._results[ar()]()}class tv{constructor(s=!1){this._emitDistinctChangesOnly=s,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=ar(),u=tv.prototype;u[a]||(u[a]=ev)}get changes(){return this._changes||(this._changes=new Ui)}get(s){return this._results[s]}map(s){return this._results.map(s)}filter(s){return this._results.filter(s)}find(s){return this._results.find(s)}reduce(s,a){return this._results.reduce(s,a)}forEach(s){this._results.forEach(s)}some(s){return this._results.some(s)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(s,a){const u=this;u.dirty=!1;const c=Tr(s);(this._changesDetected=!function su(i,s,a){if(i.length!==s.length)return!1;for(let u=0;u<i.length;u++){let c=i[u],f=s[u];if(a&&(c=a(c),f=a(f)),f!==c)return!1}return!0}(u._results,c,a))&&(u._results=c,u.length=c.length,u.last=c[this.length-1],u.first=c[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let Pn=(()=>{class i{}return i.__NG_ELEMENT_ID__=xw,i})();const Yt=Pn,Mw=class extends Yt{constructor(s,a,u){super(),this._declarationLView=s,this._declarationTContainer=a,this.elementRef=u}createEmbeddedView(s){const a=this._declarationTContainer.tViews,u=yu(this._declarationLView,a,s,16,null,a.declTNode,null,null,null,null);u[17]=this._declarationLView[this._declarationTContainer.index];const f=this._declarationLView[19];return null!==f&&(u[19]=f.createEmbeddedView(a)),Ef(a,u,s),new sh(u)}};function xw(){return vo(pn(),we())}function vo(i,s){return 4&i.type?new Mw(s,i,rh(i,s)):null}let kn=(()=>{class i{}return i.__NG_ELEMENT_ID__=vm,i})();function vm(){return Rw(pn(),we())}const ri=kn,En=class extends ri{constructor(s,a,u){super(),this._lContainer=s,this._hostTNode=a,this._hostLView=u}get element(){return rh(this._hostTNode,this._hostLView)}get injector(){return new Di(this._hostTNode,this._hostLView)}get parentInjector(){const s=Gr(this._hostTNode,this._hostLView);if(Gc(s)){const a=mn(s,this._hostLView),u=Qt(s);return new Di(a[1].data[u+8],a)}return new Di(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(s){const a=nv(this._lContainer);return null!==a&&a[s]||null}get length(){return this._lContainer.length-10}createEmbeddedView(s,a,u){const c=s.createEmbeddedView(a||{});return this.insert(c,u),c}createComponent(s,a,u,c,f){const _=s&&!function qr(i){return"function"==typeof i}(s);let E;if(_)E=a;else{const P=a||{};E=P.index,u=P.injector,c=P.projectableNodes,f=P.ngModuleRef}const I=_?s:new ep(Ut(s)),A=u||this.parentInjector;if(!f&&null==I.ngModule){const V=(_?A:this.parentInjector).get(ac,null);V&&(f=V)}const S=I.create(A,c,void 0,f);return this.insert(S.hostView,E),S}insert(s,a){const u=s._lView,c=u[1];if(function qa(i){return ui(i[3])}(u)){const S=this.indexOf(s);if(-1!==S)this.detach(S);else{const P=u[3],V=new En(P,P[6],P[3]);V.detach(V.indexOf(s))}}const f=this._adjustIndex(a),_=this._lContainer;!function ZI(i,s,a,u){const c=10+u,f=a.length;u>0&&(a[c-1][4]=s),u<f-10?(s[4]=a[c],Qc(a,10+u,s)):(a.push(s),s[4]=null),s[3]=a;const _=s[17];null!==_&&a!==_&&function YI(i,s){const a=i[9];s[16]!==s[3][3][16]&&(i[2]=!0),null===a?i[9]=[s]:a.push(s)}(_,s);const E=s[19];null!==E&&E.insertView(i),s[2]|=128}(c,u,_,f);const E=ya(f,_),I=u[11],A=ag(I,_[7]);return null!==A&&function Vo(i,s,a,u,c,f){u[0]=c,u[6]=s,yd(i,u,a,1,c,f)}(c,_[6],I,u,A,E),s.attachToViewContainerRef(),Qc(ku(_),f,s),s}move(s,a){return this.insert(s,a)}indexOf(s){const a=nv(this._lContainer);return null!==a?a.indexOf(s):-1}remove(s){const a=this._adjustIndex(s,-1),u=ks(this._lContainer,a);u&&(Rs(ku(this._lContainer),a),yy(u[1],u))}detach(s){const a=this._adjustIndex(s,-1),u=ks(this._lContainer,a);return u&&null!=Rs(ku(this._lContainer),a)?new sh(u):null}_adjustIndex(s,a=0){return null==s?this.length+a:s}};function nv(i){return i[8]}function ku(i){return i[8]||(i[8]=[])}function Rw(i,s){let a;const u=s[i.index];if(ui(u))a=u;else{let c;if(8&i.type)c=nn(u);else{const f=s[11];c=f.createComment("");const _=mr(i,s);Ll(f,ag(f,_),c,function p0(i,s){return hn(i)?i.nextSibling(s):s.nextSibling}(f,_),!1)}s[i.index]=a=function ky(i,s,a,u){return new Array(i,!0,!1,s,null,0,u,a,null,null)}(u,s,c,i),Sg(s,a)}return new En(a,i,s)}class dc{constructor(s){this.queryList=s,this.matches=null}clone(){return new dc(this.queryList)}setDirty(){this.queryList.setDirty()}}class rv{constructor(s=[]){this.queries=s}createEmbeddedView(s){const a=s.queries;if(null!==a){const u=null!==s.contentQueries?s.contentQueries[0]:a.length,c=[];for(let f=0;f<u;f++){const _=a.getByIndex(f);c.push(this.queries[_.indexInDeclarationView].clone())}return new rv(c)}return null}insertView(s){this.dirtyQueriesWithMatches(s)}detachView(s){this.dirtyQueriesWithMatches(s)}dirtyQueriesWithMatches(s){for(let a=0;a<this.queries.length;a++)null!==lv(s,a).matches&&this.queries[a].setDirty()}}class Ow{constructor(s,a,u=null){this.predicate=s,this.flags=a,this.read=u}}class rn{constructor(s=[]){this.queries=s}elementStart(s,a){for(let u=0;u<this.queries.length;u++)this.queries[u].elementStart(s,a)}elementEnd(s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(s)}embeddedTView(s){let a=null;for(let u=0;u<this.length;u++){const c=null!==a?a.length:0,f=this.getByIndex(u).embeddedTView(s,c);f&&(f.indexInDeclarationView=u,null!==a?a.push(f):a=[f])}return null!==a?new rn(a):null}template(s,a){for(let u=0;u<this.queries.length;u++)this.queries[u].template(s,a)}getByIndex(s){return this.queries[s]}get length(){return this.queries.length}track(s){this.queries.push(s)}}class iv{constructor(s,a=-1){this.metadata=s,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(s,a){this.isApplyingToNode(a)&&this.matchTNode(s,a)}elementEnd(s){this._declarationNodeIndex===s.index&&(this._appliesToNextNode=!1)}template(s,a){this.elementStart(s,a)}embeddedTView(s,a){return this.isApplyingToNode(s)?(this.crossesNgTemplate=!0,this.addMatch(-s.index,a),new iv(this.metadata)):null}isApplyingToNode(s){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let u=s.parent;for(;null!==u&&8&u.type&&u.index!==a;)u=u.parent;return a===(null!==u?u.index:-1)}return this._appliesToNextNode}matchTNode(s,a){const u=this.metadata.predicate;if(Array.isArray(u))for(let c=0;c<u.length;c++){const f=u[c];this.matchTNodeWithReadOption(s,a,Em(a,f)),this.matchTNodeWithReadOption(s,a,ml(a,s,f,!1,!1))}else u===Pn?4&a.type&&this.matchTNodeWithReadOption(s,a,-1):this.matchTNodeWithReadOption(s,a,ml(a,s,u,!1,!1))}matchTNodeWithReadOption(s,a,u){if(null!==u){const c=this.metadata.read;if(null!==c)if(c===Qf||c===kn||c===Pn&&4&a.type)this.addMatch(a.index,-2);else{const f=ml(a,s,c,!1,!1);null!==f&&this.addMatch(a.index,f)}else this.addMatch(a.index,u)}}addMatch(s,a){null===this.matches?this.matches=[s,a]:this.matches.push(s,a)}}function Em(i,s){const a=i.localNames;if(null!==a)for(let u=0;u<a.length;u+=2)if(a[u]===s)return a[u+1];return null}function ap(i,s,a,u){return-1===a?function op(i,s){return 11&i.type?rh(i,s):4&i.type?vo(i,s):null}(s,i):-2===a?function wm(i,s,a){return a===Qf?rh(s,i):a===Pn?vo(s,i):a===kn?Rw(s,i):void 0}(i,s,u):es(i,i[1],a,s)}function sv(i,s,a,u){const c=s[19].queries[u];if(null===c.matches){const f=i.data,_=a.matches,E=[];for(let I=0;I<_.length;I+=2){const A=_[I];E.push(A<0?null:ap(s,f[A],_[I+1],a.metadata.read))}c.matches=E}return c.matches}function Im(i,s,a,u){const c=i.queries.getByIndex(a),f=c.matches;if(null!==f){const _=sv(i,s,c,a);for(let E=0;E<f.length;E+=2){const I=f[E];if(I>0)u.push(_[E/2]);else{const A=f[E+1],S=s[-I];for(let P=10;P<S.length;P++){const V=S[P];V[17]===V[3]&&Im(V[1],V,A,u)}if(null!==S[9]){const P=S[9];for(let V=0;V<P.length;V++){const W=P[V];Im(W[1],W,A,u)}}}}}return u}function ov(i){const s=we(),a=Rt(),u=sl();ol(u+1);const c=lv(a,u);if(i.dirty&&Is(s)===(2==(2&c.metadata.flags))){if(null===c.matches)i.reset([]);else{const f=c.crossesNgTemplate?Im(a,s,u,[]):sv(a,s,c,u);i.reset(f,gw),i.notifyOnChanges()}return!0}return!1}function Pw(i,s,a){const u=Rt();u.firstCreatePass&&(Fw(u,new Ow(i,s,a),-1),2==(2&s)&&(u.staticViewQueries=!0)),kw(u,we(),s)}function av(i,s,a,u){const c=Rt();if(c.firstCreatePass){const f=pn();Fw(c,new Ow(s,a,u),f.index),function up(i,s){const a=i.contentQueries||(i.contentQueries=[]);s!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,s)}(c,i),2==(2&a)&&(c.staticContentQueries=!0)}kw(c,we(),a)}function uv(){return function Vb(i,s){return i[19].queries[s].queryList}(we(),sl())}function kw(i,s,a){const u=new tv(4==(4&a));Ig(i,s,u,u.destroy),null===s[19]&&(s[19]=new rv),s[19].queries.push(new dc(u))}function Fw(i,s,a){null===i.queries&&(i.queries=new rn),i.queries.track(new iv(s,a))}function lv(i,s){return i.queries.getByIndex(s)}function Sm(...i){}const mv=new bn("Application Initializer");let ce=(()=>{class i{constructor(a){this.appInits=a,this.resolve=Sm,this.reject=Sm,this.initialized=!1,this.done=!1,this.donePromise=new Promise((u,c)=>{this.resolve=u,this.reject=c})}runInitializers(){if(this.initialized)return;const a=[],u=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let c=0;c<this.appInits.length;c++){const f=this.appInits[c]();if(zg(f))a.push(f);else if(f_(f)){const _=new Promise((E,I)=>{f.subscribe({complete:E,error:I})});a.push(_)}}Promise.all(a).then(()=>{u()}).catch(c=>{this.reject(c)}),0===a.length&&u(),this.initialized=!0}}return i.\u0275fac=function(a){return new(a||i)(Je(mv,8))},i.\u0275prov=Xt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const cp=new bn("AppId",{providedIn:"root",factory:function js(){return`${pc()}${pc()}${pc()}`}});function pc(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Vu=new bn("Platform Initializer"),Jw=new bn("Platform ID"),Uu=new bn("appBootstrapListener");let Mm=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Xt({token:i,factory:i.\u0275fac}),i})();const dr=new bn("LocaleId",{providedIn:"root",factory:()=>Bt(dr,ut.Optional|ut.SkipSelf)||function Xw(){return"undefined"!=typeof $localize&&$localize.locale||lm}()}),yv=new bn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class nI{constructor(s,a){this.ngModuleFactory=s,this.componentFactories=a}}let Qb=(()=>{class i{compileModuleSync(a){return new J_(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const u=this.compileModuleSync(a),f=p(cn(a).declarations).reduce((_,E)=>{const I=Ut(E);return I&&_.push(new ep(I)),_},[]);return new nI(u,f)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Xt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const mc=(()=>Promise.resolve(0))();function Ra(i){"undefined"==typeof Zone?mc.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class xi{constructor({enableLongStackTrace:s=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:u=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ui(!1),this.onMicrotaskEmpty=new Ui(!1),this.onStable=new Ui(!1),this.onError=new Ui(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const c=this;c._nesting=0,c._outer=c._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(c._inner=c._inner.fork(new Zone.TaskTrackingZoneSpec)),s&&Zone.longStackTraceZoneSpec&&(c._inner=c._inner.fork(Zone.longStackTraceZoneSpec)),c.shouldCoalesceEventChangeDetection=!u&&a,c.shouldCoalesceRunChangeDetection=u,c.lastRequestAnimationFrameId=-1,c.nativeRequestAnimationFrame=function fh(){let i=kt.requestAnimationFrame,s=kt.cancelAnimationFrame;if("undefined"!=typeof Zone&&i&&s){const a=i[Zone.__symbol__("OriginalDelegate")];a&&(i=a);const u=s[Zone.__symbol__("OriginalDelegate")];u&&(s=u)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:s}}().nativeRequestAnimationFrame,function sI(i){const s=()=>{!function vv(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(kt,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,Ev(i),i.isCheckStableRunning=!0,dp(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),Ev(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,u,c,f,_,E)=>{try{return wv(i),a.invokeTask(c,f,_,E)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===f.type||i.shouldCoalesceRunChangeDetection)&&s(),Iv(i)}},onInvoke:(a,u,c,f,_,E,I)=>{try{return wv(i),a.invoke(c,f,_,E,I)}finally{i.shouldCoalesceRunChangeDetection&&s(),Iv(i)}},onHasTask:(a,u,c,f)=>{a.hasTask(c,f),u===c&&("microTask"==f.change?(i._hasPendingMicrotasks=f.microTask,Ev(i),dp(i)):"macroTask"==f.change&&(i.hasPendingMacrotasks=f.macroTask))},onHandleError:(a,u,c,f)=>(a.handleError(c,f),i.runOutsideAngular(()=>i.onError.emit(f)),!1)})}(c)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!xi.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(xi.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(s,a,u){return this._inner.run(s,a,u)}runTask(s,a,u,c){const f=this._inner,_=f.scheduleEventTask("NgZoneEvent: "+c,s,iI,Sm,Sm);try{return f.runTask(_,a,u)}finally{f.cancelTask(_)}}runGuarded(s,a,u){return this._inner.runGuarded(s,a,u)}runOutsideAngular(s){return this._outer.run(s)}}const iI={};function dp(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function Ev(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function wv(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function Iv(i){i._nesting--,dp(i)}class Dv{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ui,this.onMicrotaskEmpty=new Ui,this.onStable=new Ui,this.onError=new Ui}run(s,a,u){return s.apply(a,u)}runGuarded(s,a,u){return s.apply(a,u)}runOutsideAngular(s){return s()}runTask(s,a,u,c){return s.apply(a,u)}}let ph=(()=>{class i{constructor(a){this._ngZone=a,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{xi.assertNotInAngularZone(),Ra(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Ra(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(u=>!u.updateCb||!u.updateCb(a)||(clearTimeout(u.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,u,c){let f=-1;u&&u>0&&(f=setTimeout(()=>{this._callbacks=this._callbacks.filter(_=>_.timeoutId!==f),a(this._didWork,this.getPendingTasks())},u)),this._callbacks.push({doneCb:a,timeoutId:f,updateCb:c})}whenStable(a,u,c){if(c&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,u,c),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(a,u,c){return[]}}return i.\u0275fac=function(a){return new(a||i)(Je(xi))},i.\u0275prov=Xt({token:i,factory:i.\u0275fac}),i})(),yc=(()=>{class i{constructor(){this._applications=new Map,bv.addToWindow(this)}registerApplication(a,u){this._applications.set(a,u)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,u=!0){return bv.findTestabilityInTree(this,a,u)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Xt({token:i,factory:i.\u0275fac}),i})();class Jb{addToWindow(s){}findTestabilityInTree(s,a,u){return null}}function oI(i){bv=i}let Eo,bv=new Jb;const ju=new bn("AllowMultipleToken");class aI{constructor(s,a){this.name=s,this.token=a}}function uI(i,s,a=[]){const u=`Platform: ${s}`,c=new bn(u);return(f=[])=>{let _=lI();if(!_||_.injector.get(ju,!1))if(i)i(a.concat(f).concat({provide:c,useValue:!0}));else{const E=a.concat(f).concat({provide:c,useValue:!0},{provide:Gy,useValue:"platform"});!function eC(i){if(Eo&&!Eo.destroyed&&!Eo.injector.get(ju,!1))throw new xe(400,"");Eo=i.get(Sv);const s=i.get(Vu,null);s&&s.forEach(a=>a())}(ho.create({providers:E,name:u}))}return function Tv(i){const s=lI();if(!s)throw new xe(401,"");return s}()}}function lI(){return Eo&&!Eo.destroyed?Eo:null}let Sv=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,u){const E=function hp(i,s){let a;return a="noop"===i?new Dv:("zone.js"===i?void 0:i)||new xi({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==s?void 0:s.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==s?void 0:s.ngZoneRunCoalescing)}),a}(u?u.ngZone:void 0,{ngZoneEventCoalescing:u&&u.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:u&&u.ngZoneRunCoalescing||!1}),I=[{provide:xi,useValue:E}];return E.run(()=>{const A=ho.create({providers:I,parent:this.injector,name:a.moduleType.name}),S=a.create(A),P=S.injector.get(ln,null);if(!P)throw new xe(402,"");return E.runOutsideAngular(()=>{const V=E.onError.subscribe({next:W=>{P.handleError(W)}});S.onDestroy(()=>{mi(this._modules,S),V.unsubscribe()})}),function xm(i,s,a){try{const u=a();return zg(u)?u.catch(c=>{throw s.runOutsideAngular(()=>i.handleError(c)),c}):u}catch(u){throw s.runOutsideAngular(()=>i.handleError(u)),u}}(P,E,()=>{const V=S.injector.get(ce);return V.runInitializers(),V.donePromise.then(()=>(function dm(i){st(i,"Expected localeId to be defined"),"string"==typeof i&&(XE=i.toLowerCase().replace(/_/g,"-"))}(S.injector.get(dr,lm)||lm),this._moduleDoBootstrap(S),S))})})}bootstrapModule(a,u=[]){const c=fp({},u);return function Xb(i,s,a){const u=new J_(a);return Promise.resolve(u)}(0,0,a).then(f=>this.bootstrapModuleFactory(f,c))}_moduleDoBootstrap(a){const u=a.injector.get(Rm);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(c=>u.bootstrap(c));else{if(!a.instance.ngDoBootstrap)throw new xe(403,"");a.instance.ngDoBootstrap(u)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new xe(404,"");this._modules.slice().forEach(a=>a.destroy()),this._destroyListeners.forEach(a=>a()),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(a){return new(a||i)(Je(ho))},i.\u0275prov=Xt({token:i,factory:i.\u0275fac}),i})();function fp(i,s){return Array.isArray(s)?s.reduce(fp,i):Object.assign(Object.assign({},i),s)}let Rm=(()=>{class i{constructor(a,u,c,f,_){this._zone=a,this._injector=u,this._exceptionHandler=c,this._componentFactoryResolver=f,this._initStatus=_,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const E=new O.y(A=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{A.next(this._stable),A.complete()})}),I=new O.y(A=>{let S;this._zone.runOutsideAngular(()=>{S=this._zone.onStable.subscribe(()=>{xi.assertNotInAngularZone(),Ra(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,A.next(!0))})})});const P=this._zone.onUnstable.subscribe(()=>{xi.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{A.next(!1)}))});return()=>{S.unsubscribe(),P.unsubscribe()}});this.isStable=(0,oe.T)(E,I.pipe((0,J.B)()))}bootstrap(a,u){if(!this._initStatus.done)throw new xe(405,"");let c;c=a instanceof Nu?a:this._componentFactoryResolver.resolveComponentFactory(a),this.componentTypes.push(c.componentType);const f=function Bu(i){return i.isBoundToModule}(c)?void 0:this._injector.get(ac),E=c.create(ho.NULL,[],u||c.selector,f),I=E.location.nativeElement,A=E.injector.get(ph,null),S=A&&E.injector.get(yc);return A&&S&&S.registerApplication(I,A),E.onDestroy(()=>{this.detachView(E.hostView),mi(this.components,E),S&&S.unregisterApplication(I)}),this._loadComponent(E),E}tick(){if(this._runningTick)throw new xe(101,"");try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const u=a;this._views.push(u),u.attachToAppRef(this)}detachView(a){const u=a;mi(this._views,u),u.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(Uu,[]).concat(this._bootstrapListeners).forEach(c=>c(a))}ngOnDestroy(){this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return i.\u0275fac=function(a){return new(a||i)(Je(xi),Je(ho),Je(ln),Je(cr),Je(ce))},i.\u0275prov=Xt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function mi(i,s){const a=i.indexOf(s);a>-1&&i.splice(a,1)}let Om=!0,xv=!1;function $u(){return xv=!0,Om}function gh(){if(xv)throw new Error("Cannot enable prod mode after platform setup.");Om=!1}let yh=(()=>{class i{}return i.__NG_ELEMENT_ID__=dI,i})();function dI(i){return function Hu(i,s,a){if(ys(i)&&!a){const u=yr(i.index,s);return new sh(u,u)}return 47&i.type?new sh(s[16],s):null}(pn(),we(),16==(16&i))}class Vm{constructor(){}supports(s){return wr(s)}create(s){return new Pv(s)}}const iC=(i,s)=>s;class Pv{constructor(s){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=s||iC}forEachItem(s){let a;for(a=this._itHead;null!==a;a=a._next)s(a)}forEachOperation(s){let a=this._itHead,u=this._removalsHead,c=0,f=null;for(;a||u;){const _=!u||a&&a.currentIndex<Fv(u,c,f)?a:u,E=Fv(_,c,f),I=_.currentIndex;if(_===u)c--,u=u._nextRemoved;else if(a=a._next,null==_.previousIndex)c++;else{f||(f=[]);const A=E-c,S=I-c;if(A!=S){for(let V=0;V<A;V++){const W=V<f.length?f[V]:f[V]=0,me=W+V;S<=me&&me<A&&(f[V]=W+1)}f[_.previousIndex]=S-A}}E!==I&&s(_,E,I)}}forEachPreviousItem(s){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachMovedItem(s){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}forEachIdentityChange(s){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)s(a)}diff(s){if(null==s&&(s=[]),!wr(s))throw new xe(900,"");return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let c,f,_,a=this._itHead,u=!1;if(Array.isArray(s)){this.length=s.length;for(let E=0;E<this.length;E++)f=s[E],_=this._trackByFn(E,f),null!==a&&Object.is(a.trackById,_)?(u&&(a=this._verifyReinsertion(a,f,_,E)),Object.is(a.item,f)||this._addIdentityChange(a,f)):(a=this._mismatch(a,f,_,E),u=!0),a=a._next}else c=0,function fE(i,s){if(Array.isArray(i))for(let a=0;a<i.length;a++)s(i[a]);else{const a=i[ar()]();let u;for(;!(u=a.next()).done;)s(u.value)}}(s,E=>{_=this._trackByFn(c,E),null!==a&&Object.is(a.trackById,_)?(u&&(a=this._verifyReinsertion(a,E,_,c)),Object.is(a.item,E)||this._addIdentityChange(a,E)):(a=this._mismatch(a,E,_,c),u=!0),a=a._next,c++}),this.length=c;return this._truncate(a),this.collection=s,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let s;for(s=this._previousItHead=this._itHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._additionsHead;null!==s;s=s._nextAdded)s.previousIndex=s.currentIndex;for(this._additionsHead=this._additionsTail=null,s=this._movesHead;null!==s;s=s._nextMoved)s.previousIndex=s.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(s,a,u,c){let f;return null===s?f=this._itTail:(f=s._prev,this._remove(s)),null!==(s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._reinsertAfter(s,f,c)):null!==(s=null===this._linkedRecords?null:this._linkedRecords.get(u,c))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._moveAfter(s,f,c)):s=this._addAfter(new _I(a,u),f,c),s}_verifyReinsertion(s,a,u,c){let f=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null);return null!==f?s=this._reinsertAfter(f,s._prev,c):s.currentIndex!=c&&(s.currentIndex=c,this._addToMoves(s,c)),s}_truncate(s){for(;null!==s;){const a=s._next;this._addToRemovals(this._unlink(s)),s=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(s,a,u){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(s);const c=s._prevRemoved,f=s._nextRemoved;return null===c?this._removalsHead=f:c._nextRemoved=f,null===f?this._removalsTail=c:f._prevRemoved=c,this._insertAfter(s,a,u),this._addToMoves(s,u),s}_moveAfter(s,a,u){return this._unlink(s),this._insertAfter(s,a,u),this._addToMoves(s,u),s}_addAfter(s,a,u){return this._insertAfter(s,a,u),this._additionsTail=null===this._additionsTail?this._additionsHead=s:this._additionsTail._nextAdded=s,s}_insertAfter(s,a,u){const c=null===a?this._itHead:a._next;return s._next=c,s._prev=a,null===c?this._itTail=s:c._prev=s,null===a?this._itHead=s:a._next=s,null===this._linkedRecords&&(this._linkedRecords=new kv),this._linkedRecords.put(s),s.currentIndex=u,s}_remove(s){return this._addToRemovals(this._unlink(s))}_unlink(s){null!==this._linkedRecords&&this._linkedRecords.remove(s);const a=s._prev,u=s._next;return null===a?this._itHead=u:a._next=u,null===u?this._itTail=a:u._prev=a,s}_addToMoves(s,a){return s.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=s:this._movesTail._nextMoved=s),s}_addToRemovals(s){return null===this._unlinkedRecords&&(this._unlinkedRecords=new kv),this._unlinkedRecords.put(s),s.currentIndex=null,s._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=s,s._prevRemoved=null):(s._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=s),s}_addIdentityChange(s,a){return s.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=s:this._identityChangesTail._nextIdentityChange=s,s}}class _I{constructor(s,a){this.item=s,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class sC{constructor(){this._head=null,this._tail=null}add(s){null===this._head?(this._head=this._tail=s,s._nextDup=null,s._prevDup=null):(this._tail._nextDup=s,s._prevDup=this._tail,s._nextDup=null,this._tail=s)}get(s,a){let u;for(u=this._head;null!==u;u=u._nextDup)if((null===a||a<=u.currentIndex)&&Object.is(u.trackById,s))return u;return null}remove(s){const a=s._prevDup,u=s._nextDup;return null===a?this._head=u:a._nextDup=u,null===u?this._tail=a:u._prevDup=a,null===this._head}}class kv{constructor(){this.map=new Map}put(s){const a=s.trackById;let u=this.map.get(a);u||(u=new sC,this.map.set(a,u)),u.add(s)}get(s,a){const c=this.map.get(s);return c?c.get(s,a):null}remove(s){const a=s.trackById;return this.map.get(a).remove(s)&&this.map.delete(a),s}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Fv(i,s,a){const u=i.previousIndex;if(null===u)return u;let c=0;return a&&u<a.length&&(c=a[u]),u+s+c}class Um{constructor(){}supports(s){return s instanceof Map||Af(s)}create(){return new oC}}class oC{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(s){let a;for(a=this._mapHead;null!==a;a=a._next)s(a)}forEachPreviousItem(s){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)s(a)}forEachChangedItem(s){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}diff(s){if(s){if(!(s instanceof Map||Af(s)))throw new xe(900,"")}else s=new Map;return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(s,(u,c)=>{if(a&&a.key===c)this._maybeAddToChanges(a,u),this._appendAfter=a,a=a._next;else{const f=this._getOrCreateRecordForKey(c,u);a=this._insertBeforeOrAppend(a,f)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let u=a;null!==u;u=u._nextRemoved)u===this._mapHead&&(this._mapHead=null),this._records.delete(u.key),u._nextRemoved=u._next,u.previousValue=u.currentValue,u.currentValue=null,u._prev=null,u._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(s,a){if(s){const u=s._prev;return a._next=s,a._prev=u,s._prev=a,u&&(u._next=a),s===this._mapHead&&(this._mapHead=a),this._appendAfter=s,s}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(s,a){if(this._records.has(s)){const c=this._records.get(s);this._maybeAddToChanges(c,a);const f=c._prev,_=c._next;return f&&(f._next=_),_&&(_._prev=f),c._next=null,c._prev=null,c}const u=new vI(s);return this._records.set(s,u),u.currentValue=a,this._addToAdditions(u),u}_reset(){if(this.isDirty){let s;for(this._previousMapHead=this._mapHead,s=this._previousMapHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._changesHead;null!==s;s=s._nextChanged)s.previousValue=s.currentValue;for(s=this._additionsHead;null!=s;s=s._nextAdded)s.previousValue=s.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(s,a){Object.is(a,s.currentValue)||(s.previousValue=s.currentValue,s.currentValue=a,this._addToChanges(s))}_addToAdditions(s){null===this._additionsHead?this._additionsHead=this._additionsTail=s:(this._additionsTail._nextAdded=s,this._additionsTail=s)}_addToChanges(s){null===this._changesHead?this._changesHead=this._changesTail=s:(this._changesTail._nextChanged=s,this._changesTail=s)}_forEach(s,a){s instanceof Map?s.forEach(a):Object.keys(s).forEach(u=>a(s[u],u))}}class vI{constructor(s){this.key=s,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function EI(){return new Bm([new Vm])}let Bm=(()=>{class i{constructor(a){this.factories=a}static create(a,u){if(null!=u){const c=u.factories.slice();a=a.concat(c)}return new i(a)}static extend(a){return{provide:i,useFactory:u=>i.create(a,u||EI()),deps:[[i,new Ci,new Sr]]}}find(a){const u=this.factories.find(c=>c.supports(a));if(null!=u)return u;throw new xe(901,"")}}return i.\u0275prov=Xt({token:i,providedIn:"root",factory:EI}),i})();function Ec(){return new Gu([new Um])}let Gu=(()=>{class i{constructor(a){this.factories=a}static create(a,u){if(u){const c=u.factories.slice();a=a.concat(c)}return new i(a)}static extend(a){return{provide:i,useFactory:u=>i.create(a,u||Ec()),deps:[[i,new Ci,new Sr]]}}find(a){const u=this.factories.find(f=>f.supports(a));if(u)return u;throw new xe(901,"")}}return i.\u0275prov=Xt({token:i,providedIn:"root",factory:Ec}),i})();const cC=uI(null,"core",[{provide:Jw,useValue:"unknown"},{provide:Sv,deps:[ho]},{provide:yc,deps:[]},{provide:Mm,deps:[]}]);let Vv=(()=>{class i{constructor(a){}}return i.\u0275fac=function(a){return new(a||i)(Je(Rm))},i.\u0275mod=Y({type:i}),i.\u0275inj=Kt({}),i})()},3942:(it,Ce,k)=>{k.d(Ce,{Z:()=>xe});var g=k(2090),Z=k(4859),O=k(9681),oe=k(1877);class J{constructor(he,Ee){this._delegate=he,this.firebase=Ee,(0,O._addComponent)(he,new Z.wA("app-compat",()=>this,"PUBLIC")),this.container=he.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(he){this._delegate.automaticDataCollectionEnabled=he}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(he=>{this._delegate.checkDestroyed(),he()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,O.deleteApp)(this._delegate)))}_getService(he,Ee=O._DEFAULT_ENTRY_NAME){var Ye;this._delegate.checkDestroyed();const Ge=this._delegate.container.getProvider(he);return!Ge.isInitialized()&&"EXPLICIT"===(null===(Ye=Ge.getComponent())||void 0===Ye?void 0:Ye.instantiationMode)&&Ge.initialize(),Ge.getImmediate({identifier:Ee})}_removeServiceInstance(he,Ee=O._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(he).clearInstance(Ee)}_addComponent(he){(0,O._addComponent)(this._delegate,he)}_addOrOverwriteComponent(he){(0,O._addOrOverwriteComponent)(this._delegate,he)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ie=new g.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),B=function ue(){const Pe=function de(Pe){const he={},Ee={__esModule:!0,initializeApp:function De(Ue,ee={}){const q=O.initializeApp(Ue,ee);if((0,g.r3)(he,q.name))return he[q.name];const te=new Pe(q,Ee);return he[q.name]=te,te},app:Ge,registerVersion:O.registerVersion,setLogLevel:O.setLogLevel,onLog:O.onLog,apps:null,SDK_VERSION:O.SDK_VERSION,INTERNAL:{registerComponent:function ve(Ue){const ee=Ue.name,q=ee.replace("-compat","");if(O._registerComponent(Ue)&&"PUBLIC"===Ue.type){const te=(ge=Ge())=>{if("function"!=typeof ge[q])throw ie.create("invalid-app-argument",{appName:ee});return ge[q]()};void 0!==Ue.serviceProps&&(0,g.ZB)(te,Ue.serviceProps),Ee[q]=te,Pe.prototype[q]=function(...ge){return this._getService.bind(this,ee).apply(this,Ue.multipleInstances?ge:[])}}return"PUBLIC"===Ue.type?Ee[q]:null},removeApp:function Ye(Ue){delete he[Ue]},useAsService:function je(Ue,ee){return"serverAuth"===ee?null:ee},modularAPIs:O}};function Ge(Ue){if(!(0,g.r3)(he,Ue=Ue||O._DEFAULT_ENTRY_NAME))throw ie.create("no-app",{appName:Ue});return he[Ue]}return Ee.default=Ee,Object.defineProperty(Ee,"apps",{get:function ye(){return Object.keys(he).map(Ue=>he[Ue])}}),Ge.App=Pe,Ee}(J);return Pe.INTERNAL=Object.assign(Object.assign({},Pe.INTERNAL),{createFirebaseNamespace:ue,extendNamespace:function he(Ee){(0,g.ZB)(Pe,Ee)},createSubscribe:g.ne,ErrorFactory:g.LL,deepExtend:g.ZB}),Pe}(),j=new oe.Yd("@firebase/app-compat");if((0,g.jU)()&&void 0!==self.firebase){j.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Pe=self.firebase.SDK_VERSION;Pe&&Pe.indexOf("LITE")>=0&&j.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const xe=B;!function Te(Pe){(0,O.registerVersion)("@firebase/app-compat","0.1.21",Pe)}()},9681:(it,Ce,k)=>{k.r(Ce),k.d(Ce,{FirebaseError:()=>oe.ZR,SDK_VERSION:()=>Dr,_DEFAULT_ENTRY_NAME:()=>An,_addComponent:()=>un,_addOrOverwriteComponent:()=>_i,_apps:()=>ft,_clearComponents:()=>Lt,_components:()=>an,_getProvider:()=>$i,_registerComponent:()=>Xt,_removeServiceInstance:()=>Kt,deleteApp:()=>Gi,getApp:()=>br,getApps:()=>Hi,initializeApp:()=>Ri,onLog:()=>Zn,registerVersion:()=>Vr,setLogLevel:()=>Bn});var g=k(5861),Z=k(4859),O=k(1877),oe=k(2090);class J{constructor(be){this.container=be}getPlatformInfoString(){return this.container.getProviders().map(We=>{if(function pe(qe){const be=qe.getComponent();return"VERSION"===(null==be?void 0:be.type)}(We)){const ct=We.getImmediate();return`${ct.library}/${ct.version}`}return null}).filter(We=>We).join(" ")}}const ie="@firebase/app",ue=new O.Yd("@firebase/app"),An="[DEFAULT]",st={[ie]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},ft=new Map,an=new Map;function un(qe,be){try{qe.container.addComponent(be)}catch(We){ue.debug(`Component ${be.name} failed to register with FirebaseApp ${qe.name}`,We)}}function _i(qe,be){qe.container.addOrOverwriteComponent(be)}function Xt(qe){const be=qe.name;if(an.has(be))return ue.debug(`There were multiple attempts to register component ${be}.`),!1;an.set(be,qe);for(const We of ft.values())un(We,qe);return!0}function $i(qe,be){const We=qe.container.getProvider("heartbeat").getImmediate({optional:!0});return We&&We.triggerHeartbeat(),qe.container.getProvider(be)}function Kt(qe,be,We=An){$i(qe,be).clearInstance(We)}function Lt(){an.clear()}const si=new oe.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class hs{constructor(be,We,ct){this._isDeleted=!1,this._options=Object.assign({},be),this._config=Object.assign({},We),this._name=We.name,this._automaticDataCollectionEnabled=We.automaticDataCollectionEnabled,this._container=ct,this.container.addComponent(new Z.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(be){this.checkDestroyed(),this._automaticDataCollectionEnabled=be}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(be){this._isDeleted=be}checkDestroyed(){if(this.isDeleted)throw si.create("app-deleted",{appName:this._name})}}const Dr="9.6.10";function Ri(qe,be={}){"object"!=typeof be&&(be={name:be});const We=Object.assign({name:An,automaticDataCollectionEnabled:!1},be),ct=We.name;if("string"!=typeof ct||!ct)throw si.create("bad-app-name",{appName:String(ct)});const Pt=ft.get(ct);if(Pt){if((0,oe.vZ)(qe,Pt.options)&&(0,oe.vZ)(We,Pt.config))return Pt;throw si.create("duplicate-app",{appName:ct})}const xt=new Z.H0(ct);for(const L of an.values())xt.addComponent(L);const U=new hs(qe,We,xt);return ft.set(ct,U),U}function br(qe=An){const be=ft.get(qe);if(!be)throw si.create("no-app",{appName:qe});return be}function Hi(){return Array.from(ft.values())}function Gi(qe){return ut.apply(this,arguments)}function ut(){return(ut=(0,g.Z)(function*(qe){const be=qe.name;ft.has(be)&&(ft.delete(be),yield Promise.all(qe.container.getProviders().map(We=>We.delete())),qe.isDeleted=!0)})).apply(this,arguments)}function Vr(qe,be,We){var ct;let Pt=null!==(ct=st[qe])&&void 0!==ct?ct:qe;We&&(Pt+=`-${We}`);const xt=Pt.match(/\s|\//),U=be.match(/\s|\//);if(xt||U){const L=[`Unable to register library "${Pt}" with version "${be}":`];return xt&&L.push(`library name "${Pt}" contains illegal characters (whitespace or "/")`),xt&&U&&L.push("and"),U&&L.push(`version name "${be}" contains illegal characters (whitespace or "/")`),void ue.warn(L.join(" "))}Xt(new Z.wA(`${Pt}-version`,()=>({library:Pt,version:be}),"VERSION"))}function Zn(qe,be){if(null!==qe&&"function"!=typeof qe)throw si.create("invalid-log-argument");(0,O.Am)(qe,be)}function Bn(qe){(0,O.Ub)(qe)}const fn="firebase-heartbeat-store";let Yn=null;function fs(){return Yn||(Yn=(0,oe.X3)("firebase-heartbeat-database",1,(qe,be)=>{0===be&&qe.createObjectStore(fn)}).catch(qe=>{throw si.create("storage-open",{originalErrorMessage:qe.message})})),Yn}function Vt(){return(Vt=(0,g.Z)(function*(qe){try{return(yield fs()).transaction(fn).objectStore(fn).get(nr(qe))}catch(be){throw si.create("storage-get",{originalErrorMessage:be.message})}})).apply(this,arguments)}function nt(qe,be){return _t.apply(this,arguments)}function _t(){return(_t=(0,g.Z)(function*(qe,be){try{const ct=(yield fs()).transaction(fn,"readwrite");return yield ct.objectStore(fn).put(be,nr(qe)),ct.complete}catch(We){throw si.create("storage-set",{originalErrorMessage:We.message})}})).apply(this,arguments)}function nr(qe){return`${qe.name}!${qe.options.appId}`}class Hs{constructor(be){this.container=be,this._heartbeatsCache=null;const We=this.container.getProvider("app").getImmediate();this._storage=new lt(We),this._heartbeatsCachePromise=this._storage.read().then(ct=>(this._heartbeatsCache=ct,ct))}triggerHeartbeat(){var be=this;return(0,g.Z)(function*(){const ct=be.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Pt=hr();if(null===be._heartbeatsCache&&(be._heartbeatsCache=yield be._heartbeatsCachePromise),be._heartbeatsCache.lastSentHeartbeatDate!==Pt&&!be._heartbeatsCache.heartbeats.some(xt=>xt.date===Pt))return be._heartbeatsCache.heartbeats.push({date:Pt,agent:ct}),be._heartbeatsCache.heartbeats=be._heartbeatsCache.heartbeats.filter(xt=>{const U=new Date(xt.date).valueOf();return Date.now()-U<=2592e6}),be._storage.overwrite(be._heartbeatsCache)})()}getHeartbeatsHeader(){var be=this;return(0,g.Z)(function*(){if(null===be._heartbeatsCache&&(yield be._heartbeatsCachePromise),null===be._heartbeatsCache||0===be._heartbeatsCache.heartbeats.length)return"";const We=hr(),{heartbeatsToSend:ct,unsentEntries:Pt}=function rr(qe,be=1024){const We=[];let ct=qe.slice();for(const Pt of qe){const xt=We.find(U=>U.agent===Pt.agent);if(xt){if(xt.dates.push(Pt.date),fr(We)>be){xt.dates.pop();break}}else if(We.push({agent:Pt.agent,dates:[Pt.date]}),fr(We)>be){We.pop();break}ct=ct.slice(1)}return{heartbeatsToSend:We,unsentEntries:ct}}(be._heartbeatsCache.heartbeats),xt=(0,oe.L)(JSON.stringify({version:2,heartbeats:ct}));return be._heartbeatsCache.lastSentHeartbeatDate=We,Pt.length>0?(be._heartbeatsCache.heartbeats=Pt,yield be._storage.overwrite(be._heartbeatsCache)):(be._heartbeatsCache.heartbeats=[],be._storage.overwrite(be._heartbeatsCache)),xt})()}}function hr(){return(new Date).toISOString().substring(0,10)}class lt{constructor(be){this.app=be,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,g.Z)(function*(){return!!(0,oe.hl)()&&(0,oe.eu)().then(()=>!0).catch(()=>!1)})()}read(){var be=this;return(0,g.Z)(function*(){return(yield be._canUseIndexedDBPromise)&&(yield function Wo(qe){return Vt.apply(this,arguments)}(be.app))||{heartbeats:[]}})()}overwrite(be){var We=this;return(0,g.Z)(function*(){var ct;if(yield We._canUseIndexedDBPromise){const xt=yield We.read();return nt(We.app,{lastSentHeartbeatDate:null!==(ct=be.lastSentHeartbeatDate)&&void 0!==ct?ct:xt.lastSentHeartbeatDate,heartbeats:be.heartbeats})}})()}add(be){var We=this;return(0,g.Z)(function*(){var ct;if(yield We._canUseIndexedDBPromise){const xt=yield We.read();return nt(We.app,{lastSentHeartbeatDate:null!==(ct=be.lastSentHeartbeatDate)&&void 0!==ct?ct:xt.lastSentHeartbeatDate,heartbeats:[...xt.heartbeats,...be.heartbeats]})}})()}}function fr(qe){return(0,oe.L)(JSON.stringify({version:2,heartbeats:qe})).length}!function Nt(qe){Xt(new Z.wA("platform-logger",be=>new J(be),"PRIVATE")),Xt(new Z.wA("heartbeat",be=>new Hs(be),"PRIVATE")),Vr(ie,"0.7.20",qe),Vr(ie,"0.7.20","esm2017"),Vr("fire-js","")}("")},4859:(it,Ce,k)=>{k.d(Ce,{wA:()=>O,H0:()=>de});var g=k(5861),Z=k(2090);class O{constructor(B,j,Q){this.name=B,this.instanceFactory=j,this.type=Q,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(B){return this.instantiationMode=B,this}setMultipleInstances(B){return this.multipleInstances=B,this}setServiceProps(B){return this.serviceProps=B,this}setInstanceCreatedCallback(B){return this.onInstanceCreated=B,this}}const oe="[DEFAULT]";class J{constructor(B,j){this.name=B,this.container=j,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(B){const j=this.normalizeInstanceIdentifier(B);if(!this.instancesDeferred.has(j)){const Q=new Z.BH;if(this.instancesDeferred.set(j,Q),this.isInitialized(j)||this.shouldAutoInitialize())try{const He=this.getOrInitializeService({instanceIdentifier:j});He&&Q.resolve(He)}catch(He){}}return this.instancesDeferred.get(j).promise}getImmediate(B){var j;const Q=this.normalizeInstanceIdentifier(null==B?void 0:B.identifier),He=null!==(j=null==B?void 0:B.optional)&&void 0!==j&&j;if(!this.isInitialized(Q)&&!this.shouldAutoInitialize()){if(He)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Q})}catch(Te){if(He)return null;throw Te}}getComponent(){return this.component}setComponent(B){if(B.name!==this.name)throw Error(`Mismatching Component ${B.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=B,this.shouldAutoInitialize()){if(function ie(ue){return"EAGER"===ue.instantiationMode}(B))try{this.getOrInitializeService({instanceIdentifier:oe})}catch(j){}for(const[j,Q]of this.instancesDeferred.entries()){const He=this.normalizeInstanceIdentifier(j);try{const Te=this.getOrInitializeService({instanceIdentifier:He});Q.resolve(Te)}catch(Te){}}}}clearInstance(B=oe){this.instancesDeferred.delete(B),this.instancesOptions.delete(B),this.instances.delete(B)}delete(){var B=this;return(0,g.Z)(function*(){const j=Array.from(B.instances.values());yield Promise.all([...j.filter(Q=>"INTERNAL"in Q).map(Q=>Q.INTERNAL.delete()),...j.filter(Q=>"_delete"in Q).map(Q=>Q._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(B=oe){return this.instances.has(B)}getOptions(B=oe){return this.instancesOptions.get(B)||{}}initialize(B={}){const{options:j={}}=B,Q=this.normalizeInstanceIdentifier(B.instanceIdentifier);if(this.isInitialized(Q))throw Error(`${this.name}(${Q}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const He=this.getOrInitializeService({instanceIdentifier:Q,options:j});for(const[Te,xe]of this.instancesDeferred.entries())Q===this.normalizeInstanceIdentifier(Te)&&xe.resolve(He);return He}onInit(B,j){var Q;const He=this.normalizeInstanceIdentifier(j),Te=null!==(Q=this.onInitCallbacks.get(He))&&void 0!==Q?Q:new Set;Te.add(B),this.onInitCallbacks.set(He,Te);const xe=this.instances.get(He);return xe&&B(xe,He),()=>{Te.delete(B)}}invokeOnInitCallbacks(B,j){const Q=this.onInitCallbacks.get(j);if(Q)for(const He of Q)try{He(B,j)}catch(Te){}}getOrInitializeService({instanceIdentifier:B,options:j={}}){let Q=this.instances.get(B);if(!Q&&this.component&&(Q=this.component.instanceFactory(this.container,{instanceIdentifier:(ue=B,ue===oe?void 0:ue),options:j}),this.instances.set(B,Q),this.instancesOptions.set(B,j),this.invokeOnInitCallbacks(Q,B),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,B,Q)}catch(He){}var ue;return Q||null}normalizeInstanceIdentifier(B=oe){return this.component?this.component.multipleInstances?B:oe:B}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class de{constructor(B){this.name=B,this.providers=new Map}addComponent(B){const j=this.getProvider(B.name);if(j.isComponentSet())throw new Error(`Component ${B.name} has already been registered with ${this.name}`);j.setComponent(B)}addOrOverwriteComponent(B){this.getProvider(B.name).isComponentSet()&&this.providers.delete(B.name),this.addComponent(B)}getProvider(B){if(this.providers.has(B))return this.providers.get(B);const j=new J(B,this);return this.providers.set(B,j),j}getProviders(){return Array.from(this.providers.values())}}},1877:(it,Ce,k)=>{k.d(Ce,{in:()=>Z,Yd:()=>ie,Ub:()=>de,Am:()=>ue});const g=[];var Z=(()=>{return(B=Z||(Z={}))[B.DEBUG=0]="DEBUG",B[B.VERBOSE=1]="VERBOSE",B[B.INFO=2]="INFO",B[B.WARN=3]="WARN",B[B.ERROR=4]="ERROR",B[B.SILENT=5]="SILENT",Z;var B})();const O={debug:Z.DEBUG,verbose:Z.VERBOSE,info:Z.INFO,warn:Z.WARN,error:Z.ERROR,silent:Z.SILENT},oe=Z.INFO,J={[Z.DEBUG]:"log",[Z.VERBOSE]:"log",[Z.INFO]:"info",[Z.WARN]:"warn",[Z.ERROR]:"error"},pe=(B,j,...Q)=>{if(j<B.logLevel)return;const He=(new Date).toISOString(),Te=J[j];if(!Te)throw new Error(`Attempted to log a message with an invalid logType (value: ${j})`);console[Te](`[${He}]  ${B.name}:`,...Q)};class ie{constructor(j){this.name=j,this._logLevel=oe,this._logHandler=pe,this._userLogHandler=null,g.push(this)}get logLevel(){return this._logLevel}set logLevel(j){if(!(j in Z))throw new TypeError(`Invalid value "${j}" assigned to \`logLevel\``);this._logLevel=j}setLogLevel(j){this._logLevel="string"==typeof j?O[j]:j}get logHandler(){return this._logHandler}set logHandler(j){if("function"!=typeof j)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=j}get userLogHandler(){return this._userLogHandler}set userLogHandler(j){this._userLogHandler=j}debug(...j){this._userLogHandler&&this._userLogHandler(this,Z.DEBUG,...j),this._logHandler(this,Z.DEBUG,...j)}log(...j){this._userLogHandler&&this._userLogHandler(this,Z.VERBOSE,...j),this._logHandler(this,Z.VERBOSE,...j)}info(...j){this._userLogHandler&&this._userLogHandler(this,Z.INFO,...j),this._logHandler(this,Z.INFO,...j)}warn(...j){this._userLogHandler&&this._userLogHandler(this,Z.WARN,...j),this._logHandler(this,Z.WARN,...j)}error(...j){this._userLogHandler&&this._userLogHandler(this,Z.ERROR,...j),this._logHandler(this,Z.ERROR,...j)}}function de(B){g.forEach(j=>{j.setLogLevel(B)})}function ue(B,j){for(const Q of g){let He=null;j&&j.level&&(He=O[j.level]),Q.userLogHandler=null===B?null:(Te,xe,...Pe)=>{const he=Pe.map(Ee=>{if(null==Ee)return null;if("string"==typeof Ee)return Ee;if("number"==typeof Ee||"boolean"==typeof Ee)return Ee.toString();if(Ee instanceof Error)return Ee.message;try{return JSON.stringify(Ee)}catch(Ye){return null}}).filter(Ee=>Ee).join(" ");xe>=(null!=He?He:Te.logLevel)&&B({level:Z[xe].toLowerCase(),message:he,args:Pe,type:Te.name})}}}},5861:(it,Ce,k)=>{function g(O,oe,J,pe,ie,de,ue){try{var B=O[de](ue),j=B.value}catch(Q){return void J(Q)}B.done?oe(j):Promise.resolve(j).then(pe,ie)}function Z(O){return function(){var oe=this,J=arguments;return new Promise(function(pe,ie){var de=O.apply(oe,J);function ue(j){g(de,pe,ie,ue,B,"next",j)}function B(j){g(de,pe,ie,ue,B,"throw",j)}ue(void 0)})}}k.d(Ce,{Z:()=>Z})}},it=>{it(it.s=9554)}]);